var MP=Object.defineProperty;var FP=(t,e,n)=>e in t?MP(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Mt=(t,e,n)=>FP(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function UP(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var jE={exports:{}},dh={},OE={exports:{}},me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dc=Symbol.for("react.element"),BP=Symbol.for("react.portal"),zP=Symbol.for("react.fragment"),$P=Symbol.for("react.strict_mode"),qP=Symbol.for("react.profiler"),KP=Symbol.for("react.provider"),GP=Symbol.for("react.context"),WP=Symbol.for("react.forward_ref"),HP=Symbol.for("react.suspense"),QP=Symbol.for("react.memo"),YP=Symbol.for("react.lazy"),a_=Symbol.iterator;function XP(t){return t===null||typeof t!="object"?null:(t=a_&&t[a_]||t["@@iterator"],typeof t=="function"?t:null)}var LE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ME=Object.assign,FE={};function ea(t,e,n){this.props=t,this.context=e,this.refs=FE,this.updater=n||LE}ea.prototype.isReactComponent={};ea.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ea.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function UE(){}UE.prototype=ea.prototype;function Ng(t,e,n){this.props=t,this.context=e,this.refs=FE,this.updater=n||LE}var Dg=Ng.prototype=new UE;Dg.constructor=Ng;ME(Dg,ea.prototype);Dg.isPureReactComponent=!0;var l_=Array.isArray,BE=Object.prototype.hasOwnProperty,Vg={current:null},zE={key:!0,ref:!0,__self:!0,__source:!0};function $E(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)BE.call(e,r)&&!zE.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:dc,type:t,key:s,ref:o,props:i,_owner:Vg.current}}function JP(t,e){return{$$typeof:dc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function jg(t){return typeof t=="object"&&t!==null&&t.$$typeof===dc}function ZP(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var c_=/\/+/g;function jf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?ZP(""+t.key):e.toString(36)}function Du(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case dc:case BP:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+jf(o,0):r,l_(i)?(n="",t!=null&&(n=t.replace(c_,"$&/")+"/"),Du(i,e,n,"",function(u){return u})):i!=null&&(jg(i)&&(i=JP(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(c_,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",l_(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+jf(s,a);o+=Du(s,e,n,l,i)}else if(l=XP(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+jf(s,a++),o+=Du(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Jc(t,e,n){if(t==null)return t;var r=[],i=0;return Du(t,r,"","",function(s){return e.call(n,s,i++)}),r}function eR(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Kt={current:null},Vu={transition:null},tR={ReactCurrentDispatcher:Kt,ReactCurrentBatchConfig:Vu,ReactCurrentOwner:Vg};function qE(){throw Error("act(...) is not supported in production builds of React.")}me.Children={map:Jc,forEach:function(t,e,n){Jc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Jc(t,function(){e++}),e},toArray:function(t){return Jc(t,function(e){return e})||[]},only:function(t){if(!jg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};me.Component=ea;me.Fragment=zP;me.Profiler=qP;me.PureComponent=Ng;me.StrictMode=$P;me.Suspense=HP;me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tR;me.act=qE;me.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=ME({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Vg.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)BE.call(e,l)&&!zE.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:dc,type:t.type,key:i,ref:s,props:r,_owner:o}};me.createContext=function(t){return t={$$typeof:GP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:KP,_context:t},t.Consumer=t};me.createElement=$E;me.createFactory=function(t){var e=$E.bind(null,t);return e.type=t,e};me.createRef=function(){return{current:null}};me.forwardRef=function(t){return{$$typeof:WP,render:t}};me.isValidElement=jg;me.lazy=function(t){return{$$typeof:YP,_payload:{_status:-1,_result:t},_init:eR}};me.memo=function(t,e){return{$$typeof:QP,type:t,compare:e===void 0?null:e}};me.startTransition=function(t){var e=Vu.transition;Vu.transition={};try{t()}finally{Vu.transition=e}};me.unstable_act=qE;me.useCallback=function(t,e){return Kt.current.useCallback(t,e)};me.useContext=function(t){return Kt.current.useContext(t)};me.useDebugValue=function(){};me.useDeferredValue=function(t){return Kt.current.useDeferredValue(t)};me.useEffect=function(t,e){return Kt.current.useEffect(t,e)};me.useId=function(){return Kt.current.useId()};me.useImperativeHandle=function(t,e,n){return Kt.current.useImperativeHandle(t,e,n)};me.useInsertionEffect=function(t,e){return Kt.current.useInsertionEffect(t,e)};me.useLayoutEffect=function(t,e){return Kt.current.useLayoutEffect(t,e)};me.useMemo=function(t,e){return Kt.current.useMemo(t,e)};me.useReducer=function(t,e,n){return Kt.current.useReducer(t,e,n)};me.useRef=function(t){return Kt.current.useRef(t)};me.useState=function(t){return Kt.current.useState(t)};me.useSyncExternalStore=function(t,e,n){return Kt.current.useSyncExternalStore(t,e,n)};me.useTransition=function(){return Kt.current.useTransition()};me.version="18.3.1";OE.exports=me;var R=OE.exports;const nR=UP(R);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rR=R,iR=Symbol.for("react.element"),sR=Symbol.for("react.fragment"),oR=Object.prototype.hasOwnProperty,aR=rR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,lR={key:!0,ref:!0,__self:!0,__source:!0};function KE(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)oR.call(e,r)&&!lR.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:iR,type:t,key:s,ref:o,props:i,_owner:aR.current}}dh.Fragment=sR;dh.jsx=KE;dh.jsxs=KE;jE.exports=dh;var d=jE.exports,GE={exports:{}},pn={},WE={exports:{}},HE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,j){var K=B.length;B.push(j);e:for(;0<K;){var te=K-1>>>1,$=B[te];if(0<i($,j))B[te]=j,B[K]=$,K=te;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var j=B[0],K=B.pop();if(K!==j){B[0]=K;e:for(var te=0,$=B.length,H=$>>>1;te<H;){var W=2*(te+1)-1,ee=B[W],Ee=W+1,Ce=B[Ee];if(0>i(ee,K))Ee<$&&0>i(Ce,ee)?(B[te]=Ce,B[Ee]=K,te=Ee):(B[te]=ee,B[W]=K,te=W);else if(Ee<$&&0>i(Ce,K))B[te]=Ce,B[Ee]=K,te=Ee;else break e}}return j}function i(B,j){var K=B.sortIndex-j.sortIndex;return K!==0?K:B.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,f=null,p=3,v=!1,b=!1,E=!1,A=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(B){for(var j=n(u);j!==null;){if(j.callback===null)r(u);else if(j.startTime<=B)r(u),j.sortIndex=j.expirationTime,e(l,j);else break;j=n(u)}}function P(B){if(E=!1,w(B),!b)if(n(l)!==null)b=!0,se(V);else{var j=n(u);j!==null&&X(P,j.startTime-B)}}function V(B,j){b=!1,E&&(E=!1,_(x),x=-1),v=!0;var K=p;try{for(w(j),f=n(l);f!==null&&(!(f.expirationTime>j)||B&&!D());){var te=f.callback;if(typeof te=="function"){f.callback=null,p=f.priorityLevel;var $=te(f.expirationTime<=j);j=t.unstable_now(),typeof $=="function"?f.callback=$:f===n(l)&&r(l),w(j)}else r(l);f=n(l)}if(f!==null)var H=!0;else{var W=n(u);W!==null&&X(P,W.startTime-j),H=!1}return H}finally{f=null,p=K,v=!1}}var O=!1,I=null,x=-1,k=5,C=-1;function D(){return!(t.unstable_now()-C<k)}function N(){if(I!==null){var B=t.unstable_now();C=B;var j=!0;try{j=I(!0,B)}finally{j?T():(O=!1,I=null)}}else O=!1}var T;if(typeof y=="function")T=function(){y(N)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,q=F.port2;F.port1.onmessage=N,T=function(){q.postMessage(null)}}else T=function(){A(N,0)};function se(B){I=B,O||(O=!0,T())}function X(B,j){x=A(function(){B(t.unstable_now())},j)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){b||v||(b=!0,se(V))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(B){switch(p){case 1:case 2:case 3:var j=3;break;default:j=p}var K=p;p=j;try{return B()}finally{p=K}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,j){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var K=p;p=B;try{return j()}finally{p=K}},t.unstable_scheduleCallback=function(B,j,K){var te=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?te+K:te):K=te,B){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=K+$,B={id:h++,callback:j,priorityLevel:B,startTime:K,expirationTime:$,sortIndex:-1},K>te?(B.sortIndex=K,e(u,B),n(l)===null&&B===n(u)&&(E?(_(x),x=-1):E=!0,X(P,K-te))):(B.sortIndex=$,e(l,B),b||v||(b=!0,se(V))),B},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(B){var j=p;return function(){var K=p;p=j;try{return B.apply(this,arguments)}finally{p=K}}}})(HE);WE.exports=HE;var cR=WE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uR=R,dn=cR;function Q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var QE=new Set,Pl={};function ks(t,e){ko(t,e),ko(t+"Capture",e)}function ko(t,e){for(Pl[t]=e,t=0;t<e.length;t++)QE.add(e[t])}var wr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Up=Object.prototype.hasOwnProperty,dR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,u_={},d_={};function hR(t){return Up.call(d_,t)?!0:Up.call(u_,t)?!1:dR.test(t)?d_[t]=!0:(u_[t]=!0,!1)}function fR(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function pR(t,e,n,r){if(e===null||typeof e>"u"||fR(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Gt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var wt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){wt[t]=new Gt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];wt[e]=new Gt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){wt[t]=new Gt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){wt[t]=new Gt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){wt[t]=new Gt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){wt[t]=new Gt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){wt[t]=new Gt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){wt[t]=new Gt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){wt[t]=new Gt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Og=/[\-:]([a-z])/g;function Lg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Og,Lg);wt[e]=new Gt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Og,Lg);wt[e]=new Gt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Og,Lg);wt[e]=new Gt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){wt[t]=new Gt(t,1,!1,t.toLowerCase(),null,!1,!1)});wt.xlinkHref=new Gt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){wt[t]=new Gt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Mg(t,e,n,r){var i=wt.hasOwnProperty(e)?wt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(pR(e,n,i,r)&&(n=null),r||i===null?hR(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var kr=uR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Zc=Symbol.for("react.element"),Js=Symbol.for("react.portal"),Zs=Symbol.for("react.fragment"),Fg=Symbol.for("react.strict_mode"),Bp=Symbol.for("react.profiler"),YE=Symbol.for("react.provider"),XE=Symbol.for("react.context"),Ug=Symbol.for("react.forward_ref"),zp=Symbol.for("react.suspense"),$p=Symbol.for("react.suspense_list"),Bg=Symbol.for("react.memo"),$r=Symbol.for("react.lazy"),JE=Symbol.for("react.offscreen"),h_=Symbol.iterator;function Ca(t){return t===null||typeof t!="object"?null:(t=h_&&t[h_]||t["@@iterator"],typeof t=="function"?t:null)}var Ge=Object.assign,Of;function Ha(t){if(Of===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Of=e&&e[1]||""}return`
`+Of+t}var Lf=!1;function Mf(t,e){if(!t||Lf)return"";Lf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Lf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ha(t):""}function mR(t){switch(t.tag){case 5:return Ha(t.type);case 16:return Ha("Lazy");case 13:return Ha("Suspense");case 19:return Ha("SuspenseList");case 0:case 2:case 15:return t=Mf(t.type,!1),t;case 11:return t=Mf(t.type.render,!1),t;case 1:return t=Mf(t.type,!0),t;default:return""}}function qp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Zs:return"Fragment";case Js:return"Portal";case Bp:return"Profiler";case Fg:return"StrictMode";case zp:return"Suspense";case $p:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case XE:return(t.displayName||"Context")+".Consumer";case YE:return(t._context.displayName||"Context")+".Provider";case Ug:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Bg:return e=t.displayName||null,e!==null?e:qp(t.type)||"Memo";case $r:e=t._payload,t=t._init;try{return qp(t(e))}catch{}}return null}function gR(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return qp(e);case 8:return e===Fg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function mi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ZE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function yR(t){var e=ZE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function eu(t){t._valueTracker||(t._valueTracker=yR(t))}function eT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=ZE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ld(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Kp(t,e){var n=e.checked;return Ge({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function f_(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=mi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function tT(t,e){e=e.checked,e!=null&&Mg(t,"checked",e,!1)}function Gp(t,e){tT(t,e);var n=mi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Wp(t,e.type,n):e.hasOwnProperty("defaultValue")&&Wp(t,e.type,mi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function p_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Wp(t,e,n){(e!=="number"||ld(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Qa=Array.isArray;function yo(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+mi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Hp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Q(91));return Ge({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function m_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Q(92));if(Qa(n)){if(1<n.length)throw Error(Q(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:mi(n)}}function nT(t,e){var n=mi(e.value),r=mi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function g_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function rT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Qp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?rT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var tu,iT=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(tu=tu||document.createElement("div"),tu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=tu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Rl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ll={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vR=["Webkit","ms","Moz","O"];Object.keys(ll).forEach(function(t){vR.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ll[e]=ll[t]})});function sT(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ll.hasOwnProperty(t)&&ll[t]?(""+e).trim():e+"px"}function oT(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=sT(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var _R=Ge({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Yp(t,e){if(e){if(_R[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Q(62))}}function Xp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jp=null;function zg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Zp=null,vo=null,_o=null;function y_(t){if(t=pc(t)){if(typeof Zp!="function")throw Error(Q(280));var e=t.stateNode;e&&(e=gh(e),Zp(t.stateNode,t.type,e))}}function aT(t){vo?_o?_o.push(t):_o=[t]:vo=t}function lT(){if(vo){var t=vo,e=_o;if(_o=vo=null,y_(t),e)for(t=0;t<e.length;t++)y_(e[t])}}function cT(t,e){return t(e)}function uT(){}var Ff=!1;function dT(t,e,n){if(Ff)return t(e,n);Ff=!0;try{return cT(t,e,n)}finally{Ff=!1,(vo!==null||_o!==null)&&(uT(),lT())}}function Nl(t,e){var n=t.stateNode;if(n===null)return null;var r=gh(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Q(231,e,typeof n));return n}var em=!1;if(wr)try{var Pa={};Object.defineProperty(Pa,"passive",{get:function(){em=!0}}),window.addEventListener("test",Pa,Pa),window.removeEventListener("test",Pa,Pa)}catch{em=!1}function wR(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var cl=!1,cd=null,ud=!1,tm=null,xR={onError:function(t){cl=!0,cd=t}};function bR(t,e,n,r,i,s,o,a,l){cl=!1,cd=null,wR.apply(xR,arguments)}function ER(t,e,n,r,i,s,o,a,l){if(bR.apply(this,arguments),cl){if(cl){var u=cd;cl=!1,cd=null}else throw Error(Q(198));ud||(ud=!0,tm=u)}}function Cs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function hT(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function v_(t){if(Cs(t)!==t)throw Error(Q(188))}function TR(t){var e=t.alternate;if(!e){if(e=Cs(t),e===null)throw Error(Q(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return v_(i),t;if(s===r)return v_(i),e;s=s.sibling}throw Error(Q(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(Q(189))}}if(n.alternate!==r)throw Error(Q(190))}if(n.tag!==3)throw Error(Q(188));return n.stateNode.current===n?t:e}function fT(t){return t=TR(t),t!==null?pT(t):null}function pT(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=pT(t);if(e!==null)return e;t=t.sibling}return null}var mT=dn.unstable_scheduleCallback,__=dn.unstable_cancelCallback,SR=dn.unstable_shouldYield,IR=dn.unstable_requestPaint,tt=dn.unstable_now,AR=dn.unstable_getCurrentPriorityLevel,$g=dn.unstable_ImmediatePriority,gT=dn.unstable_UserBlockingPriority,dd=dn.unstable_NormalPriority,kR=dn.unstable_LowPriority,yT=dn.unstable_IdlePriority,hh=null,Kn=null;function CR(t){if(Kn&&typeof Kn.onCommitFiberRoot=="function")try{Kn.onCommitFiberRoot(hh,t,void 0,(t.current.flags&128)===128)}catch{}}var Dn=Math.clz32?Math.clz32:NR,PR=Math.log,RR=Math.LN2;function NR(t){return t>>>=0,t===0?32:31-(PR(t)/RR|0)|0}var nu=64,ru=4194304;function Ya(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function hd(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Ya(a):(s&=o,s!==0&&(r=Ya(s)))}else o=n&~i,o!==0?r=Ya(o):s!==0&&(r=Ya(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Dn(e),i=1<<n,r|=t[n],e&=~i;return r}function DR(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function VR(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Dn(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=DR(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function nm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function vT(){var t=nu;return nu<<=1,!(nu&4194240)&&(nu=64),t}function Uf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function hc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Dn(e),t[e]=n}function jR(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Dn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function qg(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Dn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ie=0;function _T(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var wT,Kg,xT,bT,ET,rm=!1,iu=[],ti=null,ni=null,ri=null,Dl=new Map,Vl=new Map,Kr=[],OR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function w_(t,e){switch(t){case"focusin":case"focusout":ti=null;break;case"dragenter":case"dragleave":ni=null;break;case"mouseover":case"mouseout":ri=null;break;case"pointerover":case"pointerout":Dl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vl.delete(e.pointerId)}}function Ra(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=pc(e),e!==null&&Kg(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function LR(t,e,n,r,i){switch(e){case"focusin":return ti=Ra(ti,t,e,n,r,i),!0;case"dragenter":return ni=Ra(ni,t,e,n,r,i),!0;case"mouseover":return ri=Ra(ri,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Dl.set(s,Ra(Dl.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Vl.set(s,Ra(Vl.get(s)||null,t,e,n,r,i)),!0}return!1}function TT(t){var e=Zi(t.target);if(e!==null){var n=Cs(e);if(n!==null){if(e=n.tag,e===13){if(e=hT(n),e!==null){t.blockedOn=e,ET(t.priority,function(){xT(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ju(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=im(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Jp=r,n.target.dispatchEvent(r),Jp=null}else return e=pc(n),e!==null&&Kg(e),t.blockedOn=n,!1;e.shift()}return!0}function x_(t,e,n){ju(t)&&n.delete(e)}function MR(){rm=!1,ti!==null&&ju(ti)&&(ti=null),ni!==null&&ju(ni)&&(ni=null),ri!==null&&ju(ri)&&(ri=null),Dl.forEach(x_),Vl.forEach(x_)}function Na(t,e){t.blockedOn===e&&(t.blockedOn=null,rm||(rm=!0,dn.unstable_scheduleCallback(dn.unstable_NormalPriority,MR)))}function jl(t){function e(i){return Na(i,t)}if(0<iu.length){Na(iu[0],t);for(var n=1;n<iu.length;n++){var r=iu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ti!==null&&Na(ti,t),ni!==null&&Na(ni,t),ri!==null&&Na(ri,t),Dl.forEach(e),Vl.forEach(e),n=0;n<Kr.length;n++)r=Kr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Kr.length&&(n=Kr[0],n.blockedOn===null);)TT(n),n.blockedOn===null&&Kr.shift()}var wo=kr.ReactCurrentBatchConfig,fd=!0;function FR(t,e,n,r){var i=Ie,s=wo.transition;wo.transition=null;try{Ie=1,Gg(t,e,n,r)}finally{Ie=i,wo.transition=s}}function UR(t,e,n,r){var i=Ie,s=wo.transition;wo.transition=null;try{Ie=4,Gg(t,e,n,r)}finally{Ie=i,wo.transition=s}}function Gg(t,e,n,r){if(fd){var i=im(t,e,n,r);if(i===null)Yf(t,e,r,pd,n),w_(t,r);else if(LR(i,t,e,n,r))r.stopPropagation();else if(w_(t,r),e&4&&-1<OR.indexOf(t)){for(;i!==null;){var s=pc(i);if(s!==null&&wT(s),s=im(t,e,n,r),s===null&&Yf(t,e,r,pd,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Yf(t,e,r,null,n)}}var pd=null;function im(t,e,n,r){if(pd=null,t=zg(r),t=Zi(t),t!==null)if(e=Cs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=hT(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return pd=t,null}function ST(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(AR()){case $g:return 1;case gT:return 4;case dd:case kR:return 16;case yT:return 536870912;default:return 16}default:return 16}}var Jr=null,Wg=null,Ou=null;function IT(){if(Ou)return Ou;var t,e=Wg,n=e.length,r,i="value"in Jr?Jr.value:Jr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Ou=i.slice(t,1<r?1-r:void 0)}function Lu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function su(){return!0}function b_(){return!1}function mn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?su:b_,this.isPropagationStopped=b_,this}return Ge(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=su)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=su)},persist:function(){},isPersistent:su}),e}var ta={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hg=mn(ta),fc=Ge({},ta,{view:0,detail:0}),BR=mn(fc),Bf,zf,Da,fh=Ge({},fc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Da&&(Da&&t.type==="mousemove"?(Bf=t.screenX-Da.screenX,zf=t.screenY-Da.screenY):zf=Bf=0,Da=t),Bf)},movementY:function(t){return"movementY"in t?t.movementY:zf}}),E_=mn(fh),zR=Ge({},fh,{dataTransfer:0}),$R=mn(zR),qR=Ge({},fc,{relatedTarget:0}),$f=mn(qR),KR=Ge({},ta,{animationName:0,elapsedTime:0,pseudoElement:0}),GR=mn(KR),WR=Ge({},ta,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),HR=mn(WR),QR=Ge({},ta,{data:0}),T_=mn(QR),YR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},XR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},JR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ZR(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=JR[t])?!!e[t]:!1}function Qg(){return ZR}var eN=Ge({},fc,{key:function(t){if(t.key){var e=YR[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Lu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?XR[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qg,charCode:function(t){return t.type==="keypress"?Lu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Lu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),tN=mn(eN),nN=Ge({},fh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),S_=mn(nN),rN=Ge({},fc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qg}),iN=mn(rN),sN=Ge({},ta,{propertyName:0,elapsedTime:0,pseudoElement:0}),oN=mn(sN),aN=Ge({},fh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),lN=mn(aN),cN=[9,13,27,32],Yg=wr&&"CompositionEvent"in window,ul=null;wr&&"documentMode"in document&&(ul=document.documentMode);var uN=wr&&"TextEvent"in window&&!ul,AT=wr&&(!Yg||ul&&8<ul&&11>=ul),I_=" ",A_=!1;function kT(t,e){switch(t){case"keyup":return cN.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function CT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var eo=!1;function dN(t,e){switch(t){case"compositionend":return CT(e);case"keypress":return e.which!==32?null:(A_=!0,I_);case"textInput":return t=e.data,t===I_&&A_?null:t;default:return null}}function hN(t,e){if(eo)return t==="compositionend"||!Yg&&kT(t,e)?(t=IT(),Ou=Wg=Jr=null,eo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return AT&&e.locale!=="ko"?null:e.data;default:return null}}var fN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function k_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!fN[t.type]:e==="textarea"}function PT(t,e,n,r){aT(r),e=md(e,"onChange"),0<e.length&&(n=new Hg("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var dl=null,Ol=null;function pN(t){BT(t,0)}function ph(t){var e=ro(t);if(eT(e))return t}function mN(t,e){if(t==="change")return e}var RT=!1;if(wr){var qf;if(wr){var Kf="oninput"in document;if(!Kf){var C_=document.createElement("div");C_.setAttribute("oninput","return;"),Kf=typeof C_.oninput=="function"}qf=Kf}else qf=!1;RT=qf&&(!document.documentMode||9<document.documentMode)}function P_(){dl&&(dl.detachEvent("onpropertychange",NT),Ol=dl=null)}function NT(t){if(t.propertyName==="value"&&ph(Ol)){var e=[];PT(e,Ol,t,zg(t)),dT(pN,e)}}function gN(t,e,n){t==="focusin"?(P_(),dl=e,Ol=n,dl.attachEvent("onpropertychange",NT)):t==="focusout"&&P_()}function yN(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ph(Ol)}function vN(t,e){if(t==="click")return ph(e)}function _N(t,e){if(t==="input"||t==="change")return ph(e)}function wN(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var jn=typeof Object.is=="function"?Object.is:wN;function Ll(t,e){if(jn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Up.call(e,i)||!jn(t[i],e[i]))return!1}return!0}function R_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function N_(t,e){var n=R_(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=R_(n)}}function DT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?DT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function VT(){for(var t=window,e=ld();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ld(t.document)}return e}function Xg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function xN(t){var e=VT(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&DT(n.ownerDocument.documentElement,n)){if(r!==null&&Xg(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=N_(n,s);var o=N_(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var bN=wr&&"documentMode"in document&&11>=document.documentMode,to=null,sm=null,hl=null,om=!1;function D_(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;om||to==null||to!==ld(r)||(r=to,"selectionStart"in r&&Xg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),hl&&Ll(hl,r)||(hl=r,r=md(sm,"onSelect"),0<r.length&&(e=new Hg("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=to)))}function ou(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var no={animationend:ou("Animation","AnimationEnd"),animationiteration:ou("Animation","AnimationIteration"),animationstart:ou("Animation","AnimationStart"),transitionend:ou("Transition","TransitionEnd")},Gf={},jT={};wr&&(jT=document.createElement("div").style,"AnimationEvent"in window||(delete no.animationend.animation,delete no.animationiteration.animation,delete no.animationstart.animation),"TransitionEvent"in window||delete no.transitionend.transition);function mh(t){if(Gf[t])return Gf[t];if(!no[t])return t;var e=no[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in jT)return Gf[t]=e[n];return t}var OT=mh("animationend"),LT=mh("animationiteration"),MT=mh("animationstart"),FT=mh("transitionend"),UT=new Map,V_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ti(t,e){UT.set(t,e),ks(e,[t])}for(var Wf=0;Wf<V_.length;Wf++){var Hf=V_[Wf],EN=Hf.toLowerCase(),TN=Hf[0].toUpperCase()+Hf.slice(1);Ti(EN,"on"+TN)}Ti(OT,"onAnimationEnd");Ti(LT,"onAnimationIteration");Ti(MT,"onAnimationStart");Ti("dblclick","onDoubleClick");Ti("focusin","onFocus");Ti("focusout","onBlur");Ti(FT,"onTransitionEnd");ko("onMouseEnter",["mouseout","mouseover"]);ko("onMouseLeave",["mouseout","mouseover"]);ko("onPointerEnter",["pointerout","pointerover"]);ko("onPointerLeave",["pointerout","pointerover"]);ks("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ks("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ks("onBeforeInput",["compositionend","keypress","textInput","paste"]);ks("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ks("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ks("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),SN=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xa));function j_(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,ER(r,e,void 0,t),t.currentTarget=null}function BT(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;j_(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;j_(i,a,u),s=l}}}if(ud)throw t=tm,ud=!1,tm=null,t}function Oe(t,e){var n=e[dm];n===void 0&&(n=e[dm]=new Set);var r=t+"__bubble";n.has(r)||(zT(e,t,2,!1),n.add(r))}function Qf(t,e,n){var r=0;e&&(r|=4),zT(n,t,r,e)}var au="_reactListening"+Math.random().toString(36).slice(2);function Ml(t){if(!t[au]){t[au]=!0,QE.forEach(function(n){n!=="selectionchange"&&(SN.has(n)||Qf(n,!1,t),Qf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[au]||(e[au]=!0,Qf("selectionchange",!1,e))}}function zT(t,e,n,r){switch(ST(e)){case 1:var i=FR;break;case 4:i=UR;break;default:i=Gg}n=i.bind(null,e,n,t),i=void 0,!em||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Yf(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Zi(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}dT(function(){var u=s,h=zg(n),f=[];e:{var p=UT.get(t);if(p!==void 0){var v=Hg,b=t;switch(t){case"keypress":if(Lu(n)===0)break e;case"keydown":case"keyup":v=tN;break;case"focusin":b="focus",v=$f;break;case"focusout":b="blur",v=$f;break;case"beforeblur":case"afterblur":v=$f;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=E_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=$R;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=iN;break;case OT:case LT:case MT:v=GR;break;case FT:v=oN;break;case"scroll":v=BR;break;case"wheel":v=lN;break;case"copy":case"cut":case"paste":v=HR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=S_}var E=(e&4)!==0,A=!E&&t==="scroll",_=E?p!==null?p+"Capture":null:p;E=[];for(var y=u,w;y!==null;){w=y;var P=w.stateNode;if(w.tag===5&&P!==null&&(w=P,_!==null&&(P=Nl(y,_),P!=null&&E.push(Fl(y,P,w)))),A)break;y=y.return}0<E.length&&(p=new v(p,b,null,n,h),f.push({event:p,listeners:E}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",p&&n!==Jp&&(b=n.relatedTarget||n.fromElement)&&(Zi(b)||b[xr]))break e;if((v||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,v?(b=n.relatedTarget||n.toElement,v=u,b=b?Zi(b):null,b!==null&&(A=Cs(b),b!==A||b.tag!==5&&b.tag!==6)&&(b=null)):(v=null,b=u),v!==b)){if(E=E_,P="onMouseLeave",_="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(E=S_,P="onPointerLeave",_="onPointerEnter",y="pointer"),A=v==null?p:ro(v),w=b==null?p:ro(b),p=new E(P,y+"leave",v,n,h),p.target=A,p.relatedTarget=w,P=null,Zi(h)===u&&(E=new E(_,y+"enter",b,n,h),E.target=w,E.relatedTarget=A,P=E),A=P,v&&b)t:{for(E=v,_=b,y=0,w=E;w;w=Us(w))y++;for(w=0,P=_;P;P=Us(P))w++;for(;0<y-w;)E=Us(E),y--;for(;0<w-y;)_=Us(_),w--;for(;y--;){if(E===_||_!==null&&E===_.alternate)break t;E=Us(E),_=Us(_)}E=null}else E=null;v!==null&&O_(f,p,v,E,!1),b!==null&&A!==null&&O_(f,A,b,E,!0)}}e:{if(p=u?ro(u):window,v=p.nodeName&&p.nodeName.toLowerCase(),v==="select"||v==="input"&&p.type==="file")var V=mN;else if(k_(p))if(RT)V=_N;else{V=yN;var O=gN}else(v=p.nodeName)&&v.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(V=vN);if(V&&(V=V(t,u))){PT(f,V,n,h);break e}O&&O(t,p,u),t==="focusout"&&(O=p._wrapperState)&&O.controlled&&p.type==="number"&&Wp(p,"number",p.value)}switch(O=u?ro(u):window,t){case"focusin":(k_(O)||O.contentEditable==="true")&&(to=O,sm=u,hl=null);break;case"focusout":hl=sm=to=null;break;case"mousedown":om=!0;break;case"contextmenu":case"mouseup":case"dragend":om=!1,D_(f,n,h);break;case"selectionchange":if(bN)break;case"keydown":case"keyup":D_(f,n,h)}var I;if(Yg)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else eo?kT(t,n)&&(x="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(AT&&n.locale!=="ko"&&(eo||x!=="onCompositionStart"?x==="onCompositionEnd"&&eo&&(I=IT()):(Jr=h,Wg="value"in Jr?Jr.value:Jr.textContent,eo=!0)),O=md(u,x),0<O.length&&(x=new T_(x,t,null,n,h),f.push({event:x,listeners:O}),I?x.data=I:(I=CT(n),I!==null&&(x.data=I)))),(I=uN?dN(t,n):hN(t,n))&&(u=md(u,"onBeforeInput"),0<u.length&&(h=new T_("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:u}),h.data=I))}BT(f,e)})}function Fl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function md(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Nl(t,n),s!=null&&r.unshift(Fl(t,s,i)),s=Nl(t,e),s!=null&&r.push(Fl(t,s,i))),t=t.return}return r}function Us(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function O_(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=Nl(n,s),l!=null&&o.unshift(Fl(n,l,a))):i||(l=Nl(n,s),l!=null&&o.push(Fl(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var IN=/\r\n?/g,AN=/\u0000|\uFFFD/g;function L_(t){return(typeof t=="string"?t:""+t).replace(IN,`
`).replace(AN,"")}function lu(t,e,n){if(e=L_(e),L_(t)!==e&&n)throw Error(Q(425))}function gd(){}var am=null,lm=null;function cm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var um=typeof setTimeout=="function"?setTimeout:void 0,kN=typeof clearTimeout=="function"?clearTimeout:void 0,M_=typeof Promise=="function"?Promise:void 0,CN=typeof queueMicrotask=="function"?queueMicrotask:typeof M_<"u"?function(t){return M_.resolve(null).then(t).catch(PN)}:um;function PN(t){setTimeout(function(){throw t})}function Xf(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),jl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);jl(e)}function ii(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function F_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var na=Math.random().toString(36).slice(2),zn="__reactFiber$"+na,Ul="__reactProps$"+na,xr="__reactContainer$"+na,dm="__reactEvents$"+na,RN="__reactListeners$"+na,NN="__reactHandles$"+na;function Zi(t){var e=t[zn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[xr]||n[zn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=F_(t);t!==null;){if(n=t[zn])return n;t=F_(t)}return e}t=n,n=t.parentNode}return null}function pc(t){return t=t[zn]||t[xr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ro(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Q(33))}function gh(t){return t[Ul]||null}var hm=[],io=-1;function Si(t){return{current:t}}function Me(t){0>io||(t.current=hm[io],hm[io]=null,io--)}function Ne(t,e){io++,hm[io]=t.current,t.current=e}var gi={},Vt=Si(gi),Jt=Si(!1),ds=gi;function Co(t,e){var n=t.type.contextTypes;if(!n)return gi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Zt(t){return t=t.childContextTypes,t!=null}function yd(){Me(Jt),Me(Vt)}function U_(t,e,n){if(Vt.current!==gi)throw Error(Q(168));Ne(Vt,e),Ne(Jt,n)}function $T(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Q(108,gR(t)||"Unknown",i));return Ge({},n,r)}function vd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||gi,ds=Vt.current,Ne(Vt,t),Ne(Jt,Jt.current),!0}function B_(t,e,n){var r=t.stateNode;if(!r)throw Error(Q(169));n?(t=$T(t,e,ds),r.__reactInternalMemoizedMergedChildContext=t,Me(Jt),Me(Vt),Ne(Vt,t)):Me(Jt),Ne(Jt,n)}var sr=null,yh=!1,Jf=!1;function qT(t){sr===null?sr=[t]:sr.push(t)}function DN(t){yh=!0,qT(t)}function Ii(){if(!Jf&&sr!==null){Jf=!0;var t=0,e=Ie;try{var n=sr;for(Ie=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}sr=null,yh=!1}catch(i){throw sr!==null&&(sr=sr.slice(t+1)),mT($g,Ii),i}finally{Ie=e,Jf=!1}}return null}var so=[],oo=0,_d=null,wd=0,_n=[],wn=0,hs=null,or=1,ar="";function Bi(t,e){so[oo++]=wd,so[oo++]=_d,_d=t,wd=e}function KT(t,e,n){_n[wn++]=or,_n[wn++]=ar,_n[wn++]=hs,hs=t;var r=or;t=ar;var i=32-Dn(r)-1;r&=~(1<<i),n+=1;var s=32-Dn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,or=1<<32-Dn(e)+i|n<<i|r,ar=s+t}else or=1<<s|n<<i|r,ar=t}function Jg(t){t.return!==null&&(Bi(t,1),KT(t,1,0))}function Zg(t){for(;t===_d;)_d=so[--oo],so[oo]=null,wd=so[--oo],so[oo]=null;for(;t===hs;)hs=_n[--wn],_n[wn]=null,ar=_n[--wn],_n[wn]=null,or=_n[--wn],_n[wn]=null}var cn=null,on=null,Ue=!1,Nn=null;function GT(t,e){var n=xn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function z_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,cn=t,on=ii(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,cn=t,on=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=hs!==null?{id:or,overflow:ar}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=xn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,cn=t,on=null,!0):!1;default:return!1}}function fm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function pm(t){if(Ue){var e=on;if(e){var n=e;if(!z_(t,e)){if(fm(t))throw Error(Q(418));e=ii(n.nextSibling);var r=cn;e&&z_(t,e)?GT(r,n):(t.flags=t.flags&-4097|2,Ue=!1,cn=t)}}else{if(fm(t))throw Error(Q(418));t.flags=t.flags&-4097|2,Ue=!1,cn=t}}}function $_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;cn=t}function cu(t){if(t!==cn)return!1;if(!Ue)return $_(t),Ue=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!cm(t.type,t.memoizedProps)),e&&(e=on)){if(fm(t))throw WT(),Error(Q(418));for(;e;)GT(t,e),e=ii(e.nextSibling)}if($_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){on=ii(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}on=null}}else on=cn?ii(t.stateNode.nextSibling):null;return!0}function WT(){for(var t=on;t;)t=ii(t.nextSibling)}function Po(){on=cn=null,Ue=!1}function ey(t){Nn===null?Nn=[t]:Nn.push(t)}var VN=kr.ReactCurrentBatchConfig;function Va(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Q(309));var r=n.stateNode}if(!r)throw Error(Q(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Q(284));if(!n._owner)throw Error(Q(290,t))}return t}function uu(t,e){throw t=Object.prototype.toString.call(e),Error(Q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function q_(t){var e=t._init;return e(t._payload)}function HT(t){function e(_,y){if(t){var w=_.deletions;w===null?(_.deletions=[y],_.flags|=16):w.push(y)}}function n(_,y){if(!t)return null;for(;y!==null;)e(_,y),y=y.sibling;return null}function r(_,y){for(_=new Map;y!==null;)y.key!==null?_.set(y.key,y):_.set(y.index,y),y=y.sibling;return _}function i(_,y){return _=li(_,y),_.index=0,_.sibling=null,_}function s(_,y,w){return _.index=w,t?(w=_.alternate,w!==null?(w=w.index,w<y?(_.flags|=2,y):w):(_.flags|=2,y)):(_.flags|=1048576,y)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,y,w,P){return y===null||y.tag!==6?(y=sp(w,_.mode,P),y.return=_,y):(y=i(y,w),y.return=_,y)}function l(_,y,w,P){var V=w.type;return V===Zs?h(_,y,w.props.children,P,w.key):y!==null&&(y.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===$r&&q_(V)===y.type)?(P=i(y,w.props),P.ref=Va(_,y,w),P.return=_,P):(P=qu(w.type,w.key,w.props,null,_.mode,P),P.ref=Va(_,y,w),P.return=_,P)}function u(_,y,w,P){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=op(w,_.mode,P),y.return=_,y):(y=i(y,w.children||[]),y.return=_,y)}function h(_,y,w,P,V){return y===null||y.tag!==7?(y=os(w,_.mode,P,V),y.return=_,y):(y=i(y,w),y.return=_,y)}function f(_,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return y=sp(""+y,_.mode,w),y.return=_,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Zc:return w=qu(y.type,y.key,y.props,null,_.mode,w),w.ref=Va(_,null,y),w.return=_,w;case Js:return y=op(y,_.mode,w),y.return=_,y;case $r:var P=y._init;return f(_,P(y._payload),w)}if(Qa(y)||Ca(y))return y=os(y,_.mode,w,null),y.return=_,y;uu(_,y)}return null}function p(_,y,w,P){var V=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return V!==null?null:a(_,y,""+w,P);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Zc:return w.key===V?l(_,y,w,P):null;case Js:return w.key===V?u(_,y,w,P):null;case $r:return V=w._init,p(_,y,V(w._payload),P)}if(Qa(w)||Ca(w))return V!==null?null:h(_,y,w,P,null);uu(_,w)}return null}function v(_,y,w,P,V){if(typeof P=="string"&&P!==""||typeof P=="number")return _=_.get(w)||null,a(y,_,""+P,V);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Zc:return _=_.get(P.key===null?w:P.key)||null,l(y,_,P,V);case Js:return _=_.get(P.key===null?w:P.key)||null,u(y,_,P,V);case $r:var O=P._init;return v(_,y,w,O(P._payload),V)}if(Qa(P)||Ca(P))return _=_.get(w)||null,h(y,_,P,V,null);uu(y,P)}return null}function b(_,y,w,P){for(var V=null,O=null,I=y,x=y=0,k=null;I!==null&&x<w.length;x++){I.index>x?(k=I,I=null):k=I.sibling;var C=p(_,I,w[x],P);if(C===null){I===null&&(I=k);break}t&&I&&C.alternate===null&&e(_,I),y=s(C,y,x),O===null?V=C:O.sibling=C,O=C,I=k}if(x===w.length)return n(_,I),Ue&&Bi(_,x),V;if(I===null){for(;x<w.length;x++)I=f(_,w[x],P),I!==null&&(y=s(I,y,x),O===null?V=I:O.sibling=I,O=I);return Ue&&Bi(_,x),V}for(I=r(_,I);x<w.length;x++)k=v(I,_,x,w[x],P),k!==null&&(t&&k.alternate!==null&&I.delete(k.key===null?x:k.key),y=s(k,y,x),O===null?V=k:O.sibling=k,O=k);return t&&I.forEach(function(D){return e(_,D)}),Ue&&Bi(_,x),V}function E(_,y,w,P){var V=Ca(w);if(typeof V!="function")throw Error(Q(150));if(w=V.call(w),w==null)throw Error(Q(151));for(var O=V=null,I=y,x=y=0,k=null,C=w.next();I!==null&&!C.done;x++,C=w.next()){I.index>x?(k=I,I=null):k=I.sibling;var D=p(_,I,C.value,P);if(D===null){I===null&&(I=k);break}t&&I&&D.alternate===null&&e(_,I),y=s(D,y,x),O===null?V=D:O.sibling=D,O=D,I=k}if(C.done)return n(_,I),Ue&&Bi(_,x),V;if(I===null){for(;!C.done;x++,C=w.next())C=f(_,C.value,P),C!==null&&(y=s(C,y,x),O===null?V=C:O.sibling=C,O=C);return Ue&&Bi(_,x),V}for(I=r(_,I);!C.done;x++,C=w.next())C=v(I,_,x,C.value,P),C!==null&&(t&&C.alternate!==null&&I.delete(C.key===null?x:C.key),y=s(C,y,x),O===null?V=C:O.sibling=C,O=C);return t&&I.forEach(function(N){return e(_,N)}),Ue&&Bi(_,x),V}function A(_,y,w,P){if(typeof w=="object"&&w!==null&&w.type===Zs&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Zc:e:{for(var V=w.key,O=y;O!==null;){if(O.key===V){if(V=w.type,V===Zs){if(O.tag===7){n(_,O.sibling),y=i(O,w.props.children),y.return=_,_=y;break e}}else if(O.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===$r&&q_(V)===O.type){n(_,O.sibling),y=i(O,w.props),y.ref=Va(_,O,w),y.return=_,_=y;break e}n(_,O);break}else e(_,O);O=O.sibling}w.type===Zs?(y=os(w.props.children,_.mode,P,w.key),y.return=_,_=y):(P=qu(w.type,w.key,w.props,null,_.mode,P),P.ref=Va(_,y,w),P.return=_,_=P)}return o(_);case Js:e:{for(O=w.key;y!==null;){if(y.key===O)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){n(_,y.sibling),y=i(y,w.children||[]),y.return=_,_=y;break e}else{n(_,y);break}else e(_,y);y=y.sibling}y=op(w,_.mode,P),y.return=_,_=y}return o(_);case $r:return O=w._init,A(_,y,O(w._payload),P)}if(Qa(w))return b(_,y,w,P);if(Ca(w))return E(_,y,w,P);uu(_,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,y!==null&&y.tag===6?(n(_,y.sibling),y=i(y,w),y.return=_,_=y):(n(_,y),y=sp(w,_.mode,P),y.return=_,_=y),o(_)):n(_,y)}return A}var Ro=HT(!0),QT=HT(!1),xd=Si(null),bd=null,ao=null,ty=null;function ny(){ty=ao=bd=null}function ry(t){var e=xd.current;Me(xd),t._currentValue=e}function mm(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function xo(t,e){bd=t,ty=ao=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Qt=!0),t.firstContext=null)}function En(t){var e=t._currentValue;if(ty!==t)if(t={context:t,memoizedValue:e,next:null},ao===null){if(bd===null)throw Error(Q(308));ao=t,bd.dependencies={lanes:0,firstContext:t}}else ao=ao.next=t;return e}var es=null;function iy(t){es===null?es=[t]:es.push(t)}function YT(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,iy(e)):(n.next=i.next,i.next=n),e.interleaved=n,br(t,r)}function br(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var qr=!1;function sy(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function XT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function mr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function si(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,xe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,br(t,n)}return i=r.interleaved,i===null?(e.next=e,iy(r)):(e.next=i.next,i.next=e),r.interleaved=e,br(t,n)}function Mu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,qg(t,n)}}function K_(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ed(t,e,n,r){var i=t.updateQueue;qr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,h=u=l=null,a=s;do{var p=a.lane,v=a.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:v,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var b=t,E=a;switch(p=e,v=n,E.tag){case 1:if(b=E.payload,typeof b=="function"){f=b.call(v,f,p);break e}f=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=E.payload,p=typeof b=="function"?b.call(v,f,p):b,p==null)break e;f=Ge({},f,p);break e;case 2:qr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else v={eventTime:v,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=v,l=f):h=h.next=v,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(h===null&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);ps|=o,t.lanes=o,t.memoizedState=f}}function G_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Q(191,i));i.call(r)}}}var mc={},Gn=Si(mc),Bl=Si(mc),zl=Si(mc);function ts(t){if(t===mc)throw Error(Q(174));return t}function oy(t,e){switch(Ne(zl,e),Ne(Bl,t),Ne(Gn,mc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Qp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Qp(e,t)}Me(Gn),Ne(Gn,e)}function No(){Me(Gn),Me(Bl),Me(zl)}function JT(t){ts(zl.current);var e=ts(Gn.current),n=Qp(e,t.type);e!==n&&(Ne(Bl,t),Ne(Gn,n))}function ay(t){Bl.current===t&&(Me(Gn),Me(Bl))}var Be=Si(0);function Td(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Zf=[];function ly(){for(var t=0;t<Zf.length;t++)Zf[t]._workInProgressVersionPrimary=null;Zf.length=0}var Fu=kr.ReactCurrentDispatcher,ep=kr.ReactCurrentBatchConfig,fs=0,qe=null,ot=null,dt=null,Sd=!1,fl=!1,$l=0,jN=0;function Tt(){throw Error(Q(321))}function cy(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!jn(t[n],e[n]))return!1;return!0}function uy(t,e,n,r,i,s){if(fs=s,qe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Fu.current=t===null||t.memoizedState===null?FN:UN,t=n(r,i),fl){s=0;do{if(fl=!1,$l=0,25<=s)throw Error(Q(301));s+=1,dt=ot=null,e.updateQueue=null,Fu.current=BN,t=n(r,i)}while(fl)}if(Fu.current=Id,e=ot!==null&&ot.next!==null,fs=0,dt=ot=qe=null,Sd=!1,e)throw Error(Q(300));return t}function dy(){var t=$l!==0;return $l=0,t}function Bn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dt===null?qe.memoizedState=dt=t:dt=dt.next=t,dt}function Tn(){if(ot===null){var t=qe.alternate;t=t!==null?t.memoizedState:null}else t=ot.next;var e=dt===null?qe.memoizedState:dt.next;if(e!==null)dt=e,ot=t;else{if(t===null)throw Error(Q(310));ot=t,t={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},dt===null?qe.memoizedState=dt=t:dt=dt.next=t}return dt}function ql(t,e){return typeof e=="function"?e(t):e}function tp(t){var e=Tn(),n=e.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=t;var r=ot,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var h=u.lane;if((fs&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,qe.lanes|=h,ps|=h}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,jn(r,e.memoizedState)||(Qt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,qe.lanes|=s,ps|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function np(t){var e=Tn(),n=e.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);jn(s,e.memoizedState)||(Qt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function ZT(){}function e1(t,e){var n=qe,r=Tn(),i=e(),s=!jn(r.memoizedState,i);if(s&&(r.memoizedState=i,Qt=!0),r=r.queue,hy(r1.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||dt!==null&&dt.memoizedState.tag&1){if(n.flags|=2048,Kl(9,n1.bind(null,n,r,i,e),void 0,null),ht===null)throw Error(Q(349));fs&30||t1(n,e,i)}return i}function t1(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=qe.updateQueue,e===null?(e={lastEffect:null,stores:null},qe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function n1(t,e,n,r){e.value=n,e.getSnapshot=r,i1(e)&&s1(t)}function r1(t,e,n){return n(function(){i1(e)&&s1(t)})}function i1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!jn(t,n)}catch{return!0}}function s1(t){var e=br(t,1);e!==null&&Vn(e,t,1,-1)}function W_(t){var e=Bn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ql,lastRenderedState:t},e.queue=t,t=t.dispatch=MN.bind(null,qe,t),[e.memoizedState,t]}function Kl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=qe.updateQueue,e===null?(e={lastEffect:null,stores:null},qe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function o1(){return Tn().memoizedState}function Uu(t,e,n,r){var i=Bn();qe.flags|=t,i.memoizedState=Kl(1|e,n,void 0,r===void 0?null:r)}function vh(t,e,n,r){var i=Tn();r=r===void 0?null:r;var s=void 0;if(ot!==null){var o=ot.memoizedState;if(s=o.destroy,r!==null&&cy(r,o.deps)){i.memoizedState=Kl(e,n,s,r);return}}qe.flags|=t,i.memoizedState=Kl(1|e,n,s,r)}function H_(t,e){return Uu(8390656,8,t,e)}function hy(t,e){return vh(2048,8,t,e)}function a1(t,e){return vh(4,2,t,e)}function l1(t,e){return vh(4,4,t,e)}function c1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function u1(t,e,n){return n=n!=null?n.concat([t]):null,vh(4,4,c1.bind(null,e,t),n)}function fy(){}function d1(t,e){var n=Tn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&cy(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function h1(t,e){var n=Tn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&cy(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function f1(t,e,n){return fs&21?(jn(n,e)||(n=vT(),qe.lanes|=n,ps|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Qt=!0),t.memoizedState=n)}function ON(t,e){var n=Ie;Ie=n!==0&&4>n?n:4,t(!0);var r=ep.transition;ep.transition={};try{t(!1),e()}finally{Ie=n,ep.transition=r}}function p1(){return Tn().memoizedState}function LN(t,e,n){var r=ai(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},m1(t))g1(e,n);else if(n=YT(t,e,n,r),n!==null){var i=Bt();Vn(n,t,r,i),y1(n,e,r)}}function MN(t,e,n){var r=ai(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(m1(t))g1(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,jn(a,o)){var l=e.interleaved;l===null?(i.next=i,iy(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=YT(t,e,i,r),n!==null&&(i=Bt(),Vn(n,t,r,i),y1(n,e,r))}}function m1(t){var e=t.alternate;return t===qe||e!==null&&e===qe}function g1(t,e){fl=Sd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function y1(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,qg(t,n)}}var Id={readContext:En,useCallback:Tt,useContext:Tt,useEffect:Tt,useImperativeHandle:Tt,useInsertionEffect:Tt,useLayoutEffect:Tt,useMemo:Tt,useReducer:Tt,useRef:Tt,useState:Tt,useDebugValue:Tt,useDeferredValue:Tt,useTransition:Tt,useMutableSource:Tt,useSyncExternalStore:Tt,useId:Tt,unstable_isNewReconciler:!1},FN={readContext:En,useCallback:function(t,e){return Bn().memoizedState=[t,e===void 0?null:e],t},useContext:En,useEffect:H_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Uu(4194308,4,c1.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Uu(4194308,4,t,e)},useInsertionEffect:function(t,e){return Uu(4,2,t,e)},useMemo:function(t,e){var n=Bn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Bn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=LN.bind(null,qe,t),[r.memoizedState,t]},useRef:function(t){var e=Bn();return t={current:t},e.memoizedState=t},useState:W_,useDebugValue:fy,useDeferredValue:function(t){return Bn().memoizedState=t},useTransition:function(){var t=W_(!1),e=t[0];return t=ON.bind(null,t[1]),Bn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=qe,i=Bn();if(Ue){if(n===void 0)throw Error(Q(407));n=n()}else{if(n=e(),ht===null)throw Error(Q(349));fs&30||t1(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,H_(r1.bind(null,r,s,t),[t]),r.flags|=2048,Kl(9,n1.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Bn(),e=ht.identifierPrefix;if(Ue){var n=ar,r=or;n=(r&~(1<<32-Dn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=$l++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=jN++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},UN={readContext:En,useCallback:d1,useContext:En,useEffect:hy,useImperativeHandle:u1,useInsertionEffect:a1,useLayoutEffect:l1,useMemo:h1,useReducer:tp,useRef:o1,useState:function(){return tp(ql)},useDebugValue:fy,useDeferredValue:function(t){var e=Tn();return f1(e,ot.memoizedState,t)},useTransition:function(){var t=tp(ql)[0],e=Tn().memoizedState;return[t,e]},useMutableSource:ZT,useSyncExternalStore:e1,useId:p1,unstable_isNewReconciler:!1},BN={readContext:En,useCallback:d1,useContext:En,useEffect:hy,useImperativeHandle:u1,useInsertionEffect:a1,useLayoutEffect:l1,useMemo:h1,useReducer:np,useRef:o1,useState:function(){return np(ql)},useDebugValue:fy,useDeferredValue:function(t){var e=Tn();return ot===null?e.memoizedState=t:f1(e,ot.memoizedState,t)},useTransition:function(){var t=np(ql)[0],e=Tn().memoizedState;return[t,e]},useMutableSource:ZT,useSyncExternalStore:e1,useId:p1,unstable_isNewReconciler:!1};function Pn(t,e){if(t&&t.defaultProps){e=Ge({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function gm(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ge({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var _h={isMounted:function(t){return(t=t._reactInternals)?Cs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Bt(),i=ai(t),s=mr(r,i);s.payload=e,n!=null&&(s.callback=n),e=si(t,s,i),e!==null&&(Vn(e,t,i,r),Mu(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Bt(),i=ai(t),s=mr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=si(t,s,i),e!==null&&(Vn(e,t,i,r),Mu(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Bt(),r=ai(t),i=mr(n,r);i.tag=2,e!=null&&(i.callback=e),e=si(t,i,r),e!==null&&(Vn(e,t,r,n),Mu(e,t,r))}};function Q_(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Ll(n,r)||!Ll(i,s):!0}function v1(t,e,n){var r=!1,i=gi,s=e.contextType;return typeof s=="object"&&s!==null?s=En(s):(i=Zt(e)?ds:Vt.current,r=e.contextTypes,s=(r=r!=null)?Co(t,i):gi),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=_h,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Y_(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&_h.enqueueReplaceState(e,e.state,null)}function ym(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},sy(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=En(s):(s=Zt(e)?ds:Vt.current,i.context=Co(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(gm(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&_h.enqueueReplaceState(i,i.state,null),Ed(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Do(t,e){try{var n="",r=e;do n+=mR(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function rp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function vm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var zN=typeof WeakMap=="function"?WeakMap:Map;function _1(t,e,n){n=mr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){kd||(kd=!0,km=r),vm(t,e)},n}function w1(t,e,n){n=mr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){vm(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){vm(t,e),typeof r!="function"&&(oi===null?oi=new Set([this]):oi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function X_(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new zN;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=n2.bind(null,t,e,n),e.then(t,t))}function J_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Z_(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=mr(-1,1),e.tag=2,si(n,e,1))),n.lanes|=1),t)}var $N=kr.ReactCurrentOwner,Qt=!1;function Ut(t,e,n,r){e.child=t===null?QT(e,null,n,r):Ro(e,t.child,n,r)}function ew(t,e,n,r,i){n=n.render;var s=e.ref;return xo(e,i),r=uy(t,e,n,r,s,i),n=dy(),t!==null&&!Qt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Er(t,e,i)):(Ue&&n&&Jg(e),e.flags|=1,Ut(t,e,r,i),e.child)}function tw(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!xy(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,x1(t,e,s,r,i)):(t=qu(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ll,n(o,r)&&t.ref===e.ref)return Er(t,e,i)}return e.flags|=1,t=li(s,r),t.ref=e.ref,t.return=e,e.child=t}function x1(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Ll(s,r)&&t.ref===e.ref)if(Qt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Qt=!0);else return e.lanes=t.lanes,Er(t,e,i)}return _m(t,e,n,r,i)}function b1(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ne(co,sn),sn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ne(co,sn),sn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ne(co,sn),sn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ne(co,sn),sn|=r;return Ut(t,e,i,n),e.child}function E1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function _m(t,e,n,r,i){var s=Zt(n)?ds:Vt.current;return s=Co(e,s),xo(e,i),n=uy(t,e,n,r,s,i),r=dy(),t!==null&&!Qt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Er(t,e,i)):(Ue&&r&&Jg(e),e.flags|=1,Ut(t,e,n,i),e.child)}function nw(t,e,n,r,i){if(Zt(n)){var s=!0;vd(e)}else s=!1;if(xo(e,i),e.stateNode===null)Bu(t,e),v1(e,n,r),ym(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=En(u):(u=Zt(n)?ds:Vt.current,u=Co(e,u));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&Y_(e,o,r,u),qr=!1;var p=e.memoizedState;o.state=p,Ed(e,r,o,i),l=e.memoizedState,a!==r||p!==l||Jt.current||qr?(typeof h=="function"&&(gm(e,n,h,r),l=e.memoizedState),(a=qr||Q_(e,n,a,r,p,l,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,XT(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Pn(e.type,a),o.props=u,f=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=En(l):(l=Zt(n)?ds:Vt.current,l=Co(e,l));var v=n.getDerivedStateFromProps;(h=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&Y_(e,o,r,l),qr=!1,p=e.memoizedState,o.state=p,Ed(e,r,o,i);var b=e.memoizedState;a!==f||p!==b||Jt.current||qr?(typeof v=="function"&&(gm(e,n,v,r),b=e.memoizedState),(u=qr||Q_(e,n,u,r,p,b,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,b,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,b,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=b),o.props=r,o.state=b,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return wm(t,e,n,r,s,i)}function wm(t,e,n,r,i,s){E1(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&B_(e,n,!1),Er(t,e,s);r=e.stateNode,$N.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ro(e,t.child,null,s),e.child=Ro(e,null,a,s)):Ut(t,e,a,s),e.memoizedState=r.state,i&&B_(e,n,!0),e.child}function T1(t){var e=t.stateNode;e.pendingContext?U_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&U_(t,e.context,!1),oy(t,e.containerInfo)}function rw(t,e,n,r,i){return Po(),ey(i),e.flags|=256,Ut(t,e,n,r),e.child}var xm={dehydrated:null,treeContext:null,retryLane:0};function bm(t){return{baseLanes:t,cachePool:null,transitions:null}}function S1(t,e,n){var r=e.pendingProps,i=Be.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ne(Be,i&1),t===null)return pm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=bh(o,r,0,null),t=os(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=bm(n),e.memoizedState=xm,t):py(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return qN(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=li(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=li(a,s):(s=os(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?bm(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=xm,r}return s=t.child,t=s.sibling,r=li(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function py(t,e){return e=bh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function du(t,e,n,r){return r!==null&&ey(r),Ro(e,t.child,null,n),t=py(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function qN(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=rp(Error(Q(422))),du(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=bh({mode:"visible",children:r.children},i,0,null),s=os(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Ro(e,t.child,null,o),e.child.memoizedState=bm(o),e.memoizedState=xm,s);if(!(e.mode&1))return du(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Q(419)),r=rp(s,r,void 0),du(t,e,o,r)}if(a=(o&t.childLanes)!==0,Qt||a){if(r=ht,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,br(t,i),Vn(r,t,i,-1))}return wy(),r=rp(Error(Q(421))),du(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=r2.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,on=ii(i.nextSibling),cn=e,Ue=!0,Nn=null,t!==null&&(_n[wn++]=or,_n[wn++]=ar,_n[wn++]=hs,or=t.id,ar=t.overflow,hs=e),e=py(e,r.children),e.flags|=4096,e)}function iw(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),mm(t.return,e,n)}function ip(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function I1(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Ut(t,e,r.children,n),r=Be.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&iw(t,n,e);else if(t.tag===19)iw(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ne(Be,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Td(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),ip(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Td(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}ip(e,!0,n,null,s);break;case"together":ip(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Bu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Er(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ps|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Q(153));if(e.child!==null){for(t=e.child,n=li(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=li(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function KN(t,e,n){switch(e.tag){case 3:T1(e),Po();break;case 5:JT(e);break;case 1:Zt(e.type)&&vd(e);break;case 4:oy(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ne(xd,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ne(Be,Be.current&1),e.flags|=128,null):n&e.child.childLanes?S1(t,e,n):(Ne(Be,Be.current&1),t=Er(t,e,n),t!==null?t.sibling:null);Ne(Be,Be.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return I1(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ne(Be,Be.current),r)break;return null;case 22:case 23:return e.lanes=0,b1(t,e,n)}return Er(t,e,n)}var A1,Em,k1,C1;A1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Em=function(){};k1=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ts(Gn.current);var s=null;switch(n){case"input":i=Kp(t,i),r=Kp(t,r),s=[];break;case"select":i=Ge({},i,{value:void 0}),r=Ge({},r,{value:void 0}),s=[];break;case"textarea":i=Hp(t,i),r=Hp(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=gd)}Yp(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Pl.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Pl.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Oe("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};C1=function(t,e,n,r){n!==r&&(e.flags|=4)};function ja(t,e){if(!Ue)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function St(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function GN(t,e,n){var r=e.pendingProps;switch(Zg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return St(e),null;case 1:return Zt(e.type)&&yd(),St(e),null;case 3:return r=e.stateNode,No(),Me(Jt),Me(Vt),ly(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(cu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Nn!==null&&(Rm(Nn),Nn=null))),Em(t,e),St(e),null;case 5:ay(e);var i=ts(zl.current);if(n=e.type,t!==null&&e.stateNode!=null)k1(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Q(166));return St(e),null}if(t=ts(Gn.current),cu(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[zn]=e,r[Ul]=s,t=(e.mode&1)!==0,n){case"dialog":Oe("cancel",r),Oe("close",r);break;case"iframe":case"object":case"embed":Oe("load",r);break;case"video":case"audio":for(i=0;i<Xa.length;i++)Oe(Xa[i],r);break;case"source":Oe("error",r);break;case"img":case"image":case"link":Oe("error",r),Oe("load",r);break;case"details":Oe("toggle",r);break;case"input":f_(r,s),Oe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Oe("invalid",r);break;case"textarea":m_(r,s),Oe("invalid",r)}Yp(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&lu(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&lu(r.textContent,a,t),i=["children",""+a]):Pl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Oe("scroll",r)}switch(n){case"input":eu(r),p_(r,s,!0);break;case"textarea":eu(r),g_(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=gd)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=rT(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[zn]=e,t[Ul]=r,A1(t,e,!1,!1),e.stateNode=t;e:{switch(o=Xp(n,r),n){case"dialog":Oe("cancel",t),Oe("close",t),i=r;break;case"iframe":case"object":case"embed":Oe("load",t),i=r;break;case"video":case"audio":for(i=0;i<Xa.length;i++)Oe(Xa[i],t);i=r;break;case"source":Oe("error",t),i=r;break;case"img":case"image":case"link":Oe("error",t),Oe("load",t),i=r;break;case"details":Oe("toggle",t),i=r;break;case"input":f_(t,r),i=Kp(t,r),Oe("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ge({},r,{value:void 0}),Oe("invalid",t);break;case"textarea":m_(t,r),i=Hp(t,r),Oe("invalid",t);break;default:i=r}Yp(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?oT(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&iT(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Rl(t,l):typeof l=="number"&&Rl(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Pl.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Oe("scroll",t):l!=null&&Mg(t,s,l,o))}switch(n){case"input":eu(t),p_(t,r,!1);break;case"textarea":eu(t),g_(t);break;case"option":r.value!=null&&t.setAttribute("value",""+mi(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?yo(t,!!r.multiple,s,!1):r.defaultValue!=null&&yo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=gd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return St(e),null;case 6:if(t&&e.stateNode!=null)C1(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Q(166));if(n=ts(zl.current),ts(Gn.current),cu(e)){if(r=e.stateNode,n=e.memoizedProps,r[zn]=e,(s=r.nodeValue!==n)&&(t=cn,t!==null))switch(t.tag){case 3:lu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&lu(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[zn]=e,e.stateNode=r}return St(e),null;case 13:if(Me(Be),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ue&&on!==null&&e.mode&1&&!(e.flags&128))WT(),Po(),e.flags|=98560,s=!1;else if(s=cu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Q(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Q(317));s[zn]=e}else Po(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;St(e),s=!1}else Nn!==null&&(Rm(Nn),Nn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Be.current&1?at===0&&(at=3):wy())),e.updateQueue!==null&&(e.flags|=4),St(e),null);case 4:return No(),Em(t,e),t===null&&Ml(e.stateNode.containerInfo),St(e),null;case 10:return ry(e.type._context),St(e),null;case 17:return Zt(e.type)&&yd(),St(e),null;case 19:if(Me(Be),s=e.memoizedState,s===null)return St(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)ja(s,!1);else{if(at!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Td(t),o!==null){for(e.flags|=128,ja(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ne(Be,Be.current&1|2),e.child}t=t.sibling}s.tail!==null&&tt()>Vo&&(e.flags|=128,r=!0,ja(s,!1),e.lanes=4194304)}else{if(!r)if(t=Td(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ja(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ue)return St(e),null}else 2*tt()-s.renderingStartTime>Vo&&n!==1073741824&&(e.flags|=128,r=!0,ja(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=tt(),e.sibling=null,n=Be.current,Ne(Be,r?n&1|2:n&1),e):(St(e),null);case 22:case 23:return _y(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?sn&1073741824&&(St(e),e.subtreeFlags&6&&(e.flags|=8192)):St(e),null;case 24:return null;case 25:return null}throw Error(Q(156,e.tag))}function WN(t,e){switch(Zg(e),e.tag){case 1:return Zt(e.type)&&yd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return No(),Me(Jt),Me(Vt),ly(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ay(e),null;case 13:if(Me(Be),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Q(340));Po()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Me(Be),null;case 4:return No(),null;case 10:return ry(e.type._context),null;case 22:case 23:return _y(),null;case 24:return null;default:return null}}var hu=!1,Ct=!1,HN=typeof WeakSet=="function"?WeakSet:Set,ne=null;function lo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Xe(t,e,r)}else n.current=null}function Tm(t,e,n){try{n()}catch(r){Xe(t,e,r)}}var sw=!1;function QN(t,e){if(am=fd,t=VT(),Xg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,h=0,f=t,p=null;t:for(;;){for(var v;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(v=f.firstChild)!==null;)p=f,f=v;for(;;){if(f===t)break t;if(p===n&&++u===i&&(a=o),p===s&&++h===r&&(l=o),(v=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=v}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(lm={focusedElem:t,selectionRange:n},fd=!1,ne=e;ne!==null;)if(e=ne,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ne=t;else for(;ne!==null;){e=ne;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var E=b.memoizedProps,A=b.memoizedState,_=e.stateNode,y=_.getSnapshotBeforeUpdate(e.elementType===e.type?E:Pn(e.type,E),A);_.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Q(163))}}catch(P){Xe(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,ne=t;break}ne=e.return}return b=sw,sw=!1,b}function pl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Tm(e,n,s)}i=i.next}while(i!==r)}}function wh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Sm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function P1(t){var e=t.alternate;e!==null&&(t.alternate=null,P1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[zn],delete e[Ul],delete e[dm],delete e[RN],delete e[NN])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function R1(t){return t.tag===5||t.tag===3||t.tag===4}function ow(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||R1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Im(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=gd));else if(r!==4&&(t=t.child,t!==null))for(Im(t,e,n),t=t.sibling;t!==null;)Im(t,e,n),t=t.sibling}function Am(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Am(t,e,n),t=t.sibling;t!==null;)Am(t,e,n),t=t.sibling}var gt=null,Rn=!1;function jr(t,e,n){for(n=n.child;n!==null;)N1(t,e,n),n=n.sibling}function N1(t,e,n){if(Kn&&typeof Kn.onCommitFiberUnmount=="function")try{Kn.onCommitFiberUnmount(hh,n)}catch{}switch(n.tag){case 5:Ct||lo(n,e);case 6:var r=gt,i=Rn;gt=null,jr(t,e,n),gt=r,Rn=i,gt!==null&&(Rn?(t=gt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):gt.removeChild(n.stateNode));break;case 18:gt!==null&&(Rn?(t=gt,n=n.stateNode,t.nodeType===8?Xf(t.parentNode,n):t.nodeType===1&&Xf(t,n),jl(t)):Xf(gt,n.stateNode));break;case 4:r=gt,i=Rn,gt=n.stateNode.containerInfo,Rn=!0,jr(t,e,n),gt=r,Rn=i;break;case 0:case 11:case 14:case 15:if(!Ct&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Tm(n,e,o),i=i.next}while(i!==r)}jr(t,e,n);break;case 1:if(!Ct&&(lo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Xe(n,e,a)}jr(t,e,n);break;case 21:jr(t,e,n);break;case 22:n.mode&1?(Ct=(r=Ct)||n.memoizedState!==null,jr(t,e,n),Ct=r):jr(t,e,n);break;default:jr(t,e,n)}}function aw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new HN),e.forEach(function(r){var i=i2.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Cn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:gt=a.stateNode,Rn=!1;break e;case 3:gt=a.stateNode.containerInfo,Rn=!0;break e;case 4:gt=a.stateNode.containerInfo,Rn=!0;break e}a=a.return}if(gt===null)throw Error(Q(160));N1(s,o,i),gt=null,Rn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Xe(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)D1(e,t),e=e.sibling}function D1(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Cn(e,t),Fn(t),r&4){try{pl(3,t,t.return),wh(3,t)}catch(E){Xe(t,t.return,E)}try{pl(5,t,t.return)}catch(E){Xe(t,t.return,E)}}break;case 1:Cn(e,t),Fn(t),r&512&&n!==null&&lo(n,n.return);break;case 5:if(Cn(e,t),Fn(t),r&512&&n!==null&&lo(n,n.return),t.flags&32){var i=t.stateNode;try{Rl(i,"")}catch(E){Xe(t,t.return,E)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&tT(i,s),Xp(a,o);var u=Xp(a,s);for(o=0;o<l.length;o+=2){var h=l[o],f=l[o+1];h==="style"?oT(i,f):h==="dangerouslySetInnerHTML"?iT(i,f):h==="children"?Rl(i,f):Mg(i,h,f,u)}switch(a){case"input":Gp(i,s);break;case"textarea":nT(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var v=s.value;v!=null?yo(i,!!s.multiple,v,!1):p!==!!s.multiple&&(s.defaultValue!=null?yo(i,!!s.multiple,s.defaultValue,!0):yo(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ul]=s}catch(E){Xe(t,t.return,E)}}break;case 6:if(Cn(e,t),Fn(t),r&4){if(t.stateNode===null)throw Error(Q(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(E){Xe(t,t.return,E)}}break;case 3:if(Cn(e,t),Fn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{jl(e.containerInfo)}catch(E){Xe(t,t.return,E)}break;case 4:Cn(e,t),Fn(t);break;case 13:Cn(e,t),Fn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(yy=tt())),r&4&&aw(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Ct=(u=Ct)||h,Cn(e,t),Ct=u):Cn(e,t),Fn(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(ne=t,h=t.child;h!==null;){for(f=ne=h;ne!==null;){switch(p=ne,v=p.child,p.tag){case 0:case 11:case 14:case 15:pl(4,p,p.return);break;case 1:lo(p,p.return);var b=p.stateNode;if(typeof b.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(E){Xe(r,n,E)}}break;case 5:lo(p,p.return);break;case 22:if(p.memoizedState!==null){cw(f);continue}}v!==null?(v.return=p,ne=v):cw(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{i=f.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=sT("display",o))}catch(E){Xe(t,t.return,E)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(E){Xe(t,t.return,E)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Cn(e,t),Fn(t),r&4&&aw(t);break;case 21:break;default:Cn(e,t),Fn(t)}}function Fn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(R1(n)){var r=n;break e}n=n.return}throw Error(Q(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Rl(i,""),r.flags&=-33);var s=ow(t);Am(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=ow(t);Im(t,a,o);break;default:throw Error(Q(161))}}catch(l){Xe(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function YN(t,e,n){ne=t,V1(t)}function V1(t,e,n){for(var r=(t.mode&1)!==0;ne!==null;){var i=ne,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||hu;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Ct;a=hu;var u=Ct;if(hu=o,(Ct=l)&&!u)for(ne=i;ne!==null;)o=ne,l=o.child,o.tag===22&&o.memoizedState!==null?uw(i):l!==null?(l.return=o,ne=l):uw(i);for(;s!==null;)ne=s,V1(s),s=s.sibling;ne=i,hu=a,Ct=u}lw(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ne=s):lw(t)}}function lw(t){for(;ne!==null;){var e=ne;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ct||wh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ct)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Pn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&G_(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}G_(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&jl(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Q(163))}Ct||e.flags&512&&Sm(e)}catch(p){Xe(e,e.return,p)}}if(e===t){ne=null;break}if(n=e.sibling,n!==null){n.return=e.return,ne=n;break}ne=e.return}}function cw(t){for(;ne!==null;){var e=ne;if(e===t){ne=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ne=n;break}ne=e.return}}function uw(t){for(;ne!==null;){var e=ne;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{wh(4,e)}catch(l){Xe(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Xe(e,i,l)}}var s=e.return;try{Sm(e)}catch(l){Xe(e,s,l)}break;case 5:var o=e.return;try{Sm(e)}catch(l){Xe(e,o,l)}}}catch(l){Xe(e,e.return,l)}if(e===t){ne=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ne=a;break}ne=e.return}}var XN=Math.ceil,Ad=kr.ReactCurrentDispatcher,my=kr.ReactCurrentOwner,bn=kr.ReactCurrentBatchConfig,xe=0,ht=null,st=null,_t=0,sn=0,co=Si(0),at=0,Gl=null,ps=0,xh=0,gy=0,ml=null,Ht=null,yy=0,Vo=1/0,ir=null,kd=!1,km=null,oi=null,fu=!1,Zr=null,Cd=0,gl=0,Cm=null,zu=-1,$u=0;function Bt(){return xe&6?tt():zu!==-1?zu:zu=tt()}function ai(t){return t.mode&1?xe&2&&_t!==0?_t&-_t:VN.transition!==null?($u===0&&($u=vT()),$u):(t=Ie,t!==0||(t=window.event,t=t===void 0?16:ST(t.type)),t):1}function Vn(t,e,n,r){if(50<gl)throw gl=0,Cm=null,Error(Q(185));hc(t,n,r),(!(xe&2)||t!==ht)&&(t===ht&&(!(xe&2)&&(xh|=n),at===4&&Gr(t,_t)),en(t,r),n===1&&xe===0&&!(e.mode&1)&&(Vo=tt()+500,yh&&Ii()))}function en(t,e){var n=t.callbackNode;VR(t,e);var r=hd(t,t===ht?_t:0);if(r===0)n!==null&&__(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&__(n),e===1)t.tag===0?DN(dw.bind(null,t)):qT(dw.bind(null,t)),CN(function(){!(xe&6)&&Ii()}),n=null;else{switch(_T(r)){case 1:n=$g;break;case 4:n=gT;break;case 16:n=dd;break;case 536870912:n=yT;break;default:n=dd}n=z1(n,j1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function j1(t,e){if(zu=-1,$u=0,xe&6)throw Error(Q(327));var n=t.callbackNode;if(bo()&&t.callbackNode!==n)return null;var r=hd(t,t===ht?_t:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Pd(t,r);else{e=r;var i=xe;xe|=2;var s=L1();(ht!==t||_t!==e)&&(ir=null,Vo=tt()+500,ss(t,e));do try{e2();break}catch(a){O1(t,a)}while(!0);ny(),Ad.current=s,xe=i,st!==null?e=0:(ht=null,_t=0,e=at)}if(e!==0){if(e===2&&(i=nm(t),i!==0&&(r=i,e=Pm(t,i))),e===1)throw n=Gl,ss(t,0),Gr(t,r),en(t,tt()),n;if(e===6)Gr(t,r);else{if(i=t.current.alternate,!(r&30)&&!JN(i)&&(e=Pd(t,r),e===2&&(s=nm(t),s!==0&&(r=s,e=Pm(t,s))),e===1))throw n=Gl,ss(t,0),Gr(t,r),en(t,tt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Q(345));case 2:zi(t,Ht,ir);break;case 3:if(Gr(t,r),(r&130023424)===r&&(e=yy+500-tt(),10<e)){if(hd(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Bt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=um(zi.bind(null,t,Ht,ir),e);break}zi(t,Ht,ir);break;case 4:if(Gr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Dn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=tt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*XN(r/1960))-r,10<r){t.timeoutHandle=um(zi.bind(null,t,Ht,ir),r);break}zi(t,Ht,ir);break;case 5:zi(t,Ht,ir);break;default:throw Error(Q(329))}}}return en(t,tt()),t.callbackNode===n?j1.bind(null,t):null}function Pm(t,e){var n=ml;return t.current.memoizedState.isDehydrated&&(ss(t,e).flags|=256),t=Pd(t,e),t!==2&&(e=Ht,Ht=n,e!==null&&Rm(e)),t}function Rm(t){Ht===null?Ht=t:Ht.push.apply(Ht,t)}function JN(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!jn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Gr(t,e){for(e&=~gy,e&=~xh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Dn(e),r=1<<n;t[n]=-1,e&=~r}}function dw(t){if(xe&6)throw Error(Q(327));bo();var e=hd(t,0);if(!(e&1))return en(t,tt()),null;var n=Pd(t,e);if(t.tag!==0&&n===2){var r=nm(t);r!==0&&(e=r,n=Pm(t,r))}if(n===1)throw n=Gl,ss(t,0),Gr(t,e),en(t,tt()),n;if(n===6)throw Error(Q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,zi(t,Ht,ir),en(t,tt()),null}function vy(t,e){var n=xe;xe|=1;try{return t(e)}finally{xe=n,xe===0&&(Vo=tt()+500,yh&&Ii())}}function ms(t){Zr!==null&&Zr.tag===0&&!(xe&6)&&bo();var e=xe;xe|=1;var n=bn.transition,r=Ie;try{if(bn.transition=null,Ie=1,t)return t()}finally{Ie=r,bn.transition=n,xe=e,!(xe&6)&&Ii()}}function _y(){sn=co.current,Me(co)}function ss(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,kN(n)),st!==null)for(n=st.return;n!==null;){var r=n;switch(Zg(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&yd();break;case 3:No(),Me(Jt),Me(Vt),ly();break;case 5:ay(r);break;case 4:No();break;case 13:Me(Be);break;case 19:Me(Be);break;case 10:ry(r.type._context);break;case 22:case 23:_y()}n=n.return}if(ht=t,st=t=li(t.current,null),_t=sn=e,at=0,Gl=null,gy=xh=ps=0,Ht=ml=null,es!==null){for(e=0;e<es.length;e++)if(n=es[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}es=null}return t}function O1(t,e){do{var n=st;try{if(ny(),Fu.current=Id,Sd){for(var r=qe.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Sd=!1}if(fs=0,dt=ot=qe=null,fl=!1,$l=0,my.current=null,n===null||n.return===null){at=1,Gl=e,st=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=_t,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var v=J_(o);if(v!==null){v.flags&=-257,Z_(v,o,a,s,e),v.mode&1&&X_(s,u,e),e=v,l=u;var b=e.updateQueue;if(b===null){var E=new Set;E.add(l),e.updateQueue=E}else b.add(l);break e}else{if(!(e&1)){X_(s,u,e),wy();break e}l=Error(Q(426))}}else if(Ue&&a.mode&1){var A=J_(o);if(A!==null){!(A.flags&65536)&&(A.flags|=256),Z_(A,o,a,s,e),ey(Do(l,a));break e}}s=l=Do(l,a),at!==4&&(at=2),ml===null?ml=[s]:ml.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var _=_1(s,l,e);K_(s,_);break e;case 1:a=l;var y=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(oi===null||!oi.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var P=w1(s,a,e);K_(s,P);break e}}s=s.return}while(s!==null)}F1(n)}catch(V){e=V,st===n&&n!==null&&(st=n=n.return);continue}break}while(!0)}function L1(){var t=Ad.current;return Ad.current=Id,t===null?Id:t}function wy(){(at===0||at===3||at===2)&&(at=4),ht===null||!(ps&268435455)&&!(xh&268435455)||Gr(ht,_t)}function Pd(t,e){var n=xe;xe|=2;var r=L1();(ht!==t||_t!==e)&&(ir=null,ss(t,e));do try{ZN();break}catch(i){O1(t,i)}while(!0);if(ny(),xe=n,Ad.current=r,st!==null)throw Error(Q(261));return ht=null,_t=0,at}function ZN(){for(;st!==null;)M1(st)}function e2(){for(;st!==null&&!SR();)M1(st)}function M1(t){var e=B1(t.alternate,t,sn);t.memoizedProps=t.pendingProps,e===null?F1(t):st=e,my.current=null}function F1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=WN(n,e),n!==null){n.flags&=32767,st=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{at=6,st=null;return}}else if(n=GN(n,e,sn),n!==null){st=n;return}if(e=e.sibling,e!==null){st=e;return}st=e=t}while(e!==null);at===0&&(at=5)}function zi(t,e,n){var r=Ie,i=bn.transition;try{bn.transition=null,Ie=1,t2(t,e,n,r)}finally{bn.transition=i,Ie=r}return null}function t2(t,e,n,r){do bo();while(Zr!==null);if(xe&6)throw Error(Q(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Q(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(jR(t,s),t===ht&&(st=ht=null,_t=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||fu||(fu=!0,z1(dd,function(){return bo(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=bn.transition,bn.transition=null;var o=Ie;Ie=1;var a=xe;xe|=4,my.current=null,QN(t,n),D1(n,t),xN(lm),fd=!!am,lm=am=null,t.current=n,YN(n),IR(),xe=a,Ie=o,bn.transition=s}else t.current=n;if(fu&&(fu=!1,Zr=t,Cd=i),s=t.pendingLanes,s===0&&(oi=null),CR(n.stateNode),en(t,tt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(kd)throw kd=!1,t=km,km=null,t;return Cd&1&&t.tag!==0&&bo(),s=t.pendingLanes,s&1?t===Cm?gl++:(gl=0,Cm=t):gl=0,Ii(),null}function bo(){if(Zr!==null){var t=_T(Cd),e=bn.transition,n=Ie;try{if(bn.transition=null,Ie=16>t?16:t,Zr===null)var r=!1;else{if(t=Zr,Zr=null,Cd=0,xe&6)throw Error(Q(331));var i=xe;for(xe|=4,ne=t.current;ne!==null;){var s=ne,o=s.child;if(ne.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(ne=u;ne!==null;){var h=ne;switch(h.tag){case 0:case 11:case 15:pl(8,h,s)}var f=h.child;if(f!==null)f.return=h,ne=f;else for(;ne!==null;){h=ne;var p=h.sibling,v=h.return;if(P1(h),h===u){ne=null;break}if(p!==null){p.return=v,ne=p;break}ne=v}}}var b=s.alternate;if(b!==null){var E=b.child;if(E!==null){b.child=null;do{var A=E.sibling;E.sibling=null,E=A}while(E!==null)}}ne=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ne=o;else e:for(;ne!==null;){if(s=ne,s.flags&2048)switch(s.tag){case 0:case 11:case 15:pl(9,s,s.return)}var _=s.sibling;if(_!==null){_.return=s.return,ne=_;break e}ne=s.return}}var y=t.current;for(ne=y;ne!==null;){o=ne;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,ne=w;else e:for(o=y;ne!==null;){if(a=ne,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:wh(9,a)}}catch(V){Xe(a,a.return,V)}if(a===o){ne=null;break e}var P=a.sibling;if(P!==null){P.return=a.return,ne=P;break e}ne=a.return}}if(xe=i,Ii(),Kn&&typeof Kn.onPostCommitFiberRoot=="function")try{Kn.onPostCommitFiberRoot(hh,t)}catch{}r=!0}return r}finally{Ie=n,bn.transition=e}}return!1}function hw(t,e,n){e=Do(n,e),e=_1(t,e,1),t=si(t,e,1),e=Bt(),t!==null&&(hc(t,1,e),en(t,e))}function Xe(t,e,n){if(t.tag===3)hw(t,t,n);else for(;e!==null;){if(e.tag===3){hw(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(oi===null||!oi.has(r))){t=Do(n,t),t=w1(e,t,1),e=si(e,t,1),t=Bt(),e!==null&&(hc(e,1,t),en(e,t));break}}e=e.return}}function n2(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Bt(),t.pingedLanes|=t.suspendedLanes&n,ht===t&&(_t&n)===n&&(at===4||at===3&&(_t&130023424)===_t&&500>tt()-yy?ss(t,0):gy|=n),en(t,e)}function U1(t,e){e===0&&(t.mode&1?(e=ru,ru<<=1,!(ru&130023424)&&(ru=4194304)):e=1);var n=Bt();t=br(t,e),t!==null&&(hc(t,e,n),en(t,n))}function r2(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),U1(t,n)}function i2(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Q(314))}r!==null&&r.delete(e),U1(t,n)}var B1;B1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Jt.current)Qt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Qt=!1,KN(t,e,n);Qt=!!(t.flags&131072)}else Qt=!1,Ue&&e.flags&1048576&&KT(e,wd,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Bu(t,e),t=e.pendingProps;var i=Co(e,Vt.current);xo(e,n),i=uy(null,e,r,t,i,n);var s=dy();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Zt(r)?(s=!0,vd(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,sy(e),i.updater=_h,e.stateNode=i,i._reactInternals=e,ym(e,r,t,n),e=wm(null,e,r,!0,s,n)):(e.tag=0,Ue&&s&&Jg(e),Ut(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Bu(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=o2(r),t=Pn(r,t),i){case 0:e=_m(null,e,r,t,n);break e;case 1:e=nw(null,e,r,t,n);break e;case 11:e=ew(null,e,r,t,n);break e;case 14:e=tw(null,e,r,Pn(r.type,t),n);break e}throw Error(Q(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Pn(r,i),_m(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Pn(r,i),nw(t,e,r,i,n);case 3:e:{if(T1(e),t===null)throw Error(Q(387));r=e.pendingProps,s=e.memoizedState,i=s.element,XT(t,e),Ed(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Do(Error(Q(423)),e),e=rw(t,e,r,n,i);break e}else if(r!==i){i=Do(Error(Q(424)),e),e=rw(t,e,r,n,i);break e}else for(on=ii(e.stateNode.containerInfo.firstChild),cn=e,Ue=!0,Nn=null,n=QT(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Po(),r===i){e=Er(t,e,n);break e}Ut(t,e,r,n)}e=e.child}return e;case 5:return JT(e),t===null&&pm(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,cm(r,i)?o=null:s!==null&&cm(r,s)&&(e.flags|=32),E1(t,e),Ut(t,e,o,n),e.child;case 6:return t===null&&pm(e),null;case 13:return S1(t,e,n);case 4:return oy(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ro(e,null,r,n):Ut(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Pn(r,i),ew(t,e,r,i,n);case 7:return Ut(t,e,e.pendingProps,n),e.child;case 8:return Ut(t,e,e.pendingProps.children,n),e.child;case 12:return Ut(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ne(xd,r._currentValue),r._currentValue=o,s!==null)if(jn(s.value,o)){if(s.children===i.children&&!Jt.current){e=Er(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=mr(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),mm(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Q(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),mm(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ut(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,xo(e,n),i=En(i),r=r(i),e.flags|=1,Ut(t,e,r,n),e.child;case 14:return r=e.type,i=Pn(r,e.pendingProps),i=Pn(r.type,i),tw(t,e,r,i,n);case 15:return x1(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Pn(r,i),Bu(t,e),e.tag=1,Zt(r)?(t=!0,vd(e)):t=!1,xo(e,n),v1(e,r,i),ym(e,r,i,n),wm(null,e,r,!0,t,n);case 19:return I1(t,e,n);case 22:return b1(t,e,n)}throw Error(Q(156,e.tag))};function z1(t,e){return mT(t,e)}function s2(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xn(t,e,n,r){return new s2(t,e,n,r)}function xy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function o2(t){if(typeof t=="function")return xy(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ug)return 11;if(t===Bg)return 14}return 2}function li(t,e){var n=t.alternate;return n===null?(n=xn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function qu(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")xy(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Zs:return os(n.children,i,s,e);case Fg:o=8,i|=8;break;case Bp:return t=xn(12,n,e,i|2),t.elementType=Bp,t.lanes=s,t;case zp:return t=xn(13,n,e,i),t.elementType=zp,t.lanes=s,t;case $p:return t=xn(19,n,e,i),t.elementType=$p,t.lanes=s,t;case JE:return bh(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case YE:o=10;break e;case XE:o=9;break e;case Ug:o=11;break e;case Bg:o=14;break e;case $r:o=16,r=null;break e}throw Error(Q(130,t==null?t:typeof t,""))}return e=xn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function os(t,e,n,r){return t=xn(7,t,r,e),t.lanes=n,t}function bh(t,e,n,r){return t=xn(22,t,r,e),t.elementType=JE,t.lanes=n,t.stateNode={isHidden:!1},t}function sp(t,e,n){return t=xn(6,t,null,e),t.lanes=n,t}function op(t,e,n){return e=xn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function a2(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Uf(0),this.expirationTimes=Uf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Uf(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function by(t,e,n,r,i,s,o,a,l){return t=new a2(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=xn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},sy(s),t}function l2(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Js,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function $1(t){if(!t)return gi;t=t._reactInternals;e:{if(Cs(t)!==t||t.tag!==1)throw Error(Q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Zt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Q(171))}if(t.tag===1){var n=t.type;if(Zt(n))return $T(t,n,e)}return e}function q1(t,e,n,r,i,s,o,a,l){return t=by(n,r,!0,t,i,s,o,a,l),t.context=$1(null),n=t.current,r=Bt(),i=ai(n),s=mr(r,i),s.callback=e??null,si(n,s,i),t.current.lanes=i,hc(t,i,r),en(t,r),t}function Eh(t,e,n,r){var i=e.current,s=Bt(),o=ai(i);return n=$1(n),e.context===null?e.context=n:e.pendingContext=n,e=mr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=si(i,e,o),t!==null&&(Vn(t,i,o,s),Mu(t,i,o)),o}function Rd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function fw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ey(t,e){fw(t,e),(t=t.alternate)&&fw(t,e)}function c2(){return null}var K1=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ty(t){this._internalRoot=t}Th.prototype.render=Ty.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Q(409));Eh(t,e,null,null)};Th.prototype.unmount=Ty.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ms(function(){Eh(null,t,null,null)}),e[xr]=null}};function Th(t){this._internalRoot=t}Th.prototype.unstable_scheduleHydration=function(t){if(t){var e=bT();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Kr.length&&e!==0&&e<Kr[n].priority;n++);Kr.splice(n,0,t),n===0&&TT(t)}};function Sy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Sh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function pw(){}function u2(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Rd(o);s.call(u)}}var o=q1(e,r,t,0,null,!1,!1,"",pw);return t._reactRootContainer=o,t[xr]=o.current,Ml(t.nodeType===8?t.parentNode:t),ms(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=Rd(l);a.call(u)}}var l=by(t,0,!1,null,null,!1,!1,"",pw);return t._reactRootContainer=l,t[xr]=l.current,Ml(t.nodeType===8?t.parentNode:t),ms(function(){Eh(e,l,n,r)}),l}function Ih(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Rd(o);a.call(l)}}Eh(e,o,t,i)}else o=u2(n,e,t,i,r);return Rd(o)}wT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ya(e.pendingLanes);n!==0&&(qg(e,n|1),en(e,tt()),!(xe&6)&&(Vo=tt()+500,Ii()))}break;case 13:ms(function(){var r=br(t,1);if(r!==null){var i=Bt();Vn(r,t,1,i)}}),Ey(t,1)}};Kg=function(t){if(t.tag===13){var e=br(t,134217728);if(e!==null){var n=Bt();Vn(e,t,134217728,n)}Ey(t,134217728)}};xT=function(t){if(t.tag===13){var e=ai(t),n=br(t,e);if(n!==null){var r=Bt();Vn(n,t,e,r)}Ey(t,e)}};bT=function(){return Ie};ET=function(t,e){var n=Ie;try{return Ie=t,e()}finally{Ie=n}};Zp=function(t,e,n){switch(e){case"input":if(Gp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=gh(r);if(!i)throw Error(Q(90));eT(r),Gp(r,i)}}}break;case"textarea":nT(t,n);break;case"select":e=n.value,e!=null&&yo(t,!!n.multiple,e,!1)}};cT=vy;uT=ms;var d2={usingClientEntryPoint:!1,Events:[pc,ro,gh,aT,lT,vy]},Oa={findFiberByHostInstance:Zi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},h2={bundleType:Oa.bundleType,version:Oa.version,rendererPackageName:Oa.rendererPackageName,rendererConfig:Oa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:kr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=fT(t),t===null?null:t.stateNode},findFiberByHostInstance:Oa.findFiberByHostInstance||c2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pu.isDisabled&&pu.supportsFiber)try{hh=pu.inject(h2),Kn=pu}catch{}}pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=d2;pn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Sy(e))throw Error(Q(200));return l2(t,e,null,n)};pn.createRoot=function(t,e){if(!Sy(t))throw Error(Q(299));var n=!1,r="",i=K1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=by(t,1,!1,null,null,n,!1,r,i),t[xr]=e.current,Ml(t.nodeType===8?t.parentNode:t),new Ty(e)};pn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Q(188)):(t=Object.keys(t).join(","),Error(Q(268,t)));return t=fT(e),t=t===null?null:t.stateNode,t};pn.flushSync=function(t){return ms(t)};pn.hydrate=function(t,e,n){if(!Sh(e))throw Error(Q(200));return Ih(null,t,e,!0,n)};pn.hydrateRoot=function(t,e,n){if(!Sy(t))throw Error(Q(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=K1;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=q1(e,null,t,1,n??null,i,!1,s,o),t[xr]=e.current,Ml(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Th(e)};pn.render=function(t,e,n){if(!Sh(e))throw Error(Q(200));return Ih(null,t,e,!1,n)};pn.unmountComponentAtNode=function(t){if(!Sh(t))throw Error(Q(40));return t._reactRootContainer?(ms(function(){Ih(null,null,t,!1,function(){t._reactRootContainer=null,t[xr]=null})}),!0):!1};pn.unstable_batchedUpdates=vy;pn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Sh(n))throw Error(Q(200));if(t==null||t._reactInternals===void 0)throw Error(Q(38));return Ih(t,e,n,!1,r)};pn.version="18.3.1-next-f1338f8080-20240426";function G1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(G1)}catch(t){console.error(t)}}G1(),GE.exports=pn;var f2=GE.exports,W1,mw=f2;W1=mw.createRoot,mw.hydrateRoot;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var p2={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m2=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),we=(t,e)=>{const n=R.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:a="",children:l,...u},h)=>R.createElement("svg",{ref:h,...p2,width:i,height:i,stroke:r,strokeWidth:o?Number(s)*24/Number(i):s,className:["lucide",`lucide-${m2(t)}`,a].join(" "),...u},[...e.map(([f,p])=>R.createElement(f,p)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H1=we("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ai=we("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g2=we("Anchor",[["path",{d:"M12 22V8",key:"qkxhtm"}],["path",{d:"M5 12H2a10 10 0 0 0 20 0h-3",key:"1hv3nh"}],["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y2=we("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q1=we("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y1=we("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X1=we("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J1=we("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v2=we("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _2=we("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w2=we("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x2=we("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z1=we("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b2=we("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eS=we("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E2=we("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T2=we("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S2=we("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I2=we("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ci=we("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cr=we("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ah=we("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gc=we("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iy=we("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yc=we("Ship",[["path",{d:"M2 21c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1 .6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"iegodh"}],["path",{d:"M19.38 20A11.6 11.6 0 0 0 21 14l-9-4-9 4c0 2.9.94 5.34 2.81 7.76",key:"fp8vka"}],["path",{d:"M19 13V7a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v6",key:"qpkstq"}],["path",{d:"M12 10v4",key:"1kjpxc"}],["path",{d:"M12 2v3",key:"qbqxhf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A2=we("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k2=we("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C2=we("SunMedium",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 3v1",key:"1asbbs"}],["path",{d:"M12 20v1",key:"1wcdkc"}],["path",{d:"M3 12h1",key:"lp3yf2"}],["path",{d:"M20 12h1",key:"1vloll"}],["path",{d:"m18.364 5.636-.707.707",key:"1hakh0"}],["path",{d:"m6.343 17.657-.707.707",key:"18m9nf"}],["path",{d:"m5.636 5.636.707.707",key:"1xv1c5"}],["path",{d:"m17.657 17.657.707.707",key:"vl76zb"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P2=we("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vc=we("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R2=we("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kh=we("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tS=we("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=we("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function N2(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}function Ch(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Nm=t=>Array.isArray(t);function nS(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function Wl(t){return typeof t=="string"||Array.isArray(t)}function gw(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function Ay(t,e,n,r){if(typeof e=="function"){const[i,s]=gw(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=gw(r);e=e(n!==void 0?n:t.custom,i,s)}return e}function Ph(t,e,n){const r=t.getProps();return Ay(r,e,n!==void 0?n:r.custom,t)}const ky=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Cy=["initial",...ky],_c=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ps=new Set(_c),gr=t=>t*1e3,yr=t=>t/1e3,D2={type:"spring",stiffness:500,damping:25,restSpeed:10},V2=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),j2={type:"keyframes",duration:.8},O2={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},L2=(t,{keyframes:e})=>e.length>2?j2:Ps.has(t)?t.startsWith("scale")?V2(e[1]):D2:O2;function Py(t,e){return t?t[e]||t.default||t:void 0}const M2={skipAnimations:!1,useManualTiming:!1},F2=t=>t!==null;function Rh(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(F2),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const Dt=t=>t;function U2(t){let e=new Set,n=new Set,r=!1,i=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(u){s.has(u)&&(l.schedule(u),t()),u(o)}const l={schedule:(u,h=!1,f=!1)=>{const v=f&&r?e:n;return h&&s.add(u),v.has(u)||v.add(u),u},cancel:u=>{n.delete(u),s.delete(u)},process:u=>{if(o=u,r){i=!0;return}r=!0,[e,n]=[n,e],n.clear(),e.forEach(a),r=!1,i&&(i=!1,l.process(u))}};return l}const mu=["read","resolveKeyframes","update","preRender","render","postRender"],B2=40;function rS(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=mu.reduce((_,y)=>(_[y]=U2(s),_),{}),{read:a,resolveKeyframes:l,update:u,preRender:h,render:f,postRender:p}=o,v=()=>{const _=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(_-i.timestamp,B2),1),i.timestamp=_,i.isProcessing=!0,a.process(i),l.process(i),u.process(i),h.process(i),f.process(i),p.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(v))},b=()=>{n=!0,r=!0,i.isProcessing||t(v)};return{schedule:mu.reduce((_,y)=>{const w=o[y];return _[y]=(P,V=!1,O=!1)=>(n||b(),w.schedule(P,V,O)),_},{}),cancel:_=>{for(let y=0;y<mu.length;y++)o[mu[y]].cancel(_)},state:i,steps:o}}const{schedule:Ae,cancel:yi,state:yt,steps:ap}=rS(typeof requestAnimationFrame<"u"?requestAnimationFrame:Dt,!0),iS=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,z2=1e-7,$2=12;function q2(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=iS(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>z2&&++a<$2);return o}function wc(t,e,n,r){if(t===e&&n===r)return Dt;const i=s=>q2(s,0,1,t,n);return s=>s===0||s===1?s:iS(i(s),e,r)}const sS=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,oS=t=>e=>1-t(1-e),aS=wc(.33,1.53,.69,.99),Ry=oS(aS),lS=sS(Ry),cS=t=>(t*=2)<1?.5*Ry(t):.5*(2-Math.pow(2,-10*(t-1))),Ny=t=>1-Math.sin(Math.acos(t)),uS=oS(Ny),dS=sS(Ny),hS=t=>/^0[^.\s]+$/u.test(t);function K2(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||hS(t):!0}let Dm=Dt;const fS=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),pS=t=>e=>typeof e=="string"&&e.startsWith(t),mS=pS("--"),G2=pS("var(--"),Dy=t=>G2(t)?W2.test(t.split("/*")[0].trim()):!1,W2=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,H2=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Q2(t){const e=H2.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function gS(t,e,n=1){const[r,i]=Q2(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return fS(o)?parseFloat(o):o}return Dy(i)?gS(i,e,n+1):i}const Tr=(t,e,n)=>n>e?e:n<t?t:n,ra={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Hl={...ra,transform:t=>Tr(0,1,t)},gu={...ra,default:1},xc=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Br=xc("deg"),Wn=xc("%"),le=xc("px"),Y2=xc("vh"),X2=xc("vw"),yw={...Wn,parse:t=>Wn.parse(t)/100,transform:t=>Wn.transform(t*100)},J2=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),vw=t=>t===ra||t===le,_w=(t,e)=>parseFloat(t.split(", ")[e]),ww=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return _w(i[1],e);{const s=r.match(/^matrix\((.+)\)$/u);return s?_w(s[1],t):0}},Z2=new Set(["x","y","z"]),eD=_c.filter(t=>!Z2.has(t));function tD(t){const e=[];return eD.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const jo={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:ww(4,13),y:ww(5,14)};jo.translateX=jo.x;jo.translateY=jo.y;const yS=t=>e=>e.test(t),nD={test:t=>t==="auto",parse:t=>t},vS=[ra,le,Wn,Br,X2,Y2,nD],xw=t=>vS.find(yS(t)),as=new Set;let Vm=!1,jm=!1;function _S(){if(jm){const t=Array.from(as).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=tD(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))===null||a===void 0||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}jm=!1,Vm=!1,as.forEach(t=>t.complete()),as.clear()}function wS(){as.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(jm=!0)})}function rD(){wS(),_S()}class Vy{constructor(e,n,r,i,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(as.add(this),Vm||(Vm=!0,Ae.read(wS),Ae.resolveKeyframes(_S))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=i==null?void 0:i.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const l=r.readValue(n,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),i&&o===void 0&&i.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),as.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,as.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const yl=t=>Math.round(t*1e5)/1e5,jy=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function iD(t){return t==null}const sD=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Oy=(t,e)=>n=>!!(typeof n=="string"&&sD.test(n)&&n.startsWith(t)||e&&!iD(n)&&Object.prototype.hasOwnProperty.call(n,e)),xS=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(jy);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},oD=t=>Tr(0,255,t),lp={...ra,transform:t=>Math.round(oD(t))},ns={test:Oy("rgb","red"),parse:xS("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+lp.transform(t)+", "+lp.transform(e)+", "+lp.transform(n)+", "+yl(Hl.transform(r))+")"};function aD(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Om={test:Oy("#"),parse:aD,transform:ns.transform},uo={test:Oy("hsl","hue"),parse:xS("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Wn.transform(yl(e))+", "+Wn.transform(yl(n))+", "+yl(Hl.transform(r))+")"},At={test:t=>ns.test(t)||Om.test(t)||uo.test(t),parse:t=>ns.test(t)?ns.parse(t):uo.test(t)?uo.parse(t):Om.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?ns.transform(t):uo.transform(t)},lD=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function cD(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(jy))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(lD))===null||n===void 0?void 0:n.length)||0)>0}const bS="number",ES="color",uD="var",dD="var(",bw="${}",hD=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ql(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(hD,l=>(At.test(l)?(r.color.push(s),i.push(ES),n.push(At.parse(l))):l.startsWith(dD)?(r.var.push(s),i.push(uD),n.push(l)):(r.number.push(s),i.push(bS),n.push(parseFloat(l))),++s,bw)).split(bw);return{values:n,split:a,indexes:r,types:i}}function TS(t){return Ql(t).values}function SS(t){const{split:e,types:n}=Ql(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===bS?s+=yl(i[o]):a===ES?s+=At.transform(i[o]):s+=i[o]}return s}}const fD=t=>typeof t=="number"?0:t;function pD(t){const e=TS(t);return SS(t)(e.map(fD))}const vi={test:cD,parse:TS,createTransformer:SS,getAnimatableNone:pD},mD=new Set(["brightness","contrast","saturate","opacity"]);function gD(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(jy)||[];if(!r)return t;const i=n.replace(r,"");let s=mD.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const yD=/\b([a-z-]*)\(.*?\)/gu,Lm={...vi,getAnimatableNone:t=>{const e=t.match(yD);return e?e.map(gD).join(" "):t}},vD={borderWidth:le,borderTopWidth:le,borderRightWidth:le,borderBottomWidth:le,borderLeftWidth:le,borderRadius:le,radius:le,borderTopLeftRadius:le,borderTopRightRadius:le,borderBottomRightRadius:le,borderBottomLeftRadius:le,width:le,maxWidth:le,height:le,maxHeight:le,top:le,right:le,bottom:le,left:le,padding:le,paddingTop:le,paddingRight:le,paddingBottom:le,paddingLeft:le,margin:le,marginTop:le,marginRight:le,marginBottom:le,marginLeft:le,backgroundPositionX:le,backgroundPositionY:le},_D={rotate:Br,rotateX:Br,rotateY:Br,rotateZ:Br,scale:gu,scaleX:gu,scaleY:gu,scaleZ:gu,skew:Br,skewX:Br,skewY:Br,distance:le,translateX:le,translateY:le,translateZ:le,x:le,y:le,z:le,perspective:le,transformPerspective:le,opacity:Hl,originX:yw,originY:yw,originZ:le},Ew={...ra,transform:Math.round},Ly={...vD,..._D,zIndex:Ew,size:le,fillOpacity:Hl,strokeOpacity:Hl,numOctaves:Ew},wD={...Ly,color:At,backgroundColor:At,outlineColor:At,fill:At,stroke:At,borderColor:At,borderTopColor:At,borderRightColor:At,borderBottomColor:At,borderLeftColor:At,filter:Lm,WebkitFilter:Lm},My=t=>wD[t];function IS(t,e){let n=My(t);return n!==Lm&&(n=vi),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const xD=new Set(["auto","none","0"]);function bD(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!xD.has(s)&&Ql(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=IS(n,i)}class AS extends Vy{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="string"&&(u=u.trim(),Dy(u))){const h=gS(u,n.current);h!==void 0&&(e[l]=h),l===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!J2.has(r)||e.length!==2)return;const[i,s]=e,o=xw(i),a=xw(s);if(o!==a)if(vw(o)&&vw(a))for(let l=0;l<e.length;l++){const u=e[l];typeof u=="string"&&(e[l]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)K2(e[i])&&r.push(i);r.length&&bD(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=jo[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const s=n.getValue(r);s&&s.jump(this.measuredOrigin,!1);const o=i.length-1,a=i[o];i[o]=jo[r](n.measureViewportBox(),window.getComputedStyle(n.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,u])=>{n.getValue(l).set(u)}),this.resolveNoneKeyframes()}}function Fy(t){return typeof t=="function"}let Ku;function ED(){Ku=void 0}const Hn={now:()=>(Ku===void 0&&Hn.set(yt.isProcessing||M2.useManualTiming?yt.timestamp:performance.now()),Ku),set:t=>{Ku=t,queueMicrotask(ED)}},Tw=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(vi.test(t)||t==="0")&&!t.startsWith("url("));function TD(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function SD(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=Tw(i,e),a=Tw(s,e);return!o||!a?!1:TD(t)||(n==="spring"||Fy(n))&&r}const ID=40;class kS{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Hn.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>ID?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&rD(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=Hn.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:s,delay:o,onComplete:a,onUpdate:l,isGenerator:u}=this.options;if(!u&&!SD(e,r,i,s))if(o)this.options.duration=0;else{l==null||l(Rh(e,this.options,n)),a==null||a(),this.resolveFinishedPromise();return}const h=this.initPlayback(e,n);h!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...h},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Oo=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},CS=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=t(Oo(0,i-1,s))+", ";return`linear(${r.substring(0,r.length-2)})`};function PS(t,e){return e?t*(1e3/e):0}const AD=5;function RS(t,e,n){const r=Math.max(e-AD,0);return PS(n-t(r),e-r)}const Ye={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},cp=.001;function kD({duration:t=Ye.duration,bounce:e=Ye.bounce,velocity:n=Ye.velocity,mass:r=Ye.mass}){let i,s,o=1-e;o=Tr(Ye.minDamping,Ye.maxDamping,o),t=Tr(Ye.minDuration,Ye.maxDuration,yr(t)),o<1?(i=u=>{const h=u*o,f=h*t,p=h-n,v=Mm(u,o),b=Math.exp(-f);return cp-p/v*b},s=u=>{const f=u*o*t,p=f*n+n,v=Math.pow(o,2)*Math.pow(u,2)*t,b=Math.exp(-f),E=Mm(Math.pow(u,2),o);return(-i(u)+cp>0?-1:1)*((p-v)*b)/E}):(i=u=>{const h=Math.exp(-u*t),f=(u-n)*t+1;return-cp+h*f},s=u=>{const h=Math.exp(-u*t),f=(n-u)*(t*t);return h*f});const a=5/t,l=PD(i,s,a);if(t=gr(t),isNaN(l))return{stiffness:Ye.stiffness,damping:Ye.damping,duration:t};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:t}}}const CD=12;function PD(t,e,n){let r=n;for(let i=1;i<CD;i++)r=r-t(r)/e(r);return r}function Mm(t,e){return t*Math.sqrt(1-e*e)}const Fm=2e4;function NS(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Fm;)e+=n,r=t.next(e);return e>=Fm?1/0:e}const RD=["duration","bounce"],ND=["stiffness","damping","mass"];function Sw(t,e){return e.some(n=>t[n]!==void 0)}function DD(t){let e={velocity:Ye.velocity,stiffness:Ye.stiffness,damping:Ye.damping,mass:Ye.mass,isResolvedFromDuration:!1,...t};if(!Sw(t,ND)&&Sw(t,RD))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*Tr(.05,1,1-t.bounce)*Math.sqrt(i);e={...e,mass:Ye.mass,stiffness:i,damping:s}}else{const n=kD(t);e={...e,...n,mass:Ye.mass},e.isResolvedFromDuration=!0}return e}function DS(t=Ye.visualDuration,e=Ye.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:u,mass:h,duration:f,velocity:p,isResolvedFromDuration:v}=DD({...n,velocity:-yr(n.velocity||0)}),b=p||0,E=u/(2*Math.sqrt(l*h)),A=o-s,_=yr(Math.sqrt(l/h)),y=Math.abs(A)<5;r||(r=y?Ye.restSpeed.granular:Ye.restSpeed.default),i||(i=y?Ye.restDelta.granular:Ye.restDelta.default);let w;if(E<1){const V=Mm(_,E);w=O=>{const I=Math.exp(-E*_*O);return o-I*((b+E*_*A)/V*Math.sin(V*O)+A*Math.cos(V*O))}}else if(E===1)w=V=>o-Math.exp(-_*V)*(A+(b+_*A)*V);else{const V=_*Math.sqrt(E*E-1);w=O=>{const I=Math.exp(-E*_*O),x=Math.min(V*O,300);return o-I*((b+E*_*A)*Math.sinh(x)+V*A*Math.cosh(x))/V}}const P={calculatedDuration:v&&f||null,next:V=>{const O=w(V);if(v)a.done=V>=f;else{let I=0;E<1&&(I=V===0?gr(b):RS(w,V,O));const x=Math.abs(I)<=r,k=Math.abs(o-O)<=i;a.done=x&&k}return a.value=a.done?o:O,a},toString:()=>{const V=Math.min(NS(P),Fm),O=CS(I=>P.next(V*I).value,V,30);return V+"ms "+O}};return P}function Iw({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:h}){const f=t[0],p={done:!1,value:f},v=x=>a!==void 0&&x<a||l!==void 0&&x>l,b=x=>a===void 0?l:l===void 0||Math.abs(a-x)<Math.abs(l-x)?a:l;let E=n*e;const A=f+E,_=o===void 0?A:o(A);_!==A&&(E=_-f);const y=x=>-E*Math.exp(-x/r),w=x=>_+y(x),P=x=>{const k=y(x),C=w(x);p.done=Math.abs(k)<=u,p.value=p.done?_:C};let V,O;const I=x=>{v(p.value)&&(V=x,O=DS({keyframes:[p.value,b(p.value)],velocity:RS(w,x,p.value),damping:i,stiffness:s,restDelta:u,restSpeed:h}))};return I(0),{calculatedDuration:null,next:x=>{let k=!1;return!O&&V===void 0&&(k=!0,P(x),I(x)),V!==void 0&&x>=V?O.next(x-V):(!k&&P(x),p)}}}const VD=wc(.42,0,1,1),jD=wc(0,0,.58,1),VS=wc(.42,0,.58,1),OD=t=>Array.isArray(t)&&typeof t[0]!="number",Uy=t=>Array.isArray(t)&&typeof t[0]=="number",Aw={linear:Dt,easeIn:VD,easeInOut:VS,easeOut:jD,circIn:Ny,circInOut:dS,circOut:uS,backIn:Ry,backInOut:lS,backOut:aS,anticipate:cS},kw=t=>{if(Uy(t)){Dm(t.length===4);const[e,n,r,i]=t;return wc(e,n,r,i)}else if(typeof t=="string")return Dm(Aw[t]!==void 0),Aw[t];return t},LD=(t,e)=>n=>e(t(n)),vr=(...t)=>t.reduce(LD),ze=(t,e,n)=>t+(e-t)*n;function up(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function MD({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=up(l,a,t+1/3),s=up(l,a,t),o=up(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function Nd(t,e){return n=>n>0?e:t}const dp=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},FD=[Om,ns,uo],UD=t=>FD.find(e=>e.test(t));function Cw(t){const e=UD(t);if(!e)return!1;let n=e.parse(t);return e===uo&&(n=MD(n)),n}const Pw=(t,e)=>{const n=Cw(t),r=Cw(e);if(!n||!r)return Nd(t,e);const i={...n};return s=>(i.red=dp(n.red,r.red,s),i.green=dp(n.green,r.green,s),i.blue=dp(n.blue,r.blue,s),i.alpha=ze(n.alpha,r.alpha,s),ns.transform(i))},Um=new Set(["none","hidden"]);function BD(t,e){return Um.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function zD(t,e){return n=>ze(t,e,n)}function By(t){return typeof t=="number"?zD:typeof t=="string"?Dy(t)?Nd:At.test(t)?Pw:KD:Array.isArray(t)?jS:typeof t=="object"?At.test(t)?Pw:$D:Nd}function jS(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>By(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function $D(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=By(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function qD(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],a=t.indexes[o][i[o]],l=(n=t.values[a])!==null&&n!==void 0?n:0;r[s]=l,i[o]++}return r}const KD=(t,e)=>{const n=vi.createTransformer(e),r=Ql(t),i=Ql(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?Um.has(t)&&!i.values.length||Um.has(e)&&!r.values.length?BD(t,e):vr(jS(qD(r,i),i.values),n):Nd(t,e)};function OS(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?ze(t,e,n):By(t)(t,e)}function GD(t,e,n){const r=[],i=n||OS,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||Dt:e;a=vr(l,a)}r.push(a)}return r}function WD(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(Dm(s===e.length),s===1)return()=>e[0];if(s===2&&t[0]===t[1])return()=>e[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=GD(e,r,i),a=o.length,l=u=>{let h=0;if(a>1)for(;h<t.length-2&&!(u<t[h+1]);h++);const f=Oo(t[h],t[h+1],u);return o[h](f)};return n?u=>l(Tr(t[0],t[s-1],u)):l}function HD(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Oo(0,e,r);t.push(ze(n,1,i))}}function QD(t){const e=[0];return HD(e,t.length-1),e}function YD(t,e){return t.map(n=>n*e)}function XD(t,e){return t.map(()=>e||VS).splice(0,t.length-1)}function Dd({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=OD(r)?r.map(kw):kw(r),s={done:!1,value:e[0]},o=YD(n&&n.length===e.length?n:QD(e),t),a=WD(o,e,{ease:Array.isArray(i)?i:XD(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const JD=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Ae.update(e,!0),stop:()=>yi(e),now:()=>yt.isProcessing?yt.timestamp:Hn.now()}},ZD={decay:Iw,inertia:Iw,tween:Dd,keyframes:Dd,spring:DS},eV=t=>t/100;class zy extends kS{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:i,keyframes:s}=this.options,o=(i==null?void 0:i.KeyframeResolver)||Vy,a=(l,u)=>this.onKeyframesResolved(l,u);this.resolver=new o(s,a,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=this.options,a=Fy(n)?n:ZD[n]||Dd;let l,u;a!==Dd&&typeof e[0]!="number"&&(l=vr(eV,OS(e[0],e[1])),e=[0,100]);const h=a({...this.options,keyframes:e});s==="mirror"&&(u=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),h.calculatedDuration===null&&(h.calculatedDuration=NS(h));const{calculatedDuration:f}=h,p=f+i,v=p*(r+1)-i;return{generator:h,mirroredGenerator:u,mapPercentToKeyframes:l,calculatedDuration:f,resolvedDuration:p,totalDuration:v}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:x}=this.options;return{done:!0,value:x[x.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:u,totalDuration:h,resolvedDuration:f}=r;if(this.startTime===null)return s.next(0);const{delay:p,repeat:v,repeatType:b,repeatDelay:E,onUpdate:A}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-h/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const _=this.currentTime-p*(this.speed>=0?1:-1),y=this.speed>=0?_<0:_>h;this.currentTime=Math.max(_,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=h);let w=this.currentTime,P=s;if(v){const x=Math.min(this.currentTime,h)/f;let k=Math.floor(x),C=x%1;!C&&x>=1&&(C=1),C===1&&k--,k=Math.min(k,v+1),!!(k%2)&&(b==="reverse"?(C=1-C,E&&(C-=E/f)):b==="mirror"&&(P=o)),w=Tr(0,1,C)*f}const V=y?{done:!1,value:l[0]}:P.next(w);a&&(V.value=a(V.value));let{done:O}=V;!y&&u!==null&&(O=this.speed>=0?this.currentTime>=h:this.currentTime<=0);const I=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&O);return I&&i!==void 0&&(V.value=Rh(l,this.options,i)),A&&A(V.value),I&&this.finish(),V}get duration(){const{resolved:e}=this;return e?yr(e.calculatedDuration):0}get time(){return yr(this.currentTime)}set time(e){e=gr(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=yr(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=JD,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const tV=new Set(["opacity","clipPath","filter","transform"]);function $y(t){let e;return()=>(e===void 0&&(e=t()),e)}const nV={linearEasing:void 0};function rV(t,e){const n=$y(t);return()=>{var r;return(r=nV[e])!==null&&r!==void 0?r:n()}}const Vd=rV(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing");function LS(t){return!!(typeof t=="function"&&Vd()||!t||typeof t=="string"&&(t in Bm||Vd())||Uy(t)||Array.isArray(t)&&t.every(LS))}const Ja=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,Bm={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ja([0,.65,.55,1]),circOut:Ja([.55,0,1,.45]),backIn:Ja([.31,.01,.66,-.59]),backOut:Ja([.33,1.53,.69,.99])};function MS(t,e){if(t)return typeof t=="function"&&Vd()?CS(t,e):Uy(t)?Ja(t):Array.isArray(t)?t.map(n=>MS(n,e)||Bm.easeOut):Bm[t]}function iV(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const u={[e]:n};l&&(u.offset=l);const h=MS(a,i);return Array.isArray(h)&&(u.easing=h),t.animate(u,{delay:r,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}function Rw(t,e){t.timeline=e,t.onfinish=null}const sV=$y(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),jd=10,oV=2e4;function aV(t){return Fy(t.type)||t.type==="spring"||!LS(t.ease)}function lV(t,e){const n=new zy({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let s=0;for(;!r.done&&s<oV;)r=n.sample(s),i.push(r.value),s+=jd;return{times:void 0,keyframes:i,duration:s-jd,ease:"linear"}}const FS={anticipate:cS,backInOut:lS,circInOut:dS};function cV(t){return t in FS}class Nw extends kS{constructor(e){super(e);const{name:n,motionValue:r,element:i,keyframes:s}=this.options;this.resolver=new AS(s,(o,a)=>this.onKeyframesResolved(o,a),n,r,i),this.resolver.scheduleResolve()}initPlayback(e,n){var r;let{duration:i=300,times:s,ease:o,type:a,motionValue:l,name:u,startTime:h}=this.options;if(!(!((r=l.owner)===null||r===void 0)&&r.current))return!1;if(typeof o=="string"&&Vd()&&cV(o)&&(o=FS[o]),aV(this.options)){const{onComplete:p,onUpdate:v,motionValue:b,element:E,...A}=this.options,_=lV(e,A);e=_.keyframes,e.length===1&&(e[1]=e[0]),i=_.duration,s=_.times,o=_.ease,a="keyframes"}const f=iV(l.owner.current,u,e,{...this.options,duration:i,times:s,ease:o});return f.startTime=h??this.calcStartTime(),this.pendingTimeline?(Rw(f,this.pendingTimeline),this.pendingTimeline=void 0):f.onfinish=()=>{const{onComplete:p}=this.options;l.set(Rh(e,this.options,n)),p&&p(),this.cancel(),this.resolveFinishedPromise()},{animation:f,duration:i,times:s,type:a,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return yr(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return yr(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=gr(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Dt;const{animation:r}=n;Rw(r,e)}return Dt}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:s,ease:o,times:a}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:u,onUpdate:h,onComplete:f,element:p,...v}=this.options,b=new zy({...v,keyframes:r,duration:i,type:s,ease:o,times:a,isGenerator:!0}),E=gr(this.time);u.setWithVelocity(b.sample(E-jd).value,b.sample(E).value,jd)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:s,damping:o,type:a}=e;return sV()&&r&&tV.has(r)&&n&&n.owner&&n.owner.current instanceof HTMLElement&&!n.owner.getProps().onUpdate&&!i&&s!=="mirror"&&o!==0&&a!=="inertia"}}const uV=$y(()=>window.ScrollTimeline!==void 0);class dV{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}then(e,n){return Promise.all(this.animations).then(e).catch(n)}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(i=>uV()&&i.attachTimeline?i.attachTimeline(e):n(i));return()=>{r.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function hV({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:u,...h}){return!!Object.keys(h).length}const qy=(t,e,n,r={},i,s)=>o=>{const a=Py(r,t)||{},l=a.delay||r.delay||0;let{elapsed:u=0}=r;u=u-gr(l);let h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-u,onUpdate:p=>{e.set(p),a.onUpdate&&a.onUpdate(p)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};hV(a)||(h={...h,...L2(t,h)}),h.duration&&(h.duration=gr(h.duration)),h.repeatDelay&&(h.repeatDelay=gr(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let f=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(h.duration=0,h.delay===0&&(f=!0)),f&&!s&&e.get()!==void 0){const p=Rh(h.keyframes,a);if(p!==void 0)return Ae.update(()=>{h.onUpdate(p),h.onComplete()}),new dV([])}return!s&&Nw.supports(h)?new Nw(h):new zy(h)},fV=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),pV=t=>Nm(t)?t[t.length-1]||0:t;function Ky(t,e){t.indexOf(e)===-1&&t.push(e)}function Gy(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Wy{constructor(){this.subscriptions=[]}add(e){return Ky(this.subscriptions,e),()=>Gy(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Dw=30,mV=t=>!isNaN(parseFloat(t));class gV{constructor(e,n={}){this.version="11.12.0",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const s=Hn.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Hn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=mV(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Wy);const r=this.events[e].add(n);return e==="change"?()=>{r(),Ae.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Hn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Dw)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Dw);return PS(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Yl(t,e){return new gV(t,e)}function yV(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Yl(n))}function vV(t,e){const n=Ph(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=pV(s[o]);yV(t,o,a)}}const Hy=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),_V="framerAppearId",US="data-"+Hy(_V);function BS(t){return t.props[US]}const Rt=t=>!!(t&&t.getVelocity);function wV(t){return!!(Rt(t)&&t.add)}function zm(t,e){const n=t.getValue("willChange");if(wV(n))return n.add(e)}function xV({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function zS(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var s;let{transition:o=t.getDefaultTransition(),transitionEnd:a,...l}=e;r&&(o=r);const u=[],h=i&&t.animationState&&t.animationState.getState()[i];for(const f in l){const p=t.getValue(f,(s=t.latestValues[f])!==null&&s!==void 0?s:null),v=l[f];if(v===void 0||h&&xV(h,f))continue;const b={delay:n,...Py(o||{},f)};let E=!1;if(window.MotionHandoffAnimation){const _=BS(t);if(_){const y=window.MotionHandoffAnimation(_,f,Ae);y!==null&&(b.startTime=y,E=!0)}}zm(t,f),p.start(qy(f,p,v,t.shouldReduceMotion&&Ps.has(f)?{type:!1}:b,t,E));const A=p.animation;A&&u.push(A)}return a&&Promise.all(u).then(()=>{Ae.update(()=>{a&&vV(t,a)})}),u}function $m(t,e,n={}){var r;const i=Ph(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const o=i?()=>Promise.all(zS(t,i,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:h=0,staggerChildren:f,staggerDirection:p}=s;return bV(t,e,h+u,f,p,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[u,h]=l==="beforeChildren"?[o,a]:[a,o];return u().then(()=>h())}else return Promise.all([o(),a(n.delay)])}function bV(t,e,n=0,r=0,i=1,s){const o=[],a=(t.variantChildren.size-1)*r,l=i===1?(u=0)=>u*r:(u=0)=>a-u*r;return Array.from(t.variantChildren).sort(EV).forEach((u,h)=>{u.notify("AnimationStart",e),o.push($m(u,e,{...s,delay:n+l(h)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(o)}function EV(t,e){return t.sortNodePosition(e)}function TV(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>$m(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=$m(t,e,n);else{const i=typeof e=="function"?Ph(t,e,n.custom):e;r=Promise.all(zS(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const SV=Cy.length;function $S(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?$S(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<SV;n++){const r=Cy[n],i=t.props[r];(Wl(i)||i===!1)&&(e[r]=i)}return e}const IV=[...ky].reverse(),AV=ky.length;function kV(t){return e=>Promise.all(e.map(({animation:n,options:r})=>TV(t,n,r)))}function CV(t){let e=kV(t),n=Vw(),r=!0;const i=l=>(u,h)=>{var f;const p=Ph(t,h,l==="exit"?(f=t.presenceContext)===null||f===void 0?void 0:f.custom:void 0);if(p){const{transition:v,transitionEnd:b,...E}=p;u={...u,...E,...b}}return u};function s(l){e=l(t)}function o(l){const{props:u}=t,h=$S(t.parent)||{},f=[],p=new Set;let v={},b=1/0;for(let A=0;A<AV;A++){const _=IV[A],y=n[_],w=u[_]!==void 0?u[_]:h[_],P=Wl(w),V=_===l?y.isActive:null;V===!1&&(b=A);let O=w===h[_]&&w!==u[_]&&P;if(O&&r&&t.manuallyAnimateOnMount&&(O=!1),y.protectedKeys={...v},!y.isActive&&V===null||!w&&!y.prevProp||Ch(w)||typeof w=="boolean")continue;const I=PV(y.prevProp,w);let x=I||_===l&&y.isActive&&!O&&P||A>b&&P,k=!1;const C=Array.isArray(w)?w:[w];let D=C.reduce(i(_),{});V===!1&&(D={});const{prevResolvedValues:N={}}=y,T={...N,...D},F=X=>{x=!0,p.has(X)&&(k=!0,p.delete(X)),y.needsAnimating[X]=!0;const B=t.getValue(X);B&&(B.liveStyle=!1)};for(const X in T){const B=D[X],j=N[X];if(v.hasOwnProperty(X))continue;let K=!1;Nm(B)&&Nm(j)?K=!nS(B,j):K=B!==j,K?B!=null?F(X):p.add(X):B!==void 0&&p.has(X)?F(X):y.protectedKeys[X]=!0}y.prevProp=w,y.prevResolvedValues=D,y.isActive&&(v={...v,...D}),r&&t.blockInitialAnimation&&(x=!1),x&&(!(O&&I)||k)&&f.push(...C.map(X=>({animation:X,options:{type:_}})))}if(p.size){const A={};p.forEach(_=>{const y=t.getBaseTarget(_),w=t.getValue(_);w&&(w.liveStyle=!0),A[_]=y??null}),f.push({animation:A})}let E=!!f.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(E=!1),r=!1,E?e(f):Promise.resolve()}function a(l,u){var h;if(n[l].isActive===u)return Promise.resolve();(h=t.variantChildren)===null||h===void 0||h.forEach(p=>{var v;return(v=p.animationState)===null||v===void 0?void 0:v.setActive(l,u)}),n[l].isActive=u;const f=o(l);for(const p in n)n[p].protectedKeys={};return f}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=Vw(),r=!0}}}function PV(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!nS(e,t):!1}function Fi(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Vw(){return{animate:Fi(!0),whileInView:Fi(),whileHover:Fi(),whileTap:Fi(),whileDrag:Fi(),whileFocus:Fi(),exit:Fi()}}class ki{constructor(e){this.isMounted=!1,this.node=e}update(){}}class RV extends ki{constructor(e){super(e),e.animationState||(e.animationState=CV(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Ch(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let NV=0;class DV extends ki{constructor(){super(...arguments),this.id=NV++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const VV={animation:{Feature:RV},exit:{Feature:DV}},qS=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function Nh(t,e="page"){return{point:{x:t[`${e}X`],y:t[`${e}Y`]}}}const jV=t=>e=>qS(e)&&t(e,Nh(e));function lr(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function _r(t,e,n,r){return lr(t,e,jV(n),r)}const jw=(t,e)=>Math.abs(t-e);function OV(t,e){const n=jw(t.x,e.x),r=jw(t.y,e.y);return Math.sqrt(n**2+r**2)}class KS{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=fp(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,v=OV(f.offset,{x:0,y:0})>=3;if(!p&&!v)return;const{point:b}=f,{timestamp:E}=yt;this.history.push({...b,timestamp:E});const{onStart:A,onMove:_}=this.handlers;p||(A&&A(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),_&&_(this.lastMoveEvent,f)},this.handlePointerMove=(f,p)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=hp(p,this.transformPagePoint),Ae.update(this.updatePoint,!0)},this.handlePointerUp=(f,p)=>{this.end();const{onEnd:v,onSessionEnd:b,resumeAnimation:E}=this.handlers;if(this.dragSnapToOrigin&&E&&E(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const A=fp(f.type==="pointercancel"?this.lastMoveEventInfo:hp(p,this.transformPagePoint),this.history);this.startEvent&&v&&v(f,A),b&&b(f,A)},!qS(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=Nh(e),a=hp(o,this.transformPagePoint),{point:l}=a,{timestamp:u}=yt;this.history=[{...l,timestamp:u}];const{onSessionStart:h}=n;h&&h(e,fp(a,this.history)),this.removeListeners=vr(_r(this.contextWindow,"pointermove",this.handlePointerMove),_r(this.contextWindow,"pointerup",this.handlePointerUp),_r(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),yi(this.updatePoint)}}function hp(t,e){return e?{point:e(t.point)}:t}function Ow(t,e){return{x:t.x-e.x,y:t.y-e.y}}function fp({point:t},e){return{point:t,delta:Ow(t,GS(e)),offset:Ow(t,LV(e)),velocity:MV(e,.1)}}function LV(t){return t[0]}function GS(t){return t[t.length-1]}function MV(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=GS(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>gr(e)));)n--;if(!r)return{x:0,y:0};const s=yr(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function WS(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const Lw=WS("dragHorizontal"),Mw=WS("dragVertical");function HS(t){let e=!1;if(t==="y")e=Mw();else if(t==="x")e=Lw();else{const n=Lw(),r=Mw();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function QS(){const t=HS(!0);return t?(t(),!1):!0}function ho(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}const YS=1e-4,FV=1-YS,UV=1+YS,XS=.01,BV=0-XS,zV=0+XS;function hn(t){return t.max-t.min}function $V(t,e,n){return Math.abs(t-e)<=n}function Fw(t,e,n,r=.5){t.origin=r,t.originPoint=ze(e.min,e.max,t.origin),t.scale=hn(n)/hn(e),t.translate=ze(n.min,n.max,t.origin)-t.originPoint,(t.scale>=FV&&t.scale<=UV||isNaN(t.scale))&&(t.scale=1),(t.translate>=BV&&t.translate<=zV||isNaN(t.translate))&&(t.translate=0)}function vl(t,e,n,r){Fw(t.x,e.x,n.x,r?r.originX:void 0),Fw(t.y,e.y,n.y,r?r.originY:void 0)}function Uw(t,e,n){t.min=n.min+e.min,t.max=t.min+hn(e)}function qV(t,e,n){Uw(t.x,e.x,n.x),Uw(t.y,e.y,n.y)}function Bw(t,e,n){t.min=e.min-n.min,t.max=t.min+hn(e)}function _l(t,e,n){Bw(t.x,e.x,n.x),Bw(t.y,e.y,n.y)}function KV(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?ze(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?ze(n,t,r.max):Math.min(t,n)),t}function zw(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function GV(t,{top:e,left:n,bottom:r,right:i}){return{x:zw(t.x,n,i),y:zw(t.y,e,r)}}function $w(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function WV(t,e){return{x:$w(t.x,e.x),y:$w(t.y,e.y)}}function HV(t,e){let n=.5;const r=hn(t),i=hn(e);return i>r?n=Oo(e.min,e.max-r,t.min):r>i&&(n=Oo(t.min,t.max-i,e.min)),Tr(0,1,n)}function QV(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const qm=.35;function YV(t=qm){return t===!1?t=0:t===!0&&(t=qm),{x:qw(t,"left","right"),y:qw(t,"top","bottom")}}function qw(t,e,n){return{min:Kw(t,e),max:Kw(t,n)}}function Kw(t,e){return typeof t=="number"?t:t[e]||0}const Gw=()=>({translate:0,scale:1,origin:0,originPoint:0}),fo=()=>({x:Gw(),y:Gw()}),Ww=()=>({min:0,max:0}),et=()=>({x:Ww(),y:Ww()});function yn(t){return[t("x"),t("y")]}function JS({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function XV({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function JV(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function pp(t){return t===void 0||t===1}function Km({scale:t,scaleX:e,scaleY:n}){return!pp(t)||!pp(e)||!pp(n)}function $i(t){return Km(t)||ZS(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function ZS(t){return Hw(t.x)||Hw(t.y)}function Hw(t){return t&&t!=="0%"}function Od(t,e,n){const r=t-n,i=e*r;return n+i}function Qw(t,e,n,r,i){return i!==void 0&&(t=Od(t,i,r)),Od(t,n,r)+e}function Gm(t,e=0,n=1,r,i){t.min=Qw(t.min,e,n,r,i),t.max=Qw(t.max,e,n,r,i)}function eI(t,{x:e,y:n}){Gm(t.x,e.translate,e.scale,e.originPoint),Gm(t.y,n.translate,n.scale,n.originPoint)}const Yw=.999999999999,Xw=1.0000000000001;function ZV(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&mo(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,eI(t,o)),r&&$i(s.latestValues)&&mo(t,s.latestValues))}e.x<Xw&&e.x>Yw&&(e.x=1),e.y<Xw&&e.y>Yw&&(e.y=1)}function po(t,e){t.min=t.min+e,t.max=t.max+e}function Jw(t,e,n,r,i=.5){const s=ze(t.min,t.max,i);Gm(t,e,n,s,r)}function mo(t,e){Jw(t.x,e.x,e.scaleX,e.scale,e.originX),Jw(t.y,e.y,e.scaleY,e.scale,e.originY)}function tI(t,e){return JS(JV(t.getBoundingClientRect(),e))}function ej(t,e,n){const r=tI(t,n),{scroll:i}=e;return i&&(po(r.x,i.offset.x),po(r.y,i.offset.y)),r}const nI=({current:t})=>t?t.ownerDocument.defaultView:null,tj=new WeakMap;class nj{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=et(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Nh(h,"page").point)},s=(h,f)=>{const{drag:p,dragPropagation:v,onDragStart:b}=this.getProps();if(p&&!v&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=HS(p),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),yn(A=>{let _=this.getAxisMotionValue(A).get()||0;if(Wn.test(_)){const{projection:y}=this.visualElement;if(y&&y.layout){const w=y.layout.layoutBox[A];w&&(_=hn(w)*(parseFloat(_)/100))}}this.originPoint[A]=_}),b&&Ae.postRender(()=>b(h,f)),zm(this.visualElement,"transform");const{animationState:E}=this.visualElement;E&&E.setActive("whileDrag",!0)},o=(h,f)=>{const{dragPropagation:p,dragDirectionLock:v,onDirectionLock:b,onDrag:E}=this.getProps();if(!p&&!this.openGlobalLock)return;const{offset:A}=f;if(v&&this.currentDirection===null){this.currentDirection=rj(A),this.currentDirection!==null&&b&&b(this.currentDirection);return}this.updateAxis("x",f.point,A),this.updateAxis("y",f.point,A),this.visualElement.render(),E&&E(h,f)},a=(h,f)=>this.stop(h,f),l=()=>yn(h=>{var f;return this.getAnimationState(h)==="paused"&&((f=this.getAxisMotionValue(h).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new KS(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:nI(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&Ae.postRender(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!yu(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=KV(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&ho(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=GV(i.layoutBox,n):this.constraints=!1,this.elastic=YV(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&yn(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=QV(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!ho(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=ej(r,i.root,this.visualElement.getTransformPagePoint());let o=WV(i.layout.layoutBox,s);if(n){const a=n(XV(o));this.hasMutatedConstraints=!!a,a&&(o=JS(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=yn(h=>{if(!yu(h,n,this.currentDirection))return;let f=l&&l[h]||{};o&&(f={min:0,max:0});const p=i?200:1e6,v=i?40:1e7,b={type:"inertia",velocity:r?e[h]:0,bounceStiffness:p,bounceDamping:v,timeConstant:750,restDelta:1,restSpeed:10,...s,...f};return this.startAxisValueAnimation(h,b)});return Promise.all(u).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return zm(this.visualElement,e),r.start(qy(e,r,0,n,this.visualElement,!1))}stopAnimation(){yn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){yn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){yn(n=>{const{drag:r}=this.getProps();if(!yu(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-ze(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!ho(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};yn(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=HV({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),yn(o=>{if(!yu(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set(ze(l,u,i[o]))})}addListeners(){if(!this.visualElement.current)return;tj.set(this.visualElement,this);const e=this.visualElement.current,n=_r(e,"pointerdown",l=>{const{drag:u,dragListener:h=!0}=this.getProps();u&&h&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();ho(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Ae.read(r);const o=lr(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(yn(h=>{const f=this.getAxisMotionValue(h);f&&(this.originPoint[h]+=l[h].translate,f.set(f.get()+l[h].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=qm,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function yu(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function rj(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class ij extends ki{constructor(e){super(e),this.removeGroupControls=Dt,this.removeListeners=Dt,this.controls=new nj(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Dt}unmount(){this.removeGroupControls(),this.removeListeners()}}const Zw=t=>(e,n)=>{t&&Ae.postRender(()=>t(e,n))};class sj extends ki{constructor(){super(...arguments),this.removePointerDownListener=Dt}onPointerDown(e){this.session=new KS(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:nI(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:Zw(e),onStart:Zw(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Ae.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=_r(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Dh=R.createContext(null);function oj(){const t=R.useContext(Dh);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,i=R.useId();R.useEffect(()=>r(i),[]);const s=R.useCallback(()=>n&&n(i),[i,n]);return!e&&n?[!1,s]:[!0]}const Qy=R.createContext({}),rI=R.createContext({}),Gu={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function ex(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const La={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(le.test(t))t=parseFloat(t);else return t;const n=ex(t,e.target.x),r=ex(t,e.target.y);return`${n}% ${r}%`}},aj={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=vi.parse(t);if(i.length>5)return r;const s=vi.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const u=ze(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=u),typeof i[3+o]=="number"&&(i[3+o]/=u),s(i)}},Ld={};function lj(t){Object.assign(Ld,t)}const{schedule:Yy,cancel:f9}=rS(queueMicrotask,!1);class cj extends R.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;lj(uj),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Gu.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Ae.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Yy.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function iI(t){const[e,n]=oj(),r=R.useContext(Qy);return d.jsx(cj,{...t,layoutGroup:r,switchLayoutGroup:R.useContext(rI),isPresent:e,safeToRemove:n})}const uj={borderRadius:{...La,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:La,borderTopRightRadius:La,borderBottomLeftRadius:La,borderBottomRightRadius:La,boxShadow:aj},sI=["TopLeft","TopRight","BottomLeft","BottomRight"],dj=sI.length,tx=t=>typeof t=="string"?parseFloat(t):t,nx=t=>typeof t=="number"||le.test(t);function hj(t,e,n,r,i,s){i?(t.opacity=ze(0,n.opacity!==void 0?n.opacity:1,fj(r)),t.opacityExit=ze(e.opacity!==void 0?e.opacity:1,0,pj(r))):s&&(t.opacity=ze(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<dj;o++){const a=`border${sI[o]}Radius`;let l=rx(e,a),u=rx(n,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||nx(l)===nx(u)?(t[a]=Math.max(ze(tx(l),tx(u),r),0),(Wn.test(u)||Wn.test(l))&&(t[a]+="%")):t[a]=u}(e.rotate||n.rotate)&&(t.rotate=ze(e.rotate||0,n.rotate||0,r))}function rx(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const fj=oI(0,.5,uS),pj=oI(.5,.95,Dt);function oI(t,e,n){return r=>r<t?0:r>e?1:n(Oo(t,e,r))}function ix(t,e){t.min=e.min,t.max=e.max}function gn(t,e){ix(t.x,e.x),ix(t.y,e.y)}function sx(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function ox(t,e,n,r,i){return t-=e,t=Od(t,1/n,r),i!==void 0&&(t=Od(t,1/i,r)),t}function mj(t,e=0,n=1,r=.5,i,s=t,o=t){if(Wn.test(e)&&(e=parseFloat(e),e=ze(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=ze(s.min,s.max,r);t===s&&(a-=e),t.min=ox(t.min,e,n,a,i),t.max=ox(t.max,e,n,a,i)}function ax(t,e,[n,r,i],s,o){mj(t,e[n],e[r],e[i],e.scale,s,o)}const gj=["x","scaleX","originX"],yj=["y","scaleY","originY"];function lx(t,e,n,r){ax(t.x,e,gj,n?n.x:void 0,r?r.x:void 0),ax(t.y,e,yj,n?n.y:void 0,r?r.y:void 0)}function cx(t){return t.translate===0&&t.scale===1}function aI(t){return cx(t.x)&&cx(t.y)}function ux(t,e){return t.min===e.min&&t.max===e.max}function vj(t,e){return ux(t.x,e.x)&&ux(t.y,e.y)}function dx(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function lI(t,e){return dx(t.x,e.x)&&dx(t.y,e.y)}function hx(t){return hn(t.x)/hn(t.y)}function fx(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class _j{constructor(){this.members=[]}add(e){Ky(this.members,e),e.scheduleRender()}remove(e){if(Gy(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function wj(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:u,rotate:h,rotateX:f,rotateY:p,skewX:v,skewY:b}=n;u&&(r=`perspective(${u}px) ${r}`),h&&(r+=`rotate(${h}deg) `),f&&(r+=`rotateX(${f}deg) `),p&&(r+=`rotateY(${p}deg) `),v&&(r+=`skewX(${v}deg) `),b&&(r+=`skewY(${b}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const xj=(t,e)=>t.depth-e.depth;class bj{constructor(){this.children=[],this.isDirty=!1}add(e){Ky(this.children,e),this.isDirty=!0}remove(e){Gy(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(xj),this.isDirty=!1,this.children.forEach(e)}}function Wu(t){const e=Rt(t)?t.get():t;return fV(e)?e.toValue():e}function Ej(t,e){const n=Hn.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(yi(r),t(s-e))};return Ae.read(r,!0),()=>yi(r)}function Tj(t){return t instanceof SVGElement&&t.tagName!=="svg"}function Sj(t,e,n){const r=Rt(t)?t:Yl(t);return r.start(qy("",r,e,n)),r.animation}const qi={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Za=typeof window<"u"&&window.MotionDebug!==void 0,mp=["","X","Y","Z"],Ij={visibility:"hidden"},px=1e3;let Aj=0;function gp(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function cI(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=BS(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Ae,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&cI(r)}function uI({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=Aj++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Za&&(qi.totalNodes=qi.resolvedTargetDeltas=qi.recalculatedProjection=0),this.nodes.forEach(Pj),this.nodes.forEach(jj),this.nodes.forEach(Oj),this.nodes.forEach(Rj),Za&&window.MotionDebug.record(qi)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new bj)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Wy),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Tj(o),this.instance=o;const{layoutId:l,layout:u,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(u||l)&&(this.isLayoutDirty=!0),t){let f;const p=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=Ej(p,250),Gu.hasAnimatedSinceResize&&(Gu.hasAnimatedSinceResize=!1,this.nodes.forEach(gx))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&h&&(l||u)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:p,hasRelativeTargetChanged:v,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const E=this.options.transition||h.getDefaultTransition()||Bj,{onLayoutAnimationStart:A,onLayoutAnimationComplete:_}=h.getProps(),y=!this.targetLayout||!lI(this.targetLayout,b)||v,w=!p&&v;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||w||p&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,w);const P={...Py(E,"layout"),onPlay:A,onComplete:_};(h.shouldReduceMotion||this.options.layoutRoot)&&(P.delay=0,P.type=!1),this.startAnimation(P)}else p||gx(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,yi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Lj),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&cI(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const f=this.path[h];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(mx);return}this.isUpdating||this.nodes.forEach(Dj),this.isUpdating=!1,this.nodes.forEach(Vj),this.nodes.forEach(kj),this.nodes.forEach(Cj),this.clearAllSnapshots();const a=Hn.now();yt.delta=Tr(0,1e3/60,a-yt.timestamp),yt.timestamp=a,yt.isProcessing=!0,ap.update.process(yt),ap.preRender.process(yt),ap.render.process(yt),yt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Yy.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Nj),this.sharedNodes.forEach(Mj)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ae.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ae.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=et(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!aI(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,h=u!==this.prevTransformTemplateValue;o&&(a||$i(this.latestValues)||h)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),zj(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return et();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some($j))){const{scroll:h}=this.root;h&&(po(l.x,h.offset.x),po(l.y,h.offset.y))}return l}removeElementScroll(o){var a;const l=et();if(gn(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let u=0;u<this.path.length;u++){const h=this.path[u],{scroll:f,options:p}=h;h!==this.root&&f&&p.layoutScroll&&(f.wasRoot&&gn(l,o),po(l.x,f.offset.x),po(l.y,f.offset.y))}return l}applyTransform(o,a=!1){const l=et();gn(l,o);for(let u=0;u<this.path.length;u++){const h=this.path[u];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&mo(l,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),$i(h.latestValues)&&mo(l,h.latestValues)}return $i(this.latestValues)&&mo(l,this.latestValues),l}removeTransform(o){const a=et();gn(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!$i(u.latestValues))continue;Km(u.latestValues)&&u.updateSnapshot();const h=et(),f=u.measurePageBox();gn(h,f),lx(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,h)}return $i(this.latestValues)&&lx(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==yt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:p}=this.options;if(!(!this.layout||!(f||p))){if(this.resolvedRelativeTargetAt=yt.timestamp,!this.targetDelta&&!this.relativeTarget){const v=this.getClosestProjectingParent();v&&v.layout&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=et(),this.relativeTargetOrigin=et(),_l(this.relativeTargetOrigin,this.layout.layoutBox,v.layout.layoutBox),gn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=et(),this.targetWithTransforms=et()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),qV(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):gn(this.target,this.layout.layoutBox),eI(this.target,this.targetDelta)):gn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const v=this.getClosestProjectingParent();v&&!!v.resumingFrom==!!this.resumingFrom&&!v.options.layoutScroll&&v.target&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=et(),this.relativeTargetOrigin=et(),_l(this.relativeTargetOrigin,this.target,v.target),gn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Za&&qi.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Km(this.parent.latestValues)||ZS(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===yt.timestamp&&(u=!1),u)return;const{layout:h,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||f))return;gn(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,v=this.treeScale.y;ZV(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=et());const{target:b}=a;if(!b){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(sx(this.prevProjectionDelta.x,this.projectionDelta.x),sx(this.prevProjectionDelta.y,this.projectionDelta.y)),vl(this.projectionDelta,this.layoutCorrected,b,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==v||!fx(this.projectionDelta.x,this.prevProjectionDelta.x)||!fx(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b)),Za&&qi.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=fo(),this.projectionDelta=fo(),this.projectionDeltaWithTransform=fo()}setAnimationOrigin(o,a=!1){const l=this.snapshot,u=l?l.latestValues:{},h={...this.latestValues},f=fo();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=et(),v=l?l.source:void 0,b=this.layout?this.layout.source:void 0,E=v!==b,A=this.getStack(),_=!A||A.members.length<=1,y=!!(E&&!_&&this.options.crossfade===!0&&!this.path.some(Uj));this.animationProgress=0;let w;this.mixTargetDelta=P=>{const V=P/1e3;yx(f.x,o.x,V),yx(f.y,o.y,V),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(_l(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Fj(this.relativeTarget,this.relativeTargetOrigin,p,V),w&&vj(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=et()),gn(w,this.relativeTarget)),E&&(this.animationValues=h,hj(h,u,this.latestValues,V,y,_)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=V},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(yi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ae.update(()=>{Gu.hasAnimatedSinceResize=!0,this.currentAnimation=Sj(0,px,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(px),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:h}=o;if(!(!a||!l||!u)){if(this!==o&&this.layout&&u&&dI(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||et();const f=hn(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+f;const p=hn(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+p}gn(a,l),mo(a,h),vl(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new _j),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const u={};l.z&&gp("z",o,u,this.animationValues);for(let h=0;h<mp.length;h++)gp(`rotate${mp[h]}`,o,u,this.animationValues),gp(`skew${mp[h]}`,o,u,this.animationValues);o.render();for(const h in u)o.setStaticValue(h,u[h]),this.animationValues&&(this.animationValues[h]=u[h]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Ij;const u={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=Wu(o==null?void 0:o.pointerEvents)||"",u.transform=h?h(this.latestValues,""):"none",u;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const E={};return this.options.layoutId&&(E.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,E.pointerEvents=Wu(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!$i(this.latestValues)&&(E.transform=h?h({},""):"none",this.hasProjected=!1),E}const p=f.animationValues||f.latestValues;this.applyTransformsToTarget(),u.transform=wj(this.projectionDeltaWithTransform,this.treeScale,p),h&&(u.transform=h(p,u.transform));const{x:v,y:b}=this.projectionDelta;u.transformOrigin=`${v.origin*100}% ${b.origin*100}% 0`,f.animationValues?u.opacity=f===this?(l=(a=p.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:u.opacity=f===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const E in Ld){if(p[E]===void 0)continue;const{correct:A,applyTo:_}=Ld[E],y=u.transform==="none"?p[E]:A(p[E],f);if(_){const w=_.length;for(let P=0;P<w;P++)u[_[P]]=y}else u[E]=y}return this.options.layoutId&&(u.pointerEvents=f===this?Wu(o==null?void 0:o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(mx),this.root.sharedNodes.clear()}}}function kj(t){t.updateLayout()}function Cj(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=n.source!==t.layout.source;s==="size"?yn(f=>{const p=o?n.measuredBox[f]:n.layoutBox[f],v=hn(p);p.min=r[f].min,p.max=p.min+v}):dI(s,n.layoutBox,r)&&yn(f=>{const p=o?n.measuredBox[f]:n.layoutBox[f],v=hn(r[f]);p.max=p.min+v,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+v)});const a=fo();vl(a,r,n.layoutBox);const l=fo();o?vl(l,t.applyTransform(i,!0),n.measuredBox):vl(l,r,n.layoutBox);const u=!aI(a);let h=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:p,layout:v}=f;if(p&&v){const b=et();_l(b,n.layoutBox,p.layoutBox);const E=et();_l(E,r,v.layoutBox),lI(b,E)||(h=!0),f.options.layoutRoot&&(t.relativeTarget=E,t.relativeTargetOrigin=b,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeTargetChanged:h})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function Pj(t){Za&&qi.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Rj(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Nj(t){t.clearSnapshot()}function mx(t){t.clearMeasurements()}function Dj(t){t.isLayoutDirty=!1}function Vj(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function gx(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function jj(t){t.resolveTargetDelta()}function Oj(t){t.calcProjection()}function Lj(t){t.resetSkewAndRotation()}function Mj(t){t.removeLeadSnapshot()}function yx(t,e,n){t.translate=ze(e.translate,0,n),t.scale=ze(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function vx(t,e,n,r){t.min=ze(e.min,n.min,r),t.max=ze(e.max,n.max,r)}function Fj(t,e,n,r){vx(t.x,e.x,n.x,r),vx(t.y,e.y,n.y,r)}function Uj(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Bj={duration:.45,ease:[.4,0,.1,1]},_x=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),wx=_x("applewebkit/")&&!_x("chrome/")?Math.round:Dt;function xx(t){t.min=wx(t.min),t.max=wx(t.max)}function zj(t){xx(t.x),xx(t.y)}function dI(t,e,n){return t==="position"||t==="preserve-aspect"&&!$V(hx(e),hx(n),.2)}function $j(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const qj=uI({attachResizeListener:(t,e)=>lr(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),yp={current:void 0},hI=uI({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!yp.current){const t=new qj({});t.mount(window),t.setOptions({layoutScroll:!0}),yp.current=t}return yp.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Kj={pan:{Feature:sj},drag:{Feature:ij,ProjectionNode:hI,MeasureLayout:iI}};function bx(t,e){const n=e?"pointerenter":"pointerleave",r=e?"onHoverStart":"onHoverEnd",i=(s,o)=>{if(s.pointerType==="touch"||QS())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e);const l=a[r];l&&Ae.postRender(()=>l(s,o))};return _r(t.current,n,i,{passive:!t.getProps()[r]})}class Gj extends ki{mount(){this.unmount=vr(bx(this.node,!0),bx(this.node,!1))}unmount(){}}class Wj extends ki{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=vr(lr(this.node.current,"focus",()=>this.onFocus()),lr(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const fI=(t,e)=>e?t===e?!0:fI(t,e.parentElement):!1;function vp(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,Nh(n))}class Hj extends ki{constructor(){super(...arguments),this.removeStartListeners=Dt,this.removeEndListeners=Dt,this.removeAccessibleListeners=Dt,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),s=_r(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:h,globalTapTarget:f}=this.node.getProps(),p=!f&&!fI(this.node.current,a.target)?h:u;p&&Ae.update(()=>p(a,l))},{passive:!(r.onTap||r.onPointerUp)}),o=_r(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=vr(s,o),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||vp("up",(l,u)=>{const{onTap:h}=this.node.getProps();h&&Ae.postRender(()=>h(l,u))})};this.removeEndListeners(),this.removeEndListeners=lr(this.node.current,"keyup",o),vp("down",(a,l)=>{this.startPress(a,l)})},n=lr(this.node.current,"keydown",e),r=()=>{this.isPressing&&vp("cancel",(s,o)=>this.cancelPress(s,o))},i=lr(this.node.current,"blur",r);this.removeAccessibleListeners=vr(n,i)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Ae.postRender(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!QS()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Ae.postRender(()=>r(e,n))}mount(){const e=this.node.getProps(),n=_r(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=lr(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=vr(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Wm=new WeakMap,_p=new WeakMap,Qj=t=>{const e=Wm.get(t.target);e&&e(t)},Yj=t=>{t.forEach(Qj)};function Xj({root:t,...e}){const n=t||document;_p.has(n)||_p.set(n,{});const r=_p.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(Yj,{root:t,...e})),r[i]}function Jj(t,e,n){const r=Xj(e);return Wm.set(t,n),r.observe(t),()=>{Wm.delete(t),r.unobserve(t)}}const Zj={some:0,all:1};class eO extends ki{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:Zj[i]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:h,onViewportLeave:f}=this.node.getProps(),p=u?h:f;p&&p(l)};return Jj(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(tO(e,n))&&this.startObserver()}unmount(){}}function tO({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const nO={inView:{Feature:eO},tap:{Feature:Hj},focus:{Feature:Wj},hover:{Feature:Gj}},rO={layout:{ProjectionNode:hI,MeasureLayout:iI}},Xy=R.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),Vh=R.createContext({}),Jy=typeof window<"u",pI=Jy?R.useLayoutEffect:R.useEffect,mI=R.createContext({strict:!1});function iO(t,e,n,r,i){var s,o;const{visualElement:a}=R.useContext(Vh),l=R.useContext(mI),u=R.useContext(Dh),h=R.useContext(Xy).reducedMotion,f=R.useRef();r=r||l.renderer,!f.current&&r&&(f.current=r(t,{visualState:e,parent:a,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:h}));const p=f.current,v=R.useContext(rI);p&&!p.projection&&i&&(p.type==="html"||p.type==="svg")&&sO(f.current,n,i,v);const b=R.useRef(!1);R.useInsertionEffect(()=>{p&&b.current&&p.update(n,u)});const E=n[US],A=R.useRef(!!E&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,E))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,E)));return pI(()=>{p&&(b.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),Yy.render(p.render),A.current&&p.animationState&&p.animationState.animateChanges())}),R.useEffect(()=>{p&&(!A.current&&p.animationState&&p.animationState.animateChanges(),A.current&&(queueMicrotask(()=>{var _;(_=window.MotionHandoffMarkAsComplete)===null||_===void 0||_.call(window,E)}),A.current=!1))}),p}function sO(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:u}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:gI(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&ho(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:u})}function gI(t){if(t)return t.options.allowProjection!==!1?t.projection:gI(t.parent)}function oO(t,e,n){return R.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):ho(n)&&(n.current=r))},[e])}function jh(t){return Ch(t.animate)||Cy.some(e=>Wl(t[e]))}function yI(t){return!!(jh(t)||t.variants)}function aO(t,e){if(jh(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Wl(n)?n:void 0,animate:Wl(r)?r:void 0}}return t.inherit!==!1?e:{}}function lO(t){const{initial:e,animate:n}=aO(t,R.useContext(Vh));return R.useMemo(()=>({initial:e,animate:n}),[Ex(e),Ex(n)])}function Ex(t){return Array.isArray(t)?t.join(" "):t}const Tx={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Lo={};for(const t in Tx)Lo[t]={isEnabled:e=>Tx[t].some(n=>!!e[n])};function cO(t){for(const e in t)Lo[e]={...Lo[e],...t[e]}}const uO=Symbol.for("motionComponentSymbol");function dO({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){t&&cO(t);function s(a,l){let u;const h={...R.useContext(Xy),...a,layoutId:hO(a)},{isStatic:f}=h,p=lO(a),v=r(a,f);if(!f&&Jy){fO();const b=pO(h);u=b.MeasureLayout,p.visualElement=iO(i,v,h,e,b.ProjectionNode)}return d.jsxs(Vh.Provider,{value:p,children:[u&&p.visualElement?d.jsx(u,{visualElement:p.visualElement,...h}):null,n(i,a,oO(v,p.visualElement,l),v,f,p.visualElement)]})}const o=R.forwardRef(s);return o[uO]=i,o}function hO({layoutId:t}){const e=R.useContext(Qy).id;return e&&t!==void 0?e+"-"+t:t}function fO(t,e){R.useContext(mI).strict}function pO(t){const{drag:e,layout:n}=Lo;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const mO=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Zy(t){return typeof t!="string"||t.includes("-")?!1:!!(mO.indexOf(t)>-1||/[A-Z]/u.test(t))}function vI(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const _I=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function wI(t,e,n,r){vI(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(_I.has(i)?i:Hy(i),e.attrs[i])}function xI(t,{layout:e,layoutId:n}){return Ps.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Ld[t]||t==="opacity")}function ev(t,e,n){var r;const{style:i}=t,s={};for(const o in i)(Rt(i[o])||e.style&&Rt(e.style[o])||xI(o,t)||((r=n==null?void 0:n.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[o]=i[o]);return s}function bI(t,e,n){const r=ev(t,e,n);for(const i in t)if(Rt(t[i])||Rt(e[i])){const s=_c.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}function tv(t){const e=R.useRef(null);return e.current===null&&(e.current=t()),e.current}function gO({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,i,s){const o={latestValues:yO(r,i,s,t),renderState:e()};return n&&(o.mount=a=>n(r,a,o)),o}const EI=t=>(e,n)=>{const r=R.useContext(Vh),i=R.useContext(Dh),s=()=>gO(t,e,r,i);return n?s():tv(s)};function yO(t,e,n,r){const i={},s=r(t,{});for(const p in s)i[p]=Wu(s[p]);let{initial:o,animate:a}=t;const l=jh(t),u=yI(t);e&&u&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const f=h?a:o;if(f&&typeof f!="boolean"&&!Ch(f)){const p=Array.isArray(f)?f:[f];for(let v=0;v<p.length;v++){const b=Ay(t,p[v]);if(b){const{transitionEnd:E,transition:A,..._}=b;for(const y in _){let w=_[y];if(Array.isArray(w)){const P=h?w.length-1:0;w=w[P]}w!==null&&(i[y]=w)}for(const y in E)i[y]=E[y]}}}return i}const nv=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),TI=()=>({...nv(),attrs:{}}),SI=(t,e)=>e&&typeof t=="number"?e.transform(t):t,vO={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},_O=_c.length;function wO(t,e,n){let r="",i=!0;for(let s=0;s<_O;s++){const o=_c[s],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const u=SI(a,Ly[o]);if(!l){i=!1;const h=vO[o]||o;r+=`${h}(${u}) `}n&&(e[o]=u)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function rv(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const l in e){const u=e[l];if(Ps.has(l)){o=!0;continue}else if(mS(l)){i[l]=u;continue}else{const h=SI(u,Ly[l]);l.startsWith("origin")?(a=!0,s[l]=h):r[l]=h}}if(e.transform||(o||n?r.transform=wO(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:u="50%",originZ:h=0}=s;r.transformOrigin=`${l} ${u} ${h}`}}function Sx(t,e,n){return typeof t=="string"?t:le.transform(e+n*t)}function xO(t,e,n){const r=Sx(e,t.x,t.width),i=Sx(n,t.y,t.height);return`${r} ${i}`}const bO={offset:"stroke-dashoffset",array:"stroke-dasharray"},EO={offset:"strokeDashoffset",array:"strokeDasharray"};function TO(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?bO:EO;t[s.offset]=le.transform(-r);const o=le.transform(e),a=le.transform(n);t[s.array]=`${o} ${a}`}function iv(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...u},h,f){if(rv(t,u,f),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:p,style:v,dimensions:b}=t;p.transform&&(b&&(v.transform=p.transform),delete p.transform),b&&(i!==void 0||s!==void 0||v.transform)&&(v.transformOrigin=xO(b,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(p.x=e),n!==void 0&&(p.y=n),r!==void 0&&(p.scale=r),o!==void 0&&TO(p,o,a,l,!1)}const sv=t=>typeof t=="string"&&t.toLowerCase()==="svg",SO={useVisualState:EI({scrapeMotionValuesFromProps:bI,createRenderState:TI,onMount:(t,e,{renderState:n,latestValues:r})=>{Ae.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),Ae.render(()=>{iv(n,r,sv(e.tagName),t.transformTemplate),wI(e,n)})}})},IO={useVisualState:EI({scrapeMotionValuesFromProps:ev,createRenderState:nv})};function II(t,e,n){for(const r in e)!Rt(e[r])&&!xI(r,n)&&(t[r]=e[r])}function AO({transformTemplate:t},e){return R.useMemo(()=>{const n=nv();return rv(n,e,t),Object.assign({},n.vars,n.style)},[e])}function kO(t,e){const n=t.style||{},r={};return II(r,n,t),Object.assign(r,AO(t,e)),r}function CO(t,e){const n={},r=kO(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const PO=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Md(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||PO.has(t)}let AI=t=>!Md(t);function RO(t){t&&(AI=e=>e.startsWith("on")?!Md(e):t(e))}try{RO(require("@emotion/is-prop-valid").default)}catch{}function NO(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(AI(i)||n===!0&&Md(i)||!e&&!Md(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function DO(t,e,n,r){const i=R.useMemo(()=>{const s=TI();return iv(s,e,sv(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};II(s,t.style,t),i.style={...s,...i.style}}return i}function VO(t=!1){return(n,r,i,{latestValues:s},o)=>{const l=(Zy(n)?DO:CO)(r,s,o,n),u=NO(r,typeof n=="string",t),h=n!==R.Fragment?{...u,...l,ref:i}:{},{children:f}=r,p=R.useMemo(()=>Rt(f)?f.get():f,[f]);return R.createElement(n,{...h,children:p})}}function jO(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...Zy(r)?SO:IO,preloadedFeatures:t,useRender:VO(i),createVisualElement:e,Component:r};return dO(o)}}const Hm={current:null},kI={current:!1};function OO(){if(kI.current=!0,!!Jy)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Hm.current=t.matches;t.addListener(e),e()}else Hm.current=!1}function LO(t,e,n){for(const r in e){const i=e[r],s=n[r];if(Rt(i))t.addValue(r,i);else if(Rt(s))t.addValue(r,Yl(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,Yl(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const Ix=new WeakMap,MO=[...vS,At,vi],FO=t=>MO.find(yS(t)),Ax=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class UO{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Vy,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=Hn.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,Ae.render(this.render,!1,!0))};const{latestValues:l,renderState:u}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=jh(n),this.isVariantNode=yI(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in f){const v=f[p];l[p]!==void 0&&Rt(v)&&v.set(l[p],!1)}}mount(e){this.current=e,Ix.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),kI.current||OO(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Hm.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Ix.delete(this.current),this.projection&&this.projection.unmount(),yi(this.notifyUpdate),yi(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Ps.has(e),i=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Ae.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Lo){const n=Lo[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):et()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Ax.length;r++){const i=Ax[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=LO(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Yl(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(fS(i)||hS(i))?i=parseFloat(i):!FO(i)&&vi.test(n)&&(i=IS(e,n)),this.setBaseTarget(e,Rt(i)?i.get():i)),Rt(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const o=Ay(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(i=o[e])}if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Rt(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Wy),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class CI extends UO{constructor(){super(...arguments),this.KeyframeResolver=AS}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}}function BO(t){return window.getComputedStyle(t)}class zO extends CI{constructor(){super(...arguments),this.type="html",this.renderInstance=vI}readValueFromInstance(e,n){if(Ps.has(n)){const r=My(n);return r&&r.default||0}else{const r=BO(e),i=(mS(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return tI(e,n)}build(e,n,r){rv(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return ev(e,n,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Rt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class $O extends CI{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=et}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Ps.has(n)){const r=My(n);return r&&r.default||0}return n=_I.has(n)?n:Hy(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return bI(e,n,r)}build(e,n,r){iv(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){wI(e,n,r,i)}mount(e){this.isSVGTag=sv(e.tagName),super.mount(e)}}const qO=(t,e)=>Zy(t)?new $O(e):new zO(e,{allowProjection:t!==R.Fragment}),KO=jO({...VV,...nO,...Kj,...rO},qO),ue=N2(KO);class GO extends R.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function WO({children:t,isPresent:e}){const n=R.useId(),r=R.useRef(null),i=R.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=R.useContext(Xy);return R.useInsertionEffect(()=>{const{width:o,height:a,top:l,left:u}=i.current;if(e||!r.current||!o||!a)return;r.current.dataset.motionPopId=n;const h=document.createElement("style");return s&&(h.nonce=s),document.head.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${u}px !important;
          }
        `),()=>{document.head.removeChild(h)}},[e]),d.jsx(GO,{isPresent:e,childRef:r,sizeRef:i,children:R.cloneElement(t,{ref:r})})}const HO=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o})=>{const a=tv(QO),l=R.useId(),u=R.useCallback(f=>{a.set(f,!0);for(const p of a.values())if(!p)return;r&&r()},[a,r]),h=R.useMemo(()=>({id:l,initial:e,isPresent:n,custom:i,onExitComplete:u,register:f=>(a.set(f,!1),()=>a.delete(f))}),s?[Math.random(),u]:[n,u]);return R.useMemo(()=>{a.forEach((f,p)=>a.set(p,!1))},[n]),R.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=d.jsx(WO,{isPresent:n,children:t})),d.jsx(Dh.Provider,{value:h,children:t})};function QO(){return new Map}const vu=t=>t.key||"";function kx(t){const e=[];return R.Children.forEach(t,n=>{R.isValidElement(n)&&e.push(n)}),e}const qt=({children:t,exitBeforeEnter:e,custom:n,initial:r=!0,onExitComplete:i,presenceAffectsLayout:s=!0,mode:o="sync"})=>{const a=R.useMemo(()=>kx(t),[t]),l=a.map(vu),u=R.useRef(!0),h=R.useRef(a),f=tv(()=>new Map),[p,v]=R.useState(a),[b,E]=R.useState(a);pI(()=>{u.current=!1,h.current=a;for(let y=0;y<b.length;y++){const w=vu(b[y]);l.includes(w)?f.delete(w):f.get(w)!==!0&&f.set(w,!1)}},[b,l.length,l.join("-")]);const A=[];if(a!==p){let y=[...a];for(let w=0;w<b.length;w++){const P=b[w],V=vu(P);l.includes(V)||(y.splice(w,0,P),A.push(P))}o==="wait"&&A.length&&(y=A),E(kx(y)),v(a);return}const{forceRender:_}=R.useContext(Qy);return d.jsx(d.Fragment,{children:b.map(y=>{const w=vu(y),P=a===b||l.includes(w),V=()=>{if(f.has(w))f.set(w,!0);else return;let O=!0;f.forEach(I=>{I||(O=!1)}),O&&(_==null||_(),E(h.current),i&&i())};return d.jsx(HO,{isPresent:P,initial:!u.current||r?void 0:!1,custom:P?void 0:n,presenceAffectsLayout:s,mode:o,onExitComplete:P?void 0:V,children:y},w)})})},cr=({onClick:t,children:e,variant:n="light",glowColor:r="none",isInteractive:i=!1,isSelected:s=!1,className:o="",...a})=>{const l="rounded-lg backdrop-blur-md transition-all",u={light:"bg-white/5",dark:"bg-space-dark/80",darker:"bg-space-darker/90"},h={none:"",blue:"shadow-neon-blue",red:"shadow-neon-red",yellow:"shadow-neon-yellow"},f=i?"cursor-pointer hover:bg-white/10":"",p=s?"bg-white/10 border-blue-400":"border-white/10";return d.jsx(ue.div,{onClick:t,...a,className:`
        ${l}
        ${u[n]}
        ${h[r]}
        ${f}
        ${p}
        ${o}
      `,children:e})};function YO({isOpen:t,onClose:e}){const[n,r]=R.useState("idle"),[i,s]=R.useState(""),o=async a=>{a.preventDefault(),r("sending"),s("");try{if((await fetch("/",{method:"POST",body:new FormData(a.target)})).ok)r("sent");else throw new Error("Something went wrong, please try again.")}catch(l){l instanceof Error?(r("error"),s(l.message)):(r("error"),s("Something went wrong, please try again."))}};return d.jsx(qt,{children:t&&d.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center",children:d.jsxs(ue.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"relative w-full max-w-lg mx-4 bg-space-darker rounded-lg border border-white/10 overflow-hidden",children:[d.jsxs("div",{className:"relative p-6 border-b border-white/10 bg-gradient-to-r from-blue-500/10 to-purple-500/10",children:[d.jsx("div",{className:"absolute inset-0 bg-grid-pattern opacity-10"}),d.jsxs("div",{className:"relative flex justify-between items-center",children:[d.jsx("h2",{className:"text-xl font-orbitron text-white",children:"Welcome to SWGOH TW Counter"}),d.jsx("button",{onClick:e,className:"p-2 text-white/60 hover:text-white hover:bg-white/5 rounded-lg",children:d.jsx(Le,{className:"w-5 h-5"})})]})]}),d.jsxs("div",{className:"p-6 space-y-6 overflow-auto max-h-[500px]",children:[" ",d.jsxs("div",{className:"flex items-start gap-4",children:[d.jsx(x2,{className:"w-6 h-6 text-red-400 flex-shrink-0 mt-1"}),d.jsx("p",{className:"text-white/80",children:"This website is a passion project, built and maintained without any profit motive. Our mission is to help SWGOH players optimize their Territory Wars strategy."})]}),d.jsxs("div",{className:"flex items-start gap-4",children:[d.jsx(J1,{className:"w-6 h-6 text-blue-400 flex-shrink-0 mt-1"}),d.jsx("p",{className:"text-white/80",children:"While the site is free to use, there are ongoing costs for domain hosting and database maintenance. Your support helps keep this resource available to the community."})]}),d.jsxs("div",{children:[d.jsx("p",{className:"text-white/80 mb-2",children:"Have any questions or suggestions? Feel free to drop a message:"}),d.jsxs("form",{name:"contact",method:"POST","data-netlify":"true",onSubmit:o,className:"space-y-4",children:[d.jsx("input",{type:"hidden",name:"form-name",value:"contact"}),d.jsxs("div",{className:"flex flex-col space-y-2",children:[d.jsx("label",{htmlFor:"name",className:"text-white/80",children:"Your Name"}),d.jsx("input",{type:"text",name:"name",id:"name",required:!0,className:"p-2 bg-transparent border border-white/30 text-white rounded-lg",placeholder:"Your Name"})]}),d.jsxs("div",{className:"flex flex-col space-y-2",children:[d.jsx("label",{htmlFor:"email",className:"text-white/80",children:"Your Email"}),d.jsx("input",{type:"email",name:"email",id:"email",required:!0,className:"p-2 bg-transparent border border-white/30 text-white rounded-lg",placeholder:"Your Email"})]}),d.jsxs("div",{className:"flex flex-col space-y-2",children:[d.jsx("label",{htmlFor:"message",className:"text-white/80",children:"Your Message"}),d.jsx("textarea",{name:"message",id:"message",required:!0,className:"p-2 bg-transparent border border-white/30 text-white rounded-lg",placeholder:"Your Message"})]}),d.jsx("button",{type:"submit",className:"px-6 py-3 mt-4 rounded-lg bg-blue-500 text-white hover:bg-blue-600 transition-all",disabled:n==="sending",children:n==="sending"?"Sending...":"Send Message"})]}),n==="sent"&&d.jsx("p",{className:"mt-4 text-green-500",children:"Tack för ditt meddelande! Vi återkommer snart."}),n==="error"&&d.jsx("p",{className:"mt-4 text-red-500",children:i})]})]}),d.jsx("div",{className:"p-2 bg-white/5 flex items-center justify-center gap-1",children:d.jsxs("a",{href:"https://www.buymeacoffee.com/jbrannelid",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-1 px-4 py-2 rounded-lg bg-[#FFDD00] text-black hover:bg-[#FFDD00]/90 transition-all text-sm",children:[d.jsx(X1,{className:"w-4 h-4"}),d.jsx("span",{className:"hidden sm:block",children:"Support the Project"})]})})]})})})}const XO=({isAdmin:t,onLogout:e,onAdminClick:n})=>{const[r,i]=R.useState(!1);return d.jsxs("div",{children:[d.jsx(cr,{variant:"darker",className:"sticky top-0 z-50 py-4",children:d.jsx("div",{className:"container mx-auto px-4",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(k2,{className:"w-6 h-6 text-yellow-400"}),d.jsx("h1",{className:"text-xl font-orbitron text-white"})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("a",{href:"https://www.buymeacoffee.com/jbrannelid",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-[#FFDD00] hover:bg-[#FFDD00]/90 text-black transition-all",children:d.jsx(X1,{className:"w-5 h-5"})}),d.jsxs("button",{onClick:()=>i(!0),className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-purple-500/20 hover:bg-purple-500/30 text-purple-400 transition-all",children:[d.jsx(E2,{className:"w-5 h-5"}),"Contact"]}),t?d.jsxs("button",{onClick:e,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-red-500/20 hover:bg-red-500/30 text-red-400 transition-all",children:[d.jsx(eS,{className:"w-5 h-5"}),"Logout"]}):d.jsxs("button",{onClick:n,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-blue-500/20 hover:bg-blue-500/30 text-blue-400 transition-all",children:[d.jsx(gc,{className:"w-5 h-5"}),"Admin"]})]})]})})}),d.jsx(YO,{isOpen:r,onClose:()=>i(!1)})]})},JO=({activeView:t,onViewChange:e,onOptionsClick:n,filters:r,children:i})=>{const s=!!(r.alignment||r.showTWOmicronOnly||r.showHardCounters||r.excludeGL);return d.jsx(cr,{variant:"darker",className:"sticky top-0 z-30 py-4",children:d.jsx("div",{className:"container mx-auto px-4",children:d.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[d.jsx("div",{className:"relative flex-1",children:i}),d.jsxs("div",{className:"flex gap-2",children:[d.jsxs(cr,{variant:"light",glowColor:t==="squads"?"blue":"none",isInteractive:!0,isSelected:t==="squads",onClick:()=>e("squads"),className:"flex items-center gap-2 px-6 py-2.5",whileHover:{scale:1.02},whileTap:{scale:.98},children:[d.jsx(kh,{className:"w-5 h-5"}),d.jsx("span",{className:"font-medium",children:"Squads"})]}),d.jsxs(cr,{variant:"light",glowColor:t==="fleets"?"blue":"none",isInteractive:!0,isSelected:t==="fleets",onClick:()=>e("fleets"),className:"flex items-center gap-2 px-6 py-2.5",whileHover:{scale:1.02},whileTap:{scale:.98},children:[d.jsx(yc,{className:"w-5 h-5"}),d.jsx("span",{className:"font-medium",children:"Fleets"})]}),d.jsxs(cr,{variant:"light",glowColor:s?"blue":"none",isInteractive:!0,isSelected:s,onClick:n,className:"flex items-center gap-2 px-6 py-2.5",whileHover:{scale:1.02},whileTap:{scale:.98},children:[d.jsx(gc,{className:`w-5 h-5 ${s?"text-blue-400":""}`}),d.jsx("span",{className:"font-medium",children:"Filters"}),s&&d.jsx(ue.div,{className:"w-2 h-2 rounded-full bg-blue-400",initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500,damping:30}})]})]})]})})})};var Cx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PI=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},ZO=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},RI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,h=s>>2,f=(s&3)<<4|a>>4;let p=(a&15)<<2|u>>6,v=u&63;l||(v=64,o||(p=64)),r.push(n[h],n[f],n[p],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(PI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):ZO(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||f==null)throw new eL;const p=s<<2|a>>4;if(r.push(p),u!==64){const v=a<<4&240|u>>2;if(r.push(v),f!==64){const b=u<<6&192|f;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class eL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const tL=function(t){const e=PI(t);return RI.encodeByteArray(e,!0)},Fd=function(t){return tL(t).replace(/\./g,"")},NI=function(t){try{return RI.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rL=()=>nL().__FIREBASE_DEFAULTS__,iL=()=>{if(typeof process>"u"||typeof Cx>"u")return;const t=Cx.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},sL=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&NI(t[1]);return e&&JSON.parse(e)},Oh=()=>{try{return rL()||iL()||sL()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},DI=t=>{var e,n;return(n=(e=Oh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},oL=t=>{const e=DI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},VI=()=>{var t;return(t=Oh())===null||t===void 0?void 0:t.config},jI=t=>{var e;return(e=Oh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aL{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lL(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Fd(JSON.stringify(n)),Fd(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function cL(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(lt())}function uL(){var t;const e=(t=Oh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function dL(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function hL(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function fL(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function pL(){const t=lt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function OI(){return!uL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function LI(){try{return typeof indexedDB=="object"}catch{return!1}}function mL(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gL="FirebaseError";class er extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=gL,Object.setPrototypeOf(this,er.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bc.prototype.create)}}class bc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?yL(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new er(i,a,r)}}function yL(t,e){return t.replace(vL,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const vL=/\{\$([^}]+)}/g;function _L(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Xl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Px(s)&&Px(o)){if(!Xl(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Px(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ec(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function el(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function tl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function wL(t,e){const n=new xL(t,e);return n.subscribe.bind(n)}class xL{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");bL(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=wp),i.error===void 0&&(i.error=wp),i.complete===void 0&&(i.complete=wp);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function bL(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function wp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ze(t){return t&&t._delegate?t._delegate:t}class _i{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ki="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EL{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new aL;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(SL(e))try{this.getOrInitializeService({instanceIdentifier:Ki})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Ki){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ki){return this.instances.has(e)}getOptions(e=Ki){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:TL(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ki){return this.component?this.component.multipleInstances?e:Ki:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function TL(t){return t===Ki?void 0:t}function SL(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new EL(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ge;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ge||(ge={}));const AL={debug:ge.DEBUG,verbose:ge.VERBOSE,info:ge.INFO,warn:ge.WARN,error:ge.ERROR,silent:ge.SILENT},kL=ge.INFO,CL={[ge.DEBUG]:"log",[ge.VERBOSE]:"log",[ge.INFO]:"info",[ge.WARN]:"warn",[ge.ERROR]:"error"},PL=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=CL[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ov{constructor(e){this.name=e,this._logLevel=kL,this._logHandler=PL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?AL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ge.DEBUG,...e),this._logHandler(this,ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ge.VERBOSE,...e),this._logHandler(this,ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ge.INFO,...e),this._logHandler(this,ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ge.WARN,...e),this._logHandler(this,ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ge.ERROR,...e),this._logHandler(this,ge.ERROR,...e)}}const RL=(t,e)=>e.some(n=>t instanceof n);let Rx,Nx;function NL(){return Rx||(Rx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function DL(){return Nx||(Nx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const MI=new WeakMap,Qm=new WeakMap,FI=new WeakMap,xp=new WeakMap,av=new WeakMap;function VL(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(ui(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&MI.set(n,t)}).catch(()=>{}),av.set(e,t),e}function jL(t){if(Qm.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Qm.set(t,e)}let Ym={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Qm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||FI.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ui(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function OL(t){Ym=t(Ym)}function LL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(bp(this),e,...n);return FI.set(r,e.sort?e.sort():[e]),ui(r)}:DL().includes(t)?function(...e){return t.apply(bp(this),e),ui(MI.get(this))}:function(...e){return ui(t.apply(bp(this),e))}}function ML(t){return typeof t=="function"?LL(t):(t instanceof IDBTransaction&&jL(t),RL(t,NL())?new Proxy(t,Ym):t)}function ui(t){if(t instanceof IDBRequest)return VL(t);if(xp.has(t))return xp.get(t);const e=ML(t);return e!==t&&(xp.set(t,e),av.set(e,t)),e}const bp=t=>av.get(t);function FL(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=ui(o);return r&&o.addEventListener("upgradeneeded",l=>{r(ui(o.result),l.oldVersion,l.newVersion,ui(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const UL=["get","getKey","getAll","getAllKeys","count"],BL=["put","add","delete","clear"],Ep=new Map;function Dx(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ep.get(e))return Ep.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=BL.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||UL.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return Ep.set(e,s),s}OL(t=>({...t,get:(e,n,r)=>Dx(e,n)||t.get(e,n,r),has:(e,n)=>!!Dx(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zL{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if($L(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function $L(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Xm="@firebase/app",Vx="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sr=new ov("@firebase/app"),qL="@firebase/app-compat",KL="@firebase/analytics-compat",GL="@firebase/analytics",WL="@firebase/app-check-compat",HL="@firebase/app-check",QL="@firebase/auth",YL="@firebase/auth-compat",XL="@firebase/database",JL="@firebase/data-connect",ZL="@firebase/database-compat",eM="@firebase/functions",tM="@firebase/functions-compat",nM="@firebase/installations",rM="@firebase/installations-compat",iM="@firebase/messaging",sM="@firebase/messaging-compat",oM="@firebase/performance",aM="@firebase/performance-compat",lM="@firebase/remote-config",cM="@firebase/remote-config-compat",uM="@firebase/storage",dM="@firebase/storage-compat",hM="@firebase/firestore",fM="@firebase/vertexai-preview",pM="@firebase/firestore-compat",mM="firebase",gM="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jm="[DEFAULT]",yM={[Xm]:"fire-core",[qL]:"fire-core-compat",[GL]:"fire-analytics",[KL]:"fire-analytics-compat",[HL]:"fire-app-check",[WL]:"fire-app-check-compat",[QL]:"fire-auth",[YL]:"fire-auth-compat",[XL]:"fire-rtdb",[JL]:"fire-data-connect",[ZL]:"fire-rtdb-compat",[eM]:"fire-fn",[tM]:"fire-fn-compat",[nM]:"fire-iid",[rM]:"fire-iid-compat",[iM]:"fire-fcm",[sM]:"fire-fcm-compat",[oM]:"fire-perf",[aM]:"fire-perf-compat",[lM]:"fire-rc",[cM]:"fire-rc-compat",[uM]:"fire-gcs",[dM]:"fire-gcs-compat",[hM]:"fire-fst",[pM]:"fire-fst-compat",[fM]:"fire-vertex","fire-js":"fire-js",[mM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jl=new Map,vM=new Map,Zm=new Map;function jx(t,e){try{t.container.addComponent(e)}catch(n){Sr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function gs(t){const e=t.name;if(Zm.has(e))return Sr.debug(`There were multiple attempts to register component ${e}.`),!1;Zm.set(e,t);for(const n of Jl.values())jx(n,t);for(const n of vM.values())jx(n,t);return!0}function Lh(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ur(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _M={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},di=new bc("app","Firebase",_M);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wM{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new _i("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw di.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rs=gM;function UI(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Jm,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw di.create("bad-app-name",{appName:String(i)});if(n||(n=VI()),!n)throw di.create("no-options");const s=Jl.get(i);if(s){if(Xl(n,s.options)&&Xl(r,s.config))return s;throw di.create("duplicate-app",{appName:i})}const o=new IL(i);for(const l of Zm.values())o.addComponent(l);const a=new wM(n,r,o);return Jl.set(i,a),a}function BI(t=Jm){const e=Jl.get(t);if(!e&&t===Jm&&VI())return UI();if(!e)throw di.create("no-app",{appName:t});return e}function Ox(){return Array.from(Jl.values())}function Qn(t,e,n){var r;let i=(r=yM[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Sr.warn(a.join(" "));return}gs(new _i(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xM="firebase-heartbeat-database",bM=1,Zl="firebase-heartbeat-store";let Tp=null;function zI(){return Tp||(Tp=FL(xM,bM,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Zl)}catch(n){console.warn(n)}}}}).catch(t=>{throw di.create("idb-open",{originalErrorMessage:t.message})})),Tp}async function EM(t){try{const n=(await zI()).transaction(Zl),r=await n.objectStore(Zl).get($I(t));return await n.done,r}catch(e){if(e instanceof er)Sr.warn(e.message);else{const n=di.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Sr.warn(n.message)}}}async function Lx(t,e){try{const r=(await zI()).transaction(Zl,"readwrite");await r.objectStore(Zl).put(e,$I(t)),await r.done}catch(n){if(n instanceof er)Sr.warn(n.message);else{const r=di.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Sr.warn(r.message)}}}function $I(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TM=1024,SM=30*24*60*60*1e3;class IM{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new kM(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Mx();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=SM}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Sr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Mx(),{heartbeatsToSend:r,unsentEntries:i}=AM(this._heartbeatsCache.heartbeats),s=Fd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Sr.warn(n),""}}}function Mx(){return new Date().toISOString().substring(0,10)}function AM(t,e=TM){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Fx(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Fx(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class kM{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return LI()?mL().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await EM(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Lx(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Lx(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Fx(t){return Fd(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CM(t){gs(new _i("platform-logger",e=>new zL(e),"PRIVATE")),gs(new _i("heartbeat",e=>new IM(e),"PRIVATE")),Qn(Xm,Vx,t),Qn(Xm,Vx,"esm2017"),Qn("fire-js","")}CM("");var PM="firebase",RM="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qn(PM,RM,"app");function lv(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function qI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const NM=qI,KI=new bc("auth","Firebase",qI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ud=new ov("@firebase/auth");function DM(t,...e){Ud.logLevel<=ge.WARN&&Ud.warn(`Auth (${Rs}): ${t}`,...e)}function Hu(t,...e){Ud.logLevel<=ge.ERROR&&Ud.error(`Auth (${Rs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function On(t,...e){throw cv(t,...e)}function Yn(t,...e){return cv(t,...e)}function GI(t,e,n){const r=Object.assign(Object.assign({},NM()),{[e]:n});return new bc("auth","Firebase",r).create(e,{appName:t.name})}function hi(t){return GI(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function cv(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return KI.create(t,...e)}function ce(t,e,...n){if(!t)throw cv(e,...n)}function dr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Hu(e),new Error(e)}function Ir(t,e){t||dr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function VM(){return Ux()==="http:"||Ux()==="https:"}function Ux(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(VM()||hL()||"connection"in navigator)?navigator.onLine:!0}function OM(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ir(n>e,"Short delay should be less than long delay!"),this.isMobile=cL()||fL()}get(){return jM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uv(t,e){Ir(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;dr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;dr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;dr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MM=new Tc(3e4,6e4);function Ns(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ci(t,e,n,r,i={}){return HI(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Ec(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:l},s);return dL()||(u.referrerPolicy="no-referrer"),WI.fetch()(QI(t,t.config.apiHost,n,a),u)})}async function HI(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},LM),e);try{const i=new UM(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw _u(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw _u(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw _u(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw _u(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw GI(t,h,u);On(t,h)}}catch(i){if(i instanceof er)throw i;On(t,"network-request-failed",{message:String(i)})}}async function Mh(t,e,n,r,i={}){const s=await Ci(t,e,n,r,i);return"mfaPendingCredential"in s&&On(t,"multi-factor-auth-required",{_serverResponse:s}),s}function QI(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?uv(t.config,i):`${t.config.apiScheme}://${i}`}function FM(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class UM{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Yn(this.auth,"network-request-failed")),MM.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function _u(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Yn(t,e,r);return i.customData._tokenResponse=n,i}function Bx(t){return t!==void 0&&t.enterprise!==void 0}class BM{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return FM(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function zM(t,e){return Ci(t,"GET","/v2/recaptchaConfig",Ns(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $M(t,e){return Ci(t,"POST","/v1/accounts:delete",e)}async function YI(t,e){return Ci(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function qM(t,e=!1){const n=Ze(t),r=await n.getIdToken(e),i=dv(r);ce(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:wl(Sp(i.auth_time)),issuedAtTime:wl(Sp(i.iat)),expirationTime:wl(Sp(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Sp(t){return Number(t)*1e3}function dv(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Hu("JWT malformed, contained fewer than 3 sections"),null;try{const i=NI(n);return i?JSON.parse(i):(Hu("Failed to decode base64 JWT payload"),null)}catch(i){return Hu("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function zx(t){const e=dv(t);return ce(e,"internal-error"),ce(typeof e.exp<"u","internal-error"),ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ec(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof er&&KM(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function KM({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=wl(this.lastLoginAt),this.creationTime=wl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bd(t){var e;const n=t.auth,r=await t.getIdToken(),i=await ec(t,YI(n,{idToken:r}));ce(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?XI(s.providerUserInfo):[],a=HM(t.providerData,o),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?u:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new tg(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,f)}async function WM(t){const e=Ze(t);await Bd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function HM(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function XI(t){return t.map(e=>{var{providerId:n}=e,r=lv(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QM(t,e){const n=await HI(t,{},async()=>{const r=Ec({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=QI(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",WI.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function YM(t,e){return Ci(t,"POST","/v2/accounts:revokeToken",Ns(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ce(e.idToken,"internal-error"),ce(typeof e.idToken<"u","internal-error"),ce(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):zx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ce(e.length!==0,"internal-error");const n=zx(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await QM(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Eo;return r&&(ce(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ce(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ce(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Eo,this.toJSON())}_performRefresh(){return dr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Or(t,e){ce(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class hr{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=lv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new GM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new tg(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await ec(this,this.stsTokenManager.getToken(this.auth,e));return ce(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return qM(this,e)}reload(){return WM(this)}_assign(e){this!==e&&(ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new hr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Bd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ur(this.auth.app))return Promise.reject(hi(this.auth));const e=await this.getIdToken();return await ec(this,$M(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,u,h;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(i=n.email)!==null&&i!==void 0?i:void 0,v=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,b=(o=n.photoURL)!==null&&o!==void 0?o:void 0,E=(a=n.tenantId)!==null&&a!==void 0?a:void 0,A=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,_=(u=n.createdAt)!==null&&u!==void 0?u:void 0,y=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:w,emailVerified:P,isAnonymous:V,providerData:O,stsTokenManager:I}=n;ce(w&&I,e,"internal-error");const x=Eo.fromJSON(this.name,I);ce(typeof w=="string",e,"internal-error"),Or(f,e.name),Or(p,e.name),ce(typeof P=="boolean",e,"internal-error"),ce(typeof V=="boolean",e,"internal-error"),Or(v,e.name),Or(b,e.name),Or(E,e.name),Or(A,e.name),Or(_,e.name),Or(y,e.name);const k=new hr({uid:w,auth:e,email:p,emailVerified:P,displayName:f,isAnonymous:V,photoURL:b,phoneNumber:v,tenantId:E,stsTokenManager:x,createdAt:_,lastLoginAt:y});return O&&Array.isArray(O)&&(k.providerData=O.map(C=>Object.assign({},C))),A&&(k._redirectEventId=A),k}static async _fromIdTokenResponse(e,n,r=!1){const i=new Eo;i.updateFromServerResponse(n);const s=new hr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Bd(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];ce(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?XI(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Eo;a.updateFromIdToken(r);const l=new hr({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new tg(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x=new Map;function fr(t){Ir(t instanceof Function,"Expected a class definition");let e=$x.get(t);return e?(Ir(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,$x.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}JI.type="NONE";const qx=JI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qu(t,e,n){return`firebase:${t}:${e}:${n}`}class To{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Qu(this.userKey,i.apiKey,s),this.fullPersistenceKey=Qu("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?hr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new To(fr(qx),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||fr(qx);const o=Qu(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const h=await u._get(o);if(h){const f=hr._fromJSON(e,h);u!==s&&(a=f),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new To(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new To(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kx(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(nA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ZI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(iA(e))return"Blackberry";if(sA(e))return"Webos";if(eA(e))return"Safari";if((e.includes("chrome/")||tA(e))&&!e.includes("edge/"))return"Chrome";if(rA(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function ZI(t=lt()){return/firefox\//i.test(t)}function eA(t=lt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function tA(t=lt()){return/crios\//i.test(t)}function nA(t=lt()){return/iemobile/i.test(t)}function rA(t=lt()){return/android/i.test(t)}function iA(t=lt()){return/blackberry/i.test(t)}function sA(t=lt()){return/webos/i.test(t)}function hv(t=lt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function XM(t=lt()){var e;return hv(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function JM(){return pL()&&document.documentMode===10}function oA(t=lt()){return hv(t)||rA(t)||sA(t)||iA(t)||/windows phone/i.test(t)||nA(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aA(t,e=[]){let n;switch(t){case"Browser":n=Kx(lt());break;case"Worker":n=`${Kx(lt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Rs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e4(t,e={}){return Ci(t,"GET","/v2/passwordPolicy",Ns(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t4=6;class n4{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:t4,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Gx(this),this.idTokenSubscription=new Gx(this),this.beforeStateQueue=new ZM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=KI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=fr(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await To.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await YI(this,{idToken:e}),r=await hr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(ur(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Bd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=OM()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ur(this.app))return Promise.reject(hi(this));const n=e?Ze(e):null;return n&&ce(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ur(this.app)?Promise.reject(hi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ur(this.app)?Promise.reject(hi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(fr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await e4(this),n=new n4(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new bc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await YM(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&fr(e)||this._popupRedirectResolver;ce(n,this,"argument-error"),this.redirectPersistenceManager=await To.create(this,[fr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ce(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=aA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&DM(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ia(t){return Ze(t)}class Gx{constructor(e){this.auth=e,this.observer=null,this.addObserver=wL(n=>this.observer=n)}get next(){return ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function i4(t){Fh=t}function lA(t){return Fh.loadJS(t)}function s4(){return Fh.recaptchaEnterpriseScript}function o4(){return Fh.gapiScript}function a4(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const l4="recaptcha-enterprise",c4="NO_RECAPTCHA";class u4{constructor(e){this.type=l4,this.auth=ia(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{zM(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new BM(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;Bx(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(c4)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&Bx(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=s4();l.length!==0&&(l+=a),lA(l).then(()=>{i(a,s,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function Wx(t,e,n,r=!1){const i=new u4(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Hx(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await Wx(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Wx(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d4(t,e){const n=Lh(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Xl(s,e??{}))return i;On(i,"already-initialized")}return n.initialize({options:e})}function h4(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(fr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function f4(t,e,n){const r=ia(t);ce(r._canInitEmulator,r,"emulator-config-failed"),ce(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=cA(e),{host:o,port:a}=p4(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),m4()}function cA(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function p4(t){const e=cA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Qx(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Qx(o)}}}function Qx(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function m4(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return dr("not implemented")}_getIdTokenResponse(e){return dr("not implemented")}_linkToIdToken(e,n){return dr("not implemented")}_getReauthenticationResolver(e){return dr("not implemented")}}async function g4(t,e){return Ci(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y4(t,e){return Mh(t,"POST","/v1/accounts:signInWithPassword",Ns(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v4(t,e){return Mh(t,"POST","/v1/accounts:signInWithEmailLink",Ns(t,e))}async function _4(t,e){return Mh(t,"POST","/v1/accounts:signInWithEmailLink",Ns(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc extends fv{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new tc(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new tc(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Hx(e,n,"signInWithPassword",y4);case"emailLink":return v4(e,{email:this._email,oobCode:this._password});default:On(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Hx(e,r,"signUpPassword",g4);case"emailLink":return _4(e,{idToken:n,email:this._email,oobCode:this._password});default:On(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function So(t,e){return Mh(t,"POST","/v1/accounts:signInWithIdp",Ns(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w4="http://localhost";class ys extends fv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ys(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):On("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=lv(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new ys(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return So(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,So(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,So(e,n)}buildRequest(){const e={requestUri:w4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ec(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x4(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function b4(t){const e=el(tl(t)).link,n=e?el(tl(e)).deep_link_id:null,r=el(tl(t)).deep_link_id;return(r?el(tl(r)).link:null)||r||n||e||t}class pv{constructor(e){var n,r,i,s,o,a;const l=el(tl(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(r=l.oobCode)!==null&&r!==void 0?r:null,f=x4((i=l.mode)!==null&&i!==void 0?i:null);ce(u&&h&&f,"argument-error"),this.apiKey=u,this.operation=f,this.code=h,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=b4(e);try{return new pv(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(){this.providerId=sa.PROVIDER_ID}static credential(e,n){return tc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=pv.parseLink(n);return ce(r,"argument-error"),tc._fromEmailAndCode(e,r.code,r.tenantId)}}sa.PROVIDER_ID="password";sa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";sa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc extends uA{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr extends Sc{constructor(){super("facebook.com")}static credential(e){return ys._fromParams({providerId:Wr.PROVIDER_ID,signInMethod:Wr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wr.credentialFromTaggedObject(e)}static credentialFromError(e){return Wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wr.credential(e.oauthAccessToken)}catch{return null}}}Wr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Wr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr extends Sc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ys._fromParams({providerId:Hr.PROVIDER_ID,signInMethod:Hr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Hr.credentialFromTaggedObject(e)}static credentialFromError(e){return Hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Hr.credential(n,r)}catch{return null}}}Hr.GOOGLE_SIGN_IN_METHOD="google.com";Hr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr extends Sc{constructor(){super("github.com")}static credential(e){return ys._fromParams({providerId:Qr.PROVIDER_ID,signInMethod:Qr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qr.credentialFromTaggedObject(e)}static credentialFromError(e){return Qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qr.credential(e.oauthAccessToken)}catch{return null}}}Qr.GITHUB_SIGN_IN_METHOD="github.com";Qr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr extends Sc{constructor(){super("twitter.com")}static credential(e,n){return ys._fromParams({providerId:Yr.PROVIDER_ID,signInMethod:Yr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Yr.credentialFromTaggedObject(e)}static credentialFromError(e){return Yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Yr.credential(n,r)}catch{return null}}}Yr.TWITTER_SIGN_IN_METHOD="twitter.com";Yr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await hr._fromIdTokenResponse(e,r,i),o=Yx(r);return new Mo({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Yx(r);return new Mo({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Yx(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd extends er{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,zd.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new zd(e,n,r,i)}}function dA(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?zd._fromErrorAndOperation(t,s,e,r):s})}async function E4(t,e,n=!1){const r=await ec(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Mo._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T4(t,e,n=!1){const{auth:r}=t;if(ur(r.app))return Promise.reject(hi(r));const i="reauthenticate";try{const s=await ec(t,dA(r,i,e,t),n);ce(s.idToken,r,"internal-error");const o=dv(s.idToken);ce(o,r,"internal-error");const{sub:a}=o;return ce(t.uid===a,r,"user-mismatch"),Mo._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&On(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hA(t,e,n=!1){if(ur(t.app))return Promise.reject(hi(t));const r="signIn",i=await dA(t,r,e),s=await Mo._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function S4(t,e){return hA(ia(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I4(t){const e=ia(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function A4(t,e,n){return ur(t.app)?Promise.reject(hi(t)):S4(Ze(t),sa.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&I4(t),r})}function k4(t,e,n,r){return Ze(t).onIdTokenChanged(e,n,r)}function C4(t,e,n){return Ze(t).beforeAuthStateChanged(e,n)}function fA(t,e,n,r){return Ze(t).onAuthStateChanged(e,n,r)}function Xx(t){return Ze(t).signOut()}const $d="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem($d,"1"),this.storage.removeItem($d),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P4=1e3,R4=10;class mA extends pA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=oA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);JM()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,R4):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},P4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}mA.type="LOCAL";const N4=mA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA extends pA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}gA.type="SESSION";const yA=gA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D4(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Uh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await D4(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Uh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mv(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=mv("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const p=f;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xn(){return window}function j4(t){Xn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vA(){return typeof Xn().WorkerGlobalScope<"u"&&typeof Xn().importScripts=="function"}async function O4(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function L4(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function M4(){return vA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A="firebaseLocalStorageDb",F4=1,qd="firebaseLocalStorage",wA="fbase_key";class Ic{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Bh(t,e){return t.transaction([qd],e?"readwrite":"readonly").objectStore(qd)}function U4(){const t=indexedDB.deleteDatabase(_A);return new Ic(t).toPromise()}function ng(){const t=indexedDB.open(_A,F4);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(qd,{keyPath:wA})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(qd)?e(r):(r.close(),await U4(),e(await ng()))})})}async function Jx(t,e,n){const r=Bh(t,!0).put({[wA]:e,value:n});return new Ic(r).toPromise()}async function B4(t,e){const n=Bh(t,!1).get(e),r=await new Ic(n).toPromise();return r===void 0?null:r.value}function Zx(t,e){const n=Bh(t,!0).delete(e);return new Ic(n).toPromise()}const z4=800,$4=3;class xA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ng(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>$4)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return vA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Uh._getInstance(M4()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await O4(),!this.activeServiceWorker)return;this.sender=new V4(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||L4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ng();return await Jx(e,$d,"1"),await Zx(e,$d),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Jx(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>B4(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Zx(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Bh(i,!1).getAll();return new Ic(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),z4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}xA.type="LOCAL";const q4=xA;new Tc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K4(t,e){return e?fr(e):(ce(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv extends fv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return So(e,this._buildIdpRequest())}_linkToIdToken(e,n){return So(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return So(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function G4(t){return hA(t.auth,new gv(t),t.bypassAuthState)}function W4(t){const{auth:e,user:n}=t;return ce(n,e,"internal-error"),T4(n,new gv(t),t.bypassAuthState)}async function H4(t){const{auth:e,user:n}=t;return ce(n,e,"internal-error"),E4(n,new gv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return G4;case"linkViaPopup":case"linkViaRedirect":return H4;case"reauthViaPopup":case"reauthViaRedirect":return W4;default:On(this.auth,"internal-error")}}resolve(e){Ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q4=new Tc(2e3,1e4);class go extends bA{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,go.currentPopupAction&&go.currentPopupAction.cancel(),go.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ce(e,this.auth,"internal-error"),e}async onExecution(){Ir(this.filter.length===1,"Popup operations only handle one event");const e=mv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Yn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Yn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,go.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Yn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Q4.get())};e()}}go.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y4="pendingRedirect",Yu=new Map;class X4 extends bA{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Yu.get(this.auth._key());if(!e){try{const r=await J4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Yu.set(this.auth._key(),e)}return this.bypassAuthState||Yu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function J4(t,e){const n=tF(e),r=eF(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function Z4(t,e){Yu.set(t._key(),e)}function eF(t){return fr(t._redirectPersistence)}function tF(t){return Qu(Y4,t.config.apiKey,t.name)}async function nF(t,e,n=!1){if(ur(t.app))return Promise.reject(hi(t));const r=ia(t),i=K4(r,e),o=await new X4(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rF=10*60*1e3;class iF{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!sF(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!EA(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Yn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=rF&&this.cachedEventUids.clear(),this.cachedEventUids.has(eb(e))}saveEventToCache(e){this.cachedEventUids.add(eb(e)),this.lastProcessedEventTime=Date.now()}}function eb(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function EA({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function sF(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return EA(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oF(t,e={}){return Ci(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aF=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lF=/^https?/;async function cF(t){if(t.config.emulator)return;const{authorizedDomains:e}=await oF(t);for(const n of e)try{if(uF(n))return}catch{}On(t,"unauthorized-domain")}function uF(t){const e=eg(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!lF.test(n))return!1;if(aF.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dF=new Tc(3e4,6e4);function tb(){const t=Xn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function hF(t){return new Promise((e,n)=>{var r,i,s;function o(){tb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{tb(),n(Yn(t,"network-request-failed"))},timeout:dF.get()})}if(!((i=(r=Xn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Xn().gapi)===null||s===void 0)&&s.load)o();else{const a=a4("iframefcb");return Xn()[a]=()=>{gapi.load?o():n(Yn(t,"network-request-failed"))},lA(`${o4()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Xu=null,e})}let Xu=null;function fF(t){return Xu=Xu||hF(t),Xu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pF=new Tc(5e3,15e3),mF="__/auth/iframe",gF="emulator/auth/iframe",yF={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},vF=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _F(t){const e=t.config;ce(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?uv(e,gF):`https://${t.config.authDomain}/${mF}`,r={apiKey:e.apiKey,appName:t.name,v:Rs},i=vF.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Ec(r).slice(1)}`}async function wF(t){const e=await fF(t),n=Xn().gapi;return ce(n,t,"internal-error"),e.open({where:document.body,url:_F(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yF,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Yn(t,"network-request-failed"),a=Xn().setTimeout(()=>{s(o)},pF.get());function l(){Xn().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xF={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},bF=500,EF=600,TF="_blank",SF="http://localhost";class nb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function IF(t,e,n,r=bF,i=EF){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},xF),{width:r.toString(),height:i.toString(),top:s,left:o}),u=lt().toLowerCase();n&&(a=tA(u)?TF:n),ZI(u)&&(e=e||SF,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[v,b])=>`${p}${v}=${b},`,"");if(XM(u)&&a!=="_self")return AF(e||"",a),new nb(null);const f=window.open(e||"",a,h);ce(f,t,"popup-blocked");try{f.focus()}catch{}return new nb(f)}function AF(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kF="__/auth/handler",CF="emulator/auth/handler",PF=encodeURIComponent("fac");async function rb(t,e,n,r,i,s){ce(t.config.authDomain,t,"auth-domain-config-required"),ce(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Rs,eventId:i};if(e instanceof uA){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",_L(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof Sc){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),u=l?`#${PF}=${encodeURIComponent(l)}`:"";return`${RF(t)}?${Ec(a).slice(1)}${u}`}function RF({config:t}){return t.emulator?uv(t,CF):`https://${t.authDomain}/${kF}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ip="webStorageSupport";class NF{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=yA,this._completeRedirectFn=nF,this._overrideRedirectResult=Z4}async _openPopup(e,n,r,i){var s;Ir((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await rb(e,n,r,eg(),i);return IF(e,o,mv())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await rb(e,n,r,eg(),i);return j4(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Ir(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await wF(e),r=new iF(e);return n.register("authEvent",i=>(ce(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ip,{type:Ip},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Ip];o!==void 0&&n(!!o),On(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=cF(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return oA()||eA()||hv()}}const DF=NF;var ib="@firebase/auth",sb="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VF{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jF(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function OF(t){gs(new _i("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ce(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:aA(t)},u=new r4(r,i,s,l);return h4(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),gs(new _i("auth-internal",e=>{const n=ia(e.getProvider("auth").getImmediate());return(r=>new VF(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Qn(ib,sb,jF(t)),Qn(ib,sb,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LF=5*60,MF=jI("authIdTokenMaxAge")||LF;let ob=null;const FF=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>MF)return;const i=n==null?void 0:n.token;ob!==i&&(ob=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function UF(t=BI()){const e=Lh(t,"auth");if(e.isInitialized())return e.getImmediate();const n=d4(t,{popupRedirectResolver:DF,persistence:[q4,N4,yA]}),r=jI("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=FF(s.toString());C4(n,o,()=>o(n.currentUser)),k4(n,a=>o(a))}}const i=DI("auth");return i&&f4(n,`http://${i}`),n}function BF(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}i4({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Yn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",BF().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});OF("Browser");var ab=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ls,TA;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,x){function k(){}k.prototype=x.prototype,I.D=x.prototype,I.prototype=new k,I.prototype.constructor=I,I.C=function(C,D,N){for(var T=Array(arguments.length-2),F=2;F<arguments.length;F++)T[F-2]=arguments[F];return x.prototype[D].apply(C,T)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,x,k){k||(k=0);var C=Array(16);if(typeof x=="string")for(var D=0;16>D;++D)C[D]=x.charCodeAt(k++)|x.charCodeAt(k++)<<8|x.charCodeAt(k++)<<16|x.charCodeAt(k++)<<24;else for(D=0;16>D;++D)C[D]=x[k++]|x[k++]<<8|x[k++]<<16|x[k++]<<24;x=I.g[0],k=I.g[1],D=I.g[2];var N=I.g[3],T=x+(N^k&(D^N))+C[0]+3614090360&4294967295;x=k+(T<<7&4294967295|T>>>25),T=N+(D^x&(k^D))+C[1]+3905402710&4294967295,N=x+(T<<12&4294967295|T>>>20),T=D+(k^N&(x^k))+C[2]+606105819&4294967295,D=N+(T<<17&4294967295|T>>>15),T=k+(x^D&(N^x))+C[3]+3250441966&4294967295,k=D+(T<<22&4294967295|T>>>10),T=x+(N^k&(D^N))+C[4]+4118548399&4294967295,x=k+(T<<7&4294967295|T>>>25),T=N+(D^x&(k^D))+C[5]+1200080426&4294967295,N=x+(T<<12&4294967295|T>>>20),T=D+(k^N&(x^k))+C[6]+2821735955&4294967295,D=N+(T<<17&4294967295|T>>>15),T=k+(x^D&(N^x))+C[7]+4249261313&4294967295,k=D+(T<<22&4294967295|T>>>10),T=x+(N^k&(D^N))+C[8]+1770035416&4294967295,x=k+(T<<7&4294967295|T>>>25),T=N+(D^x&(k^D))+C[9]+2336552879&4294967295,N=x+(T<<12&4294967295|T>>>20),T=D+(k^N&(x^k))+C[10]+4294925233&4294967295,D=N+(T<<17&4294967295|T>>>15),T=k+(x^D&(N^x))+C[11]+2304563134&4294967295,k=D+(T<<22&4294967295|T>>>10),T=x+(N^k&(D^N))+C[12]+1804603682&4294967295,x=k+(T<<7&4294967295|T>>>25),T=N+(D^x&(k^D))+C[13]+4254626195&4294967295,N=x+(T<<12&4294967295|T>>>20),T=D+(k^N&(x^k))+C[14]+2792965006&4294967295,D=N+(T<<17&4294967295|T>>>15),T=k+(x^D&(N^x))+C[15]+1236535329&4294967295,k=D+(T<<22&4294967295|T>>>10),T=x+(D^N&(k^D))+C[1]+4129170786&4294967295,x=k+(T<<5&4294967295|T>>>27),T=N+(k^D&(x^k))+C[6]+3225465664&4294967295,N=x+(T<<9&4294967295|T>>>23),T=D+(x^k&(N^x))+C[11]+643717713&4294967295,D=N+(T<<14&4294967295|T>>>18),T=k+(N^x&(D^N))+C[0]+3921069994&4294967295,k=D+(T<<20&4294967295|T>>>12),T=x+(D^N&(k^D))+C[5]+3593408605&4294967295,x=k+(T<<5&4294967295|T>>>27),T=N+(k^D&(x^k))+C[10]+38016083&4294967295,N=x+(T<<9&4294967295|T>>>23),T=D+(x^k&(N^x))+C[15]+3634488961&4294967295,D=N+(T<<14&4294967295|T>>>18),T=k+(N^x&(D^N))+C[4]+3889429448&4294967295,k=D+(T<<20&4294967295|T>>>12),T=x+(D^N&(k^D))+C[9]+568446438&4294967295,x=k+(T<<5&4294967295|T>>>27),T=N+(k^D&(x^k))+C[14]+3275163606&4294967295,N=x+(T<<9&4294967295|T>>>23),T=D+(x^k&(N^x))+C[3]+4107603335&4294967295,D=N+(T<<14&4294967295|T>>>18),T=k+(N^x&(D^N))+C[8]+1163531501&4294967295,k=D+(T<<20&4294967295|T>>>12),T=x+(D^N&(k^D))+C[13]+2850285829&4294967295,x=k+(T<<5&4294967295|T>>>27),T=N+(k^D&(x^k))+C[2]+4243563512&4294967295,N=x+(T<<9&4294967295|T>>>23),T=D+(x^k&(N^x))+C[7]+1735328473&4294967295,D=N+(T<<14&4294967295|T>>>18),T=k+(N^x&(D^N))+C[12]+2368359562&4294967295,k=D+(T<<20&4294967295|T>>>12),T=x+(k^D^N)+C[5]+4294588738&4294967295,x=k+(T<<4&4294967295|T>>>28),T=N+(x^k^D)+C[8]+2272392833&4294967295,N=x+(T<<11&4294967295|T>>>21),T=D+(N^x^k)+C[11]+1839030562&4294967295,D=N+(T<<16&4294967295|T>>>16),T=k+(D^N^x)+C[14]+4259657740&4294967295,k=D+(T<<23&4294967295|T>>>9),T=x+(k^D^N)+C[1]+2763975236&4294967295,x=k+(T<<4&4294967295|T>>>28),T=N+(x^k^D)+C[4]+1272893353&4294967295,N=x+(T<<11&4294967295|T>>>21),T=D+(N^x^k)+C[7]+4139469664&4294967295,D=N+(T<<16&4294967295|T>>>16),T=k+(D^N^x)+C[10]+3200236656&4294967295,k=D+(T<<23&4294967295|T>>>9),T=x+(k^D^N)+C[13]+681279174&4294967295,x=k+(T<<4&4294967295|T>>>28),T=N+(x^k^D)+C[0]+3936430074&4294967295,N=x+(T<<11&4294967295|T>>>21),T=D+(N^x^k)+C[3]+3572445317&4294967295,D=N+(T<<16&4294967295|T>>>16),T=k+(D^N^x)+C[6]+76029189&4294967295,k=D+(T<<23&4294967295|T>>>9),T=x+(k^D^N)+C[9]+3654602809&4294967295,x=k+(T<<4&4294967295|T>>>28),T=N+(x^k^D)+C[12]+3873151461&4294967295,N=x+(T<<11&4294967295|T>>>21),T=D+(N^x^k)+C[15]+530742520&4294967295,D=N+(T<<16&4294967295|T>>>16),T=k+(D^N^x)+C[2]+3299628645&4294967295,k=D+(T<<23&4294967295|T>>>9),T=x+(D^(k|~N))+C[0]+4096336452&4294967295,x=k+(T<<6&4294967295|T>>>26),T=N+(k^(x|~D))+C[7]+1126891415&4294967295,N=x+(T<<10&4294967295|T>>>22),T=D+(x^(N|~k))+C[14]+2878612391&4294967295,D=N+(T<<15&4294967295|T>>>17),T=k+(N^(D|~x))+C[5]+4237533241&4294967295,k=D+(T<<21&4294967295|T>>>11),T=x+(D^(k|~N))+C[12]+1700485571&4294967295,x=k+(T<<6&4294967295|T>>>26),T=N+(k^(x|~D))+C[3]+2399980690&4294967295,N=x+(T<<10&4294967295|T>>>22),T=D+(x^(N|~k))+C[10]+4293915773&4294967295,D=N+(T<<15&4294967295|T>>>17),T=k+(N^(D|~x))+C[1]+2240044497&4294967295,k=D+(T<<21&4294967295|T>>>11),T=x+(D^(k|~N))+C[8]+1873313359&4294967295,x=k+(T<<6&4294967295|T>>>26),T=N+(k^(x|~D))+C[15]+4264355552&4294967295,N=x+(T<<10&4294967295|T>>>22),T=D+(x^(N|~k))+C[6]+2734768916&4294967295,D=N+(T<<15&4294967295|T>>>17),T=k+(N^(D|~x))+C[13]+1309151649&4294967295,k=D+(T<<21&4294967295|T>>>11),T=x+(D^(k|~N))+C[4]+4149444226&4294967295,x=k+(T<<6&4294967295|T>>>26),T=N+(k^(x|~D))+C[11]+3174756917&4294967295,N=x+(T<<10&4294967295|T>>>22),T=D+(x^(N|~k))+C[2]+718787259&4294967295,D=N+(T<<15&4294967295|T>>>17),T=k+(N^(D|~x))+C[9]+3951481745&4294967295,I.g[0]=I.g[0]+x&4294967295,I.g[1]=I.g[1]+(D+(T<<21&4294967295|T>>>11))&4294967295,I.g[2]=I.g[2]+D&4294967295,I.g[3]=I.g[3]+N&4294967295}r.prototype.u=function(I,x){x===void 0&&(x=I.length);for(var k=x-this.blockSize,C=this.B,D=this.h,N=0;N<x;){if(D==0)for(;N<=k;)i(this,I,N),N+=this.blockSize;if(typeof I=="string"){for(;N<x;)if(C[D++]=I.charCodeAt(N++),D==this.blockSize){i(this,C),D=0;break}}else for(;N<x;)if(C[D++]=I[N++],D==this.blockSize){i(this,C),D=0;break}}this.h=D,this.o+=x},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var x=1;x<I.length-8;++x)I[x]=0;var k=8*this.o;for(x=I.length-8;x<I.length;++x)I[x]=k&255,k/=256;for(this.u(I),I=Array(16),x=k=0;4>x;++x)for(var C=0;32>C;C+=8)I[k++]=this.g[x]>>>C&255;return I};function s(I,x){var k=a;return Object.prototype.hasOwnProperty.call(k,I)?k[I]:k[I]=x(I)}function o(I,x){this.h=x;for(var k=[],C=!0,D=I.length-1;0<=D;D--){var N=I[D]|0;C&&N==x||(k[D]=N,C=!1)}this.g=k}var a={};function l(I){return-128<=I&&128>I?s(I,function(x){return new o([x|0],0>x?-1:0)}):new o([I|0],0>I?-1:0)}function u(I){if(isNaN(I)||!isFinite(I))return f;if(0>I)return A(u(-I));for(var x=[],k=1,C=0;I>=k;C++)x[C]=I/k|0,k*=4294967296;return new o(x,0)}function h(I,x){if(I.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(I.charAt(0)=="-")return A(h(I.substring(1),x));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=u(Math.pow(x,8)),C=f,D=0;D<I.length;D+=8){var N=Math.min(8,I.length-D),T=parseInt(I.substring(D,D+N),x);8>N?(N=u(Math.pow(x,N)),C=C.j(N).add(u(T))):(C=C.j(k),C=C.add(u(T)))}return C}var f=l(0),p=l(1),v=l(16777216);t=o.prototype,t.m=function(){if(E(this))return-A(this).m();for(var I=0,x=1,k=0;k<this.g.length;k++){var C=this.i(k);I+=(0<=C?C:4294967296+C)*x,x*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(b(this))return"0";if(E(this))return"-"+A(this).toString(I);for(var x=u(Math.pow(I,6)),k=this,C="";;){var D=P(k,x).g;k=_(k,D.j(x));var N=((0<k.g.length?k.g[0]:k.h)>>>0).toString(I);if(k=D,b(k))return N+C;for(;6>N.length;)N="0"+N;C=N+C}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function b(I){if(I.h!=0)return!1;for(var x=0;x<I.g.length;x++)if(I.g[x]!=0)return!1;return!0}function E(I){return I.h==-1}t.l=function(I){return I=_(this,I),E(I)?-1:b(I)?0:1};function A(I){for(var x=I.g.length,k=[],C=0;C<x;C++)k[C]=~I.g[C];return new o(k,~I.h).add(p)}t.abs=function(){return E(this)?A(this):this},t.add=function(I){for(var x=Math.max(this.g.length,I.g.length),k=[],C=0,D=0;D<=x;D++){var N=C+(this.i(D)&65535)+(I.i(D)&65535),T=(N>>>16)+(this.i(D)>>>16)+(I.i(D)>>>16);C=T>>>16,N&=65535,T&=65535,k[D]=T<<16|N}return new o(k,k[k.length-1]&-2147483648?-1:0)};function _(I,x){return I.add(A(x))}t.j=function(I){if(b(this)||b(I))return f;if(E(this))return E(I)?A(this).j(A(I)):A(A(this).j(I));if(E(I))return A(this.j(A(I)));if(0>this.l(v)&&0>I.l(v))return u(this.m()*I.m());for(var x=this.g.length+I.g.length,k=[],C=0;C<2*x;C++)k[C]=0;for(C=0;C<this.g.length;C++)for(var D=0;D<I.g.length;D++){var N=this.i(C)>>>16,T=this.i(C)&65535,F=I.i(D)>>>16,q=I.i(D)&65535;k[2*C+2*D]+=T*q,y(k,2*C+2*D),k[2*C+2*D+1]+=N*q,y(k,2*C+2*D+1),k[2*C+2*D+1]+=T*F,y(k,2*C+2*D+1),k[2*C+2*D+2]+=N*F,y(k,2*C+2*D+2)}for(C=0;C<x;C++)k[C]=k[2*C+1]<<16|k[2*C];for(C=x;C<2*x;C++)k[C]=0;return new o(k,0)};function y(I,x){for(;(I[x]&65535)!=I[x];)I[x+1]+=I[x]>>>16,I[x]&=65535,x++}function w(I,x){this.g=I,this.h=x}function P(I,x){if(b(x))throw Error("division by zero");if(b(I))return new w(f,f);if(E(I))return x=P(A(I),x),new w(A(x.g),A(x.h));if(E(x))return x=P(I,A(x)),new w(A(x.g),x.h);if(30<I.g.length){if(E(I)||E(x))throw Error("slowDivide_ only works with positive integers.");for(var k=p,C=x;0>=C.l(I);)k=V(k),C=V(C);var D=O(k,1),N=O(C,1);for(C=O(C,2),k=O(k,2);!b(C);){var T=N.add(C);0>=T.l(I)&&(D=D.add(k),N=T),C=O(C,1),k=O(k,1)}return x=_(I,D.j(x)),new w(D,x)}for(D=f;0<=I.l(x);){for(k=Math.max(1,Math.floor(I.m()/x.m())),C=Math.ceil(Math.log(k)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),N=u(k),T=N.j(x);E(T)||0<T.l(I);)k-=C,N=u(k),T=N.j(x);b(N)&&(N=p),D=D.add(N),I=_(I,T)}return new w(D,I)}t.A=function(I){return P(this,I).h},t.and=function(I){for(var x=Math.max(this.g.length,I.g.length),k=[],C=0;C<x;C++)k[C]=this.i(C)&I.i(C);return new o(k,this.h&I.h)},t.or=function(I){for(var x=Math.max(this.g.length,I.g.length),k=[],C=0;C<x;C++)k[C]=this.i(C)|I.i(C);return new o(k,this.h|I.h)},t.xor=function(I){for(var x=Math.max(this.g.length,I.g.length),k=[],C=0;C<x;C++)k[C]=this.i(C)^I.i(C);return new o(k,this.h^I.h)};function V(I){for(var x=I.g.length+1,k=[],C=0;C<x;C++)k[C]=I.i(C)<<1|I.i(C-1)>>>31;return new o(k,I.h)}function O(I,x){var k=x>>5;x%=32;for(var C=I.g.length-k,D=[],N=0;N<C;N++)D[N]=0<x?I.i(N+k)>>>x|I.i(N+k+1)<<32-x:I.i(N+k);return new o(D,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,TA=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,ls=o}).apply(typeof ab<"u"?ab:typeof self<"u"?self:typeof window<"u"?window:{});var wu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var SA,nl,IA,Ju,rg,AA,kA,CA;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,m,g){return c==Array.prototype||c==Object.prototype||(c[m]=g.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof wu=="object"&&wu];for(var m=0;m<c.length;++m){var g=c[m];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function i(c,m){if(m)e:{var g=r;c=c.split(".");for(var S=0;S<c.length-1;S++){var L=c[S];if(!(L in g))break e;g=g[L]}c=c[c.length-1],S=g[c],m=m(S),m!=S&&m!=null&&e(g,c,{configurable:!0,writable:!0,value:m})}}function s(c,m){c instanceof String&&(c+="");var g=0,S=!1,L={next:function(){if(!S&&g<c.length){var U=g++;return{value:m(U,c[U]),done:!1}}return S=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}i("Array.prototype.values",function(c){return c||function(){return s(this,function(m,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(c){var m=typeof c;return m=m!="object"?m:c?Array.isArray(c)?"array":m:"null",m=="array"||m=="object"&&typeof c.length=="number"}function u(c){var m=typeof c;return m=="object"&&c!=null||m=="function"}function h(c,m,g){return c.call.apply(c.bind,arguments)}function f(c,m,g){if(!c)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,S),c.apply(m,L)}}return function(){return c.apply(m,arguments)}}function p(c,m,g){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,p.apply(null,arguments)}function v(c,m){var g=Array.prototype.slice.call(arguments,1);return function(){var S=g.slice();return S.push.apply(S,arguments),c.apply(this,S)}}function b(c,m){function g(){}g.prototype=m.prototype,c.aa=m.prototype,c.prototype=new g,c.prototype.constructor=c,c.Qb=function(S,L,U){for(var J=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)J[Re-2]=arguments[Re];return m.prototype[L].apply(S,J)}}function E(c){const m=c.length;if(0<m){const g=Array(m);for(let S=0;S<m;S++)g[S]=c[S];return g}return[]}function A(c,m){for(let g=1;g<arguments.length;g++){const S=arguments[g];if(l(S)){const L=c.length||0,U=S.length||0;c.length=L+U;for(let J=0;J<U;J++)c[L+J]=S[J]}else c.push(S)}}class _{constructor(m,g){this.i=m,this.j=g,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function y(c){return/^[\s\xa0]*$/.test(c)}function w(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function P(c){return P[" "](c),c}P[" "]=function(){};var V=w().indexOf("Gecko")!=-1&&!(w().toLowerCase().indexOf("webkit")!=-1&&w().indexOf("Edge")==-1)&&!(w().indexOf("Trident")!=-1||w().indexOf("MSIE")!=-1)&&w().indexOf("Edge")==-1;function O(c,m,g){for(const S in c)m.call(g,c[S],S,c)}function I(c,m){for(const g in c)m.call(void 0,c[g],g,c)}function x(c){const m={};for(const g in c)m[g]=c[g];return m}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(c,m){let g,S;for(let L=1;L<arguments.length;L++){S=arguments[L];for(g in S)c[g]=S[g];for(let U=0;U<k.length;U++)g=k[U],Object.prototype.hasOwnProperty.call(S,g)&&(c[g]=S[g])}}function D(c){var m=1;c=c.split(":");const g=[];for(;0<m&&c.length;)g.push(c.shift()),m--;return c.length&&g.push(c.join(":")),g}function N(c){a.setTimeout(()=>{throw c},0)}function T(){var c=j;let m=null;return c.g&&(m=c.g,c.g=c.g.next,c.g||(c.h=null),m.next=null),m}class F{constructor(){this.h=this.g=null}add(m,g){const S=q.get();S.set(m,g),this.h?this.h.next=S:this.g=S,this.h=S}}var q=new _(()=>new se,c=>c.reset());class se{constructor(){this.next=this.g=this.h=null}set(m,g){this.h=m,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let X,B=!1,j=new F,K=()=>{const c=a.Promise.resolve(void 0);X=()=>{c.then(te)}};var te=()=>{for(var c;c=T();){try{c.h.call(c.g)}catch(g){N(g)}var m=q;m.j(c),100>m.h&&(m.h++,c.next=m.g,m.g=c)}B=!1};function $(){this.s=this.s,this.C=this.C}$.prototype.s=!1,$.prototype.ma=function(){this.s||(this.s=!0,this.N())},$.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function H(c,m){this.type=c,this.g=this.target=m,this.defaultPrevented=!1}H.prototype.h=function(){this.defaultPrevented=!0};var W=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,m=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const g=()=>{};a.addEventListener("test",g,m),a.removeEventListener("test",g,m)}catch{}return c}();function ee(c,m){if(H.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var g=this.type=c.type,S=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=m,m=c.relatedTarget){if(V){e:{try{P(m.nodeName);var L=!0;break e}catch{}L=!1}L||(m=null)}}else g=="mouseover"?m=c.fromElement:g=="mouseout"&&(m=c.toElement);this.relatedTarget=m,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Ee[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&ee.aa.h.call(this)}}b(ee,H);var Ee={2:"touch",3:"pen",4:"mouse"};ee.prototype.h=function(){ee.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Ce="closure_listenable_"+(1e6*Math.random()|0),nn=0;function Vi(c,m,g,S,L){this.listener=c,this.proxy=null,this.src=m,this.type=g,this.capture=!!S,this.ha=L,this.key=++nn,this.da=this.fa=!1}function Ln(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function he(c){this.src=c,this.g={},this.h=0}he.prototype.add=function(c,m,g,S,L){var U=c.toString();c=this.g[U],c||(c=this.g[U]=[],this.h++);var J=jt(c,m,S,L);return-1<J?(m=c[J],g||(m.fa=!1)):(m=new Vi(m,this.src,U,!!S,L),m.fa=g,c.push(m)),m};function Pe(c,m){var g=m.type;if(g in c.g){var S=c.g[g],L=Array.prototype.indexOf.call(S,m,void 0),U;(U=0<=L)&&Array.prototype.splice.call(S,L,1),U&&(Ln(m),c.g[g].length==0&&(delete c.g[g],c.h--))}}function jt(c,m,g,S){for(var L=0;L<c.length;++L){var U=c[L];if(!U.da&&U.listener==m&&U.capture==!!g&&U.ha==S)return L}return-1}var Mn="closure_lm_"+(1e6*Math.random()|0),Rr={};function ma(c,m,g,S,L){if(Array.isArray(m)){for(var U=0;U<m.length;U++)ma(c,m[U],g,S,L);return null}return g=d0(g),c&&c[Ce]?c.K(m,g,u(S)?!!S.capture:!!S,L):pf(c,m,g,!1,S,L)}function pf(c,m,g,S,L,U){if(!m)throw Error("Invalid event type");var J=u(L)?!!L.capture:!!L,Re=yf(c);if(Re||(c[Mn]=Re=new he(c)),g=Re.add(m,g,S,J,U),g.proxy)return g;if(S=mf(),g.proxy=S,S.src=c,S.listener=g,c.addEventListener)W||(L=J),L===void 0&&(L=!1),c.addEventListener(m.toString(),S,L);else if(c.attachEvent)c.attachEvent(u0(m.toString()),S);else if(c.addListener&&c.removeListener)c.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return g}function mf(){function c(g){return m.call(c.src,c.listener,g)}const m=dP;return c}function jc(c,m,g,S,L){if(Array.isArray(m))for(var U=0;U<m.length;U++)jc(c,m[U],g,S,L);else S=u(S)?!!S.capture:!!S,g=d0(g),c&&c[Ce]?(c=c.i,m=String(m).toString(),m in c.g&&(U=c.g[m],g=jt(U,g,S,L),-1<g&&(Ln(U[g]),Array.prototype.splice.call(U,g,1),U.length==0&&(delete c.g[m],c.h--)))):c&&(c=yf(c))&&(m=c.g[m.toString()],c=-1,m&&(c=jt(m,g,S,L)),(g=-1<c?m[c]:null)&&gf(g))}function gf(c){if(typeof c!="number"&&c&&!c.da){var m=c.src;if(m&&m[Ce])Pe(m.i,c);else{var g=c.type,S=c.proxy;m.removeEventListener?m.removeEventListener(g,S,c.capture):m.detachEvent?m.detachEvent(u0(g),S):m.addListener&&m.removeListener&&m.removeListener(S),(g=yf(m))?(Pe(g,c),g.h==0&&(g.src=null,m[Mn]=null)):Ln(c)}}}function u0(c){return c in Rr?Rr[c]:Rr[c]="on"+c}function dP(c,m){if(c.da)c=!0;else{m=new ee(m,this);var g=c.listener,S=c.ha||c.src;c.fa&&gf(c),c=g.call(S,m)}return c}function yf(c){return c=c[Mn],c instanceof he?c:null}var vf="__closure_events_fn_"+(1e9*Math.random()>>>0);function d0(c){return typeof c=="function"?c:(c[vf]||(c[vf]=function(m){return c.handleEvent(m)}),c[vf])}function xt(){$.call(this),this.i=new he(this),this.M=this,this.F=null}b(xt,$),xt.prototype[Ce]=!0,xt.prototype.removeEventListener=function(c,m,g,S){jc(this,c,m,g,S)};function Ot(c,m){var g,S=c.F;if(S)for(g=[];S;S=S.F)g.push(S);if(c=c.M,S=m.type||m,typeof m=="string")m=new H(m,c);else if(m instanceof H)m.target=m.target||c;else{var L=m;m=new H(S,c),C(m,L)}if(L=!0,g)for(var U=g.length-1;0<=U;U--){var J=m.g=g[U];L=Oc(J,S,!0,m)&&L}if(J=m.g=c,L=Oc(J,S,!0,m)&&L,L=Oc(J,S,!1,m)&&L,g)for(U=0;U<g.length;U++)J=m.g=g[U],L=Oc(J,S,!1,m)&&L}xt.prototype.N=function(){if(xt.aa.N.call(this),this.i){var c=this.i,m;for(m in c.g){for(var g=c.g[m],S=0;S<g.length;S++)Ln(g[S]);delete c.g[m],c.h--}}this.F=null},xt.prototype.K=function(c,m,g,S){return this.i.add(String(c),m,!1,g,S)},xt.prototype.L=function(c,m,g,S){return this.i.add(String(c),m,!0,g,S)};function Oc(c,m,g,S){if(m=c.i.g[String(m)],!m)return!0;m=m.concat();for(var L=!0,U=0;U<m.length;++U){var J=m[U];if(J&&!J.da&&J.capture==g){var Re=J.listener,mt=J.ha||J.src;J.fa&&Pe(c.i,J),L=Re.call(mt,S)!==!1&&L}}return L&&!S.defaultPrevented}function h0(c,m,g){if(typeof c=="function")g&&(c=p(c,g));else if(c&&typeof c.handleEvent=="function")c=p(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:a.setTimeout(c,m||0)}function f0(c){c.g=h0(()=>{c.g=null,c.i&&(c.i=!1,f0(c))},c.l);const m=c.h;c.h=null,c.m.apply(null,m)}class hP extends ${constructor(m,g){super(),this.m=m,this.l=g,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:f0(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ga(c){$.call(this),this.h=c,this.g={}}b(ga,$);var p0=[];function m0(c){O(c.g,function(m,g){this.g.hasOwnProperty(g)&&gf(m)},c),c.g={}}ga.prototype.N=function(){ga.aa.N.call(this),m0(this)},ga.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var _f=a.JSON.stringify,fP=a.JSON.parse,pP=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function wf(){}wf.prototype.h=null;function g0(c){return c.h||(c.h=c.i())}function y0(){}var ya={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function xf(){H.call(this,"d")}b(xf,H);function bf(){H.call(this,"c")}b(bf,H);var ji={},v0=null;function Lc(){return v0=v0||new xt}ji.La="serverreachability";function _0(c){H.call(this,ji.La,c)}b(_0,H);function va(c){const m=Lc();Ot(m,new _0(m))}ji.STAT_EVENT="statevent";function w0(c,m){H.call(this,ji.STAT_EVENT,c),this.stat=m}b(w0,H);function Lt(c){const m=Lc();Ot(m,new w0(m,c))}ji.Ma="timingevent";function x0(c,m){H.call(this,ji.Ma,c),this.size=m}b(x0,H);function _a(c,m){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},m)}function wa(){this.g=!0}wa.prototype.xa=function(){this.g=!1};function mP(c,m,g,S,L,U){c.info(function(){if(c.g)if(U)for(var J="",Re=U.split("&"),mt=0;mt<Re.length;mt++){var be=Re[mt].split("=");if(1<be.length){var bt=be[0];be=be[1];var Et=bt.split("_");J=2<=Et.length&&Et[1]=="type"?J+(bt+"="+be+"&"):J+(bt+"=redacted&")}}else J=null;else J=U;return"XMLHTTP REQ ("+S+") [attempt "+L+"]: "+m+`
`+g+`
`+J})}function gP(c,m,g,S,L,U,J){c.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+L+"]: "+m+`
`+g+`
`+U+" "+J})}function Os(c,m,g,S){c.info(function(){return"XMLHTTP TEXT ("+m+"): "+vP(c,g)+(S?" "+S:"")})}function yP(c,m){c.info(function(){return"TIMEOUT: "+m})}wa.prototype.info=function(){};function vP(c,m){if(!c.g)return m;if(!m)return null;try{var g=JSON.parse(m);if(g){for(c=0;c<g.length;c++)if(Array.isArray(g[c])){var S=g[c];if(!(2>S.length)){var L=S[1];if(Array.isArray(L)&&!(1>L.length)){var U=L[0];if(U!="noop"&&U!="stop"&&U!="close")for(var J=1;J<L.length;J++)L[J]=""}}}}return _f(g)}catch{return m}}var Mc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},b0={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ef;function Fc(){}b(Fc,wf),Fc.prototype.g=function(){return new XMLHttpRequest},Fc.prototype.i=function(){return{}},Ef=new Fc;function Nr(c,m,g,S){this.j=c,this.i=m,this.l=g,this.R=S||1,this.U=new ga(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new E0}function E0(){this.i=null,this.g="",this.h=!1}var T0={},Tf={};function Sf(c,m,g){c.L=1,c.v=$c(tr(m)),c.m=g,c.P=!0,S0(c,null)}function S0(c,m){c.F=Date.now(),Uc(c),c.A=tr(c.v);var g=c.A,S=c.R;Array.isArray(S)||(S=[String(S)]),F0(g.i,"t",S),c.C=0,g=c.j.J,c.h=new E0,c.g=r_(c.j,g?m:null,!c.m),0<c.O&&(c.M=new hP(p(c.Y,c,c.g),c.O)),m=c.U,g=c.g,S=c.ca;var L="readystatechange";Array.isArray(L)||(L&&(p0[0]=L.toString()),L=p0);for(var U=0;U<L.length;U++){var J=ma(g,L[U],S||m.handleEvent,!1,m.h||m);if(!J)break;m.g[J.key]=J}m=c.H?x(c.H):{},c.m?(c.u||(c.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,m)):(c.u="GET",c.g.ea(c.A,c.u,null,m)),va(),mP(c.i,c.u,c.A,c.l,c.R,c.m)}Nr.prototype.ca=function(c){c=c.target;const m=this.M;m&&nr(c)==3?m.j():this.Y(c)},Nr.prototype.Y=function(c){try{if(c==this.g)e:{const Et=nr(this.g);var m=this.g.Ba();const Fs=this.g.Z();if(!(3>Et)&&(Et!=3||this.g&&(this.h.h||this.g.oa()||G0(this.g)))){this.J||Et!=4||m==7||(m==8||0>=Fs?va(3):va(2)),If(this);var g=this.g.Z();this.X=g;t:if(I0(this)){var S=G0(this.g);c="";var L=S.length,U=nr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Oi(this),xa(this);var J="";break t}this.h.i=new a.TextDecoder}for(m=0;m<L;m++)this.h.h=!0,c+=this.h.i.decode(S[m],{stream:!(U&&m==L-1)});S.length=0,this.h.g+=c,this.C=0,J=this.h.g}else J=this.g.oa();if(this.o=g==200,gP(this.i,this.u,this.A,this.l,this.R,Et,g),this.o){if(this.T&&!this.K){t:{if(this.g){var Re,mt=this.g;if((Re=mt.g?mt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(Re)){var be=Re;break t}}be=null}if(g=be)Os(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Af(this,g);else{this.o=!1,this.s=3,Lt(12),Oi(this),xa(this);break e}}if(this.P){g=!0;let kn;for(;!this.J&&this.C<J.length;)if(kn=_P(this,J),kn==Tf){Et==4&&(this.s=4,Lt(14),g=!1),Os(this.i,this.l,null,"[Incomplete Response]");break}else if(kn==T0){this.s=4,Lt(15),Os(this.i,this.l,J,"[Invalid Chunk]"),g=!1;break}else Os(this.i,this.l,kn,null),Af(this,kn);if(I0(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Et!=4||J.length!=0||this.h.h||(this.s=1,Lt(16),g=!1),this.o=this.o&&g,!g)Os(this.i,this.l,J,"[Invalid Chunked Response]"),Oi(this),xa(this);else if(0<J.length&&!this.W){this.W=!0;var bt=this.j;bt.g==this&&bt.ba&&!bt.M&&(bt.j.info("Great, no buffering proxy detected. Bytes received: "+J.length),Df(bt),bt.M=!0,Lt(11))}}else Os(this.i,this.l,J,null),Af(this,J);Et==4&&Oi(this),this.o&&!this.J&&(Et==4?Z0(this.j,this):(this.o=!1,Uc(this)))}else OP(this.g),g==400&&0<J.indexOf("Unknown SID")?(this.s=3,Lt(12)):(this.s=0,Lt(13)),Oi(this),xa(this)}}}catch{}finally{}};function I0(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function _P(c,m){var g=c.C,S=m.indexOf(`
`,g);return S==-1?Tf:(g=Number(m.substring(g,S)),isNaN(g)?T0:(S+=1,S+g>m.length?Tf:(m=m.slice(S,S+g),c.C=S+g,m)))}Nr.prototype.cancel=function(){this.J=!0,Oi(this)};function Uc(c){c.S=Date.now()+c.I,A0(c,c.I)}function A0(c,m){if(c.B!=null)throw Error("WatchDog timer not null");c.B=_a(p(c.ba,c),m)}function If(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Nr.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(yP(this.i,this.A),this.L!=2&&(va(),Lt(17)),Oi(this),this.s=2,xa(this)):A0(this,this.S-c)};function xa(c){c.j.G==0||c.J||Z0(c.j,c)}function Oi(c){If(c);var m=c.M;m&&typeof m.ma=="function"&&m.ma(),c.M=null,m0(c.U),c.g&&(m=c.g,c.g=null,m.abort(),m.ma())}function Af(c,m){try{var g=c.j;if(g.G!=0&&(g.g==c||kf(g.h,c))){if(!c.K&&kf(g.h,c)&&g.G==3){try{var S=g.Da.g.parse(m)}catch{S=null}if(Array.isArray(S)&&S.length==3){var L=S;if(L[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<c.F)Qc(g),Wc(g);else break e;Nf(g),Lt(18)}}else g.za=L[1],0<g.za-g.T&&37500>L[2]&&g.F&&g.v==0&&!g.C&&(g.C=_a(p(g.Za,g),6e3));if(1>=P0(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else Mi(g,11)}else if((c.K||g.g==c)&&Qc(g),!y(m))for(L=g.Da.g.parse(m),m=0;m<L.length;m++){let be=L[m];if(g.T=be[0],be=be[1],g.G==2)if(be[0]=="c"){g.K=be[1],g.ia=be[2];const bt=be[3];bt!=null&&(g.la=bt,g.j.info("VER="+g.la));const Et=be[4];Et!=null&&(g.Aa=Et,g.j.info("SVER="+g.Aa));const Fs=be[5];Fs!=null&&typeof Fs=="number"&&0<Fs&&(S=1.5*Fs,g.L=S,g.j.info("backChannelRequestTimeoutMs_="+S)),S=g;const kn=c.g;if(kn){const Xc=kn.g?kn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xc){var U=S.h;U.g||Xc.indexOf("spdy")==-1&&Xc.indexOf("quic")==-1&&Xc.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(Cf(U,U.h),U.h=null))}if(S.D){const Vf=kn.g?kn.g.getResponseHeader("X-HTTP-Session-Id"):null;Vf&&(S.ya=Vf,Ve(S.I,S.D,Vf))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-c.F,g.j.info("Handshake RTT: "+g.R+"ms")),S=g;var J=c;if(S.qa=n_(S,S.J?S.ia:null,S.W),J.K){R0(S.h,J);var Re=J,mt=S.L;mt&&(Re.I=mt),Re.B&&(If(Re),Uc(Re)),S.g=J}else X0(S);0<g.i.length&&Hc(g)}else be[0]!="stop"&&be[0]!="close"||Mi(g,7);else g.G==3&&(be[0]=="stop"||be[0]=="close"?be[0]=="stop"?Mi(g,7):Rf(g):be[0]!="noop"&&g.l&&g.l.ta(be),g.v=0)}}va(4)}catch{}}var wP=class{constructor(c,m){this.g=c,this.map=m}};function k0(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function C0(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function P0(c){return c.h?1:c.g?c.g.size:0}function kf(c,m){return c.h?c.h==m:c.g?c.g.has(m):!1}function Cf(c,m){c.g?c.g.add(m):c.h=m}function R0(c,m){c.h&&c.h==m?c.h=null:c.g&&c.g.has(m)&&c.g.delete(m)}k0.prototype.cancel=function(){if(this.i=N0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function N0(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let m=c.i;for(const g of c.g.values())m=m.concat(g.D);return m}return E(c.i)}function xP(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var m=[],g=c.length,S=0;S<g;S++)m.push(c[S]);return m}m=[],g=0;for(S in c)m[g++]=c[S];return m}function bP(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var m=[];c=c.length;for(var g=0;g<c;g++)m.push(g);return m}m=[],g=0;for(const S in c)m[g++]=S;return m}}}function D0(c,m){if(c.forEach&&typeof c.forEach=="function")c.forEach(m,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,m,void 0);else for(var g=bP(c),S=xP(c),L=S.length,U=0;U<L;U++)m.call(void 0,S[U],g&&g[U],c)}var V0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function EP(c,m){if(c){c=c.split("&");for(var g=0;g<c.length;g++){var S=c[g].indexOf("="),L=null;if(0<=S){var U=c[g].substring(0,S);L=c[g].substring(S+1)}else U=c[g];m(U,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Li(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Li){this.h=c.h,Bc(this,c.j),this.o=c.o,this.g=c.g,zc(this,c.s),this.l=c.l;var m=c.i,g=new Ta;g.i=m.i,m.g&&(g.g=new Map(m.g),g.h=m.h),j0(this,g),this.m=c.m}else c&&(m=String(c).match(V0))?(this.h=!1,Bc(this,m[1]||"",!0),this.o=ba(m[2]||""),this.g=ba(m[3]||"",!0),zc(this,m[4]),this.l=ba(m[5]||"",!0),j0(this,m[6]||"",!0),this.m=ba(m[7]||"")):(this.h=!1,this.i=new Ta(null,this.h))}Li.prototype.toString=function(){var c=[],m=this.j;m&&c.push(Ea(m,O0,!0),":");var g=this.g;return(g||m=="file")&&(c.push("//"),(m=this.o)&&c.push(Ea(m,O0,!0),"@"),c.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&c.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&c.push("/"),c.push(Ea(g,g.charAt(0)=="/"?IP:SP,!0))),(g=this.i.toString())&&c.push("?",g),(g=this.m)&&c.push("#",Ea(g,kP)),c.join("")};function tr(c){return new Li(c)}function Bc(c,m,g){c.j=g?ba(m,!0):m,c.j&&(c.j=c.j.replace(/:$/,""))}function zc(c,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);c.s=m}else c.s=null}function j0(c,m,g){m instanceof Ta?(c.i=m,CP(c.i,c.h)):(g||(m=Ea(m,AP)),c.i=new Ta(m,c.h))}function Ve(c,m,g){c.i.set(m,g)}function $c(c){return Ve(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function ba(c,m){return c?m?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Ea(c,m,g){return typeof c=="string"?(c=encodeURI(c).replace(m,TP),g&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function TP(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var O0=/[#\/\?@]/g,SP=/[#\?:]/g,IP=/[#\?]/g,AP=/[#\?@]/g,kP=/#/g;function Ta(c,m){this.h=this.g=null,this.i=c||null,this.j=!!m}function Dr(c){c.g||(c.g=new Map,c.h=0,c.i&&EP(c.i,function(m,g){c.add(decodeURIComponent(m.replace(/\+/g," ")),g)}))}t=Ta.prototype,t.add=function(c,m){Dr(this),this.i=null,c=Ls(this,c);var g=this.g.get(c);return g||this.g.set(c,g=[]),g.push(m),this.h+=1,this};function L0(c,m){Dr(c),m=Ls(c,m),c.g.has(m)&&(c.i=null,c.h-=c.g.get(m).length,c.g.delete(m))}function M0(c,m){return Dr(c),m=Ls(c,m),c.g.has(m)}t.forEach=function(c,m){Dr(this),this.g.forEach(function(g,S){g.forEach(function(L){c.call(m,L,S,this)},this)},this)},t.na=function(){Dr(this);const c=Array.from(this.g.values()),m=Array.from(this.g.keys()),g=[];for(let S=0;S<m.length;S++){const L=c[S];for(let U=0;U<L.length;U++)g.push(m[S])}return g},t.V=function(c){Dr(this);let m=[];if(typeof c=="string")M0(this,c)&&(m=m.concat(this.g.get(Ls(this,c))));else{c=Array.from(this.g.values());for(let g=0;g<c.length;g++)m=m.concat(c[g])}return m},t.set=function(c,m){return Dr(this),this.i=null,c=Ls(this,c),M0(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[m]),this.h+=1,this},t.get=function(c,m){return c?(c=this.V(c),0<c.length?String(c[0]):m):m};function F0(c,m,g){L0(c,m),0<g.length&&(c.i=null,c.g.set(Ls(c,m),E(g)),c.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],m=Array.from(this.g.keys());for(var g=0;g<m.length;g++){var S=m[g];const U=encodeURIComponent(String(S)),J=this.V(S);for(S=0;S<J.length;S++){var L=U;J[S]!==""&&(L+="="+encodeURIComponent(String(J[S]))),c.push(L)}}return this.i=c.join("&")};function Ls(c,m){return m=String(m),c.j&&(m=m.toLowerCase()),m}function CP(c,m){m&&!c.j&&(Dr(c),c.i=null,c.g.forEach(function(g,S){var L=S.toLowerCase();S!=L&&(L0(this,S),F0(this,L,g))},c)),c.j=m}function PP(c,m){const g=new wa;if(a.Image){const S=new Image;S.onload=v(Vr,g,"TestLoadImage: loaded",!0,m,S),S.onerror=v(Vr,g,"TestLoadImage: error",!1,m,S),S.onabort=v(Vr,g,"TestLoadImage: abort",!1,m,S),S.ontimeout=v(Vr,g,"TestLoadImage: timeout",!1,m,S),a.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=c}else m(!1)}function RP(c,m){const g=new wa,S=new AbortController,L=setTimeout(()=>{S.abort(),Vr(g,"TestPingServer: timeout",!1,m)},1e4);fetch(c,{signal:S.signal}).then(U=>{clearTimeout(L),U.ok?Vr(g,"TestPingServer: ok",!0,m):Vr(g,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(L),Vr(g,"TestPingServer: error",!1,m)})}function Vr(c,m,g,S,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),S(g)}catch{}}function NP(){this.g=new pP}function DP(c,m,g){const S=g||"";try{D0(c,function(L,U){let J=L;u(L)&&(J=_f(L)),m.push(S+U+"="+encodeURIComponent(J))})}catch(L){throw m.push(S+"type="+encodeURIComponent("_badmap")),L}}function qc(c){this.l=c.Ub||null,this.j=c.eb||!1}b(qc,wf),qc.prototype.g=function(){return new Kc(this.l,this.j)},qc.prototype.i=function(c){return function(){return c}}({});function Kc(c,m){xt.call(this),this.D=c,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(Kc,xt),t=Kc.prototype,t.open=function(c,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=m,this.readyState=1,Ia(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(m.body=c),(this.D||a).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Sa(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Ia(this)),this.g&&(this.readyState=3,Ia(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;U0(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function U0(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var m=c.value?c.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!c.done}))&&(this.response=this.responseText+=m)}c.done?Sa(this):Ia(this),this.readyState==3&&U0(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Sa(this))},t.Qa=function(c){this.g&&(this.response=c,Sa(this))},t.ga=function(){this.g&&Sa(this)};function Sa(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Ia(c)}t.setRequestHeader=function(c,m){this.u.append(c,m)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],m=this.h.entries();for(var g=m.next();!g.done;)g=g.value,c.push(g[0]+": "+g[1]),g=m.next();return c.join(`\r
`)};function Ia(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Kc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function B0(c){let m="";return O(c,function(g,S){m+=S,m+=":",m+=g,m+=`\r
`}),m}function Pf(c,m,g){e:{for(S in g){var S=!1;break e}S=!0}S||(g=B0(g),typeof c=="string"?g!=null&&encodeURIComponent(String(g)):Ve(c,m,g))}function We(c){xt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(We,xt);var VP=/^https?$/i,jP=["POST","PUT"];t=We.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,m,g,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);m=m?m.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ef.g(),this.v=this.o?g0(this.o):g0(Ef),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(m,String(c),!0),this.B=!1}catch(U){z0(this,U);return}if(c=g||"",g=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var L in S)g.set(L,S[L]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const U of S.keys())g.set(U,S.get(U));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(g.keys()).find(U=>U.toLowerCase()=="content-type"),L=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(jP,m,void 0))||S||L||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,J]of g)this.g.setRequestHeader(U,J);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{K0(this),this.u=!0,this.g.send(c),this.u=!1}catch(U){z0(this,U)}};function z0(c,m){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=m,c.m=5,$0(c),Gc(c)}function $0(c){c.A||(c.A=!0,Ot(c,"complete"),Ot(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Ot(this,"complete"),Ot(this,"abort"),Gc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Gc(this,!0)),We.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?q0(this):this.bb())},t.bb=function(){q0(this)};function q0(c){if(c.h&&typeof o<"u"&&(!c.v[1]||nr(c)!=4||c.Z()!=2)){if(c.u&&nr(c)==4)h0(c.Ea,0,c);else if(Ot(c,"readystatechange"),nr(c)==4){c.h=!1;try{const J=c.Z();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var g;if(!(g=m)){var S;if(S=J===0){var L=String(c.D).match(V0)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),S=!VP.test(L?L.toLowerCase():"")}g=S}if(g)Ot(c,"complete"),Ot(c,"success");else{c.m=6;try{var U=2<nr(c)?c.g.statusText:""}catch{U=""}c.l=U+" ["+c.Z()+"]",$0(c)}}finally{Gc(c)}}}}function Gc(c,m){if(c.g){K0(c);const g=c.g,S=c.v[0]?()=>{}:null;c.g=null,c.v=null,m||Ot(c,"ready");try{g.onreadystatechange=S}catch{}}}function K0(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function nr(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<nr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var m=this.g.responseText;return c&&m.indexOf(c)==0&&(m=m.substring(c.length)),fP(m)}};function G0(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function OP(c){const m={};c=(c.g&&2<=nr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<c.length;S++){if(y(c[S]))continue;var g=D(c[S]);const L=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const U=m[L]||[];m[L]=U,U.push(g)}I(m,function(S){return S.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Aa(c,m,g){return g&&g.internalChannelParams&&g.internalChannelParams[c]||m}function W0(c){this.Aa=0,this.i=[],this.j=new wa,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Aa("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Aa("baseRetryDelayMs",5e3,c),this.cb=Aa("retryDelaySeedMs",1e4,c),this.Wa=Aa("forwardChannelMaxRetries",2,c),this.wa=Aa("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new k0(c&&c.concurrentRequestLimit),this.Da=new NP,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=W0.prototype,t.la=8,t.G=1,t.connect=function(c,m,g,S){Lt(0),this.W=c,this.H=m||{},g&&S!==void 0&&(this.H.OSID=g,this.H.OAID=S),this.F=this.X,this.I=n_(this,null,this.W),Hc(this)};function Rf(c){if(H0(c),c.G==3){var m=c.U++,g=tr(c.I);if(Ve(g,"SID",c.K),Ve(g,"RID",m),Ve(g,"TYPE","terminate"),ka(c,g),m=new Nr(c,c.j,m),m.L=2,m.v=$c(tr(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(m.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=m.v,g=!0),g||(m.g=r_(m.j,null),m.g.ea(m.v)),m.F=Date.now(),Uc(m)}t_(c)}function Wc(c){c.g&&(Df(c),c.g.cancel(),c.g=null)}function H0(c){Wc(c),c.u&&(a.clearTimeout(c.u),c.u=null),Qc(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Hc(c){if(!C0(c.h)&&!c.s){c.s=!0;var m=c.Ga;X||K(),B||(X(),B=!0),j.add(m,c),c.B=0}}function LP(c,m){return P0(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=m.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=_a(p(c.Ga,c,m),e_(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const L=new Nr(this,this.j,c);let U=this.o;if(this.S&&(U?(U=x(U),C(U,this.S)):U=this.S),this.m!==null||this.O||(L.H=U,U=null),this.P)e:{for(var m=0,g=0;g<this.i.length;g++){t:{var S=this.i[g];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(m+=S,4096<m){m=g;break e}if(m===4096||g===this.i.length-1){m=g+1;break e}}m=1e3}else m=1e3;m=Y0(this,L,m),g=tr(this.I),Ve(g,"RID",c),Ve(g,"CVER",22),this.D&&Ve(g,"X-HTTP-Session-Id",this.D),ka(this,g),U&&(this.O?m="headers="+encodeURIComponent(String(B0(U)))+"&"+m:this.m&&Pf(g,this.m,U)),Cf(this.h,L),this.Ua&&Ve(g,"TYPE","init"),this.P?(Ve(g,"$req",m),Ve(g,"SID","null"),L.T=!0,Sf(L,g,null)):Sf(L,g,m),this.G=2}}else this.G==3&&(c?Q0(this,c):this.i.length==0||C0(this.h)||Q0(this))};function Q0(c,m){var g;m?g=m.l:g=c.U++;const S=tr(c.I);Ve(S,"SID",c.K),Ve(S,"RID",g),Ve(S,"AID",c.T),ka(c,S),c.m&&c.o&&Pf(S,c.m,c.o),g=new Nr(c,c.j,g,c.B+1),c.m===null&&(g.H=c.o),m&&(c.i=m.D.concat(c.i)),m=Y0(c,g,1e3),g.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Cf(c.h,g),Sf(g,S,m)}function ka(c,m){c.H&&O(c.H,function(g,S){Ve(m,S,g)}),c.l&&D0({},function(g,S){Ve(m,S,g)})}function Y0(c,m,g){g=Math.min(c.i.length,g);var S=c.l?p(c.l.Na,c.l,c):null;e:{var L=c.i;let U=-1;for(;;){const J=["count="+g];U==-1?0<g?(U=L[0].g,J.push("ofs="+U)):U=0:J.push("ofs="+U);let Re=!0;for(let mt=0;mt<g;mt++){let be=L[mt].g;const bt=L[mt].map;if(be-=U,0>be)U=Math.max(0,L[mt].g-100),Re=!1;else try{DP(bt,J,"req"+be+"_")}catch{S&&S(bt)}}if(Re){S=J.join("&");break e}}}return c=c.i.splice(0,g),m.D=c,S}function X0(c){if(!c.g&&!c.u){c.Y=1;var m=c.Fa;X||K(),B||(X(),B=!0),j.add(m,c),c.v=0}}function Nf(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=_a(p(c.Fa,c),e_(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,J0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=_a(p(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Lt(10),Wc(this),J0(this))};function Df(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function J0(c){c.g=new Nr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var m=tr(c.qa);Ve(m,"RID","rpc"),Ve(m,"SID",c.K),Ve(m,"AID",c.T),Ve(m,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ve(m,"TO",c.ja),Ve(m,"TYPE","xmlhttp"),ka(c,m),c.m&&c.o&&Pf(m,c.m,c.o),c.L&&(c.g.I=c.L);var g=c.g;c=c.ia,g.L=1,g.v=$c(tr(m)),g.m=null,g.P=!0,S0(g,c)}t.Za=function(){this.C!=null&&(this.C=null,Wc(this),Nf(this),Lt(19))};function Qc(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function Z0(c,m){var g=null;if(c.g==m){Qc(c),Df(c),c.g=null;var S=2}else if(kf(c.h,m))g=m.D,R0(c.h,m),S=1;else return;if(c.G!=0){if(m.o)if(S==1){g=m.m?m.m.length:0,m=Date.now()-m.F;var L=c.B;S=Lc(),Ot(S,new x0(S,g)),Hc(c)}else X0(c);else if(L=m.s,L==3||L==0&&0<m.X||!(S==1&&LP(c,m)||S==2&&Nf(c)))switch(g&&0<g.length&&(m=c.h,m.i=m.i.concat(g)),L){case 1:Mi(c,5);break;case 4:Mi(c,10);break;case 3:Mi(c,6);break;default:Mi(c,2)}}}function e_(c,m){let g=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(g*=2),g*m}function Mi(c,m){if(c.j.info("Error code "+m),m==2){var g=p(c.fb,c),S=c.Xa;const L=!S;S=new Li(S||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Bc(S,"https"),$c(S),L?PP(S.toString(),g):RP(S.toString(),g)}else Lt(2);c.G=0,c.l&&c.l.sa(m),t_(c),H0(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Lt(2)):(this.j.info("Failed to ping google.com"),Lt(1))};function t_(c){if(c.G=0,c.ka=[],c.l){const m=N0(c.h);(m.length!=0||c.i.length!=0)&&(A(c.ka,m),A(c.ka,c.i),c.h.i.length=0,E(c.i),c.i.length=0),c.l.ra()}}function n_(c,m,g){var S=g instanceof Li?tr(g):new Li(g);if(S.g!="")m&&(S.g=m+"."+S.g),zc(S,S.s);else{var L=a.location;S=L.protocol,m=m?m+"."+L.hostname:L.hostname,L=+L.port;var U=new Li(null);S&&Bc(U,S),m&&(U.g=m),L&&zc(U,L),g&&(U.l=g),S=U}return g=c.D,m=c.ya,g&&m&&Ve(S,g,m),Ve(S,"VER",c.la),ka(c,S),S}function r_(c,m,g){if(m&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=c.Ca&&!c.pa?new We(new qc({eb:g})):new We(c.pa),m.Ha(c.J),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function i_(){}t=i_.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Yc(){}Yc.prototype.g=function(c,m){return new rn(c,m)};function rn(c,m){xt.call(this),this.g=new W0(m),this.l=c,this.h=m&&m.messageUrlParams||null,c=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(c?c["X-WebChannel-Content-Type"]=m.messageContentType:c={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(c?c["X-WebChannel-Client-Profile"]=m.va:c={"X-WebChannel-Client-Profile":m.va}),this.g.S=c,(c=m&&m.Sb)&&!y(c)&&(this.g.m=c),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!y(m)&&(this.g.D=m,c=this.h,c!==null&&m in c&&(c=this.h,m in c&&delete c[m])),this.j=new Ms(this)}b(rn,xt),rn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},rn.prototype.close=function(){Rf(this.g)},rn.prototype.o=function(c){var m=this.g;if(typeof c=="string"){var g={};g.__data__=c,c=g}else this.u&&(g={},g.__data__=_f(c),c=g);m.i.push(new wP(m.Ya++,c)),m.G==3&&Hc(m)},rn.prototype.N=function(){this.g.l=null,delete this.j,Rf(this.g),delete this.g,rn.aa.N.call(this)};function s_(c){xf.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var m=c.__sm__;if(m){e:{for(const g in m){c=g;break e}c=void 0}(this.i=c)&&(c=this.i,m=m!==null&&c in m?m[c]:void 0),this.data=m}else this.data=c}b(s_,xf);function o_(){bf.call(this),this.status=1}b(o_,bf);function Ms(c){this.g=c}b(Ms,i_),Ms.prototype.ua=function(){Ot(this.g,"a")},Ms.prototype.ta=function(c){Ot(this.g,new s_(c))},Ms.prototype.sa=function(c){Ot(this.g,new o_)},Ms.prototype.ra=function(){Ot(this.g,"b")},Yc.prototype.createWebChannel=Yc.prototype.g,rn.prototype.send=rn.prototype.o,rn.prototype.open=rn.prototype.m,rn.prototype.close=rn.prototype.close,CA=function(){return new Yc},kA=function(){return Lc()},AA=ji,rg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Mc.NO_ERROR=0,Mc.TIMEOUT=8,Mc.HTTP_ERROR=6,Ju=Mc,b0.COMPLETE="complete",IA=b0,y0.EventType=ya,ya.OPEN="a",ya.CLOSE="b",ya.ERROR="c",ya.MESSAGE="d",xt.prototype.listen=xt.prototype.K,nl=y0,We.prototype.listenOnce=We.prototype.L,We.prototype.getLastError=We.prototype.Ka,We.prototype.getLastErrorCode=We.prototype.Ba,We.prototype.getStatus=We.prototype.Z,We.prototype.getResponseJson=We.prototype.Oa,We.prototype.getResponseText=We.prototype.oa,We.prototype.send=We.prototype.ea,We.prototype.setWithCredentials=We.prototype.Ha,SA=We}).apply(typeof wu<"u"?wu:typeof self<"u"?self:typeof window<"u"?window:{});const lb="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}kt.UNAUTHENTICATED=new kt(null),kt.GOOGLE_CREDENTIALS=new kt("google-credentials-uid"),kt.FIRST_PARTY=new kt("first-party-uid"),kt.MOCK_USER=new kt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oa="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs=new ov("@firebase/firestore");function Gs(){return vs.logLevel}function G(t,...e){if(vs.logLevel<=ge.DEBUG){const n=e.map(yv);vs.debug(`Firestore (${oa}): ${t}`,...n)}}function nt(t,...e){if(vs.logLevel<=ge.ERROR){const n=e.map(yv);vs.error(`Firestore (${oa}): ${t}`,...n)}}function Fo(t,...e){if(vs.logLevel<=ge.WARN){const n=e.map(yv);vs.warn(`Firestore (${oa}): ${t}`,...n)}}function yv(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function re(t="Unexpected state"){const e=`FIRESTORE (${oa}) INTERNAL ASSERTION FAILED: `+t;throw nt(e),new Error(e)}function oe(t,e){t||re()}function ie(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Y extends er{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zF{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class $F{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(kt.UNAUTHENTICATED))}shutdown(){}}class qF{constructor(e){this.t=e,this.currentUser=kt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){oe(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Jn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Jn,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{G("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(G("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Jn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(G("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(oe(typeof r.accessToken=="string"),new zF(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return oe(e===null||typeof e=="string"),new kt(e)}}class KF{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=kt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class GF{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new KF(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(kt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class WF{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class HF{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){oe(this.o===void 0);const r=s=>{s.error!=null&&G("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,G("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{G("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):G("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(oe(typeof n.token=="string"),this.R=n.token,new WF(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QF(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=QF(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function de(t,e){return t<e?-1:t>e?1:0}function Uo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function RA(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Y(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Y(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Y(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Y(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ke.fromMillis(Date.now())}static fromDate(e){return Ke.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ke(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?de(this.nanoseconds,e.nanoseconds):de(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ae(e)}static min(){return new ae(new Ke(0,0))}static max(){return new ae(new Ke(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(e,n,r){n===void 0?n=0:n>e.length&&re(),r===void 0?r=e.length-n:r>e.length-n&&re(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return nc.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof nc?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Te extends nc{construct(e,n,r){return new Te(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Y(z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Te(n)}static emptyPath(){return new Te([])}}const YF=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $e extends nc{construct(e,n,r){return new $e(e,n,r)}static isValidIdentifier(e){return YF.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$e.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new $e(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Y(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new Y(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Y(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Y(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $e(n)}static emptyPath(){return new $e([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.path=e}static fromPath(e){return new Z(Te.fromString(e))}static fromName(e){return new Z(Te.fromString(e).popFirst(5))}static empty(){return new Z(Te.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Te.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Te.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Z(new Te(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function ig(t){return t.fields.find(e=>e.kind===2)}function Gi(t){return t.fields.filter(e=>e.kind!==2)}Kd.UNKNOWN_ID=-1;class Zu{constructor(e,n){this.fieldPath=e,this.kind=n}}class rc{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new rc(0,fn.min())}}function NA(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ae.fromTimestamp(r===1e9?new Ke(n+1,0):new Ke(n,r));return new fn(i,Z.empty(),e)}function DA(t){return new fn(t.readTime,t.key,-1)}class fn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new fn(ae.min(),Z.empty(),-1)}static max(){return new fn(ae.max(),Z.empty(),-1)}}function vv(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Z.comparator(t.documentKey,e.documentKey),n!==0?n:de(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class jA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pi(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==VA)throw t;G("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&re(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new M((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof M?n:M.resolve(n)}catch(n){return M.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):M.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):M.reject(n)}static resolve(e){return new M((n,r)=>{n(e)})}static reject(e){return new M((n,r)=>{r(e)})}static waitFor(e){return new M((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=M.resolve(!1);for(const r of e)n=n.next(i=>i?M.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new M((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(h=>{o[u]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new M((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Jn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new xl(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=_v(r.target.error);this.V.reject(new xl(e,i))}}static open(e,n,r,i){try{return new zh(n,e.transaction(i,r))}catch(s){throw new xl(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(G("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new JF(n)}}class fi{constructor(e,n,r){this.name=e,this.version=n,this.p=r,fi.S(lt())===12.2&&nt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return G("SimpleDb","Removing database:",e),Wi(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!LI())return!1;if(fi.v())return!0;const e=lt(),n=fi.S(e),r=0<n&&n<10,i=OA(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(G("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new xl(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new Y(z.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new Y(z.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new xl(e,o))},i.onupgradeneeded=s=>{G("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.p.O(o,i.transaction,s.oldVersion,this.version).next(()=>{G("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.M(e);const a=zh.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(u=>(a.g(),u)).catch(u=>(a.abort(u),M.reject(u))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,u=l.name!=="FirebaseError"&&o<3;if(G("SimpleDb","Transaction failed with error:",l.message,"Retrying:",u),this.close(),!u)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function OA(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class XF{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Wi(this.B.delete())}}class xl extends Y{constructor(e,n){super(z.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Ri(t){return t.name==="IndexedDbTransactionError"}class JF{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(G("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(G("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Wi(r)}add(e){return G("SimpleDb","ADD",this.store.name,e,e),Wi(this.store.add(e))}get(e){return Wi(this.store.get(e)).next(n=>(n===void 0&&(n=null),G("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return G("SimpleDb","DELETE",this.store.name,e),Wi(this.store.delete(e))}count(){return G("SimpleDb","COUNT",this.store.name),Wi(this.store.count())}U(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new M((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(a,l)=>{o.push(l)}).next(()=>o)}}G(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new M((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,n){G("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.W(i,n)}Y(e){const n=this.cursor({});return new M((r,i)=>{n.onerror=s=>{const o=_v(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,n){const r=[];return new M((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new XF(a),u=n(a.primaryKey,a.value,l);if(u instanceof M){const h=u.catch(f=>(l.done(),M.reject(f)));r.push(h)}l.isDone?i():l.K===null?a.continue():a.continue(l.K)}}).next(()=>M.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Wi(t){return new M((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=_v(r.target.error);n(i)}})}let cb=!1;function _v(t){const e=fi.S(lt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new Y("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return cb||(cb=!0,setTimeout(()=>{throw r},0)),r}}return t}class ZF{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){G("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{G("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(n){Ri(n)?G("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):await Pi(n)}await this.X(6e4)})}}class e5{constructor(e,n){this.localStore=e,this.persistence=n}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))}te(e,n){const r=new Set;let i=n,s=!0;return M.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return G("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(G("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}re(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=DA(s);vv(o,r)>0&&(r=o)}),new fn(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Yt.oe=-1;function $h(t){return t==null}function ic(t){return t===0&&1/t==-1/0}function LA(t){return typeof t=="number"&&Number.isInteger(t)&&!ic(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=ub(e)),e=t5(t.get(n),e);return ub(e)}function t5(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function ub(t){return t+""}function $n(t){const e=t.length;if(oe(e>=2),e===2)return oe(t.charAt(0)===""&&t.charAt(1)===""),Te.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("",s);switch((o<0||o>n)&&re(),t.charAt(o+1)){case"":const a=t.substring(s,o);let l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:re()}s=o+2}return new Te(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const db=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ed(t,e){return[t,zt(e)]}function MA(t,e,n){return[t,zt(e),n]}const n5={},r5=["prefixPath","collectionGroup","readTime","documentId"],i5=["prefixPath","collectionGroup","documentId"],s5=["collectionGroup","readTime","prefixPath","documentId"],o5=["canonicalId","targetId"],a5=["targetId","path"],l5=["path","targetId"],c5=["collectionId","parent"],u5=["indexId","uid"],d5=["uid","sequenceNumber"],h5=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],f5=["indexId","uid","orderedDocumentKey"],p5=["userId","collectionPath","documentId"],m5=["userId","collectionPath","largestBatchId"],g5=["userId","collectionGroup","largestBatchId"],FA=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],y5=[...FA,"documentOverlays"],UA=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],BA=UA,wv=[...BA,"indexConfiguration","indexState","indexEntries"],v5=wv,_5=[...wv,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg extends jA{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}}function ct(t,e){const n=ie(t);return fi.F(n._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hb(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ds(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function zA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e,n){this.comparator=e,this.root=n||vt.EMPTY}insert(e,n){return new De(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,vt.BLACK,null,null))}remove(e){return new De(this.comparator,this.root.remove(e,this.comparator).copy(null,null,vt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new xu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new xu(this.root,e,this.comparator,!1)}getReverseIterator(){return new xu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new xu(this.root,e,this.comparator,!0)}}class xu{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class vt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??vt.RED,this.left=i??vt.EMPTY,this.right=s??vt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new vt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return vt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return vt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,vt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,vt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw re();const e=this.left.check();if(e!==this.right.check())throw re();return e+(this.isRed()?0:1)}}vt.EMPTY=null,vt.RED=!0,vt.BLACK=!1;vt.EMPTY=new class{constructor(){this.size=0}get key(){throw re()}get value(){throw re()}get color(){throw re()}get left(){throw re()}get right(){throw re()}copy(e,n,r,i,s){return this}insert(e,n,r){return new vt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e){this.comparator=e,this.data=new De(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new fb(this.data.getIterator())}getIteratorFrom(e){return new fb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ke)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ke(this.comparator);return n.data=e,n}}class fb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Bs(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.fields=e,e.sort($e.comparator)}static empty(){return new Xt([])}unionWith(e){let n=new ke($e.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Xt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Uo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new $A("Invalid base64 string: "+s):s}}(e);return new rt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new rt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return de(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}rt.EMPTY_BYTE_STRING=new rt("");const w5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ar(t){if(oe(!!t),typeof t=="string"){let e=0;const n=w5.exec(t);if(oe(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Fe(t.seconds),nanos:Fe(t.nanos)}}function Fe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function wi(t){return typeof t=="string"?rt.fromBase64String(t):rt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xv(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function bv(t){const e=t.mapValue.fields.__previous_value__;return xv(e)?bv(e):e}function sc(t){const e=Ar(t.mapValue.fields.__local_write_time__.timestampValue);return new Ke(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x5{constructor(e,n,r,i,s,o,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class _s{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new _s("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof _s&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ei={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},td={nullValue:"NULL_VALUE"};function ws(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?xv(t)?4:qA(t)?9007199254740991:qh(t)?10:11:re()}function Zn(t,e){if(t===e)return!0;const n=ws(t);if(n!==ws(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return sc(t).isEqual(sc(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Ar(i.timestampValue),a=Ar(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return wi(i.bytesValue).isEqual(wi(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Fe(i.geoPointValue.latitude)===Fe(s.geoPointValue.latitude)&&Fe(i.geoPointValue.longitude)===Fe(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Fe(i.integerValue)===Fe(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Fe(i.doubleValue),a=Fe(s.doubleValue);return o===a?ic(o)===ic(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Uo(t.arrayValue.values||[],e.arrayValue.values||[],Zn);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(hb(o)!==hb(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Zn(o[l],a[l])))return!1;return!0}(t,e);default:return re()}}function oc(t,e){return(t.values||[]).find(n=>Zn(n,e))!==void 0}function xi(t,e){if(t===e)return 0;const n=ws(t),r=ws(e);if(n!==r)return de(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return de(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Fe(s.integerValue||s.doubleValue),l=Fe(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return pb(t.timestampValue,e.timestampValue);case 4:return pb(sc(t),sc(e));case 5:return de(t.stringValue,e.stringValue);case 6:return function(s,o){const a=wi(s),l=wi(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const h=de(a[u],l[u]);if(h!==0)return h}return de(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=de(Fe(s.latitude),Fe(o.latitude));return a!==0?a:de(Fe(s.longitude),Fe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return mb(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,u,h;const f=s.fields||{},p=o.fields||{},v=(a=f.value)===null||a===void 0?void 0:a.arrayValue,b=(l=p.value)===null||l===void 0?void 0:l.arrayValue,E=de(((u=v==null?void 0:v.values)===null||u===void 0?void 0:u.length)||0,((h=b==null?void 0:b.values)===null||h===void 0?void 0:h.length)||0);return E!==0?E:mb(v,b)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===ei.mapValue&&o===ei.mapValue)return 0;if(s===ei.mapValue)return 1;if(o===ei.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let f=0;f<l.length&&f<h.length;++f){const p=de(l[f],h[f]);if(p!==0)return p;const v=xi(a[l[f]],u[h[f]]);if(v!==0)return v}return de(l.length,h.length)}(t.mapValue,e.mapValue);default:throw re()}}function pb(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return de(t,e);const n=Ar(t),r=Ar(e),i=de(n.seconds,r.seconds);return i!==0?i:de(n.nanos,r.nanos)}function mb(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=xi(n[i],r[i]);if(s)return s}return de(n.length,r.length)}function Bo(t){return og(t)}function og(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ar(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return wi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Z.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=og(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${og(n.fields[o])}`;return i+"}"}(t.mapValue):re()}function ac(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ag(t){return!!t&&"integerValue"in t}function lc(t){return!!t&&"arrayValue"in t}function gb(t){return!!t&&"nullValue"in t}function yb(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function nd(t){return!!t&&"mapValue"in t}function qh(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function bl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ds(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=bl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=bl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function qA(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const KA={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function b5(t){return"nullValue"in t?td:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?ac(_s.empty(),Z.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?qh(t)?KA:{mapValue:{}}:re()}function E5(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?ac(_s.empty(),Z.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?KA:"mapValue"in t?qh(t)?{mapValue:{}}:ei:re()}function vb(t,e){const n=xi(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function _b(t,e){const n=xi(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.value=e}static empty(){return new Pt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!nd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=bl(n)}setAll(e){let n=$e.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=bl(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());nd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Zn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];nd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ds(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Pt(bl(this.value))}}function GA(t){const e=[];return Ds(t.fields,(n,r)=>{const i=new $e([n]);if(nd(r)){const s=GA(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Xt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Je(e,0,ae.min(),ae.min(),ae.min(),Pt.empty(),0)}static newFoundDocument(e,n,r,i){return new Je(e,1,n,ae.min(),r,i,0)}static newNoDocument(e,n){return new Je(e,2,n,ae.min(),ae.min(),Pt.empty(),0)}static newUnknownDocument(e,n){return new Je(e,3,n,ae.min(),ae.min(),Pt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Je&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Je(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e,n){this.position=e,this.inclusive=n}}function wb(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=Z.comparator(Z.fromName(o.referenceValue),n.key):r=xi(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function xb(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Zn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(e,n="asc"){this.field=e,this.dir=n}}function T5(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{}class ye extends WA{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new S5(e,n,r):n==="array-contains"?new k5(e,r):n==="in"?new ZA(e,r):n==="not-in"?new C5(e,r):n==="array-contains-any"?new P5(e,r):new ye(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new I5(e,r):new A5(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(xi(n,this.value)):n!==null&&ws(this.value)===ws(n)&&this.matchesComparison(xi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return re()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Se extends WA{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Se(e,n)}matches(e){return $o(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function $o(t){return t.op==="and"}function lg(t){return t.op==="or"}function Ev(t){return HA(t)&&$o(t)}function HA(t){for(const e of t.filters)if(e instanceof Se)return!1;return!0}function cg(t){if(t instanceof ye)return t.field.canonicalString()+t.op.toString()+Bo(t.value);if(Ev(t))return t.filters.map(e=>cg(e)).join(",");{const e=t.filters.map(n=>cg(n)).join(",");return`${t.op}(${e})`}}function QA(t,e){return t instanceof ye?function(r,i){return i instanceof ye&&r.op===i.op&&r.field.isEqual(i.field)&&Zn(r.value,i.value)}(t,e):t instanceof Se?function(r,i){return i instanceof Se&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&QA(o,i.filters[a]),!0):!1}(t,e):void re()}function YA(t,e){const n=t.filters.concat(e);return Se.create(n,t.op)}function XA(t){return t instanceof ye?function(n){return`${n.field.canonicalString()} ${n.op} ${Bo(n.value)}`}(t):t instanceof Se?function(n){return n.op.toString()+" {"+n.getFilters().map(XA).join(" ,")+"}"}(t):"Filter"}class S5 extends ye{constructor(e,n,r){super(e,n,r),this.key=Z.fromName(r.referenceValue)}matches(e){const n=Z.comparator(e.key,this.key);return this.matchesComparison(n)}}class I5 extends ye{constructor(e,n){super(e,"in",n),this.keys=JA("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class A5 extends ye{constructor(e,n){super(e,"not-in",n),this.keys=JA("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function JA(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Z.fromName(r.referenceValue))}class k5 extends ye{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return lc(n)&&oc(n.arrayValue,this.value)}}class ZA extends ye{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&oc(this.value.arrayValue,n)}}class C5 extends ye{constructor(e,n){super(e,"not-in",n)}matches(e){if(oc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!oc(this.value.arrayValue,n)}}class P5 extends ye{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!lc(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>oc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R5{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function ug(t,e=null,n=[],r=[],i=null,s=null,o=null){return new R5(t,e,n,r,i,s,o)}function xs(t){const e=ie(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>cg(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),$h(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Bo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Bo(r)).join(",")),e.ue=n}return e.ue}function Ac(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!T5(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!QA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!xb(t.startAt,e.startAt)&&xb(t.endAt,e.endAt)}function Wd(t){return Z.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Hd(t,e){return t.filters.filter(n=>n instanceof ye&&n.field.isEqual(e))}function bb(t,e,n){let r=td,i=!0;for(const s of Hd(t,e)){let o=td,a=!0;switch(s.op){case"<":case"<=":o=b5(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=td}vb({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];vb({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function Eb(t,e,n){let r=ei,i=!0;for(const s of Hd(t,e)){let o=ei,a=!0;switch(s.op){case">=":case">":o=E5(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=ei}_b({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];_b({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function ek(t,e,n,r,i,s,o,a){return new kc(t,e,n,r,i,s,o,a)}function Kh(t){return new kc(t)}function Tb(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function tk(t){return t.collectionGroup!==null}function El(t){const e=ie(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ke($e.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Gd(s,r))}),n.has($e.keyField().canonicalString())||e.ce.push(new Gd($e.keyField(),r))}return e.ce}function un(t){const e=ie(t);return e.le||(e.le=N5(e,El(t))),e.le}function N5(t,e){if(t.limitType==="F")return ug(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Gd(i.field,s)});const n=t.endAt?new zo(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new zo(t.startAt.position,t.startAt.inclusive):null;return ug(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function dg(t,e){const n=t.filters.concat([e]);return new kc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function hg(t,e,n){return new kc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Gh(t,e){return Ac(un(t),un(e))&&t.limitType===e.limitType}function nk(t){return`${xs(un(t))}|lt:${t.limitType}`}function Ws(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>XA(i)).join(", ")}]`),$h(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Bo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Bo(i)).join(",")),`Target(${r})`}(un(t))}; limitType=${t.limitType})`}function Cc(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Z.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of El(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=wb(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,El(r),i)||r.endAt&&!function(o,a,l){const u=wb(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,El(r),i))}(t,e)}function rk(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function ik(t){return(e,n)=>{let r=!1;for(const i of El(t)){const s=D5(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function D5(t,e,n){const r=t.field.isKeyField()?Z.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?xi(l,u):re()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return re()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ds(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return zA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V5=new De(Z.comparator);function an(){return V5}const sk=new De(Z.comparator);function rl(...t){let e=sk;for(const n of t)e=e.insert(n.key,n);return e}function ok(t){let e=sk;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function qn(){return Tl()}function ak(){return Tl()}function Tl(){return new Ni(t=>t.toString(),(t,e)=>t.isEqual(e))}const j5=new De(Z.comparator),O5=new ke(Z.comparator);function pe(...t){let e=O5;for(const n of t)e=e.add(n);return e}const L5=new ke(de);function Tv(){return L5}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ic(e)?"-0":e}}function lk(t){return{integerValue:""+t}}function M5(t,e){return LA(e)?lk(e):Sv(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(){this._=void 0}}function F5(t,e,n){return t instanceof qo?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&xv(s)&&(s=bv(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Ko?uk(t,e):t instanceof Go?dk(t,e):function(i,s){const o=ck(i,s),a=Sb(o)+Sb(i.Pe);return ag(o)&&ag(i.Pe)?lk(a):Sv(i.serializer,a)}(t,e)}function U5(t,e,n){return t instanceof Ko?uk(t,e):t instanceof Go?dk(t,e):n}function ck(t,e){return t instanceof cc?function(r){return ag(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class qo extends Wh{}class Ko extends Wh{constructor(e){super(),this.elements=e}}function uk(t,e){const n=hk(e);for(const r of t.elements)n.some(i=>Zn(i,r))||n.push(r);return{arrayValue:{values:n}}}class Go extends Wh{constructor(e){super(),this.elements=e}}function dk(t,e){let n=hk(e);for(const r of t.elements)n=n.filter(i=>!Zn(i,r));return{arrayValue:{values:n}}}class cc extends Wh{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Sb(t){return Fe(t.integerValue||t.doubleValue)}function hk(t){return lc(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(e,n){this.field=e,this.transform=n}}function B5(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Ko&&i instanceof Ko||r instanceof Go&&i instanceof Go?Uo(r.elements,i.elements,Zn):r instanceof cc&&i instanceof cc?Zn(r.Pe,i.Pe):r instanceof qo&&i instanceof qo}(t.transform,e.transform)}class z5{constructor(e,n){this.version=e,this.transformResults=n}}class Nt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Nt}static exists(e){return new Nt(void 0,e)}static updateTime(e){return new Nt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function rd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Hh{}function pk(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Qh(t.key,Nt.none()):new aa(t.key,t.data,Nt.none());{const n=t.data,r=Pt.empty();let i=new ke($e.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Pr(t.key,r,new Xt(i.toArray()),Nt.none())}}function $5(t,e,n){t instanceof aa?function(i,s,o){const a=i.value.clone(),l=Ab(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Pr?function(i,s,o){if(!rd(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Ab(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(mk(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Sl(t,e,n,r){return t instanceof aa?function(s,o,a,l){if(!rd(s.precondition,o))return a;const u=s.value.clone(),h=kb(s.fieldTransforms,l,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Pr?function(s,o,a,l){if(!rd(s.precondition,o))return a;const u=kb(s.fieldTransforms,l,o),h=o.data;return h.setAll(mk(s)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(s,o,a){return rd(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function q5(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=ck(r.transform,i||null);s!=null&&(n===null&&(n=Pt.empty()),n.set(r.field,s))}return n||null}function Ib(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Uo(r,i,(s,o)=>B5(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class aa extends Hh{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Pr extends Hh{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function mk(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Ab(t,e,n){const r=new Map;oe(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,U5(o,a,n[i]))}return r}function kb(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,F5(s,o,e))}return r}class Qh extends Hh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class gk extends Hh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&$5(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Sl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Sl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=ak();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=pk(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(ae.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),pe())}isEqual(e){return this.batchId===e.batchId&&Uo(this.mutations,e.mutations,(n,r)=>Ib(n,r))&&Uo(this.baseMutations,e.baseMutations,(n,r)=>Ib(n,r))}}class Av{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){oe(e.mutations.length===r.length);let i=function(){return j5}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Av(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K5{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var it,ve;function G5(t){switch(t){default:return re();case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0}}function yk(t){if(t===void 0)return nt("GRPC error has no .code"),z.UNKNOWN;switch(t){case it.OK:return z.OK;case it.CANCELLED:return z.CANCELLED;case it.UNKNOWN:return z.UNKNOWN;case it.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case it.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case it.INTERNAL:return z.INTERNAL;case it.UNAVAILABLE:return z.UNAVAILABLE;case it.UNAUTHENTICATED:return z.UNAUTHENTICATED;case it.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case it.NOT_FOUND:return z.NOT_FOUND;case it.ALREADY_EXISTS:return z.ALREADY_EXISTS;case it.PERMISSION_DENIED:return z.PERMISSION_DENIED;case it.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case it.ABORTED:return z.ABORTED;case it.OUT_OF_RANGE:return z.OUT_OF_RANGE;case it.UNIMPLEMENTED:return z.UNIMPLEMENTED;case it.DATA_LOSS:return z.DATA_LOSS;default:return re()}}(ve=it||(it={}))[ve.OK=0]="OK",ve[ve.CANCELLED=1]="CANCELLED",ve[ve.UNKNOWN=2]="UNKNOWN",ve[ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ve[ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ve[ve.NOT_FOUND=5]="NOT_FOUND",ve[ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",ve[ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",ve[ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",ve[ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ve[ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ve[ve.ABORTED=10]="ABORTED",ve[ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",ve[ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",ve[ve.INTERNAL=13]="INTERNAL",ve[ve.UNAVAILABLE=14]="UNAVAILABLE",ve[ve.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W5(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H5=new ls([4294967295,4294967295],0);function Cb(t){const e=W5().encode(t),n=new TA;return n.update(e),new Uint8Array(n.digest())}function Pb(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ls([n,r],0),new ls([i,s],0)]}class Cv{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new il(`Invalid padding: ${n}`);if(r<0)throw new il(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new il(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new il(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ls.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(ls.fromNumber(r)));return i.compare(H5)===1&&(i=new ls([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Cb(e),[r,i]=Pb(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Cv(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=Cb(e),[r,i]=Pb(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class il extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Rc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Pc(ae.min(),i,new De(de),an(),pe())}}class Rc{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Rc(r,n,pe(),pe(),pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class vk{constructor(e,n){this.targetId=e,this.me=n}}class _k{constructor(e,n,r=rt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Rb{constructor(){this.fe=0,this.ge=Db(),this.pe=rt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=pe(),n=pe(),r=pe();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:re()}}),new Rc(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Db()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,oe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Q5{constructor(e){this.Le=e,this.Be=new Map,this.ke=an(),this.qe=Nb(),this.Qe=new De(de)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:re()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(Wd(s))if(r===0){const o=new Z(s.path);this.Ue(n,o,Je.newNoDocument(o,ae.min()))}else oe(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=wi(r).toUint8Array()}catch(l){if(l instanceof $A)return Fo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Cv(o,i,s)}catch(l){return Fo(l instanceof il?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&Wd(a.target)){const l=new Z(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Je.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=pe();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Pc(e,n,this.Qe,this.ke,r);return this.ke=an(),this.qe=Nb(),this.Qe=new De(de),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Rb,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new ke(de),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||G("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Rb),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Nb(){return new De(Z.comparator)}function Db(){return new De(Z.comparator)}const Y5={asc:"ASCENDING",desc:"DESCENDING"},X5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},J5={and:"AND",or:"OR"};class Z5{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function fg(t,e){return t.useProto3Json||$h(e)?e:{value:e}}function Wo(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function wk(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function eU(t,e){return Wo(t,e.toTimestamp())}function $t(t){return oe(!!t),ae.fromTimestamp(function(n){const r=Ar(n);return new Ke(r.seconds,r.nanos)}(t))}function Pv(t,e){return pg(t,e).canonicalString()}function pg(t,e){const n=function(i){return new Te(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function xk(t){const e=Te.fromString(t);return oe(Pk(e)),e}function Qd(t,e){return Pv(t.databaseId,e.path)}function cs(t,e){const n=xk(e);if(n.get(1)!==t.databaseId.projectId)throw new Y(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Y(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Z(Tk(n))}function bk(t,e){return Pv(t.databaseId,e)}function Ek(t){const e=xk(t);return e.length===4?Te.emptyPath():Tk(e)}function mg(t){return new Te(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Tk(t){return oe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Vb(t,e,n){return{name:Qd(t,e),fields:n.value.mapValue.fields}}function tU(t,e,n){const r=cs(t,e.name),i=$t(e.updateTime),s=e.createTime?$t(e.createTime):ae.min(),o=new Pt({mapValue:{fields:e.fields}}),a=Je.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function nU(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:re()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,h){return u.useProto3Json?(oe(h===void 0||typeof h=="string"),rt.fromBase64String(h||"")):(oe(h===void 0||h instanceof Buffer||h instanceof Uint8Array),rt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const h=u.code===void 0?z.UNKNOWN:yk(u.code);return new Y(h,u.message||"")}(o);n=new _k(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=cs(t,r.document.name),s=$t(r.document.updateTime),o=r.document.createTime?$t(r.document.createTime):ae.min(),a=new Pt({mapValue:{fields:r.document.fields}}),l=Je.newFoundDocument(i,s,o,a),u=r.targetIds||[],h=r.removedTargetIds||[];n=new id(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=cs(t,r.document),s=r.readTime?$t(r.readTime):ae.min(),o=Je.newNoDocument(i,s),a=r.removedTargetIds||[];n=new id([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=cs(t,r.document),s=r.removedTargetIds||[];n=new id([],s,i,null)}else{if(!("filter"in e))return re();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new K5(i,s),a=r.targetId;n=new vk(a,o)}}return n}function Yd(t,e){let n;if(e instanceof aa)n={update:Vb(t,e.key,e.value)};else if(e instanceof Qh)n={delete:Qd(t,e.key)};else if(e instanceof Pr)n={update:Vb(t,e.key,e.data),updateMask:lU(e.fieldMask)};else{if(!(e instanceof gk))return re();n={verify:Qd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof qo)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ko)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Go)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof cc)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw re()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:eU(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:re()}(t,e.precondition)),n}function gg(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?Nt.updateTime($t(s.updateTime)):s.exists!==void 0?Nt.exists(s.exists):Nt.none()}(e.currentDocument):Nt.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let l=null;if("setToServerValue"in a)oe(a.setToServerValue==="REQUEST_TIME"),l=new qo;else if("appendMissingElements"in a){const h=a.appendMissingElements.values||[];l=new Ko(h)}else if("removeAllFromArray"in a){const h=a.removeAllFromArray.values||[];l=new Go(h)}else"increment"in a?l=new cc(o,a.increment):re();const u=$e.fromServerFormat(a.fieldPath);return new fk(u,l)}(t,i)):[];if(e.update){e.update.name;const i=cs(t,e.update.name),s=new Pt({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const u=l.fieldPaths||[];return new Xt(u.map(h=>$e.fromServerFormat(h)))}(e.updateMask);return new Pr(i,s,o,n,r)}return new aa(i,s,n,r)}if(e.delete){const i=cs(t,e.delete);return new Qh(i,n)}if(e.verify){const i=cs(t,e.verify);return new gk(i,n)}return re()}function rU(t,e){return t&&t.length>0?(oe(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?$t(i.updateTime):$t(s);return o.isEqual(ae.min())&&(o=$t(s)),new z5(o,i.transformResults||[])}(n,e))):[]}function Sk(t,e){return{documents:[bk(t,e.path)]}}function Ik(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=bk(t,i);const s=function(u){if(u.length!==0)return Ck(Se.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(h=>function(p){return{field:Hs(p.field),direction:sU(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=fg(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:i}}function Ak(t){let e=Ek(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){oe(r===1);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(f){const p=kk(f);return p instanceof Se&&Ev(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(b){return new Gd(Qs(b.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(f){let p;return p=typeof f=="object"?f.value:f,$h(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(f){const p=!!f.before,v=f.values||[];return new zo(v,p)}(n.startAt));let u=null;return n.endAt&&(u=function(f){const p=!f.before,v=f.values||[];return new zo(v,p)}(n.endAt)),ek(e,i,o,s,a,"F",l,u)}function iU(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return re()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function kk(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Qs(n.unaryFilter.field);return ye.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Qs(n.unaryFilter.field);return ye.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Qs(n.unaryFilter.field);return ye.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Qs(n.unaryFilter.field);return ye.create(o,"!=",{nullValue:"NULL_VALUE"});default:return re()}}(t):t.fieldFilter!==void 0?function(n){return ye.create(Qs(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return re()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Se.create(n.compositeFilter.filters.map(r=>kk(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return re()}}(n.compositeFilter.op))}(t):re()}function sU(t){return Y5[t]}function oU(t){return X5[t]}function aU(t){return J5[t]}function Hs(t){return{fieldPath:t.canonicalString()}}function Qs(t){return $e.fromServerFormat(t.fieldPath)}function Ck(t){return t instanceof ye?function(n){if(n.op==="=="){if(yb(n.value))return{unaryFilter:{field:Hs(n.field),op:"IS_NAN"}};if(gb(n.value))return{unaryFilter:{field:Hs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(yb(n.value))return{unaryFilter:{field:Hs(n.field),op:"IS_NOT_NAN"}};if(gb(n.value))return{unaryFilter:{field:Hs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hs(n.field),op:oU(n.op),value:n.value}}}(t):t instanceof Se?function(n){const r=n.getFilters().map(i=>Ck(i));return r.length===1?r[0]:{compositeFilter:{op:aU(n.op),filters:r}}}(t):re()}function lU(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Pk(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e,n,r,i,s=ae.min(),o=ae.min(),a=rt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new pr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new pr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new pr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new pr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(e){this.ct=e}}function cU(t,e){let n;if(e.document)n=tU(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Z.fromSegments(e.noDocument.path),i=Es(e.noDocument.readTime);n=Je.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return re();{const r=Z.fromSegments(e.unknownDocument.path),i=Es(e.unknownDocument.version);n=Je.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new Ke(i[0],i[1]);return ae.fromTimestamp(s)}(e.readTime)),n}function jb(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Xd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:Qd(s,o.key),fields:o.data.value.mapValue.fields,updateTime:Wo(s,o.version.toTimestamp()),createTime:Wo(s,o.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:bs(e.version)};else{if(!e.isUnknownDocument())return re();r.unknownDocument={path:n.path.toArray(),version:bs(e.version)}}return r}function Xd(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function bs(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Es(t){const e=new Ke(t.seconds,t.nanoseconds);return ae.fromTimestamp(e)}function Hi(t,e){const n=(e.baseMutations||[]).map(s=>gg(t.ct,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>gg(t.ct,s)),i=Ke.fromMillis(e.localWriteTimeMs);return new Iv(e.batchId,i,n,r)}function sl(t){const e=Es(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Es(t.lastLimboFreeSnapshotVersion):ae.min();let r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){return oe(s.documents.length===1),un(Kh(Ek(s.documents[0])))}(t.query):function(s){return un(Ak(s))}(t.query),new pr(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,rt.fromBase64String(t.resumeToken))}function Nk(t,e){const n=bs(e.snapshotVersion),r=bs(e.lastLimboFreeSnapshotVersion);let i;i=Wd(e.target)?Sk(t.ct,e.target):Ik(t.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:xs(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Dk(t){const e=Ak({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?hg(e,e.limit,"L"):e}function Ap(t,e){return new kv(e.largestBatchId,gg(t.ct,e.overlayMutation))}function Ob(t,e){const n=e.path.lastSegment();return[t,zt(e.path.popLast()),n]}function Lb(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:bs(r.readTime),documentKey:zt(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uU{getBundleMetadata(e,n){return Mb(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:Es(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return Mb(e).put(function(i){return{bundleId:i.id,createTime:bs($t(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return Fb(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:Dk(s.bundledQuery),readTime:Es(s.readTime)}}(r)})}saveNamedQuery(e,n){return Fb(e).put(function(i){return{name:i.name,readTime:bs($t(i.readTime)),bundledQuery:i.bundledQuery}}(n))}}function Mb(t){return ct(t,"bundles")}function Fb(t){return ct(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){const r=n.uid||"";return new Yh(e,r)}getOverlay(e,n){return Ma(e).get(Ob(this.userId,n)).next(r=>r?Ap(this.serializer,r):null)}getOverlays(e,n){const r=qn();return M.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new kv(n,o);i.push(this.ht(e,a))}),M.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(zt(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Ma(e).j("collectionPathOverlayIndex",a))}),M.waitFor(s)}getOverlaysForCollection(e,n,r){const i=qn(),s=zt(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Ma(e).U("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const u=Ap(this.serializer,l);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=qn();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Ma(e).J({index:"collectionGroupOverlayIndex",range:a},(l,u,h)=>{const f=Ap(this.serializer,u);s.size()<i||f.largestBatchId===o?(s.set(f.getKey(),f),o=f.largestBatchId):h.done()}).next(()=>s)}ht(e,n){return Ma(e).put(function(i,s,o){const[a,l,u]=Ob(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Yd(i.ct,o.mutation)}}(this.serializer,this.userId,n))}}function Ma(t){return ct(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dU{Pt(e){return ct(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?rt.fromUint8Array(r):rt.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.Pt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(Fe(e.integerValue));else if("doubleValue"in e){const r=Fe(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),ic(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=Ar(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(wi(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?qA(e)?this.dt(n,Number.MAX_SAFE_INTEGER):qh(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):re()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){const r=e.fields||{};this.dt(n,55);for(const i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}wt(e,n){var r,i;const s=e.fields||{};this.dt(n,53);const o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(n,15),n.At(Fe(a)),this.Vt(o,n),this.Tt(s[o],n)}bt(e,n){const r=e.values||[];this.dt(n,50);for(const i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),Z.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}}Qi.vt=new Qi;function hU(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function Ub(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=hU(255&r[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}class fU{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ot(r.value),r=n.next();this.Nt()}Lt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=n.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const i=n.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const n=this.qt(e),r=Ub(n);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}Kt(e){const n=this.qt(e),r=Ub(n);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ft(e){const n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(n)}Ot(e){const n=255&e;n===0?(this.Gt(0),this.Gt(255)):n===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class pU{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class mU{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Fa{constructor(){this.jt=new fU,this.Ht=new pU(this.jt),this.Jt=new mU(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Zt(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Yi(this.indexId,this.documentKey,this.arrayValue,r)}}function Lr(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=Bb(t.arrayValue,e.arrayValue),n!==0?n:(n=Bb(t.directionalValue,e.directionalValue),n!==0?n:Z.comparator(t.documentKey,e.documentKey)))}function Bb(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(e){this.Xt=new ke((n,r)=>$e.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const n of e.filters){const r=n;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(oe(e.collectionGroup===this.collectionId),this.nn)return!1;const n=ig(e);if(n!==void 0&&!this.sn(n))return!1;const r=Gi(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){const a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[s];if(!this.on(a,l)||!this._n(this.en[o++],l))return!1}++s}for(;s<r.length;++s){const a=r[s];if(o>=this.en.length||!this._n(this.en[o++],a))return!1}return!0}an(){if(this.nn)return null;let e=new ke($e.comparator);const n=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Zu(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Zu(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Zu(r.field,r.dir==="asc"?0:1)));return new Kd(Kd.UNKNOWN_ID,this.collectionId,n,rc.empty())}sn(e){for(const n of this.tn)if(this.on(n,e))return!0;return!1}on(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}_n(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vk(t){var e,n;if(oe(t instanceof ye||t instanceof Se),t instanceof ye){if(t instanceof ZA){const i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>ye.create(t.field,"==",s)))||[];return Se.create(i,"or")}return t}const r=t.filters.map(i=>Vk(i));return Se.create(r,t.op)}function gU(t){if(t.getFilters().length===0)return[];const e=_g(Vk(t));return oe(jk(e)),yg(e)||vg(e)?[e]:e.getFilters()}function yg(t){return t instanceof ye}function vg(t){return t instanceof Se&&Ev(t)}function jk(t){return yg(t)||vg(t)||function(n){if(n instanceof Se&&lg(n)){for(const r of n.getFilters())if(!yg(r)&&!vg(r))return!1;return!0}return!1}(t)}function _g(t){if(oe(t instanceof ye||t instanceof Se),t instanceof ye)return t;if(t.filters.length===1)return _g(t.filters[0]);const e=t.filters.map(r=>_g(r));let n=Se.create(e,t.op);return n=Jd(n),jk(n)?n:(oe(n instanceof Se),oe($o(n)),oe(n.filters.length>1),n.filters.reduce((r,i)=>Rv(r,i)))}function Rv(t,e){let n;return oe(t instanceof ye||t instanceof Se),oe(e instanceof ye||e instanceof Se),n=t instanceof ye?e instanceof ye?function(i,s){return Se.create([i,s],"and")}(t,e):$b(t,e):e instanceof ye?$b(e,t):function(i,s){if(oe(i.filters.length>0&&s.filters.length>0),$o(i)&&$o(s))return YA(i,s.getFilters());const o=lg(i)?i:s,a=lg(i)?s:i,l=o.filters.map(u=>Rv(u,a));return Se.create(l,"or")}(t,e),Jd(n)}function $b(t,e){if($o(e))return YA(e,t.getFilters());{const n=e.filters.map(r=>Rv(t,r));return Se.create(n,"or")}}function Jd(t){if(oe(t instanceof ye||t instanceof Se),t instanceof ye)return t;const e=t.getFilters();if(e.length===1)return Jd(e[0]);if(HA(t))return t;const n=e.map(i=>Jd(i)),r=[];return n.forEach(i=>{i instanceof ye?r.push(i):i instanceof Se&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Se.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yU{constructor(){this.un=new Nv}addToCollectionParentIndex(e,n){return this.un.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(fn.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(fn.min())}updateCollectionGroup(e,n,r){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}}class Nv{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new ke(Te.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ke(Te.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bu=new Uint8Array(0);class vU{constructor(e,n){this.databaseId=n,this.cn=new Nv,this.ln=new Ni(r=>xs(r),(r,i)=>Ac(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.cn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.cn.add(n)});const s={collectionId:r,parent:zt(i)};return qb(e).put(s)}return M.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[RA(n),""],!1,!0);return qb(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push($n(o.parent))}return r})}addFieldIndex(e,n){const r=Ua(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=$s(e);return s.next(a=>{o.put(Lb(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=Ua(e),i=$s(e),s=zs(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Ua(e),r=zs(e),i=$s(e);return n.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,n){return M.forEach(this.hn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new zb(r).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=zs(e);let i=!0;const s=new Map;return M.forEach(this.hn(n),o=>this.Pn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=pe();const a=[];return M.forEach(s,(l,u)=>{G("IndexedDbIndexManager",`Using index ${function(w){return`id=${w.indexId}|cg=${w.collectionGroup}|f=${w.fields.map(P=>`${P.fieldPath}:${P.kind}`).join(",")}`}(l)} to execute ${xs(n)}`);const h=function(w,P){const V=ig(P);if(V===void 0)return null;for(const O of Hd(w,V.fieldPath))switch(O.op){case"array-contains-any":return O.value.arrayValue.values||[];case"array-contains":return[O.value]}return null}(u,l),f=function(w,P){const V=new Map;for(const O of Gi(P))for(const I of Hd(w,O.fieldPath))switch(I.op){case"==":case"in":V.set(O.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return V.set(O.fieldPath.canonicalString(),I.value),Array.from(V.values())}return null}(u,l),p=function(w,P){const V=[];let O=!0;for(const I of Gi(P)){const x=I.kind===0?bb(w,I.fieldPath,w.startAt):Eb(w,I.fieldPath,w.startAt);V.push(x.value),O&&(O=x.inclusive)}return new zo(V,O)}(u,l),v=function(w,P){const V=[];let O=!0;for(const I of Gi(P)){const x=I.kind===0?Eb(w,I.fieldPath,w.endAt):bb(w,I.fieldPath,w.endAt);V.push(x.value),O&&(O=x.inclusive)}return new zo(V,O)}(u,l),b=this.In(l,u,p),E=this.In(l,u,v),A=this.Tn(l,u,f),_=this.En(l.indexId,h,b,p.inclusive,E,v.inclusive,A);return M.forEach(_,y=>r.G(y,n.limit).next(w=>{w.forEach(P=>{const V=Z.fromSegments(P.documentKey);o.has(V)||(o=o.add(V),a.push(V))})}))}).next(()=>a)}return M.resolve(null)})}hn(e){let n=this.ln.get(e);return n||(e.filters.length===0?n=[e]:n=gU(Se.create(e.filters,"and")).map(r=>ug(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,n),n)}En(e,n,r,i,s,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,s.length),u=l/(n!=null?n.length:1),h=[];for(let f=0;f<l;++f){const p=n?this.dn(n[f/u]):bu,v=this.An(e,p,r[f%u],i),b=this.Rn(e,p,s[f%u],o),E=a.map(A=>this.An(e,p,A,!0));h.push(...this.createRange(v,b,E))}return h}An(e,n,r,i){const s=new Yi(e,Z.empty(),n,r);return i?s:s.Zt()}Rn(e,n,r,i){const s=new Yi(e,Z.empty(),n,r);return i?s.Zt():s}Pn(e,n){const r=new zb(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.hn(n);return M.forEach(i,s=>this.Pn(e,s).next(o=>{o?r!==0&&o.fields.length<function(l){let u=new ke($e.comparator),h=!1;for(const f of l.filters)for(const p of f.getFlattenedFilters())p.field.isKeyField()||(p.op==="array-contains"||p.op==="array-contains-any"?h=!0:u=u.add(p.field));for(const f of l.orderBy)f.field.isKeyField()||(u=u.add(f.field));return u.size+(h?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&i.length>1&&r===2?1:r)}Vn(e,n){const r=new Fa;for(const i of Gi(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Yt(i.kind);Qi.vt.It(s,o)}return r.zt()}dn(e){const n=new Fa;return Qi.vt.It(e,n.Yt(0)),n.zt()}mn(e,n){const r=new Fa;return Qi.vt.It(ac(this.databaseId,n),r.Yt(function(s){const o=Gi(s);return o.length===0?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,n,r){if(r===null)return[];let i=[];i.push(new Fa);let s=0;for(const o of Gi(e)){const a=r[s++];for(const l of i)if(this.fn(n,o.fieldPath)&&lc(a))i=this.gn(i,o,a);else{const u=l.Yt(o.kind);Qi.vt.It(a,u)}}return this.pn(i)}In(e,n,r){return this.Tn(e,n,r.position)}pn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].zt();return n}gn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new Fa;l.seed(a.zt()),Qi.vt.It(o,l.Yt(n.kind)),s.push(l)}return s}fn(e,n){return!!e.filters.find(r=>r instanceof ye&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=Ua(e),i=$s(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(s=>{const o=[];return M.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(h,f){const p=f?new rc(f.sequenceNumber,new fn(Es(f.readTime),new Z($n(f.documentKey)),f.largestBatchId)):rc.empty(),v=h.fields.map(([b,E])=>new Zu($e.fromServerFormat(b),E));return new Kd(h.indexId,h.collectionGroup,v,p)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:de(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=Ua(e),s=$s(e);return this.yn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>M.forEach(a,l=>s.put(Lb(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return M.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?M.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),M.forEach(a,l=>this.wn(e,i,l).next(u=>{const h=this.Sn(s,l);return u.isEqual(h)?M.resolve():this.bn(e,s,l,u,h)}))))})}Dn(e,n,r,i){return zs(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,n.key),documentKey:n.key.path.toArray()})}vn(e,n,r,i){return zs(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,n.key),n.key.path.toArray()])}wn(e,n,r){const i=zs(e);let s=new ke(Lr);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,n)])},(o,a)=>{s=s.add(new Yi(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}Sn(e,n){let r=new ke(Lr);const i=this.Vn(n,e);if(i==null)return r;const s=ig(n);if(s!=null){const o=e.data.field(s.fieldPath);if(lc(o))for(const a of o.arrayValue.values||[])r=r.add(new Yi(n.indexId,e.key,this.dn(a),i))}else r=r.add(new Yi(n.indexId,e.key,bu,i));return r}bn(e,n,r,i,s){G("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(l,u,h,f,p){const v=l.getIterator(),b=u.getIterator();let E=Bs(v),A=Bs(b);for(;E||A;){let _=!1,y=!1;if(E&&A){const w=h(E,A);w<0?y=!0:w>0&&(_=!0)}else E!=null?y=!0:_=!0;_?(f(A),A=Bs(b)):y?(p(E),E=Bs(v)):(E=Bs(v),A=Bs(b))}}(i,s,Lr,a=>{o.push(this.Dn(e,n,r,a))},a=>{o.push(this.vn(e,n,r,a))}),M.waitFor(o)}yn(e){let n=1;return $s(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Lr(o,a)).filter((o,a,l)=>!a||Lr(o,l[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=Lr(o,e),l=Lr(o,n);if(a===0)i[0]=e.Zt();else if(a>0&&l<0)i.push(o),i.push(o.Zt());else if(l>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Cn(i[o],i[o+1]))return[];const a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,bu,[]],l=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,bu,[]];s.push(IDBKeyRange.bound(a,l))}return s}Cn(e,n){return Lr(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(Kb)}getMinOffset(e,n){return M.mapArray(this.hn(n),r=>this.Pn(e,r).next(i=>i||re())).next(Kb)}}function qb(t){return ct(t,"collectionParents")}function zs(t){return ct(t,"indexEntries")}function Ua(t){return ct(t,"indexConfiguration")}function $s(t){return ct(t,"indexState")}function Kb(t){oe(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;vv(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new fn(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Wt{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Wt(e,Wt.DEFAULT_COLLECTION_PERCENTILE,Wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ok(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.J({range:o},(h,f,p)=>(a++,p.delete()));s.push(l.next(()=>{oe(a===1)}));const u=[];for(const h of n.mutations){const f=MA(e,h.key.path,n.batchId);s.push(i.delete(f)),u.push(h.key)}return M.waitFor(s).next(()=>u)}function Zd(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw re();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wt.DEFAULT_COLLECTION_PERCENTILE=10,Wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Wt.DEFAULT=new Wt(41943040,Wt.DEFAULT_COLLECTION_PERCENTILE,Wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Wt.DISABLED=new Wt(-1,0,0);class Xh{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,n,r,i){oe(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new Xh(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Mr(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=Ys(e),o=Mr(e);return o.add({}).next(a=>{oe(typeof a=="number");const l=new Iv(a,n,r,i),u=function(v,b,E){const A=E.baseMutations.map(y=>Yd(v.ct,y)),_=E.mutations.map(y=>Yd(v.ct,y));return{userId:b,batchId:E.batchId,localWriteTimeMs:E.localWriteTime.toMillis(),baseMutations:A,mutations:_}}(this.serializer,this.userId,l),h=[];let f=new ke((p,v)=>de(p.canonicalString(),v.canonicalString()));for(const p of i){const v=MA(this.userId,p.key.path,a);f=f.add(p.key.path.popLast()),h.push(o.put(u)),h.push(s.put(v,n5))}return f.forEach(p=>{h.push(this.indexManager.addToCollectionParentIndex(e,p))}),e.addOnCommittedListener(()=>{this.Fn[a]=l.keys()}),M.waitFor(h).next(()=>l)})}lookupMutationBatch(e,n){return Mr(e).get(n).next(r=>r?(oe(r.userId===this.userId),Hi(this.serializer,r)):null)}Mn(e,n){return this.Fn[n]?M.resolve(this.Fn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Fn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Mr(e).J({index:"userMutationsIndex",range:i},(o,a,l)=>{a.userId===this.userId&&(oe(a.batchId>=r),s=Hi(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Mr(e).J({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Mr(e).U("userMutationsIndex",n).next(r=>r.map(i=>Hi(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=ed(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return Ys(e).J({range:i},(o,a,l)=>{const[u,h,f]=o,p=$n(h);if(u===this.userId&&n.path.isEqual(p))return Mr(e).get(f).next(v=>{if(!v)throw re();oe(v.userId===this.userId),s.push(Hi(this.serializer,v))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ke(de);const i=[];return n.forEach(s=>{const o=ed(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=Ys(e).J({range:a},(u,h,f)=>{const[p,v,b]=u,E=$n(v);p===this.userId&&s.path.isEqual(E)?r=r.add(b):f.done()});i.push(l)}),M.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=ed(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new ke(de);return Ys(e).J({range:o},(l,u,h)=>{const[f,p,v]=l,b=$n(p);f===this.userId&&r.isPrefixOf(b)?b.length===i&&(a=a.add(v)):h.done()}).next(()=>this.xn(e,a))}xn(e,n){const r=[],i=[];return n.forEach(s=>{i.push(Mr(e).get(s).next(o=>{if(o===null)throw re();oe(o.userId===this.userId),r.push(Hi(this.serializer,o))}))}),M.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return Ok(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.On(n.batchId)}),M.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return M.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return Ys(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=$n(s[1]);i.push(l)}else a.done()}).next(()=>{oe(i.length===0)})})}containsKey(e,n){return Lk(e,this.userId,n)}Nn(e){return Mk(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Lk(t,e,n){const r=ed(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Ys(t).J({range:s,H:!0},(a,l,u)=>{const[h,f,p]=a;h===e&&f===i&&(o=!0),u.done()}).next(()=>o)}function Mr(t){return ct(t,"mutations")}function Ys(t){return ct(t,"documentMutations")}function Mk(t){return ct(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ts(0)}static kn(){return new Ts(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _U{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.qn(e).next(n=>{const r=new Ts(n.highestTargetId);return n.highestTargetId=r.next(),this.Qn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(n=>ae.fromTimestamp(new Ke(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Qn(e,i)))}addTargetData(e,n){return this.Kn(e,n).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(n,r),this.Qn(e,r))))}updateTargetData(e,n){return this.Kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>qs(e).delete(n.targetId)).next(()=>this.qn(e)).next(r=>(oe(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return qs(e).J((o,a)=>{const l=sl(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>M.waitFor(s)).next(()=>i)}forEachTarget(e,n){return qs(e).J((r,i)=>{const s=sl(i);n(s)})}qn(e){return Wb(e).get("targetGlobalKey").next(n=>(oe(n!==null),n))}Qn(e,n){return Wb(e).put("targetGlobalKey",n)}Kn(e,n){return qs(e).put(Nk(this.serializer,n))}$n(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=xs(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return qs(e).J({range:i,index:"queryTargetsIndex"},(o,a,l)=>{const u=sl(a);Ac(n,u.target)&&(s=u,l.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=Xr(e);return n.forEach(o=>{const a=zt(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),M.waitFor(i)}removeMatchingKeys(e,n,r){const i=Xr(e);return M.forEach(n,s=>{const o=zt(s.path);return M.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=Xr(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Xr(e);let s=pe();return i.J({range:r,H:!0},(o,a,l)=>{const u=$n(o[1]),h=new Z(u);s=s.add(h)}).next(()=>s)}containsKey(e,n){const r=zt(n.path),i=IDBKeyRange.bound([r],[RA(r)],!1,!0);let s=0;return Xr(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],l,u)=>{o!==0&&(s++,u.done())}).next(()=>s>0)}ot(e,n){return qs(e).get(n).next(r=>r?sl(r):null)}}function qs(t){return ct(t,"targets")}function Wb(t){return ct(t,"targetGlobal")}function Xr(t){return ct(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hb([t,e],[n,r]){const i=de(t,n);return i===0?de(e,r):i}class wU{constructor(e){this.Un=e,this.buffer=new ke(Hb),this.Wn=0}Gn(){return++this.Wn}zn(e){const n=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Hb(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class xU{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){G("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ri(n)?G("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Pi(n)}await this.Hn(3e5)})}}class bU{constructor(e,n){this.Jn=e,this.params=n}calculateTargetCount(e,n){return this.Jn.Yn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return M.resolve(Yt.oe);const r=new wU(n);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(G("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(Gb)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(G("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Gb):this.Xn(e,n))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,n){let r,i,s,o,a,l,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(G("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,o=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,n))).next(f=>(s=f,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(u=Date.now(),Gs()<=ge.DEBUG&&G("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${f} documents in `+(u-l)+`ms
Total Duration: ${u-h}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:f})))}}function EU(t,e){return new bU(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TU{constructor(e,n){this.db=e,this.garbageCollector=EU(this,n)}Yn(e){const n=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}er(e){let n=0;return this.Zn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Zn(e,n){return this.tr(e,(r,i)=>n(i))}addReference(e,n,r){return Eu(e,r)}removeReference(e,n,r){return Eu(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Eu(e,n)}nr(e,n){return function(i,s){let o=!1;return Mk(i).Y(a=>Lk(i,a,s).next(l=>(l&&(o=!0),M.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.tr(e,(o,a)=>{if(a<=n){const l=this.nr(e,o).next(u=>{if(!u)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,ae.min()),Xr(e).delete(function(f){return[0,zt(f.path)]}(o))))});i.push(l)}}).next(()=>M.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Eu(e,n)}tr(e,n){const r=Xr(e);let i,s=Yt.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:u})=>{o===0?(s!==Yt.oe&&n(new Z($n(i)),s),s=u,i=l):s=Yt.oe}).next(()=>{s!==Yt.oe&&n(new Z($n(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Eu(t,e){return Xr(t).put(function(r,i){return{targetId:0,path:zt(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(){this.changes=new Ni(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Je.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?M.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SU{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Ui(e).put(r)}removeEntry(e,n,r){return Ui(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Xd(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.rr(e,r)))}getEntry(e,n){let r=Je.newInvalidDocument(n);return Ui(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Ba(n))},(i,s)=>{r=this.ir(n,s)}).next(()=>r)}sr(e,n){let r={size:0,document:Je.newInvalidDocument(n)};return Ui(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Ba(n))},(i,s)=>{r={document:this.ir(n,s),size:Zd(s)}}).next(()=>r)}getEntries(e,n){let r=an();return this._r(e,n,(i,s)=>{const o=this.ir(i,s);r=r.insert(i,o)}).next(()=>r)}ar(e,n){let r=an(),i=new De(Z.comparator);return this._r(e,n,(s,o)=>{const a=this.ir(s,o);r=r.insert(s,a),i=i.insert(s,Zd(o))}).next(()=>({documents:r,ur:i}))}_r(e,n,r){if(n.isEmpty())return M.resolve();let i=new ke(Xb);n.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(Ba(i.first()),Ba(i.last())),o=i.getIterator();let a=o.getNext();return Ui(e).J({index:"documentKeyIndex",range:s},(l,u,h)=>{const f=Z.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&Xb(a,f)<0;)r(a,null),a=o.getNext();a&&a.isEqual(f)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?h.$(Ba(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),Xd(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ui(e).U(IDBKeyRange.bound(a,l,!0)).next(u=>{s==null||s.incrementDocumentReadCount(u.length);let h=an();for(const f of u){const p=this.ir(Z.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);p.isFoundDocument()&&(Cc(n,p)||i.has(p.key))&&(h=h.insert(p.key,p))}return h})}getAllFromCollectionGroup(e,n,r,i){let s=an();const o=Yb(n,r),a=Yb(n,fn.max());return Ui(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,u,h)=>{const f=this.ir(Z.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(f.key,f),s.size===i&&h.done()}).next(()=>s)}newChangeBuffer(e){return new IU(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return Qb(e).get("remoteDocumentGlobalKey").next(n=>(oe(!!n),n))}rr(e,n){return Qb(e).put("remoteDocumentGlobalKey",n)}ir(e,n){if(n){const r=cU(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(ae.min())))return r}return Je.newInvalidDocument(e)}}function Uk(t){return new SU(t)}class IU extends Fk{constructor(e,n){super(),this.cr=e,this.trackRemovals=n,this.lr=new Ni(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new ke((s,o)=>de(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.lr.get(s);if(n.push(this.cr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=jb(this.cr.serializer,o);i=i.add(s.path.popLast());const u=Zd(l);r+=u-a.size,n.push(this.cr.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=jb(this.cr.serializer,o.convertToNoDocument(ae.min()));n.push(this.cr.addEntry(e,s,l))}}),i.forEach(s=>{n.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.cr.updateMetadata(e,r)),M.waitFor(n)}getFromCache(e,n){return this.cr.sr(e,n).next(r=>(this.lr.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.cr.ar(e,n).next(({documents:r,ur:i})=>(i.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function Qb(t){return ct(t,"remoteDocumentGlobal")}function Ui(t){return ct(t,"remoteDocumentsV14")}function Ba(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Yb(t,e){const n=e.documentKey.path.toArray();return[t,Xd(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Xb(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=de(n[s],r[s]),i)return i;return i=de(n.length,r.length),i||(i=de(n[n.length-2],r[r.length-2]),i||de(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AU{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Sl(r.mutation,i,Xt.empty(),Ke.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,pe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=pe()){const i=qn();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=rl();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=qn();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,pe()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=an();const o=Tl(),a=function(){return Tl()}();return n.forEach((l,u)=>{const h=r.get(u.key);i.has(u.key)&&(h===void 0||h.mutation instanceof Pr)?s=s.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),Sl(h.mutation,u,h.mutation.getFieldMask(),Ke.now())):o.set(u.key,Xt.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>{var f;return a.set(u,new AU(h,(f=o.get(u))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Tl();let i=new De((o,a)=>o-a),s=pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let h=r.get(l)||Xt.empty();h=a.applyToLocalView(u,h),r.set(l,h);const f=(i.get(a.batchId)||pe()).add(l);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,h=l.value,f=ak();h.forEach(p=>{if(!s.has(p)){const v=pk(n.get(p),r.get(p));v!==null&&f.set(p,v),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return M.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return Z.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):tk(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):M.resolve(qn());let a=-1,l=s;return o.next(u=>M.forEach(u,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(h)?M.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,pe())).next(h=>({batchId:a,changes:ok(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Z(n)).next(r=>{let i=rl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=rl();return this.indexManager.getCollectionParents(e,s).next(a=>M.forEach(a,l=>{const u=function(f,p){return new kc(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(h=>{h.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,Je.newInvalidDocument(h)))});let a=rl();return o.forEach((l,u)=>{const h=s.get(l);h!==void 0&&Sl(h.mutation,u,Xt.empty(),Ke.now()),Cc(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kU{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return M.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:$t(i.createTime)}}(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:Dk(i.bundledQuery),readTime:$t(i.readTime)}}(n)),M.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CU{constructor(){this.overlays=new De(Z.comparator),this.Ir=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){const r=qn();return M.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),M.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),M.resolve()}getOverlaysForCollection(e,n,r){const i=qn(),s=n.length+1,o=new Z(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return M.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new De((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=s.get(u.largestBatchId);h===null&&(h=qn(),s=s.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=qn(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=i)););return M.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new kv(n,r));let s=this.Ir.get(n);s===void 0&&(s=pe(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PU{constructor(){this.sessionToken=rt.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,M.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv{constructor(){this.Tr=new ke(ut.Er),this.dr=new ke(ut.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new ut(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new ut(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new Z(new Te([])),r=new ut(n,e),i=new ut(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Z(new Te([])),r=new ut(n,e),i=new ut(n,e+1);let s=pe();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new ut(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ut{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Z.comparator(e.key,n.key)||de(e.wr,n.wr)}static Ar(e,n){return de(e.wr,n.wr)||Z.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RU{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new ke(ut.Er)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Iv(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new ut(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return M.resolve(o)}lookupMutationBatch(e,n){return M.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return M.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ut(n,0),i=new ut(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),M.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ke(de);return n.forEach(i=>{const s=new ut(i,0),o=new ut(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),M.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;Z.isDocumentKey(s)||(s=s.child(""));const o=new ut(new Z(s),0);let a=new ke(de);return this.br.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.wr)),!0)},o),M.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){oe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return M.forEach(n.mutations,i=>{const s=new ut(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new ut(n,0),i=this.br.firstAfterOrEqual(r);return M.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NU{constructor(e){this.Mr=e,this.docs=function(){return new De(Z.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():Je.newInvalidDocument(n))}getEntries(e,n){let r=an();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Je.newInvalidDocument(i))}),M.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=an();const o=n.path,a=new Z(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||vv(DA(h),r)<=0||(i.has(h.key)||Cc(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return M.resolve(s)}getAllFromCollectionGroup(e,n,r,i){re()}Or(e,n){return M.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new DU(this)}getSize(e){return M.resolve(this.size)}}class DU extends Fk{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),M.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VU{constructor(e){this.persistence=e,this.Nr=new Ni(n=>xs(n),Ac),this.lastRemoteSnapshotVersion=ae.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Dv,this.targetCount=0,this.kr=Ts.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),M.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Ts(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.Kn(n),M.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),M.waitFor(s).next(()=>i)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return M.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),M.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),M.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),M.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return M.resolve(r)}containsKey(e,n){return M.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Yt(0),this.Kr=!1,this.Kr=!0,this.$r=new PU,this.referenceDelegate=e(this),this.Ur=new VU(this),this.indexManager=new yU,this.remoteDocumentCache=function(i){return new NU(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Rk(n),this.Gr=new kU(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new CU,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new RU(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){G("MemoryPersistence","Starting transaction:",e);const i=new jU(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return M.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class jU extends jA{constructor(e){super(),this.currentSequenceNumber=e}}class Jh{constructor(e){this.persistence=e,this.Jr=new Dv,this.Yr=null}static Zr(e){return new Jh(e)}get Xr(){if(this.Yr)return this.Yr;throw re()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),M.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),M.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.Xr,r=>{const i=Z.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,ae.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return M.or([()=>M.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OU{constructor(e){this.serializer=e}O(e,n,r,i){const s=new zh("createOrUpgrade",n);r<1&&i>=1&&(function(l){l.createObjectStore("owner")}(e),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",db,{unique:!0}),l.createObjectStore("documentMutations")}(e),Jb(e),function(l){l.createObjectStore("remoteDocuments")}(e));let o=M.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),Jb(e)),o=o.next(()=>function(l){const u=l.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ae.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",h)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(l,u){return u.store("mutations").U().next(h=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",db,{unique:!0});const f=u.store("mutations"),p=h.map(v=>f.put(v));return M.waitFor(p)})}(e,s))),o=o.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.ni(s))),r<6&&i>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&i>=7&&(o=o.next(()=>this.ii(s))),r<8&&i>=8&&(o=o.next(()=>this.si(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.oi(s))),r<11&&i>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(l){const u=l.createObjectStore("documentOverlays",{keyPath:p5});u.createIndex("collectionPathOverlayIndex",m5,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",g5,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(l){const u=l.createObjectStore("remoteDocumentsV14",{keyPath:r5});u.createIndex("documentKeyIndex",i5),u.createIndex("collectionGroupIndex",s5)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ai(e,s))),r<15&&i>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:u5}).createIndex("sequenceNumberIndex",d5,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:h5}).createIndex("documentKeyIndex",f5,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),r<17&&i>=17&&(o=o.next(()=>{(function(l){l.createObjectStore("globals",{keyPath:"name"})})(e)})),o}ri(e){let n=0;return e.store("remoteDocuments").J((r,i)=>{n+=Zd(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(i=>M.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>M.forEach(a,l=>{oe(l.userId===s.userId);const u=Hi(this.serializer,l);return Ok(e,s.userId,u).next(()=>{})}))}))}ii(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const l=new Te(o),u=function(f){return[0,zt(f)]}(l);s.push(n.get(u).next(h=>h?M.resolve():(f=>n.put({targetId:0,path:zt(f),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>M.waitFor(s))})}si(e,n){e.createObjectStore("collectionParents",{keyPath:c5});const r=n.store("collectionParents"),i=new Nv,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:zt(l)})}};return n.store("remoteDocuments").J({H:!0},(o,a)=>{const l=new Te(o);return s(l.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([o,a,l],u)=>{const h=$n(a);return s(h.popLast())}))}oi(e){const n=e.store("targets");return n.J((r,i)=>{const s=sl(i),o=Nk(this.serializer,s);return n.put(o)})}_i(e,n){const r=n.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=n.store("remoteDocumentsV14"),l=function(f){return f.document?new Z(Te.fromString(f.document.name).popFirst(5)):f.noDocument?Z.fromSegments(f.noDocument.path):f.unknownDocument?Z.fromSegments(f.unknownDocument.path):re()}(o).path.toArray(),u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(u))}).next(()=>M.waitFor(i))}ai(e,n){const r=n.store("mutations"),i=Uk(this.serializer),s=new zk(Jh.Zr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(l=>{var u;let h=(u=a.get(l.userId))!==null&&u!==void 0?u:pe();Hi(this.serializer,l).keys().forEach(f=>h=h.add(f)),a.set(l.userId,h)}),M.forEach(a,(l,u)=>{const h=new kt(u),f=Yh.lt(this.serializer,h),p=s.getIndexManager(h),v=Xh.lt(h,this.serializer,p,s.referenceDelegate);return new Bk(i,v,f,p).recalculateAndSaveOverlaysForDocumentKeys(new sg(n,Yt.oe),l).next()})})}}function Jb(t){t.createObjectStore("targetDocuments",{keyPath:a5}).createIndex("documentTargetsIndex",l5,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",o5,{unique:!0}),t.createObjectStore("targetGlobal")}const kp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Vv{constructor(e,n,r,i,s,o,a,l,u,h,f=17){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ui=s,this.window=o,this.document=a,this.ci=u,this.li=h,this.hi=f,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=p=>Promise.resolve(),!Vv.D())throw new Y(z.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new TU(this,i),this.Ai=n+"main",this.serializer=new Rk(l),this.Ri=new fi(this.Ai,this.hi,new OU(this.serializer)),this.$r=new dU,this.Ur=new _U(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Uk(this.serializer),this.Gr=new uU,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,h===!1&&nt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Y(z.FAILED_PRECONDITION,kp);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Yt(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Tu(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(n=>{n||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(n=>this.isPrimary&&!n?this.bi(e).next(()=>!1):!!n&&this.Di(e).next(()=>!0))).catch(e=>{if(Ri(e))return G("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return G("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return za(e).get("owner").next(n=>M.resolve(this.vi(n)))}Ci(e){return Tu(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=ct(n,"clientMetadata");return r.U().next(i=>{const s=this.xi(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return M.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Vi)for(const n of e)this.Vi.removeItem(this.Oi(n.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?M.resolve(!0):za(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)){if(this.vi(n)&&this.networkEnabled)return!0;if(!this.vi(n)){if(!n.allowTabSynchronization)throw new Y(z.FAILED_PRECONDITION,kp);return!1}}return!(!this.networkEnabled||!this.inForeground)||Tu(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&G("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new sg(e,Yt.oe);return this.bi(n).next(()=>this.Ci(n))}),this.Ri.close(),this.qi()}xi(e,n){return e.filter(r=>this.Mi(r.updateTimeMs,n)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Tu(e).U().next(n=>this.xi(n,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,n){return Xh.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new vU(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Yh.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,n,r){G("IndexedDbPersistence","Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=function(l){return l===17?_5:l===16?v5:l===15?wv:l===14?BA:l===13?UA:l===12?y5:l===11?FA:void re()}(this.hi);let o;return this.Ri.runTransaction(e,i,s,a=>(o=new sg(a,this.Qr?this.Qr.next():Yt.oe),n==="readwrite-primary"?this.wi(o).next(l=>!!l||this.Si(o)).next(l=>{if(!l)throw nt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new Y(z.FAILED_PRECONDITION,VA);return r(o)}).next(l=>this.Di(o).next(()=>l)):this.Ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return za(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)&&!this.vi(n)&&!(this.li||this.allowTabSynchronization&&n.allowTabSynchronization))throw new Y(z.FAILED_PRECONDITION,kp)})}Di(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return za(e).put("owner",n)}static D(){return fi.D()}bi(e){const n=za(e);return n.get("owner").next(r=>this.vi(r)?(G("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):M.resolve())}Mi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(nt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const n=/(?:Version|Mobile)\/1[456]/;OI()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var n;try{const r=((n=this.Vi)===null||n===void 0?void 0:n.getItem(this.Oi(e)))!==null;return G("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return nt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){nt("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function za(t){return ct(t,"owner")}function Tu(t){return ct(t,"clientMetadata")}function $k(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=pe(),i=pe();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new jv(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LU{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return OI()?8:OA(lt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new LU;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Gs()<=ge.DEBUG&&G("QueryEngine","SDK will not create cache indexes for query:",Ws(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),M.resolve()):(Gs()<=ge.DEBUG&&G("QueryEngine","Query:",Ws(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Gs()<=ge.DEBUG&&G("QueryEngine","The SDK decides to create cache indexes for query:",Ws(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,un(n))):M.resolve())}Yi(e,n){if(Tb(n))return M.resolve(null);let r=un(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=hg(n,null,"F"),r=un(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=pe(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.ts(n,a);return this.ns(n,u,o,l.readTime)?this.Yi(e,hg(n,null,"F")):this.rs(e,u,n,l)}))})))}Zi(e,n,r,i){return Tb(n)||i.isEqual(ae.min())?M.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?M.resolve(null):(Gs()<=ge.DEBUG&&G("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ws(n)),this.rs(e,o,n,NA(i,-1)).next(a=>a))})}ts(e,n){let r=new ke(ik(e));return n.forEach((i,s)=>{Cc(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Gs()<=ge.DEBUG&&G("QueryEngine","Using full collection scan to execute query:",Ws(n)),this.Ji.getDocumentsMatchingQuery(e,n,fn.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MU{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new De(de),this._s=new Ni(s=>xs(s),Ac),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Bk(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function Kk(t,e,n,r){return new MU(t,e,n,r)}async function Gk(t,e){const n=ie(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=pe();for(const u of i){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of s){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:a}))})})}function FU(t,e){const n=ie(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,u,h){const f=u.batch,p=f.keys();let v=M.resolve();return p.forEach(b=>{v=v.next(()=>h.getEntry(l,b)).next(E=>{const A=u.docVersions.get(b);oe(A!==null),E.version.compareTo(A)<0&&(f.applyToRemoteDocument(E,u),E.isValidDocument()&&(E.setReadTime(u.commitVersion),h.addEntry(E)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=pe();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function Wk(t){const e=ie(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function UU(t,e){const n=ie(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((h,f)=>{const p=i.get(f);if(!p)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,f).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,f)));let v=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?v=v.withResumeToken(rt.EMPTY_BYTE_STRING,ae.min()).withLastLimboFreeSnapshotVersion(ae.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),i=i.insert(f,v),function(E,A,_){return E.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=3e8?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(p,v,h)&&a.push(n.Ur.updateTargetData(s,v))});let l=an(),u=pe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(BU(s,o,e.documentUpdates).next(h=>{l=h.Ps,u=h.Is})),!r.isEqual(ae.min())){const h=n.Ur.getLastRemoteSnapshotVersion(s).next(f=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return M.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.os=i,s))}function BU(t,e,n){let r=pe(),i=pe();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=an();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ae.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):G("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function zU(t,e){const n=ie(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function eh(t,e){const n=ie(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,M.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new pr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Ho(t,e,n){const r=ie(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Ri(o))throw o;G("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function wg(t,e,n){const r=ie(t);let i=ae.min(),s=pe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,h){const f=ie(l),p=f._s.get(h);return p!==void 0?M.resolve(f.os.get(p)):f.Ur.getTargetData(u,h)}(r,o,un(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:ae.min(),n?s:pe())).next(a=>(Yk(r,rk(e),a),{documents:a,Ts:s})))}function Hk(t,e){const n=ie(t),r=ie(n.Ur),i=n.os.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function Qk(t,e){const n=ie(t),r=n.us.get(e)||ae.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.cs.getAllFromCollectionGroup(i,e,NA(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(Yk(n,e,i),i))}function Yk(t,e,n){let r=t.us.get(e)||ae.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}function Zb(t,e){return`firestore_clients_${t}_${e}`}function eE(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Cp(t,e){return`firestore_targets_${t}_${e}`}class th{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Rs(e,n,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new Y(i.error.code,i.error.message))),o?new th(e,n,i.state,s):(nt("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Il{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Rs(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new Y(r.error.code,r.error.message))),s?new Il(e,r.state,i):(nt("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class nh{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Rs(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=Tv();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=LA(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new nh(e,s):(nt("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class Ov{constructor(e,n){this.clientId=e,this.onlineState=n}static Rs(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new Ov(n.clientId,n.onlineState):(nt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class xg{constructor(){this.activeTargetIds=Tv()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Pp{constructor(e,n,r,i,s){this.window=e,this.ui=n,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new De(de),this.started=!1,this.bs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=Zb(this.persistenceKey,this.ps),this.vs=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new xg),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this.Os=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const r of e){if(r===this.ps)continue;const i=this.getItem(Zb(this.persistenceKey,r));if(i){const s=nh.Rs(r,i);s&&(this.Ss=this.Ss.insert(s.clientId,s))}}this.Ns();const n=this.storage.getItem(this.xs);if(n){const r=this.Ls(n);r&&this.Bs(r)}for(const r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let n=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,n,r){this.qs(e,n,r),this.Qs(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(Cp(this.persistenceKey,e));if(i){const s=Il.Rs(e,i);s&&(r=s.state)}}return n&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Cp(this.persistenceKey,e))}updateQueryState(e,n,r){this.$s(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return G("SharedClientState","READ",e,n),n}setItem(e,n){G("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){G("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const n=e;if(n.storageArea===this.storage){if(G("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ds)return void nt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.Cs.test(n.key)){if(n.newValue==null){const r=this.Gs(n.key);return this.zs(r,null)}{const r=this.js(n.key,n.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(n.key)){if(n.newValue!==null){const r=this.Hs(n.key,n.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(n.key)){if(n.newValue!==null){const r=this.Ys(n.key,n.newValue);if(r)return this.Zs(r)}}else if(n.key===this.xs){if(n.newValue!==null){const r=this.Ls(n.newValue);if(r)return this.Bs(r)}}else if(n.key===this.vs){const r=function(s){let o=Yt.oe;if(s!=null)try{const a=JSON.parse(s);oe(typeof a=="number"),o=a}catch(a){nt("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==Yt.oe&&this.sequenceNumberHandler(r)}else if(n.key===this.Os){const r=this.Xs(n.newValue);await Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(n)})}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,n,r){const i=new th(this.currentUser,e,n,r),s=eE(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Vs())}Qs(e){const n=eE(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Us(e){const n={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(n))}$s(e,n,r){const i=Cp(this.persistenceKey,e),s=new Il(e,n,r);this.setItem(i,s.Vs())}Ws(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Os,n)}Gs(e){const n=this.Cs.exec(e);return n?n[1]:null}js(e,n){const r=this.Gs(e);return nh.Rs(r,n)}Hs(e,n){const r=this.Fs.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return th.Rs(new kt(s),i,n)}Ys(e,n){const r=this.Ms.exec(e),i=Number(r[1]);return Il.Rs(i,n)}Ls(e){return Ov.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);G("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,n){const r=n?this.Ss.insert(e,n):this.Ss.remove(e),i=this.ks(this.Ss),s=this.ks(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.io(o,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let n=Tv();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class Xk{constructor(){this.so=new xg,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new xg,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $U{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tE{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){G("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){G("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Su=null;function Rp(){return Su===null?Su=function(){return 268435456+Math.round(2147483648*Math.random())}():Su++,"0x"+Su.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KU{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const It="WebChannelConnection";class GU extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=Rp(),l=this.xo(n,r.toUriEncodedString());G("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,o),this.No(n,l,u,i).then(h=>(G("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Fo("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",i),h})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+oa}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=qU[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=Rp();return new Promise((o,a)=>{const l=new SA;l.setWithCredentials(!0),l.listenOnce(IA.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Ju.NO_ERROR:const h=l.getResponseJson();G(It,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Ju.TIMEOUT:G(It,`RPC '${e}' ${s} timed out`),a(new Y(z.DEADLINE_EXCEEDED,"Request time out"));break;case Ju.HTTP_ERROR:const f=l.getStatus();if(G(It,`RPC '${e}' ${s} failed with status:`,f,"response text:",l.getResponseText()),f>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const v=p==null?void 0:p.error;if(v&&v.status&&v.message){const b=function(A){const _=A.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(_)>=0?_:z.UNKNOWN}(v.status);a(new Y(b,v.message))}else a(new Y(z.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Y(z.UNAVAILABLE,"Connection failed."));break;default:re()}}finally{G(It,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);G(It,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",u,r,15)})}Bo(e,n,r){const i=Rp(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=CA(),a=kA(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=s.join("");G(It,`Creating RPC '${e}' stream ${i}: ${h}`,l);const f=o.createWebChannel(h,l);let p=!1,v=!1;const b=new KU({Io:A=>{v?G(It,`Not sending because RPC '${e}' stream ${i} is closed:`,A):(p||(G(It,`Opening RPC '${e}' stream ${i} transport.`),f.open(),p=!0),G(It,`RPC '${e}' stream ${i} sending:`,A),f.send(A))},To:()=>f.close()}),E=(A,_,y)=>{A.listen(_,w=>{try{y(w)}catch(P){setTimeout(()=>{throw P},0)}})};return E(f,nl.EventType.OPEN,()=>{v||(G(It,`RPC '${e}' stream ${i} transport opened.`),b.yo())}),E(f,nl.EventType.CLOSE,()=>{v||(v=!0,G(It,`RPC '${e}' stream ${i} transport closed`),b.So())}),E(f,nl.EventType.ERROR,A=>{v||(v=!0,Fo(It,`RPC '${e}' stream ${i} transport errored:`,A),b.So(new Y(z.UNAVAILABLE,"The operation could not be completed")))}),E(f,nl.EventType.MESSAGE,A=>{var _;if(!v){const y=A.data[0];oe(!!y);const w=y,P=w.error||((_=w[0])===null||_===void 0?void 0:_.error);if(P){G(It,`RPC '${e}' stream ${i} received error:`,P);const V=P.status;let O=function(k){const C=it[k];if(C!==void 0)return yk(C)}(V),I=P.message;O===void 0&&(O=z.INTERNAL,I="Unknown error status: "+V+" with message "+P.message),v=!0,b.So(new Y(O,I)),f.close()}else G(It,`RPC '${e}' stream ${i} received:`,y),b.bo(y)}}),E(a,AA.STAT_EVENT,A=>{A.stat===rg.PROXY?G(It,`RPC '${e}' stream ${i} detected buffering proxy`):A.stat===rg.NOPROXY&&G(It,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jk(){return typeof window<"u"?window:null}function sd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zh(t){return new Z5(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&G("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e,n,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Zk(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(nt(n.toString()),nt("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new Y(z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return G("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(G("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class WU extends eC{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=nU(this.serializer,e),r=function(s){if(!("targetChange"in s))return ae.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ae.min():o.readTime?$t(o.readTime):ae.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=mg(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=Wd(l)?{documents:Sk(s,l)}:{query:Ik(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=wk(s,o.resumeToken);const u=fg(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(ae.min())>0){a.readTime=Wo(s,o.snapshotVersion.toTimestamp());const u=fg(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=iU(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=mg(this.serializer),n.removeTarget=e,this.a_(n)}}class HU extends eC{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return oe(!!e.streamToken),this.lastStreamToken=e.streamToken,oe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){oe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=rU(e.writeResults,e.commitTime),r=$t(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=mg(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Yd(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QU extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Y(z.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,pg(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Y(z.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,pg(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Y(z.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class YU{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(nt(n),this.D_=!1):G("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XU{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{Vs(this)&&(G("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=ie(l);u.L_.add(4),await Nc(u),u.q_.set("Unknown"),u.L_.delete(4),await ef(u)}(this))})}),this.q_=new YU(r,i)}}async function ef(t){if(Vs(t))for(const e of t.B_)await e(!0)}async function Nc(t){for(const e of t.B_)await e(!1)}function tf(t,e){const n=ie(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Fv(n)?Mv(n):ca(n).r_()&&Lv(n,e))}function Qo(t,e){const n=ie(t),r=ca(n);n.N_.delete(e),r.r_()&&tC(n,e),n.N_.size===0&&(r.r_()?r.o_():Vs(n)&&n.q_.set("Unknown"))}function Lv(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ae.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ca(t).A_(e)}function tC(t,e){t.Q_.xe(e),ca(t).R_(e)}function Mv(t){t.Q_=new Q5({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),ca(t).start(),t.q_.v_()}function Fv(t){return Vs(t)&&!ca(t).n_()&&t.N_.size>0}function Vs(t){return ie(t).L_.size===0}function nC(t){t.Q_=void 0}async function JU(t){t.q_.set("Online")}async function ZU(t){t.N_.forEach((e,n)=>{Lv(t,e)})}async function e3(t,e){nC(t),Fv(t)?(t.q_.M_(e),Mv(t)):t.q_.set("Unknown")}async function t3(t,e,n){if(t.q_.set("Online"),e instanceof _k&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){G("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await rh(t,r)}else if(e instanceof id?t.Q_.Ke(e):e instanceof vk?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ae.min()))try{const r=await Wk(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.N_.get(u);h&&s.N_.set(u,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const h=s.N_.get(l);if(!h)return;s.N_.set(l,h.withResumeToken(rt.EMPTY_BYTE_STRING,h.snapshotVersion)),tC(s,l);const f=new pr(h.target,l,u,h.sequenceNumber);Lv(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){G("RemoteStore","Failed to raise snapshot:",r),await rh(t,r)}}async function rh(t,e,n){if(!Ri(e))throw e;t.L_.add(1),await Nc(t),t.q_.set("Offline"),n||(n=()=>Wk(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{G("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await ef(t)})}function rC(t,e){return e().catch(n=>rh(t,n,e))}async function la(t){const e=ie(t),n=bi(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;n3(e);)try{const i=await zU(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,r3(e,i)}catch(i){await rh(e,i)}iC(e)&&sC(e)}function n3(t){return Vs(t)&&t.O_.length<10}function r3(t,e){t.O_.push(e);const n=bi(t);n.r_()&&n.V_&&n.m_(e.mutations)}function iC(t){return Vs(t)&&!bi(t).n_()&&t.O_.length>0}function sC(t){bi(t).start()}async function i3(t){bi(t).p_()}async function s3(t){const e=bi(t);for(const n of t.O_)e.m_(n.mutations)}async function o3(t,e,n){const r=t.O_.shift(),i=Av.from(r,e,n);await rC(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await la(t)}async function a3(t,e){e&&bi(t).V_&&await async function(r,i){if(function(o){return G5(o)&&o!==z.ABORTED}(i.code)){const s=r.O_.shift();bi(r).s_(),await rC(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await la(r)}}(t,e),iC(t)&&sC(t)}async function nE(t,e){const n=ie(t);n.asyncQueue.verifyOperationInProgress(),G("RemoteStore","RemoteStore received new credentials");const r=Vs(n);n.L_.add(3),await Nc(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await ef(n)}async function bg(t,e){const n=ie(t);e?(n.L_.delete(2),await ef(n)):e||(n.L_.add(2),await Nc(n),n.q_.set("Unknown"))}function ca(t){return t.K_||(t.K_=function(n,r,i){const s=ie(n);return s.w_(),new WU(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:JU.bind(null,t),Ro:ZU.bind(null,t),mo:e3.bind(null,t),d_:t3.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Fv(t)?Mv(t):t.q_.set("Unknown")):(await t.K_.stop(),nC(t))})),t.K_}function bi(t){return t.U_||(t.U_=function(n,r,i){const s=ie(n);return s.w_(),new HU(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:i3.bind(null,t),mo:a3.bind(null,t),f_:s3.bind(null,t),g_:o3.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await la(t)):(await t.U_.stop(),t.O_.length>0&&(G("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Jn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Uv(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Bv(t,e){if(nt("AsyncQueue",`${e}: ${t}`),Ri(t))return new Y(z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Z.comparator(n.key,r.key):(n,r)=>Z.comparator(n.key,r.key),this.keyedMap=rl(),this.sortedSet=new De(this.comparator)}static emptySet(e){return new Io(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Io)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Io;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{constructor(){this.W_=new De(Z.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):re():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Yo{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Yo(e,n,Io.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l3{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class c3{constructor(){this.queries=iE(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=ie(n),s=i.queries;i.queries=iE(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new Y(z.ABORTED,"Firestore shutting down"))}}function iE(){return new Ni(t=>nk(t),Gh)}async function oC(t,e){const n=ie(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new l3,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Bv(o,`Initialization of query '${Ws(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&zv(n)}async function aC(t,e){const n=ie(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function u3(t,e){const n=ie(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&zv(n)}function d3(t,e,n){const r=ie(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function zv(t){t.Y_.forEach(e=>{e.next()})}var Eg,sE;(sE=Eg||(Eg={})).ea="default",sE.Cache="cache";class lC{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Yo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Yo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Eg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(e){this.key=e}}class uC{constructor(e){this.key=e}}class h3{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=pe(),this.mutatedKeys=pe(),this.Aa=ik(e),this.Ra=new Io(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new rE,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,f)=>{const p=i.get(h),v=Cc(this.query,f)?f:null,b=!!p&&this.mutatedKeys.has(p.key),E=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let A=!1;p&&v?p.data.isEqual(v.data)?b!==E&&(r.track({type:3,doc:v}),A=!0):this.ga(p,v)||(r.track({type:2,doc:v}),A=!0,(l&&this.Aa(v,l)>0||u&&this.Aa(v,u)<0)&&(a=!0)):!p&&v?(r.track({type:0,doc:v}),A=!0):p&&!v&&(r.track({type:1,doc:p}),A=!0,(l||u)&&(a=!0)),A&&(v?(o=o.add(v),s=E?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,f)=>function(v,b){const E=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return re()}};return E(v)-E(b)}(h.type,f.type)||this.Aa(h.doc,f.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,u=l!==this.Ea;return this.Ea=l,o.length!==0||u?{snapshot:new Yo(this.query,e.Ra,s,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new rE,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=pe(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new uC(r))}),this.da.forEach(r=>{e.has(r)||n.push(new cC(r))}),n}ba(e){this.Ta=e.Ts,this.da=pe();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Yo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class f3{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class p3{constructor(e){this.key=e,this.va=!1}}class m3{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Ni(a=>nk(a),Gh),this.Ma=new Map,this.xa=new Set,this.Oa=new De(Z.comparator),this.Na=new Map,this.La=new Dv,this.Ba={},this.ka=new Map,this.qa=Ts.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function g3(t,e,n=!0){const r=nf(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await dC(r,e,n,!0),i}async function y3(t,e){const n=nf(t);await dC(n,e,!0,!1)}async function dC(t,e,n,r){const i=await eh(t.localStore,un(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await $v(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&tf(t.remoteStore,i),a}async function $v(t,e,n,r,i){t.Ka=(f,p,v)=>async function(E,A,_,y){let w=A.view.ma(_);w.ns&&(w=await wg(E.localStore,A.query,!1).then(({documents:I})=>A.view.ma(I,w)));const P=y&&y.targetChanges.get(A.targetId),V=y&&y.targetMismatches.get(A.targetId)!=null,O=A.view.applyChanges(w,E.isPrimaryClient,P,V);return Tg(E,A.targetId,O.wa),O.snapshot}(t,f,p,v);const s=await wg(t.localStore,e,!0),o=new h3(e,s.Ts),a=o.ma(s.documents),l=Rc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);Tg(t,n,u.wa);const h=new f3(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),u.snapshot}async function v3(t,e,n){const r=ie(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Gh(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Ho(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Qo(r.remoteStore,i.targetId),Xo(r,i.targetId)}).catch(Pi)):(Xo(r,i.targetId),await Ho(r.localStore,i.targetId,!0))}async function _3(t,e){const n=ie(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Qo(n.remoteStore,r.targetId))}async function w3(t,e,n){const r=Wv(t);try{const i=await function(o,a){const l=ie(o),u=Ke.now(),h=a.reduce((v,b)=>v.add(b.key),pe());let f,p;return l.persistence.runTransaction("Locally write mutations","readwrite",v=>{let b=an(),E=pe();return l.cs.getEntries(v,h).next(A=>{b=A,b.forEach((_,y)=>{y.isValidDocument()||(E=E.add(_))})}).next(()=>l.localDocuments.getOverlayedDocuments(v,b)).next(A=>{f=A;const _=[];for(const y of a){const w=q5(y,f.get(y.key).overlayedDocument);w!=null&&_.push(new Pr(y.key,w,GA(w.value.mapValue),Nt.exists(!0)))}return l.mutationQueue.addMutationBatch(v,u,_,a)}).next(A=>{p=A;const _=A.applyToLocalDocumentSet(f,E);return l.documentOverlayCache.saveOverlays(v,A.batchId,_)})}).then(()=>({batchId:p.batchId,changes:ok(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.Ba[o.currentUser.toKey()];u||(u=new De(de)),u=u.insert(a,l),o.Ba[o.currentUser.toKey()]=u}(r,i.batchId,n),await Di(r,i.changes),await la(r.remoteStore)}catch(i){const s=Bv(i,"Failed to persist write");n.reject(s)}}async function hC(t,e){const n=ie(t);try{const r=await UU(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(oe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?oe(o.va):i.removedDocuments.size>0&&(oe(o.va),o.va=!1))}),await Di(n,r,e)}catch(r){await Pi(r)}}function oE(t,e,n){const r=ie(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=ie(o);l.onlineState=a;let u=!1;l.queries.forEach((h,f)=>{for(const p of f.j_)p.Z_(a)&&(u=!0)}),u&&zv(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function x3(t,e,n){const r=ie(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new De(Z.comparator);o=o.insert(s,Je.newNoDocument(s,ae.min()));const a=pe().add(s),l=new Pc(ae.min(),new Map,new De(de),o,a);await hC(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),Gv(r)}else await Ho(r.localStore,e,!1).then(()=>Xo(r,e,n)).catch(Pi)}async function b3(t,e){const n=ie(t),r=e.batch.batchId;try{const i=await FU(n.localStore,e);Kv(n,r,null),qv(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Di(n,i)}catch(i){await Pi(i)}}async function E3(t,e,n){const r=ie(t);try{const i=await function(o,a){const l=ie(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next(f=>(oe(f!==null),h=f.keys(),l.mutationQueue.removeMutationBatch(u,f))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>l.localDocuments.getDocuments(u,h))})}(r.localStore,e);Kv(r,e,n),qv(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Di(r,i)}catch(i){await Pi(i)}}function qv(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function Kv(t,e,n){const r=ie(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Xo(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||fC(t,r)})}function fC(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Qo(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Gv(t))}function Tg(t,e,n){for(const r of n)r instanceof cC?(t.La.addReference(r.key,e),T3(t,r)):r instanceof uC?(G("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||fC(t,r.key)):re()}function T3(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(G("SyncEngine","New document in limbo: "+n),t.xa.add(r),Gv(t))}function Gv(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Z(Te.fromString(e)),r=t.qa.next();t.Na.set(r,new p3(n)),t.Oa=t.Oa.insert(n,r),tf(t.remoteStore,new pr(un(Kh(n.path)),r,"TargetPurposeLimboResolution",Yt.oe))}}async function Di(t,e,n){const r=ie(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(u=>{var h;if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(u){i.push(u);const f=jv.Wi(l.targetId,u);s.push(f)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,u){const h=ie(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>M.forEach(u,p=>M.forEach(p.$i,v=>h.persistence.referenceDelegate.addReference(f,p.targetId,v)).next(()=>M.forEach(p.Ui,v=>h.persistence.referenceDelegate.removeReference(f,p.targetId,v)))))}catch(f){if(!Ri(f))throw f;G("LocalStore","Failed to update sequence numbers: "+f)}for(const f of u){const p=f.targetId;if(!f.fromCache){const v=h.os.get(p),b=v.snapshotVersion,E=v.withLastLimboFreeSnapshotVersion(b);h.os=h.os.insert(p,E)}}}(r.localStore,s))}async function S3(t,e){const n=ie(t);if(!n.currentUser.isEqual(e)){G("SyncEngine","User change. New user:",e.toKey());const r=await Gk(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new Y(z.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Di(n,r.hs)}}function I3(t,e){const n=ie(t),r=n.Na.get(e);if(r&&r.va)return pe().add(r.key);{let i=pe();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}async function A3(t,e){const n=ie(t),r=await wg(n.localStore,e.query,!0),i=e.view.ba(r);return n.isPrimaryClient&&Tg(n,e.targetId,i.wa),i}async function k3(t,e){const n=ie(t);return Qk(n.localStore,e).then(r=>Di(n,r))}async function C3(t,e,n,r){const i=ie(t),s=await function(a,l){const u=ie(a),h=ie(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",f=>h.Mn(f,l).next(p=>p?u.localDocuments.getDocuments(f,p):M.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?await la(i.remoteStore):n==="acknowledged"||n==="rejected"?(Kv(i,e,r||null),qv(i,e),function(a,l){ie(ie(a).mutationQueue).On(l)}(i.localStore,e)):re(),await Di(i,s)):G("SyncEngine","Cannot apply mutation batch with id: "+e)}async function P3(t,e){const n=ie(t);if(nf(n),Wv(n),e===!0&&n.Qa!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await aE(n,r.toArray());n.Qa=!0,await bg(n.remoteStore,!0);for(const s of i)tf(n.remoteStore,s)}else if(e===!1&&n.Qa!==!1){const r=[];let i=Promise.resolve();n.Ma.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Xo(n,o),Ho(n.localStore,o,!0))),Qo(n.remoteStore,o)}),await i,await aE(n,r),function(o){const a=ie(o);a.Na.forEach((l,u)=>{Qo(a.remoteStore,u)}),a.La.pr(),a.Na=new Map,a.Oa=new De(Z.comparator)}(n),n.Qa=!1,await bg(n.remoteStore,!1)}}async function aE(t,e,n){const r=ie(t),i=[],s=[];for(const o of e){let a;const l=r.Ma.get(o);if(l&&l.length!==0){a=await eh(r.localStore,un(l[0]));for(const u of l){const h=r.Fa.get(u),f=await A3(r,h);f.snapshot&&s.push(f.snapshot)}}else{const u=await Hk(r.localStore,o);a=await eh(r.localStore,u),await $v(r,pC(u),o,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(s),i}function pC(t){return ek(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function R3(t){return function(n){return ie(ie(n).persistence).Qi()}(ie(t).localStore)}async function N3(t,e,n,r){const i=ie(t);if(i.Qa)return void G("SyncEngine","Ignoring unexpected query state notification.");const s=i.Ma.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await Qk(i.localStore,rk(s[0])),a=Pc.createSynthesizedRemoteEventForCurrentChange(e,n==="current",rt.EMPTY_BYTE_STRING);await Di(i,o,a);break}case"rejected":await Ho(i.localStore,e,!0),Xo(i,e,r);break;default:re()}}async function D3(t,e,n){const r=nf(t);if(r.Qa){for(const i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){G("SyncEngine","Adding an already active target "+i);continue}const s=await Hk(r.localStore,i),o=await eh(r.localStore,s);await $v(r,pC(s),o.targetId,!1,o.resumeToken),tf(r.remoteStore,o)}for(const i of n)r.Ma.has(i)&&await Ho(r.localStore,i,!1).then(()=>{Qo(r.remoteStore,i),Xo(r,i)}).catch(Pi)}}function nf(t){const e=ie(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=hC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=I3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=x3.bind(null,e),e.Ca.d_=u3.bind(null,e.eventManager),e.Ca.$a=d3.bind(null,e.eventManager),e}function Wv(t){const e=ie(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=b3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=E3.bind(null,e),e}class uc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Zh(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return Kk(this.persistence,new qk,e.initialUser,this.serializer)}Ga(e){return new zk(Jh.Zr,this.serializer)}Wa(e){return new Xk}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}uc.provider={build:()=>new uc};class V3 extends uc{constructor(e,n,r){super(),this.Ja=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await Wv(this.Ja.syncEngine),await la(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return Kk(this.persistence,new qk,e.initialUser,this.serializer)}ja(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new xU(r,e.asyncQueue,n)}Ha(e,n){const r=new e5(n,this.persistence);return new ZF(e.asyncQueue,r)}Ga(e){const n=$k(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Wt.withCacheSize(this.cacheSizeBytes):Wt.DEFAULT;return new Vv(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,Jk(),sd(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new Xk}}class j3 extends V3{constructor(e,n){super(e,n,!1),this.Ja=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Ja.syncEngine;this.sharedClientState instanceof Pp&&(this.sharedClientState.syncEngine={no:C3.bind(null,n),ro:N3.bind(null,n),io:D3.bind(null,n),Qi:R3.bind(null,n),eo:k3.bind(null,n)},await this.sharedClientState.start()),await this.persistence.yi(async r=>{await P3(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Wa(e){const n=Jk();if(!Pp.D(n))throw new Y(z.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=$k(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Pp(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class ih{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>oE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=S3.bind(null,this.syncEngine),await bg(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new c3}()}createDatastore(e){const n=Zh(e.databaseInfo.databaseId),r=function(s){return new GU(s)}(e.databaseInfo);return function(s,o,a,l){return new QU(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new XU(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>oE(this.syncEngine,n,0),function(){return tE.D()?new tE:new $U}())}createSyncEngine(e,n){return function(i,s,o,a,l,u,h){const f=new m3(i,s,o,a,l,u);return h&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=ie(i);G("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Nc(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}ih.provider={build:()=>new ih};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):nt("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=kt.UNAUTHENTICATED,this.clientId=PA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{G("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(G("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Jn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Bv(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Np(t,e){t.asyncQueue.verifyOperationInProgress(),G("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Gk(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function lE(t,e){t.asyncQueue.verifyOperationInProgress();const n=await L3(t);G("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>nE(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>nE(e.remoteStore,i)),t._onlineComponents=e}async function L3(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){G("FirestoreClient","Using user provided OfflineComponentProvider");try{await Np(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===z.FAILED_PRECONDITION||i.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Fo("Error using user provided cache. Falling back to memory cache: "+n),await Np(t,new uc)}}else G("FirestoreClient","Using default OfflineComponentProvider"),await Np(t,new uc);return t._offlineComponents}async function gC(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(G("FirestoreClient","Using user provided OnlineComponentProvider"),await lE(t,t._uninitializedComponentsProvider._online)):(G("FirestoreClient","Using default OnlineComponentProvider"),await lE(t,new ih))),t._onlineComponents}function M3(t){return gC(t).then(e=>e.syncEngine)}async function yC(t){const e=await gC(t),n=e.eventManager;return n.onListen=g3.bind(null,e.syncEngine),n.onUnlisten=v3.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=y3.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=_3.bind(null,e.syncEngine),n}function F3(t,e,n={}){const r=new Jn;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const h=new mC({next:p=>{h.Za(),o.enqueueAndForget(()=>aC(s,f));const v=p.docs.has(a);!v&&p.fromCache?u.reject(new Y(z.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&p.fromCache&&l&&l.source==="server"?u.reject(new Y(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new lC(Kh(a.path),h,{includeMetadataChanges:!0,_a:!0});return oC(s,f)}(await yC(t),t.asyncQueue,e,n,r)),r.promise}function U3(t,e,n={}){const r=new Jn;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const h=new mC({next:p=>{h.Za(),o.enqueueAndForget(()=>aC(s,f)),p.fromCache&&l.source==="server"?u.reject(new Y(z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new lC(a,h,{includeMetadataChanges:!0,_a:!0});return oC(s,f)}(await yC(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vC(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _C(t,e,n){if(!n)throw new Y(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function B3(t,e,n,r){if(e===!0&&r===!0)throw new Y(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function uE(t){if(!Z.isDocumentKey(t))throw new Y(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function dE(t){if(Z.isDocumentKey(t))throw new Y(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function rf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":re()}function Ei(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Y(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=rf(t);throw new Y(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Y(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Y(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}B3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=vC((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Y(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Y(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Y(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hv{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hE({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Y(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Y(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hE(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new $F;switch(r.type){case"firstParty":return new GF(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Y(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=cE.get(n);r&&(G("ComponentProvider","Removing Datastore"),cE.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ua(this.firestore,e,this._query)}}class tn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new pi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new tn(this.firestore,e,this._key)}}class pi extends ua{constructor(e,n,r){super(e,n,Kh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new tn(this.firestore,null,new Z(e))}withConverter(e){return new pi(this.firestore,e,this._path)}}function zr(t,e,...n){if(t=Ze(t),_C("collection","path",e),t instanceof Hv){const r=Te.fromString(e,...n);return dE(r),new pi(t,null,r)}{if(!(t instanceof tn||t instanceof pi))throw new Y(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Te.fromString(e,...n));return dE(r),new pi(t.firestore,null,r)}}function vn(t,e,...n){if(t=Ze(t),arguments.length===1&&(e=PA.newId()),_C("doc","path",e),t instanceof Hv){const r=Te.fromString(e,...n);return uE(r),new tn(t,null,new Z(r))}{if(!(t instanceof tn||t instanceof pi))throw new Y(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Te.fromString(e,...n));return uE(r),new tn(t.firestore,t instanceof pi?t.converter:null,new Z(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Zk(this,"async_queue_retry"),this.Vu=()=>{const r=sd();r&&G("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=sd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=sd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Jn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ri(e))throw e;G("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw nt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=Uv.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&re()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z3=-1;class da extends Hv{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new fE,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new fE(e),this._firestoreClient=void 0,await e}}}function $3(t,e,n){n||(n="(default)");const r=Lh(t,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(Xl(s,e))return i;throw new Y(z.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new Y(z.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Y(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:e,instanceIdentifier:n})}function sf(t){if(t._terminated)throw new Y(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||wC(t),t._firestoreClient}function wC(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,u,h){return new x5(a,l,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,vC(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new O3(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}async function q3(t){Fo("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();K3(t,ih.provider,{build:n=>new j3(n,e.cacheSizeBytes)})}function K3(t,e,n){if((t=Ei(t,da))._firestoreClient||t._terminated)throw new Y(z.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new Y(z.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},wC(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Jo(rt.fromBase64String(e))}catch(n){throw new Y(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Jo(rt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Y(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $e(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Y(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Y(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return de(this._lat,e._lat)||de(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G3=/^__.*__$/;class W3{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Pr(e,this.data,this.fieldMask,n,this.fieldTransforms):new aa(e,this.data,n,this.fieldTransforms)}}class xC{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Pr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function bC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw re()}}class Xv{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Xv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return sh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(bC(this.Cu)&&G3.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class H3{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Zh(e)}Qu(e,n,r,i=!1){return new Xv({Cu:e,methodName:n,qu:r,path:$e.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Jv(t){const e=t._freezeSettings(),n=Zh(t._databaseId);return new H3(t._databaseId,!!e.ignoreUndefinedProperties,n)}function EC(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);e0("Data must be an object, but it was:",o,r);const a=TC(r,o);let l,u;if(s.merge)l=new Xt(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const f of s.mergeFields){const p=Sg(e,f,n);if(!o.contains(p))throw new Y(z.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);IC(h,p)||h.push(p)}l=new Xt(h),u=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,u=o.fieldTransforms;return new W3(new Pt(a),l,u)}class lf extends af{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof lf}}class Zv extends af{_toFieldTransform(e){return new fk(e.path,new qo)}isEqual(e){return e instanceof Zv}}function Q3(t,e,n,r){const i=t.Qu(1,e,n);e0("Data must be an object, but it was:",i,r);const s=[],o=Pt.empty();Ds(r,(l,u)=>{const h=t0(e,l,n);u=Ze(u);const f=i.Nu(h);if(u instanceof lf)s.push(h);else{const p=Dc(u,f);p!=null&&(s.push(h),o.set(h,p))}});const a=new Xt(s);return new xC(o,a,i.fieldTransforms)}function Y3(t,e,n,r,i,s){const o=t.Qu(1,e,n),a=[Sg(e,r,n)],l=[i];if(s.length%2!=0)throw new Y(z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(Sg(e,s[p])),l.push(s[p+1]);const u=[],h=Pt.empty();for(let p=a.length-1;p>=0;--p)if(!IC(u,a[p])){const v=a[p];let b=l[p];b=Ze(b);const E=o.Nu(v);if(b instanceof lf)u.push(v);else{const A=Dc(b,E);A!=null&&(u.push(v),h.set(v,A))}}const f=new Xt(u);return new xC(h,f,o.fieldTransforms)}function X3(t,e,n,r=!1){return Dc(n,t.Qu(r?4:3,e))}function Dc(t,e){if(SC(t=Ze(t)))return e0("Unsupported field value:",e,t),TC(t,e);if(t instanceof af)return function(r,i){if(!bC(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Dc(a,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Ze(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return M5(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ke.fromDate(r);return{timestampValue:Wo(i.serializer,s)}}if(r instanceof Ke){const s=new Ke(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Wo(i.serializer,s)}}if(r instanceof Qv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Jo)return{bytesValue:wk(i.serializer,r._byteString)};if(r instanceof tn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Pv(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Yv)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return Sv(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${rf(r)}`)}(t,e)}function TC(t,e){const n={};return zA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ds(t,(r,i)=>{const s=Dc(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function SC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ke||t instanceof Qv||t instanceof Jo||t instanceof tn||t instanceof af||t instanceof Yv)}function e0(t,e,n){if(!SC(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=rf(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Sg(t,e,n){if((e=Ze(e))instanceof of)return e._internalPath;if(typeof e=="string")return t0(t,e);throw sh("Field path arguments must be of type string or ",t,!1,void 0,n)}const J3=new RegExp("[~\\*/\\[\\]]");function t0(t,e,n){if(e.search(J3)>=0)throw sh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new of(...e.split("."))._internalPath}catch{throw sh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function sh(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Y(z.INVALID_ARGUMENT,a+t+l)}function IC(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new tn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Z3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(n0("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Z3 extends AC{data(){return super.data()}}function n0(t,e){return typeof e=="string"?t0(t,e):e instanceof of?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eB(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Y(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class r0{}class tB extends r0{}function pE(t,e,...n){let r=[];e instanceof r0&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof i0).length,a=s.filter(l=>l instanceof cf).length;if(o>1||o>0&&a>0)throw new Y(z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class cf extends tB{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new cf(e,n,r)}_apply(e){const n=this._parse(e);return kC(e._query,n),new ua(e.firestore,e.converter,dg(e._query,n))}_parse(e){const n=Jv(e.firestore);return function(s,o,a,l,u,h,f){let p;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new Y(z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){yE(f,h);const v=[];for(const b of f)v.push(gE(l,s,b));p={arrayValue:{values:v}}}else p=gE(l,s,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||yE(f,h),p=X3(a,o,f,h==="in"||h==="not-in");return ye.create(u,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function mE(t,e,n){const r=e,i=n0("where",t);return cf._create(i,r,n)}class i0 extends r0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new i0(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Se.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)kC(o,l),o=dg(o,l)}(e._query,n),new ua(e.firestore,e.converter,dg(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function gE(t,e,n){if(typeof(n=Ze(n))=="string"){if(n==="")throw new Y(z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!tk(e)&&n.indexOf("/")!==-1)throw new Y(z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Te.fromString(n));if(!Z.isDocumentKey(r))throw new Y(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ac(t,new Z(r))}if(n instanceof tn)return ac(t,n._key);throw new Y(z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${rf(n)}.`)}function yE(t,e){if(!Array.isArray(t)||t.length===0)throw new Y(z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function kC(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Y(z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Y(z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class nB{convertValue(e,n="none"){switch(ws(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(wi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw re()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ds(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Fe(o.doubleValue));return new Yv(s)}convertGeoPoint(e){return new Qv(Fe(e.latitude),Fe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=bv(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(sc(e));default:return null}}convertTimestamp(e){const n=Ar(e);return new Ke(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Te.fromString(e);oe(Pk(r));const i=new _s(r.get(1),r.get(3)),s=new Z(r.popFirst(5));return i.isEqual(n)||nt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CC(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class PC extends AC{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new od(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(n0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class od extends PC{data(e={}){return super.data(e)}}class rB{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ol(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new od(this._firestore,this._userDataWriter,r.key,r,new ol(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Y(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new od(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ol(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new od(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ol(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:iB(a.type),doc:l,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function iB(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return re()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rs(t){t=Ei(t,tn);const e=Ei(t.firestore,da);return F3(sf(e),t._key).then(n=>sB(e,t,n))}class RC extends nB{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new tn(this.firestore,null,n)}}function Xs(t){t=Ei(t,ua);const e=Ei(t.firestore,da),n=sf(e),r=new RC(e);return eB(t._query),U3(n,t._query).then(i=>new rB(e,r,t,i))}function is(t,e,n){t=Ei(t,tn);const r=Ei(t.firestore,da),i=CC(t.converter,e,n);return NC(r,[EC(Jv(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Nt.none())])}function NC(t,e){return function(r,i){const s=new Jn;return r.asyncQueue.enqueueAndForget(async()=>w3(await M3(r),i,s)),s.promise}(sf(t),e)}function sB(t,e,n){const r=n.docs.get(e._key),i=new RC(t);return new PC(t,i,e._key,r,new ol(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oB{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Jv(e)}set(e,n,r){this._verifyNotCommitted();const i=Dp(e,this._firestore),s=CC(i.converter,n,r),o=EC(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Nt.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=Dp(e,this._firestore);let o;return o=typeof(n=Ze(n))=="string"||n instanceof of?Y3(this._dataReader,"WriteBatch.update",s._key,n,r,i):Q3(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Nt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Dp(e,this._firestore);return this._mutations=this._mutations.concat(new Qh(n._key,Nt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Y(z.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Dp(t,e){if((t=Ze(t)).firestore!==e)throw new Y(z.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function $a(){return new Zv("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ad(t){return sf(t=Ei(t,da)),new oB(t,e=>NC(t,e))}(function(e,n=!0){(function(i){oa=i})(Rs),gs(new _i("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new da(new qF(r.getProvider("auth-internal")),new HF(r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Y(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _s(u.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Qn(lb,"4.7.3",e),Qn(lb,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC="firebasestorage.googleapis.com",VC="storageBucket",aB=2*60*1e3,lB=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt extends er{constructor(e,n,r=0){super(Vp(e),`Firebase Storage: ${n} (${Vp(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,pt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Vp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ft;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ft||(ft={}));function Vp(t){return"storage/"+t}function jC(){const t="An unknown error occurred, please check the error payload for server response.";return new pt(ft.UNKNOWN,t)}function cB(t){return new pt(ft.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function uB(t){return new pt(ft.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function dB(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new pt(ft.UNAUTHENTICATED,t)}function hB(){return new pt(ft.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function fB(t){return new pt(ft.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function pB(){return new pt(ft.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function mB(){return new pt(ft.CANCELED,"User canceled the upload/download.")}function gB(t){return new pt(ft.INVALID_URL,"Invalid URL '"+t+"'.")}function yB(t){return new pt(ft.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function vB(){return new pt(ft.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+VC+"' property when initializing the app?")}function _B(){return new pt(ft.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Ig(t){return new pt(ft.INVALID_ARGUMENT,t)}function OC(){return new pt(ft.APP_DELETED,"The Firebase app was deleted.")}function wB(t){return new pt(ft.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function qa(t){throw new pt(ft.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=ln.makeFromUrl(e,n)}catch{return new ln(e,"")}if(r.path==="")return r;throw yB(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(P){P.path.charAt(P.path.length-1)==="/"&&(P.path_=P.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function u(P){P.path_=decodeURIComponent(P.path)}const h="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",v=new RegExp(`^https?://${f}/${h}/b/${i}/o${p}`,"i"),b={bucket:1,path:3},E=n===DC?"(?:storage.googleapis.com|storage.cloud.google.com)":n,A="([^?#]*)",_=new RegExp(`^https?://${E}/${i}/${A}`,"i"),w=[{regex:a,indices:l,postModify:s},{regex:v,indices:b,postModify:u},{regex:_,indices:{bucket:1,path:2},postModify:u}];for(let P=0;P<w.length;P++){const V=w[P],O=V.regex.exec(e);if(O){const I=O[V.indices.bucket];let x=O[V.indices.path];x||(x=""),r=new ln(I,x),V.postModify(r);break}}if(r==null)throw gB(e);return r}}class xB{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bB(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let u=!1;function h(...A){u||(u=!0,e.apply(null,A))}function f(A){i=setTimeout(()=>{i=null,t(v,l())},A)}function p(){s&&clearTimeout(s)}function v(A,..._){if(u){p();return}if(A){p(),h.call(null,A,..._);return}if(l()||o){p(),h.call(null,A,..._);return}r<64&&(r*=2);let w;a===1?(a=2,w=0):w=(r+Math.random())*1e3,f(w)}let b=!1;function E(A){b||(b=!0,p(),!u&&(i!==null?(A||(a=2),clearTimeout(i),f(0)):A||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,E(!0)},n),E}function EB(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TB(t){return t!==void 0}function SB(t){return typeof t=="object"&&!Array.isArray(t)}function LC(t){return typeof t=="string"||t instanceof String}function vE(t,e,n,r){if(r<e)throw Ig(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Ig(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MC(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function FC(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var us;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(us||(us={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IB(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AB{constructor(e,n,r,i,s,o,a,l,u,h,f,p=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=f,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,b)=>{this.resolve_=v,this.reject_=b,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Iu(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===us.NO_ERROR,l=s.getStatus();if(!a||IB(l,this.additionalRetryCodes_)&&this.retry){const h=s.getErrorCode()===us.ABORT;r(!1,new Iu(!1,null,h));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new Iu(u,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());TB(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=jC();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?OC():mB();o(l)}else{const l=pB();o(l)}};this.canceled_?n(!1,new Iu(!1,null,!0)):this.backoffId_=bB(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&EB(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Iu{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function kB(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function CB(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function PB(t,e){e&&(t["X-Firebase-GMPID"]=e)}function RB(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function NB(t,e,n,r,i,s,o=!0){const a=FC(t.urlParams),l=t.url+a,u=Object.assign({},t.headers);return PB(u,e),kB(u,n),CB(u,s),RB(u,r),new AB(l,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UC(t){let e;try{e=JSON.parse(t)}catch{return null}return SB(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DB(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function VB(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function BC(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jB(t,e){return e}class Ft{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||jB}}let Au=null;function OB(t){return!LC(t)||t.length<2?t:BC(t)}function LB(){if(Au)return Au;const t=[];t.push(new Ft("bucket")),t.push(new Ft("generation")),t.push(new Ft("metageneration")),t.push(new Ft("name","fullPath",!0));function e(s,o){return OB(o)}const n=new Ft("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Ft("size");return i.xform=r,t.push(i),t.push(new Ft("timeCreated")),t.push(new Ft("updated")),t.push(new Ft("md5Hash",null,!0)),t.push(new Ft("cacheControl",null,!0)),t.push(new Ft("contentDisposition",null,!0)),t.push(new Ft("contentEncoding",null,!0)),t.push(new Ft("contentLanguage",null,!0)),t.push(new Ft("contentType",null,!0)),t.push(new Ft("metadata","customMetadata",!0)),Au=t,Au}function MB(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new ln(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function FB(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return MB(r,t),r}function UB(t,e,n){const r=UC(e);return r===null?null:FB(t,r,n)}function BB(t,e,n,r){const i=UC(e);if(i===null||!LC(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(u=>{const h=t.bucket,f=t.fullPath,p="/b/"+o(h)+"/o/"+o(f),v=MC(p,n,r),b=FC({alt:"media",token:u});return v+b})[0]}class zB{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $B(t){if(!t)throw jC()}function qB(t,e){function n(r,i){const s=UB(t,i,e);return $B(s!==null),BB(s,i,t.host,t._protocol)}return n}function KB(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=hB():i=dB():n.getStatus()===402?i=uB(t.bucket):n.getStatus()===403?i=fB(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function GB(t){const e=KB(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=cB(t.path)),s.serverResponse=i.serverResponse,s}return n}function WB(t,e,n){const r=e.fullServerUrl(),i=MC(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new zB(i,s,qB(t,n),o);return a.errorHandler=GB(e),a}class HB{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=us.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=us.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=us.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw qa("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw qa("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw qa("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw qa("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw qa("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class QB extends HB{initXhr(){this.xhr_.responseType="text"}}function YB(){return new QB}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e,n){this._service=e,n instanceof ln?this._location=n:this._location=ln.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Ss(e,n)}get root(){const e=new ln(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return BC(this._location.path)}get storage(){return this._service}get parent(){const e=DB(this._location.path);if(e===null)return null;const n=new ln(this._location.bucket,e);return new Ss(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw wB(e)}}function XB(t){t._throwIfRoot("getDownloadURL");const e=WB(t.storage,t._location,LB());return t.storage.makeRequestWithTokens(e,YB).then(n=>{if(n===null)throw _B();return n})}function JB(t,e){const n=VB(t._location.path,e),r=new ln(t._location.bucket,n);return new Ss(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZB(t){return/^[A-Za-z]+:\/\//.test(t)}function ez(t,e){return new Ss(t,e)}function zC(t,e){if(t instanceof s0){const n=t;if(n._bucket==null)throw vB();const r=new Ss(n,n._bucket);return e!=null?zC(r,e):r}else return e!==void 0?JB(t,e):t}function tz(t,e){if(e&&ZB(e)){if(t instanceof s0)return ez(t,e);throw Ig("To use ref(service, url), the first argument must be a Storage instance.")}else return zC(t,e)}function _E(t,e){const n=e==null?void 0:e[VC];return n==null?null:ln.makeFromBucketSpec(n,t)}function nz(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:lL(i,t.app.options.projectId))}class s0{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=DC,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=aB,this._maxUploadRetryTime=lB,this._requests=new Set,i!=null?this._bucket=ln.makeFromBucketSpec(i,this._host):this._bucket=_E(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ln.makeFromBucketSpec(this._url,e):this._bucket=_E(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){vE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){vE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ss(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new xB(OC());{const o=NB(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const wE="@firebase/storage",xE="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C="storage";function rz(t){return t=Ze(t),XB(t)}function iz(t,e){return t=Ze(t),tz(t,e)}function sz(t=BI(),e){t=Ze(t);const r=Lh(t,$C).getImmediate({identifier:e}),i=oL("storage");return i&&oz(r,...i),r}function oz(t,e,n,r={}){nz(t,e,n,r)}function az(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new s0(n,r,i,e,Rs)}function lz(){gs(new _i($C,az,"PUBLIC").setMultipleInstances(!0)),Qn(wE,xE,""),Qn(wE,xE,"esm2017")}lz();const js={apiKey:"AIzaSyB5RqeXVGSF0nB-3Y7hsiChamqdf7XMRv8",authDomain:"swgoh-tw-guide.firebaseapp.com",projectId:"swgoh-tw-guide",storageBucket:"swgoh-tw-guide.firebasestorage.app",messagingSenderId:"25054528199",appId:"1:25054528199:web:9154ba45e0d0b79f1ab4e2"};if(!js.apiKey)throw new Error("Firebase API Key is missing");if(!js.authDomain)throw new Error("Firebase Auth Domain is missing");if(!js.projectId)throw new Error("Firebase Project ID is missing");if(!js.storageBucket)throw new Error("Firebase Storage Bucket is missing");if(!js.messagingSenderId)throw new Error("Firebase Messaging Sender ID is missing");if(!js.appId)throw new Error("Firebase App ID is missing");const Ji=class Ji{constructor(){Mt(this,"app");Mt(this,"_auth");Mt(this,"_db");Mt(this,"_storage");Mt(this,"initialized",!1);Mt(this,"initError",null);Mt(this,"initializationPromise");this.app=Ox().length===0?UI(js):Ox()[0],this._auth=UF(this.app),this._db=$3(this.app,{cacheSizeBytes:z3,experimentalForceLongPolling:!0}),this._storage=sz(this.app),this.initializationPromise=this.initialize()}async initialize(){try{await this.setupPersistence(),this.setupAuthStateMonitoring(),this.initialized=!0}catch(e){throw this.initError=e,e}}async setupPersistence(){try{await q3(this._db),console.log("Offline persistence enabled")}catch(e){if(e instanceof Error&&"code"in e)switch(e.code){case"failed-precondition":console.warn("Multiple tabs open, persistence can only be enabled in one tab at a time.");break;case"unimplemented":console.warn("The current browser does not support offline persistence.");break;default:console.error("Error enabling offline persistence:",e)}else console.error("Unknown error enabling offline persistence:",e)}}setupAuthStateMonitoring(){fA(this._auth,e=>{e?console.log("User is signed in:",e.uid):console.log("User is signed out")},e=>{console.error("Auth state change error:",e)})}connectToEmulators(){}static getInstance(){return Ji.instance||(Ji.instance=new Ji),Ji.instance}get auth(){if(this.initError)throw this.initError;return this._auth}get db(){if(this.initError)throw this.initError;return this._db}get storage(){if(this.initError)throw this.initError;return this._storage}get isInitialized(){return this.initialized&&!this.initError}async waitForInitialization(){return this.initializationPromise}async reconnect(){return(!this.initialized||this.initError)&&(this.initError=null,this.initialized=!1,this.initializationPromise=this.initialize()),this.initializationPromise}};Mt(Ji,"instance");let Ag=Ji;const uf=Ag.getInstance(),al=uf.auth,He=uf.db,cz=uf.storage,qC=()=>uf.waitForInitialization(),uz={triple_zero:"triplezero",fifty_rt:"50rt",arc_trooper:"trooperclone_arc",aayla_secura:"aaylasecura",admiral_ackbar:"ackbaradmiral",admiral_piett:"piett",admiral_raddus:"admiralraddus",admiral_trench:"admiraltrench",ahsoka_fulcrum:"ahsokaadult",ahsoka_snips:"ahsoka",amilyn_holdo:"holdo",asajj_ventress:"ventress",aurra_sing:"aurrasing",b1_battle_droid:"b1",b2_super_battle_droid:"b2",bb_8:"bb8",battle_droid_1:"bt1",barriss_offee:"barriss_light",bastila_shan:"bastilashan",bastila_fallen:"bastilashan_dark",baylan_skoll:"baylanskoll",baze_malbus:"bazemalbus",ben_solo:"bensolo",biggs:"rebelpilot_biggs",bistan:"bistan",bo_katan_mandalore:"mandalorbokatan",bo_katan_kryze:"bokatan",boba_fett:"bobafett",boba_fett_scion:"bobafettold",bodhi_rook:"bodhi",boss_nass:"bossnass",bossk:"bossk",boushh_leia:"boushh",c3po:"c3po",cc_2224_cody:"trooperclone_cody",ct_21_0408_echo:"trooperclone_echo",ct_5555_fives:"trooperclone_fives",ct_7567_rex:"trooperclone_rex",cad_bane:"cadbane",cal_kestis:"calkestis",canderous_ordo:"canderous",captain_drogan:"captaindrogan",captain_enoch:"captainenoch",captain_han_solo:"hoth_han",captain_phasma:"phasma",captain_rex:"captainrex",captain_tarpals:"captaintarpals",cara_dune:"caradune",carth_onasi:"carth",cassian_andor:"cassian",cera_junda:"cerejunda",chewbacca_ot:"chewbacca_ot",chief_chirpa:"ewok_chirpa",chief_nebit:"jawa_nebit",chirrut_imwe:"chirrut",chopper:"chopper",clone_sergeant:"trooperclonegreen",clone_chewbacca:"chewbacca",colonel_stark:"colonel_stark",commander_ahsoka:"commanderahsokatano",lukebespin:"lukebespin",coruscant_police:"coruscantpolice",count_dooku:"dooku",old_daka:"daka",dark_trooper:"darktrooper",dark_trooper_moff:"moffgideons3",darth_bane:"darthbane",darth_malak:"darthmalak",darth_malgus:"darthmalgus",darth_maul:"maul",darth_nihilus:"nihilus",darth_revan:"sithrevan",darth_sidious:"sidious",darth_sion:"sion",darth_talon:"darthtalon",darth_traya:"traya",darth_vader:"vader",dash_rendar:"dashrendar",dathcha:"jawa_dathcha",death_trooper_peridea:"deathtrooperperidea",death_trooper:"trooperdeath",dengar:"dengar",director_krennic:"krennic",doctor_aphra:"doctoraphra",droideka:"droideka",echo:"bb_echo",eeth_koth:"eethkoth",eighth_brother:"eighthbrother",embo:"embo",emperor_palpatine:"palpatineemperor",enfy_nest:"enfys",ewok_elder:"ewok_chief",ewok_scout:"ewok_scout",ezra_bridger:"ezra_s3",ezra_exile:"ezraexile",fennec_shand:"fennec",fifth_brother:"fifthbrother",finn:"finnjakku",fo_executioner:"firstorder_executioner",fo_officer:"firstorderofficer",fo_sf_tie_pilot:"firstorder_pilot",fo_stormtrooper:"firstordertrooper",fo_tie_pilot:"firstordertiepilot",gamorrean_guard:"gamorreanguard",gar_saxon:"gar_saxon",garazeb_zeb:"zeb_s3",general_grievous:"grievous",general_hux:"generalhux",general_kenobi:"obiwangeneral",general_skywalker:"generalanakin",general_veers:"veers",geonosian_brood_alpha:"geonosian_broodalpha",geonosian_soldier:"geonosian_soldier",geonosian_spy:"geonosian_spy",grand_admiral_thrawn:"thrawn",grand_inquisitor:"grandinquisitor",grand_master_yoda:"yodagrandmaster",grand_moff_tarkin:"tarkinadmiral",great_mothers:"greatmothers",greef_karga:"greefkarga",greedo:"greedo",gungan_bombardier:"gunganboomadier",gungan_phalanx:"gunganphalanx",hk_47:"hk47",han:"han",hera_syndulla:"hera_s3",hermit_yoda:"yodahermit",hondo_ohnaka:"hondoohnaka",hoth_rebel_scout:"rebelhothscout",hoth_rebel_soldier:"rebelhoth",hunter:"bb_hunter",ig_100_magnaguard:"magnaguard",ig_11:"ig11_nurse",ig_12_grogu:"ig12",ig_86:"ig86",ig_88:"ig88",iden_versio:"idenversioempire",ima_gun_di:"imagundi",imperial_probe_droid:"probedroid",imperial_super_commando:"imperial_super_commando",jabba_the_hutt:"jabbathehutt",jango_fett:"jangofett",jar_jar_binks:"jarjarbinks",jawa:"jawa_jawa",jawa_engineer:"jawa_engineer",jawa_scavenger:"jawa_scavenger",jedi_consular:"jedi_consular_03",jedi_knight_anakin:"anakinjedi",jedi_knight_guardian:"jedi_guardian_01",jedi_knight_cal_kestis:"jediknightcal",jedi_knight_luke:"luke_jediknight",jedi_knight_revan:"jedirevan",jedi_master_kenobi:"globiwan",jedi_master_luke:"luke_jml",jolee_bindo:"joleebindo",juhani:"juhani",jyn_erso:"jyn",k_2so:"k2so",kanan_jarrus:"kanan_s3",kelleran_beq:"kelleranbeq",ki_adi_mundi:"kiadimundi",kit_fisto:"kitfisto",krrsantan:"krrsantan",kuiil:"kuiil",kyle_katarn:"kylekatarn",kylo_ren:"kyloren",kylo_ren_unmasked:"kylo_unmasked",l3_37:"l337",lando_calrissian:"landobespin",leia_organa:"leiaendor",lobot:"lobot",logray:"ewok_logray",lord_vader:"lordvader",luke_farmboy:"luke_ep4",luminara_unduli:"luminara",luthen_rael:"luthenrael",mace_windu:"macewindu",magmatrooper:"trooperstorm_magma",mara_jade:"marajade",marrok:"marrok",master_qui_gon:"masterquigon",maul:"maul_cyborg",merrin:"merrin",mission_vao:"mission",mob_enforcer:"mob_enforcer",moff_gideon:"moffgideon",mon_mothma:"monmothma",morgan_elsbeth:"morganelsbeth",mother_talzin:"nightsisters_talzin",night_trooper:"nighttrooper_a",nightsister_acolyte:"nightsister_acolyte",nightsister_initiate:"nightsister_initiate",nightsister_spirit:"nightsisters_wraith",nightsister_zombie:"nightsisters_zombie",ninth_sister:"ninthsister",nute_gunray:"nutegunray",obi_wan_old_ben:"obiwanep4",omega:"badbatchomega",padawan_obiwan:"padawanobiwan",padawan_sabine:"padawansabine",padme_amidala:"padme_geonosis",pao:"pao",paploo:"ewok_paploo",paz_vizsla:"pazvizsla",plo_koon:"plokoon",poe_dameron:"poe",poggle_the_lesser:"geonosian_poggle",princess_kneesaa:"princesskneesaa",princess_leia:"leia_princess",qira:"qira",queen_amidala:"queenamidala",qui_gon_jinn:"quigon",r2_d2:"r2d2",range_trooper:"trooperranger",rebel_officer_leia:"leiahoth",resistance_hero_finn:"finn",resistance_hero_poe:"poe_tros",resistance_pilot:"resistancepilot",resistance_trooper:"resistancetrooper",rey_gl:"reyjakku",rey_jedi_training:"rey_tlj",rey_scavenger:"rey_tros",rose_tico:"rose",royal_guard:"royalguard",sabine_wren:"sabine_s3",sana_starros:"sanastarros",savage_opress:"savageopress",saw_gerrera:"sawgerrera",scarif_rebel_pathfinder:"rebel_scarif",scout_trooper:"trooperscout",second_sister:"secondsister",seventh_sister:"seventhsister",shaak_ti:"shaakti",shin_hati:"shinhati",shoretrooper:"troopershore",sith_assassin:"sithassassin",sith_empire_trooper:"sithtrooper",sith_eternal_emperor:"espalpatine_pre",sith_marauder:"sithmarauder",sith_trooper:"firstorder_sithtrooper",skiff_guard_lando:"undercoverlando",snowtrooper:"troopersnow",stap:"stap",starkiller:"starkiller",stormtrooper:"trooperstorm",stormtrooper_han:"trooperstorm_han",sun_fac:"geonosian_sunfac",supreme_leader_kylo:"kyloren_tros",t3_m4:"t3m4",talia:"talia",tarfful:"tarfful",taron_malicos:"taronmalicos",tech:"bb_tech",teebo:"ewok_teebo",the_armorer:"armorer",the_mandalorian:"mandalorian",the_mandalorian_beskar:"mandobeskar",third_sister:"thirdsister",chewbacca_c3po:"chewbacca_c3po",tusken_chieftain:"tuskenchieftain",tusken_raider:"tuskenraider",tusken_shaman:"tuskenshaman",tusken_warrior:"tuskenhuntress",urorrurrr:"urorrurrr",ugnaught:"ugnaught",vandor_chewbacca:"chewbacca_vandor",veteran_smuggler_han:"tfa_han",visas_marr:"visas",wampa:"wampa",wat_tambor:"wattambor",wedge_antilles:"rebelpilot_wedge",wicket:"ewok_wicket",wrecker:"bb_wrecker",young_han_solo:"han_young",young_lando:"younglando",zaalbar:"zaalbar",zam_wesell:"zamwesell",zorii_bliss:"zoriibliss"},dz={chimaera:"chimaera",endurance:"venator",executor:"executor",executrix:"stardestroyer",finalizer:"finalizer",home_one:"moncalamarilibertycruiser",profundity:"profundity",leviathan:"leviathan",negotiator:"negotiator",malevolence:"malevolence",furyclassinterceptor:"furyclassinterceptor",ahsoka_tanos_jedi_starfighter:"jedi_fighter_ahsoka",anakins_eta2:"jedi_fighter_anakin",b28:"b28extinctionclassbomber",btl_b_y_wing:"ywing_btlb",biggs_darklighter_x_wing:"xwing_red3",bistan_u_wing:"uwing",cassians_u_wing:"uwing_hero",clone_sergeants_arc_170:"arc170",comeuppance:"comeuppance",ebon_hawk:"ebonhawk",emperors_shuttle:"imperialshuttle",first_order_sf_tie_fighter:"fosf_tie_fighter",first_order_tie_fighter:"firstorder_tiefighter",fury_class_interceptor:"furyclassinterceptor",fives_umbaran_starfighter:"umbaran_star_fighter",gauntlet_starfighter:"gauntlet",geonosian_soldier_starfighter:"geonosis_fighter_soldier",geonosian_spy_starfighter:"geonosis_fighter_spy",ghost:"ghost",hans_millennium_falcon:"mfalcon",hounds_tooth:"houndstooth",hyena_bomber:"hyenabomber",ig2000:"ig2000",imperial_tie_bomber:"tiebomber",imperial_tie_fighter:"tiefighter",jedi_consulars_starfighter:"jedi_fighter",kylo_ren_command_shuttle:"upsilon_shuttle_kylo",lando_millennium_falcon:"mil_fal_pristine",mg_100_starfortress:"mg100",marauder:"marauder",mark_v1_interceptor:"sithsupremacyclass",outrider:"outrider",phantom:"phantom2",plo_koons_jedi_starfighter:"jedi_fighter_bladeofdorin",razor_crest:"razorcrest",rexs_arc_170:"arc170_02",scimitar:"sithinfiltrator",sithsupremacyclass:"sithsupremacyclass",slave_1:"slave1",sun_facs_geonosian_starfighter:"geonosis_fighter_sunfac",tie_advanced_x1:"tieadvanced",tie_interceptor:"tie_interceptor_prototype",umbaran_starfighter:"umbaran_star_fighter",vulture_droid:"vulturedroid",xanadu_blood:"xanadublood",rebel_y_wing:"ywing"},ku=(t,...e)=>{console.debug(`[ImageMapping] ${t}`,...e)},Is=t=>t?t.toLowerCase().replace(/[']/g,"").replace(/[^a-z0-9_\s-]/g,"").trim().replace(/[\s-]+/g,"_"):"";function hz(t,e){if(!t)return ku("No ID provided for image"),"";const n=Is(t);ku(`Normalized ID: ${n} from ${t}`);const r=e.includes("ship")?dz:uz,i=r[n];return i||(ku(`No mapping found for ID: ${t}, normalized: ${n}, type: ${e}`),ku("Available mappings:",Object.keys(r)),n)}const fz="/assets",jp="/placeholder.png",Cu=new Map,Pu=new Map,pz={xs:{width:32,height:32,containerClass:"w-8 h-8"},sm:{width:40,height:40,containerClass:"w-10 h-10"},md:{width:48,height:48,containerClass:"w-12 h-12"},lg:{width:64,height:64,containerClass:"w-16 h-16"},xl:{width:80,height:80,containerClass:"w-20 h-20"}},Op=(t,...e)=>{},bE=t=>{const{width:e,height:n}=pz[t];return`data:image/svg+xml;charset=utf-8,<svg xmlns='http://www.w3.org/2000/svg' width='${e}' height='${n}' viewBox='0 0 ${e} ${n}'><rect width='100%' height='100%' fill='%231a1e27'/></svg>`},kg=async(t,e)=>{if(!t)return jp;const n=`${t}-${e}`;if(Cu.has(n))return Cu.get(n);if(Pu.has(n))return Pu.get(n);const r=(async()=>{try{const i=hz(t,e);if(!i)return Op(`No mapping found for ${t} (${e})`),jp;const o=`${e.includes("ship")?"ships":"characters"}/${i}.webp`;try{const a=iz(cz,o),l=await rz(a);return Cu.set(n,l),Op(`Successfully loaded Firebase image for ${t}`),l}catch{const l=`${fz}/${o}`;return Cu.set(n,l),Op(`Using local path: ${l}`),l}}catch(i){return console.error(`Failed to load image for ${t}:`,i),jp}finally{Pu.delete(n)}})();return Pu.set(n,r),r};function KC(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=KC(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function GC(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=KC(t))&&(r&&(r+=" "),r+=e);return r}const o0="-",mz=t=>{const e=yz(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(o0);return a[0]===""&&a.length!==1&&a.shift(),WC(a,e)||gz(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},WC=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?WC(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(o0);return(o=e.validators.find(({validator:a})=>a(s)))==null?void 0:o.classGroupId},EE=/^\[(.+)\]$/,gz=t=>{if(EE.test(t)){const e=EE.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},yz=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return _z(Object.entries(t.classGroups),n).forEach(([s,o])=>{Cg(o,r,s,e)}),r},Cg=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:TE(e,i);s.classGroupId=n;return}if(typeof i=="function"){if(vz(i)){Cg(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,o])=>{Cg(o,TE(e,s),n,r)})})},TE=(t,e)=>{let n=t;return e.split(o0).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},vz=t=>t.isThemeGetter,_z=(t,e)=>e?t.map(([n,r])=>{const i=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,a])=>[e+o,a])):s);return[n,i]}):t,wz=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(s,o)=>{n.set(s,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(s){let o=n.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){n.has(s)?n.set(s,o):i(s,o)}}},HC="!",xz=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,i=e[0],s=e.length,o=a=>{const l=[];let u=0,h=0,f;for(let A=0;A<a.length;A++){let _=a[A];if(u===0){if(_===i&&(r||a.slice(A,A+s)===e)){l.push(a.slice(h,A)),h=A+s;continue}if(_==="/"){f=A;continue}}_==="["?u++:_==="]"&&u--}const p=l.length===0?a:a.substring(h),v=p.startsWith(HC),b=v?p.substring(1):p,E=f&&f>h?f-h:void 0;return{modifiers:l,hasImportantModifier:v,baseClassName:b,maybePostfixModifierPosition:E}};return n?a=>n({className:a,parseClassName:o}):o},bz=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},Ez=t=>({cache:wz(t.cacheSize),parseClassName:xz(t),...mz(t)}),Tz=/\s+/,Sz=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,s=[],o=t.trim().split(Tz);let a="";for(let l=o.length-1;l>=0;l-=1){const u=o[l],{modifiers:h,hasImportantModifier:f,baseClassName:p,maybePostfixModifierPosition:v}=n(u);let b=!!v,E=r(b?p.substring(0,v):p);if(!E){if(!b){a=u+(a.length>0?" "+a:a);continue}if(E=r(p),!E){a=u+(a.length>0?" "+a:a);continue}b=!1}const A=bz(h).join(":"),_=f?A+HC:A,y=_+E;if(s.includes(y))continue;s.push(y);const w=i(E,b);for(let P=0;P<w.length;++P){const V=w[P];s.push(_+V)}a=u+(a.length>0?" "+a:a)}return a};function Iz(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=QC(e))&&(r&&(r+=" "),r+=n);return r}const QC=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=QC(t[r]))&&(n&&(n+=" "),n+=e);return n};function Az(t,...e){let n,r,i,s=o;function o(l){const u=e.reduce((h,f)=>f(h),t());return n=Ez(u),r=n.cache.get,i=n.cache.set,s=a,a(l)}function a(l){const u=r(l);if(u)return u;const h=Sz(l,n);return i(l,h),h}return function(){return s(Iz.apply(null,arguments))}}const je=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},YC=/^\[(?:([a-z-]+):)?(.+)\]$/i,kz=/^\d+\/\d+$/,Cz=new Set(["px","full","screen"]),Pz=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Rz=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Nz=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Dz=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Vz=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,rr=t=>Ao(t)||Cz.has(t)||kz.test(t),Fr=t=>ha(t,"length",zz),Ao=t=>!!t&&!Number.isNaN(Number(t)),Lp=t=>ha(t,"number",Ao),Ka=t=>!!t&&Number.isInteger(Number(t)),jz=t=>t.endsWith("%")&&Ao(t.slice(0,-1)),fe=t=>YC.test(t),Ur=t=>Pz.test(t),Oz=new Set(["length","size","percentage"]),Lz=t=>ha(t,Oz,XC),Mz=t=>ha(t,"position",XC),Fz=new Set(["image","url"]),Uz=t=>ha(t,Fz,qz),Bz=t=>ha(t,"",$z),Ga=()=>!0,ha=(t,e,n)=>{const r=YC.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},zz=t=>Rz.test(t)&&!Nz.test(t),XC=()=>!1,$z=t=>Dz.test(t),qz=t=>Vz.test(t),Kz=()=>{const t=je("colors"),e=je("spacing"),n=je("blur"),r=je("brightness"),i=je("borderColor"),s=je("borderRadius"),o=je("borderSpacing"),a=je("borderWidth"),l=je("contrast"),u=je("grayscale"),h=je("hueRotate"),f=je("invert"),p=je("gap"),v=je("gradientColorStops"),b=je("gradientColorStopPositions"),E=je("inset"),A=je("margin"),_=je("opacity"),y=je("padding"),w=je("saturate"),P=je("scale"),V=je("sepia"),O=je("skew"),I=je("space"),x=je("translate"),k=()=>["auto","contain","none"],C=()=>["auto","hidden","clip","visible","scroll"],D=()=>["auto",fe,e],N=()=>[fe,e],T=()=>["",rr,Fr],F=()=>["auto",Ao,fe],q=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],se=()=>["solid","dashed","dotted","double","none"],X=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],B=()=>["start","end","center","between","around","evenly","stretch"],j=()=>["","0",fe],K=()=>["auto","avoid","all","avoid-page","page","left","right","column"],te=()=>[Ao,fe];return{cacheSize:500,separator:":",theme:{colors:[Ga],spacing:[rr,Fr],blur:["none","",Ur,fe],brightness:te(),borderColor:[t],borderRadius:["none","","full",Ur,fe],borderSpacing:N(),borderWidth:T(),contrast:te(),grayscale:j(),hueRotate:te(),invert:j(),gap:N(),gradientColorStops:[t],gradientColorStopPositions:[jz,Fr],inset:D(),margin:D(),opacity:te(),padding:N(),saturate:te(),scale:te(),sepia:j(),skew:te(),space:N(),translate:N()},classGroups:{aspect:[{aspect:["auto","square","video",fe]}],container:["container"],columns:[{columns:[Ur]}],"break-after":[{"break-after":K()}],"break-before":[{"break-before":K()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...q(),fe]}],overflow:[{overflow:C()}],"overflow-x":[{"overflow-x":C()}],"overflow-y":[{"overflow-y":C()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[E]}],"inset-x":[{"inset-x":[E]}],"inset-y":[{"inset-y":[E]}],start:[{start:[E]}],end:[{end:[E]}],top:[{top:[E]}],right:[{right:[E]}],bottom:[{bottom:[E]}],left:[{left:[E]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ka,fe]}],basis:[{basis:D()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",fe]}],grow:[{grow:j()}],shrink:[{shrink:j()}],order:[{order:["first","last","none",Ka,fe]}],"grid-cols":[{"grid-cols":[Ga]}],"col-start-end":[{col:["auto",{span:["full",Ka,fe]},fe]}],"col-start":[{"col-start":F()}],"col-end":[{"col-end":F()}],"grid-rows":[{"grid-rows":[Ga]}],"row-start-end":[{row:["auto",{span:[Ka,fe]},fe]}],"row-start":[{"row-start":F()}],"row-end":[{"row-end":F()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",fe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",fe]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...B()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...B(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...B(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[A]}],mx:[{mx:[A]}],my:[{my:[A]}],ms:[{ms:[A]}],me:[{me:[A]}],mt:[{mt:[A]}],mr:[{mr:[A]}],mb:[{mb:[A]}],ml:[{ml:[A]}],"space-x":[{"space-x":[I]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[I]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",fe,e]}],"min-w":[{"min-w":[fe,e,"min","max","fit"]}],"max-w":[{"max-w":[fe,e,"none","full","min","max","fit","prose",{screen:[Ur]},Ur]}],h:[{h:[fe,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[fe,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[fe,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[fe,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Ur,Fr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Lp]}],"font-family":[{font:[Ga]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",fe]}],"line-clamp":[{"line-clamp":["none",Ao,Lp]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",rr,fe]}],"list-image":[{"list-image":["none",fe]}],"list-style-type":[{list:["none","disc","decimal",fe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[_]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[_]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...se(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",rr,Fr]}],"underline-offset":[{"underline-offset":["auto",rr,fe]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:N()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",fe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",fe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[_]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...q(),Mz]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Lz]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Uz]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[b]}],"gradient-via-pos":[{via:[b]}],"gradient-to-pos":[{to:[b]}],"gradient-from":[{from:[v]}],"gradient-via":[{via:[v]}],"gradient-to":[{to:[v]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[_]}],"border-style":[{border:[...se(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[_]}],"divide-style":[{divide:se()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...se()]}],"outline-offset":[{"outline-offset":[rr,fe]}],"outline-w":[{outline:[rr,Fr]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:T()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[_]}],"ring-offset-w":[{"ring-offset":[rr,Fr]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Ur,Bz]}],"shadow-color":[{shadow:[Ga]}],opacity:[{opacity:[_]}],"mix-blend":[{"mix-blend":[...X(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":X()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Ur,fe]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[f]}],saturate:[{saturate:[w]}],sepia:[{sepia:[V]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[_]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[V]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",fe]}],duration:[{duration:te()}],ease:[{ease:["linear","in","out","in-out",fe]}],delay:[{delay:te()}],animate:[{animate:["none","spin","ping","pulse","bounce",fe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[P]}],"scale-x":[{"scale-x":[P]}],"scale-y":[{"scale-y":[P]}],rotate:[{rotate:[Ka,fe]}],"translate-x":[{"translate-x":[x]}],"translate-y":[{"translate-y":[x]}],"skew-x":[{"skew-x":[O]}],"skew-y":[{"skew-y":[O]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",fe]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",fe]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":N()}],"scroll-mx":[{"scroll-mx":N()}],"scroll-my":[{"scroll-my":N()}],"scroll-ms":[{"scroll-ms":N()}],"scroll-me":[{"scroll-me":N()}],"scroll-mt":[{"scroll-mt":N()}],"scroll-mr":[{"scroll-mr":N()}],"scroll-mb":[{"scroll-mb":N()}],"scroll-ml":[{"scroll-ml":N()}],"scroll-p":[{"scroll-p":N()}],"scroll-px":[{"scroll-px":N()}],"scroll-py":[{"scroll-py":N()}],"scroll-ps":[{"scroll-ps":N()}],"scroll-pe":[{"scroll-pe":N()}],"scroll-pt":[{"scroll-pt":N()}],"scroll-pr":[{"scroll-pr":N()}],"scroll-pb":[{"scroll-pb":N()}],"scroll-pl":[{"scroll-pl":N()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",fe]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[rr,Fr,Lp]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Gz=Az(Kz);function Zo(...t){return Gz(GC(t))}const Ru={},Wz={sm:"w-8 h-8",md:"w-12 h-12",lg:"w-16 h-16"},_e=R.memo(({id:t,name:e,type:n,size:r="md",className:i="",withTooltip:s=!0,isLeader:o=!1,isCapital:a=!1,onLoad:l})=>{const[u,h]=R.useState(()=>Ru[t]||bE(r)),[f,p]=R.useState(!0),[v,b]=R.useState(!1),E=R.useMemo(()=>Wz[r],[r]);return R.useEffect(()=>{let A=!0;return(async()=>{if(Ru[t]){h(Ru[t]),p(!1);return}try{const y=await kg(t,n);A&&(Ru[t]=y,h(y),b(!1))}catch(y){A&&(console.error(`Error loading image for ${t}:`,y),b(!0))}finally{A&&p(!1)}})(),()=>{A=!1}},[t,n]),d.jsxs("div",{className:Zo("relative","transition-all duration-300 ease-out",E,i),children:[d.jsx("img",{src:u,alt:e,className:Zo("w-full h-full","object-cover rounded-full","transition-opacity duration-300",f?"opacity-0":"opacity-100",v?"grayscale opacity-50":""),onLoad:l,onError:()=>{b(!0),h(bE(r))}}),(o||a)&&d.jsx("div",{className:`absolute -top-1 -right-1 w-4 h-4 bg-blue-500 rounded-full \r
                   flex items-center justify-center text-white text-xs font-bold\r
                   shadow-md`,children:o?"L":"C"}),s&&d.jsx("div",{className:`absolute -bottom-6 left-1/2 transform -translate-x-1/2 \r
                     bg-black/90 px-2 py-1 rounded text-xs text-white whitespace-nowrap \r
                     opacity-0 group-hover:opacity-100 transition-opacity z-10`,children:e})]})});_e.displayName="UnitImage";const JC=({videoUrl:t})=>{const e=n=>{n.stopPropagation(),window.open(t,"_blank")};return d.jsxs("button",{onClick:e,className:`flex items-center gap-2 px-2 py-1 rounded-full bg-red-500/20 text-red-400 \r
                 hover:bg-red-500/30 transition-colors text-sm`,children:[d.jsx(tS,{className:"w-4 h-4"}),"  ",d.jsx("span",{children:"Watch Guide"})]})},Hz=R.createContext(null),Mp={didCatch:!1,error:null};let ZC=class extends R.Component{constructor(e){super(e),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=Mp}static getDerivedStateFromError(e){return{didCatch:!0,error:e}}resetErrorBoundary(){const{error:e}=this.state;if(e!==null){for(var n,r,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];(n=(r=this.props).onReset)===null||n===void 0||n.call(r,{args:s,reason:"imperative-api"}),this.setState(Mp)}}componentDidCatch(e,n){var r,i;(r=(i=this.props).onError)===null||r===void 0||r.call(i,e,n)}componentDidUpdate(e,n){const{didCatch:r}=this.state,{resetKeys:i}=this.props;if(r&&n.error!==null&&Qz(e.resetKeys,i)){var s,o;(s=(o=this.props).onReset)===null||s===void 0||s.call(o,{next:i,prev:e.resetKeys,reason:"keys"}),this.setState(Mp)}}render(){const{children:e,fallbackRender:n,FallbackComponent:r,fallback:i}=this.props,{didCatch:s,error:o}=this.state;let a=e;if(s){const l={error:o,resetErrorBoundary:this.resetErrorBoundary};if(typeof n=="function")a=n(l);else if(r)a=R.createElement(r,l);else if(i!==void 0)a=i;else throw o}return R.createElement(Hz.Provider,{value:{didCatch:s,error:o,resetErrorBoundary:this.resetErrorBoundary}},a)}};function Qz(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return t.length!==e.length||t.some((n,r)=>!Object.is(n,e[r]))}const eP=R.memo(({squad:t,isSelected:e,onSelect:n,counters:r,isAdmin:i,onDeleteCounter:s,onViewDetails:o,isFiltered:a=!1})=>(console.log("Rendering SquadCard:",{name:t.name,characters:t.characters,leader:t.leader,counters:r.length}),d.jsx(ZC,{fallback:d.jsx(cr,{variant:"dark",className:"p-4",children:d.jsx("div",{className:"text-red-400",children:"Error loading squad card"})}),children:d.jsx("div",{onClick:()=>n(),children:d.jsx(cr,{variant:"dark",glowColor:t.alignment==="light"?"blue":"red",isSelected:e,className:`transition-all duration-300 ease-out hover:scale-[1.01] ${a?"opacity-100":"opacity-50"}`,children:d.jsxs("div",{className:"p-4",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsxs("h3",{className:"text-xl font-orbitron text-white flex items-center gap-2",children:[d.jsx(kh,{className:"w-5 h-5 text-blue-400"}),t.name]}),d.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[d.jsx("span",{className:`px-2 py-1 rounded-full text-xs
                    ${t.alignment==="light"?"bg-blue-500/20 text-blue-400":"bg-red-500/20 text-red-400"}`,children:t.alignment==="light"?"Light Side":"Dark Side"}),t.twOmicronRequired&&d.jsx("span",{className:"px-2 py-1 rounded-full text-xs bg-purple-500/20 text-purple-400",children:"TW Omicron"})]})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[o&&d.jsx("button",{onClick:l=>{l.stopPropagation(),o()},className:"p-2 text-blue-400 hover:bg-blue-400/10 rounded-lg",children:d.jsx(Z1,{className:"w-4 h-4"})}),d.jsx("button",{className:"p-2 text-white/60 hover:text-white hover:bg-white/5 rounded-lg",children:e?d.jsx(Y1,{className:"w-4 h-4"}):d.jsx(Q1,{className:"w-4 h-4"})})]})]}),d.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-4",children:[t.leader&&d.jsx("div",{className:"relative group",children:d.jsx(_e,{id:t.leader.id,name:t.leader.name,type:"squad-leader",size:"md",className:"rounded-full border-2 border-blue-400",withTooltip:!0,isLeader:!0})}),t.characters.map(l=>d.jsx("div",{className:"relative group",children:d.jsx(_e,{id:l.id,name:l.name,type:"squad-member",size:"md",className:"rounded-full border-2 border-white/20",withTooltip:!0})},l.id))]}),d.jsx(qt,{children:e&&r.length>0&&d.jsxs(ue.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"mt-6 space-y-4 overflow-hidden",children:[d.jsx("h4",{className:"text-lg font-medium text-white",children:"Counters"}),r.map(l=>{var u;return d.jsxs("div",{className:"p-4 bg-white/5 rounded-lg space-y-4",children:[d.jsxs("div",{className:"flex justify-between items-start",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:`px-2 py-1 rounded-full text-xs
                            ${l.counterType==="hard"?"bg-green-500/20 text-green-400":l.counterType==="soft"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:l.counterType.charAt(0).toUpperCase()+l.counterType.slice(1)}),l.twOmicronRequired&&d.jsx("span",{className:"px-2 py-1 rounded-full text-xs bg-purple-500/20 text-purple-400",children:"TW Omni"}),l.video_url&&d.jsx(JC,{videoUrl:l.video_url})]}),i&&s&&d.jsx("button",{onClick:()=>s(l.id),className:"p-2 text-red-400 hover:bg-red-400/10 rounded-lg",children:d.jsx(vc,{className:"w-4 h-4"})})]}),d.jsx("p",{className:"mt-2 text-white/70",children:l.description}),((u=l.requirements)==null?void 0:u.length)>0&&d.jsx("div",{className:"mt-3",children:d.jsxs("div",{className:"p-3 bg-blue-500/10 rounded-lg border border-blue-500/20",children:[d.jsx("h4",{className:"text-sm font-medium text-blue-400 mb-1",children:"Mod Requirements"}),l.requirements.filter(h=>h.type==="mods").map((h,f)=>d.jsx("div",{className:"text-sm text-white/70",children:h.description},f))]})}),"characters"in l.counterSquad&&d.jsxs("div",{className:"flex items-center gap-2",children:[l.counterSquad.leader&&d.jsx(_e,{id:l.counterSquad.leader.id,name:l.counterSquad.leader.name,type:"squad-leader",size:"sm",className:"border-2 border-blue-400"}),l.counterSquad.characters.map(h=>d.jsx(_e,{id:h.id,name:h.name,type:"squad-member",size:"sm",className:"border-2 border-white/20"},h.id))]})]},l.id)})]})})]})})})})));eP.displayName="SquadCard";class Vc extends nR.Component{constructor(n){super(n);Mt(this,"handleReset",()=>{this.setState({hasError:!1,error:null})});this.state={hasError:!1,error:null}}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){console.error("ErrorBoundary caught an error:",n,r)}render(){var n;return this.state.hasError?this.props.fallback?this.props.fallback:d.jsx("div",{className:"min-h-[200px] flex items-center justify-center",children:d.jsx("div",{className:"p-6 bg-red-500/10 rounded-lg border border-red-500/20 max-w-md w-full",children:d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx(Ai,{className:"w-5 h-5 text-red-400 flex-shrink-0 mt-0.5"}),d.jsxs("div",{className:"flex-1",children:[d.jsx("h3",{className:"text-lg font-medium text-red-400 mb-2",children:"Something went wrong"}),d.jsx("p",{className:"text-sm text-red-400/80 mb-4",children:((n=this.state.error)==null?void 0:n.message)||"An unexpected error occurred"}),d.jsxs("button",{onClick:this.handleReset,className:`flex items-center gap-2 px-4 py-2 rounded-lg \r
                           bg-red-500/20 text-red-400 hover:bg-red-500/30 \r
                           transition-colors`,children:[d.jsx(Cr,{className:"w-4 h-4"}),"Try Again"]})]})]})})}):this.props.children}}const Yz=({squads:t,filteredSquads:e,selectedSquadId:n,onSelectSquad:r,getCounters:i,isAdmin:s,onDeleteCounter:o,onViewDetails:a})=>{const l=h=>{r(n===h?null:h)},u=R.useMemo(()=>e.map(h=>d.jsx(ue.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:d.jsx(eP,{squad:h,isSelected:n===h.id,onSelect:()=>l(h.id),counters:i(h.id),isFiltered:!0,isAdmin:s,onDeleteCounter:o,onViewDetails:a})},h.id)),[e,n,i,s,o,a]);return!t||t.length===0?d.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-white/60",children:[d.jsx(kh,{className:"w-12 h-12 mb-4 animate-float"}),d.jsx("p",{className:"text-lg",children:"No squads found"})]}):d.jsx(Vc,{fallback:d.jsx("div",{className:"flex flex-col items-center justify-center p-8",children:d.jsxs("div",{className:"p-6 bg-red-500/10 rounded-lg border border-red-500/20 max-w-md w-full",children:[d.jsx("h3",{className:"text-lg font-medium text-red-400 mb-2",children:"Failed to load squads"}),d.jsx("p",{className:"text-sm text-red-400/80 mb-4",children:"Please try refreshing the page"}),d.jsxs("button",{onClick:()=>window.location.reload(),className:`flex items-center gap-2 px-4 py-2 rounded-lg \r
                       bg-red-500/20 text-red-400 hover:bg-red-500/30`,children:[d.jsx(Cr,{className:"w-4 h-4"}),"Refresh"]})]})}),children:d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.jsx(qt,{mode:"popLayout",children:u})})})},tP=R.memo(({fleet:t,isSelected:e,onSelect:n,counters:r,isAdmin:i,onDeleteCounter:s,onViewDetails:o,isFiltered:a=!1,onAddCounter:l})=>{console.log("Rendering FleetCard:",{name:t.name,startingLineup:t.startingLineup,capitalShip:t.capitalShip,counters:r.length});const u=r.filter(h=>{var b;const f=h.targetSquad.id===t.id,p=h.counterSquad.id===t.id,v="capitalShip"in h.targetSquad&&((b=h.targetSquad.capitalShip)==null?void 0:b.id)===t.id;return f||p||v});return d.jsx(ZC,{fallback:d.jsx(cr,{variant:"dark",className:"p-4",children:d.jsx("div",{className:"text-red-400",children:"Error loading fleet card"})}),children:d.jsx(cr,{variant:"dark",glowColor:t.alignment==="light"?"blue":"red",isInteractive:!0,isSelected:e,onClick:()=>{n()},className:`transition-all duration-300 ease-out hover:scale-[1.01] ${a?"opacity-100":"opacity-50"}`,children:d.jsxs("div",{className:"p-4",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsxs("h3",{className:"text-xl font-orbitron text-white flex items-center gap-2",children:[d.jsx(yc,{className:"w-5 h-5 text-blue-400"}),t.name]}),d.jsx("div",{className:"flex items-center gap-2 mt-2",children:d.jsx("span",{className:`px-2 py-1 rounded-full text-xs
                  ${t.alignment==="light"?"bg-blue-500/20 text-blue-400":"bg-red-500/20 text-red-400"}`,children:t.alignment==="light"?"Light Side":"Dark Side"})})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[o&&d.jsx("button",{onClick:h=>{h.stopPropagation(),o()},className:"p-2 text-blue-400 hover:bg-blue-400/10 rounded-lg",children:d.jsx(Z1,{className:"w-4 h-4"})}),d.jsx("button",{onClick:h=>{h.preventDefault(),h.stopPropagation(),n()},className:"p-2 text-white/60 hover:text-white hover:bg-white/5 rounded-lg",children:e?d.jsx(Y1,{className:"w-4 h-4"}):d.jsx(Q1,{className:"w-4 h-4"})})]})]}),d.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-4",children:[t.capitalShip&&d.jsx(_e,{id:t.capitalShip.id,name:t.capitalShip.name,type:"capital-ship",size:"md",className:"rounded-full border-2 border-blue-400",withTooltip:!0,isCapital:!0}),t.startingLineup.map(h=>d.jsx(_e,{id:h.id,name:h.name,type:"ship",size:"md",className:"rounded-full border-2 border-white/20",withTooltip:!0},h.id)),t.reinforcements.map(h=>d.jsx("div",{className:"relative group opacity-75",children:d.jsx("div",{className:"relative",children:d.jsx(_e,{id:h.id,name:h.name,type:"ship",size:"md",className:"rounded-full border-2 border-white/20",withTooltip:!0})})},h.id))]}),t.callOrder&&d.jsxs("div",{className:"mt-4 p-3 bg-blue-500/10 rounded-lg border border-blue-500/20",children:[d.jsx("h4",{className:"text-sm font-medium text-blue-400 mb-1",children:"Call Order"}),d.jsx("p",{className:"text-sm text-white/70",children:t.callOrder})]}),d.jsx(qt,{children:e&&u.length>0&&d.jsxs(ue.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"mt-6 space-y-4 overflow-hidden",children:[d.jsx("h4",{className:"text-lg font-medium text-white",children:"Counters"}),u.map(h=>d.jsxs("div",{className:"p-4 bg-white/5 rounded-lg space-y-4",children:[d.jsxs("div",{className:"flex justify-between items-start",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:`px-2 py-1 rounded-full text-xs
                          ${h.counterType==="hard"?"bg-green-500/20 text-green-400":h.counterType==="soft"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:h.counterType.charAt(0).toUpperCase()+h.counterType.slice(1)}),h.video_url&&d.jsx(JC,{videoUrl:h.video_url})]}),i&&s&&d.jsx("button",{onClick:()=>s(h.id),className:"p-2 text-red-400 hover:bg-red-400/10 rounded-lg",children:d.jsx(vc,{className:"w-4 h-4"})})]}),d.jsx("p",{className:"text-white/70",children:h.description}),"capitalShip"in h.counterSquad&&d.jsx("div",{className:"mt-4",children:d.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[h.counterSquad.capitalShip&&d.jsxs("div",{className:"relative",children:[d.jsx(_e,{id:h.counterSquad.capitalShip.id,name:h.counterSquad.capitalShip.name,type:"capital-ship",size:"sm",className:"border-2 border-blue-400"}),d.jsx("div",{className:`absolute -top-1 -right-1 w-5 h-5 bg-blue-500 rounded-full \r
                       flex items-center justify-center text-white text-xs`,children:"C"})]}),h.counterSquad.startingLineup.map(f=>d.jsx(_e,{id:f.id,name:f.name,type:"ship",size:"sm",className:"border-2 border-white/20"},f.id)),h.counterSquad.reinforcements.map(f=>d.jsxs("div",{className:"relative",children:[d.jsx(_e,{id:f.id,name:f.name,type:"ship",size:"sm",className:"border-2 border-white/20 opacity-75"}),d.jsx("div",{className:`absolute -top-1 -right-1 w-5 h-5 bg-blue-500 rounded-full \r
                       flex items-center justify-center text-white text-xs`,children:"R"})]},f.id))]})}),h.strategy.length>0&&d.jsxs("div",{className:"space-y-2",children:[d.jsx("h4",{className:"text-sm font-medium text-white/80",children:"Strategy:"}),d.jsx("div",{className:"space-y-3",children:h.strategy.map((f,p)=>d.jsxs("div",{className:"flex gap-3",children:[d.jsx("span",{className:`flex-shrink-0 w-6 h-6 rounded-full bg-blue-500/20 text-blue-400 \r
                                            flex items-center justify-center text-sm`,children:p+1}),d.jsx("p",{className:"text-sm text-white/70",children:f.description})]},f.key))})]})]},h.id))]})}),i&&l&&d.jsx("button",{onClick:h=>{h.stopPropagation(),l(t)},className:"p-2 text-green-400 hover:bg-green-400/10 rounded-lg",children:d.jsx(ci,{className:"w-4 h-4"})})]})})})});tP.displayName="FleetCard";const Xz=({fleets:t,filteredFleets:e,selectedFleetId:n,onSelectFleet:r,getCounters:i,isAdmin:s,onDeleteCounter:o,onViewDetails:a})=>{const l=u=>{r(n===u?null:u)};return!t||t.length===0?d.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-white/60",children:[d.jsx(yc,{className:"w-12 h-12 mb-4 animate-float"}),d.jsx("p",{className:"text-lg",children:"No fleets found"})]}):d.jsx(Vc,{fallback:d.jsx("div",{className:"flex flex-col items-center justify-center p-8",children:d.jsxs("div",{className:"p-6 bg-red-500/10 rounded-lg border border-red-500/20 max-w-md w-full",children:[d.jsx("h3",{className:"text-lg font-medium text-red-400 mb-2",children:"Failed to load fleets"}),d.jsx("p",{className:"text-sm text-red-400/80 mb-4",children:"Please try refreshing the page"}),d.jsxs("button",{onClick:()=>window.location.reload(),className:`flex items-center gap-2 px-4 py-2 rounded-lg \r
                       bg-red-500/20 text-red-400 hover:bg-red-500/30`,children:[d.jsx(Cr,{className:"w-4 h-4"}),"Refresh"]})]})}),children:d.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:d.jsx(qt,{mode:"popLayout",children:e.map(u=>d.jsx(ue.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:d.jsx(tP,{fleet:u,isSelected:n===u.id,onSelect:()=>l(u.id),counters:i(u.id),isFiltered:!0,isAdmin:s,onDeleteCounter:o,onViewDetails:a})},u.id))})})})};/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var nP=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],oh=nP.join(","),rP=typeof Element>"u",As=rP?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,ah=!rP&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},lh=function t(e,n){var r;n===void 0&&(n=!0);var i=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),s=i===""||i==="true",o=s||n&&e&&t(e.parentNode);return o},Jz=function(e){var n,r=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"contenteditable");return r===""||r==="true"},iP=function(e,n,r){if(lh(e))return[];var i=Array.prototype.slice.apply(e.querySelectorAll(oh));return n&&As.call(e,oh)&&i.unshift(e),i=i.filter(r),i},sP=function t(e,n,r){for(var i=[],s=Array.from(e);s.length;){var o=s.shift();if(!lh(o,!1))if(o.tagName==="SLOT"){var a=o.assignedElements(),l=a.length?a:o.children,u=t(l,!0,r);r.flatten?i.push.apply(i,u):i.push({scopeParent:o,candidates:u})}else{var h=As.call(o,oh);h&&r.filter(o)&&(n||!e.includes(o))&&i.push(o);var f=o.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(o),p=!lh(f,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(o));if(f&&p){var v=t(f===!0?o.children:f.children,!0,r);r.flatten?i.push.apply(i,v):i.push({scopeParent:o,candidates:v})}else s.unshift.apply(s,o.children)}}return i},oP=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},Xi=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||Jz(e))&&!oP(e)?0:e.tabIndex},Zz=function(e,n){var r=Xi(e);return r<0&&n&&!oP(e)?0:r},e6=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},aP=function(e){return e.tagName==="INPUT"},t6=function(e){return aP(e)&&e.type==="hidden"},n6=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return n},r6=function(e,n){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===n)return e[r]},i6=function(e){if(!e.name)return!0;var n=e.form||ah(e),r=function(a){return n.querySelectorAll('input[type="radio"][name="'+a+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=r(window.CSS.escape(e.name));else try{i=r(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var s=r6(i,e.form);return!s||s===e},s6=function(e){return aP(e)&&e.type==="radio"},o6=function(e){return s6(e)&&!i6(e)},a6=function(e){var n,r=e&&ah(e),i=(n=r)===null||n===void 0?void 0:n.host,s=!1;if(r&&r!==e){var o,a,l;for(s=!!((o=i)!==null&&o!==void 0&&(a=o.ownerDocument)!==null&&a!==void 0&&a.contains(i)||e!=null&&(l=e.ownerDocument)!==null&&l!==void 0&&l.contains(e));!s&&i;){var u,h,f;r=ah(i),i=(u=r)===null||u===void 0?void 0:u.host,s=!!((h=i)!==null&&h!==void 0&&(f=h.ownerDocument)!==null&&f!==void 0&&f.contains(i))}}return s},SE=function(e){var n=e.getBoundingClientRect(),r=n.width,i=n.height;return r===0&&i===0},l6=function(e,n){var r=n.displayCheck,i=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var s=As.call(e,"details>summary:first-of-type"),o=s?e.parentElement:e;if(As.call(o,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof i=="function"){for(var a=e;e;){var l=e.parentElement,u=ah(e);if(l&&!l.shadowRoot&&i(l)===!0)return SE(e);e.assignedSlot?e=e.assignedSlot:!l&&u!==e.ownerDocument?e=u.host:e=l}e=a}if(a6(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return SE(e);return!1},c6=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var i=n.children.item(r);if(i.tagName==="LEGEND")return As.call(n,"fieldset[disabled] *")?!0:!i.contains(e)}return!0}n=n.parentElement}return!1},ch=function(e,n){return!(n.disabled||lh(n)||t6(n)||l6(n,e)||n6(n)||c6(n))},Pg=function(e,n){return!(o6(n)||Xi(n)<0||!ch(e,n))},u6=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},d6=function t(e){var n=[],r=[];return e.forEach(function(i,s){var o=!!i.scopeParent,a=o?i.scopeParent:i,l=Zz(a,o),u=o?t(i.candidates):a;l===0?o?n.push.apply(n,u):n.push(a):r.push({documentOrder:s,tabIndex:l,item:i,isScope:o,content:u})}),r.sort(e6).reduce(function(i,s){return s.isScope?i.push.apply(i,s.content):i.push(s.content),i},[]).concat(n)},h6=function(e,n){n=n||{};var r;return n.getShadowRoot?r=sP([e],n.includeContainer,{filter:Pg.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:u6}):r=iP(e,n.includeContainer,Pg.bind(null,n)),d6(r)},f6=function(e,n){n=n||{};var r;return n.getShadowRoot?r=sP([e],n.includeContainer,{filter:ch.bind(null,n),flatten:!0,getShadowRoot:n.getShadowRoot}):r=iP(e,n.includeContainer,ch.bind(null,n)),r},Ks=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return As.call(e,oh)===!1?!1:Pg(n,e)},p6=nP.concat("iframe").join(","),Fp=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return As.call(e,p6)===!1?!1:ch(n,e)};/*!
* focus-trap 7.6.2
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function Rg(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function m6(t){if(Array.isArray(t))return Rg(t)}function g6(t,e,n){return(e=x6(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function y6(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function v6(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function AE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?IE(Object(n),!0).forEach(function(r){g6(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):IE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _6(t){return m6(t)||y6(t)||b6(t)||v6()}function w6(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function x6(t){var e=w6(t,"string");return typeof e=="symbol"?e:e+""}function b6(t,e){if(t){if(typeof t=="string")return Rg(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rg(t,e):void 0}}var kE={activateTrap:function(e,n){if(e.length>0){var r=e[e.length-1];r!==n&&r.pause()}var i=e.indexOf(n);i===-1||e.splice(i,1),e.push(n)},deactivateTrap:function(e,n){var r=e.indexOf(n);r!==-1&&e.splice(r,1),e.length>0&&e[e.length-1].unpause()}},E6=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},T6=function(e){return(e==null?void 0:e.key)==="Escape"||(e==null?void 0:e.key)==="Esc"||(e==null?void 0:e.keyCode)===27},Al=function(e){return(e==null?void 0:e.key)==="Tab"||(e==null?void 0:e.keyCode)===9},S6=function(e){return Al(e)&&!e.shiftKey},I6=function(e){return Al(e)&&e.shiftKey},CE=function(e){return setTimeout(e,0)},Wa=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return typeof e=="function"?e.apply(void 0,r):e},Nu=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},A6=[],k6=function(e,n){var r=(n==null?void 0:n.document)||document,i=(n==null?void 0:n.trapStack)||A6,s=AE({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:S6,isKeyBackward:I6},n),o={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},a,l=function(T,F,q){return T&&T[F]!==void 0?T[F]:s[q||F]},u=function(T,F){var q=typeof(F==null?void 0:F.composedPath)=="function"?F.composedPath():void 0;return o.containerGroups.findIndex(function(se){var X=se.container,B=se.tabbableNodes;return X.contains(T)||(q==null?void 0:q.includes(X))||B.find(function(j){return j===T})})},h=function(T){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},q=F.hasFallback,se=q===void 0?!1:q,X=F.params,B=X===void 0?[]:X,j=s[T];if(typeof j=="function"&&(j=j.apply(void 0,_6(B))),j===!0&&(j=void 0),!j){if(j===void 0||j===!1)return j;throw new Error("`".concat(T,"` was specified but was not a node, or did not return a node"))}var K=j;if(typeof j=="string"){try{K=r.querySelector(j)}catch(te){throw new Error("`".concat(T,'` appears to be an invalid selector; error="').concat(te.message,'"'))}if(!K&&!se)throw new Error("`".concat(T,"` as selector refers to no known node"))}return K},f=function(){var T=h("initialFocus",{hasFallback:!0});if(T===!1)return!1;if(T===void 0||T&&!Fp(T,s.tabbableOptions))if(u(r.activeElement)>=0)T=r.activeElement;else{var F=o.tabbableGroups[0],q=F&&F.firstTabbableNode;T=q||h("fallbackFocus")}else T===null&&(T=h("fallbackFocus"));if(!T)throw new Error("Your focus-trap needs to have at least one focusable element");return T},p=function(){if(o.containerGroups=o.containers.map(function(T){var F=h6(T,s.tabbableOptions),q=f6(T,s.tabbableOptions),se=F.length>0?F[0]:void 0,X=F.length>0?F[F.length-1]:void 0,B=q.find(function(te){return Ks(te)}),j=q.slice().reverse().find(function(te){return Ks(te)}),K=!!F.find(function(te){return Xi(te)>0});return{container:T,tabbableNodes:F,focusableNodes:q,posTabIndexesFound:K,firstTabbableNode:se,lastTabbableNode:X,firstDomTabbableNode:B,lastDomTabbableNode:j,nextTabbableNode:function($){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,W=F.indexOf($);return W<0?H?q.slice(q.indexOf($)+1).find(function(ee){return Ks(ee)}):q.slice(0,q.indexOf($)).reverse().find(function(ee){return Ks(ee)}):F[W+(H?1:-1)]}}}),o.tabbableGroups=o.containerGroups.filter(function(T){return T.tabbableNodes.length>0}),o.tabbableGroups.length<=0&&!h("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(o.containerGroups.find(function(T){return T.posTabIndexesFound})&&o.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},v=function(T){var F=T.activeElement;if(F)return F.shadowRoot&&F.shadowRoot.activeElement!==null?v(F.shadowRoot):F},b=function(T){if(T!==!1&&T!==v(document)){if(!T||!T.focus){b(f());return}T.focus({preventScroll:!!s.preventScroll}),o.mostRecentlyFocusedNode=T,E6(T)&&T.select()}},E=function(T){var F=h("setReturnFocus",{params:[T]});return F||(F===!1?!1:T)},A=function(T){var F=T.target,q=T.event,se=T.isBackward,X=se===void 0?!1:se;F=F||Nu(q),p();var B=null;if(o.tabbableGroups.length>0){var j=u(F,q),K=j>=0?o.containerGroups[j]:void 0;if(j<0)X?B=o.tabbableGroups[o.tabbableGroups.length-1].lastTabbableNode:B=o.tabbableGroups[0].firstTabbableNode;else if(X){var te=o.tabbableGroups.findIndex(function(Ce){var nn=Ce.firstTabbableNode;return F===nn});if(te<0&&(K.container===F||Fp(F,s.tabbableOptions)&&!Ks(F,s.tabbableOptions)&&!K.nextTabbableNode(F,!1))&&(te=j),te>=0){var $=te===0?o.tabbableGroups.length-1:te-1,H=o.tabbableGroups[$];B=Xi(F)>=0?H.lastTabbableNode:H.lastDomTabbableNode}else Al(q)||(B=K.nextTabbableNode(F,!1))}else{var W=o.tabbableGroups.findIndex(function(Ce){var nn=Ce.lastTabbableNode;return F===nn});if(W<0&&(K.container===F||Fp(F,s.tabbableOptions)&&!Ks(F,s.tabbableOptions)&&!K.nextTabbableNode(F))&&(W=j),W>=0){var ee=W===o.tabbableGroups.length-1?0:W+1,Ee=o.tabbableGroups[ee];B=Xi(F)>=0?Ee.firstTabbableNode:Ee.firstDomTabbableNode}else Al(q)||(B=K.nextTabbableNode(F))}}else B=h("fallbackFocus");return B},_=function(T){var F=Nu(T);if(!(u(F,T)>=0)){if(Wa(s.clickOutsideDeactivates,T)){a.deactivate({returnFocus:s.returnFocusOnDeactivate});return}Wa(s.allowOutsideClick,T)||T.preventDefault()}},y=function(T){var F=Nu(T),q=u(F,T)>=0;if(q||F instanceof Document)q&&(o.mostRecentlyFocusedNode=F);else{T.stopImmediatePropagation();var se,X=!0;if(o.mostRecentlyFocusedNode)if(Xi(o.mostRecentlyFocusedNode)>0){var B=u(o.mostRecentlyFocusedNode),j=o.containerGroups[B].tabbableNodes;if(j.length>0){var K=j.findIndex(function(te){return te===o.mostRecentlyFocusedNode});K>=0&&(s.isKeyForward(o.recentNavEvent)?K+1<j.length&&(se=j[K+1],X=!1):K-1>=0&&(se=j[K-1],X=!1))}}else o.containerGroups.some(function(te){return te.tabbableNodes.some(function($){return Xi($)>0})})||(X=!1);else X=!1;X&&(se=A({target:o.mostRecentlyFocusedNode,isBackward:s.isKeyBackward(o.recentNavEvent)})),b(se||o.mostRecentlyFocusedNode||f())}o.recentNavEvent=void 0},w=function(T){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;o.recentNavEvent=T;var q=A({event:T,isBackward:F});q&&(Al(T)&&T.preventDefault(),b(q))},P=function(T){(s.isKeyForward(T)||s.isKeyBackward(T))&&w(T,s.isKeyBackward(T))},V=function(T){T6(T)&&Wa(s.escapeDeactivates,T)!==!1&&(T.preventDefault(),a.deactivate())},O=function(T){var F=Nu(T);u(F,T)>=0||Wa(s.clickOutsideDeactivates,T)||Wa(s.allowOutsideClick,T)||(T.preventDefault(),T.stopImmediatePropagation())},I=function(){if(o.active)return kE.activateTrap(i,a),o.delayInitialFocusTimer=s.delayInitialFocus?CE(function(){b(f())}):b(f()),r.addEventListener("focusin",y,!0),r.addEventListener("mousedown",_,{capture:!0,passive:!1}),r.addEventListener("touchstart",_,{capture:!0,passive:!1}),r.addEventListener("click",O,{capture:!0,passive:!1}),r.addEventListener("keydown",P,{capture:!0,passive:!1}),r.addEventListener("keydown",V),a},x=function(){if(o.active)return r.removeEventListener("focusin",y,!0),r.removeEventListener("mousedown",_,!0),r.removeEventListener("touchstart",_,!0),r.removeEventListener("click",O,!0),r.removeEventListener("keydown",P,!0),r.removeEventListener("keydown",V),a},k=function(T){var F=T.some(function(q){var se=Array.from(q.removedNodes);return se.some(function(X){return X===o.mostRecentlyFocusedNode})});F&&b(f())},C=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(k):void 0,D=function(){C&&(C.disconnect(),o.active&&!o.paused&&o.containers.map(function(T){C.observe(T,{subtree:!0,childList:!0})}))};return a={get active(){return o.active},get paused(){return o.paused},activate:function(T){if(o.active)return this;var F=l(T,"onActivate"),q=l(T,"onPostActivate"),se=l(T,"checkCanFocusTrap");se||p(),o.active=!0,o.paused=!1,o.nodeFocusedBeforeActivation=r.activeElement,F==null||F();var X=function(){se&&p(),I(),D(),q==null||q()};return se?(se(o.containers.concat()).then(X,X),this):(X(),this)},deactivate:function(T){if(!o.active)return this;var F=AE({onDeactivate:s.onDeactivate,onPostDeactivate:s.onPostDeactivate,checkCanReturnFocus:s.checkCanReturnFocus},T);clearTimeout(o.delayInitialFocusTimer),o.delayInitialFocusTimer=void 0,x(),o.active=!1,o.paused=!1,D(),kE.deactivateTrap(i,a);var q=l(F,"onDeactivate"),se=l(F,"onPostDeactivate"),X=l(F,"checkCanReturnFocus"),B=l(F,"returnFocus","returnFocusOnDeactivate");q==null||q();var j=function(){CE(function(){B&&b(E(o.nodeFocusedBeforeActivation)),se==null||se()})};return B&&X?(X(E(o.nodeFocusedBeforeActivation)).then(j,j),this):(j(),this)},pause:function(T){if(o.paused||!o.active)return this;var F=l(T,"onPause"),q=l(T,"onPostPause");return o.paused=!0,F==null||F(),x(),D(),q==null||q(),this},unpause:function(T){if(!o.paused||!o.active)return this;var F=l(T,"onUnpause"),q=l(T,"onPostUnpause");return o.paused=!1,F==null||F(),p(),I(),D(),q==null||q(),this},updateContainerElements:function(T){var F=[].concat(T).filter(Boolean);return o.containers=F.map(function(q){return typeof q=="string"?r.querySelector(q):q}),o.active&&p(),D(),this}},a.updateContainerElements(e),a};const C6=({isOpen:t,onClose:e,filters:n,onFilterChange:r})=>{const i=R.useRef(null),s=Object.entries(n).some(([u,h])=>u==="searchTerm"?!1:typeof h=="boolean"?h:h!==null),o=R.useMemo(()=>[{title:"Battle Type",options:[{key:"battleType",value:"team",label:"Squads",icon:d.jsx(P2,{className:"w-4 h-4"})},{key:"battleType",value:"fleet",label:"Fleets",icon:d.jsx(Iy,{className:"w-4 h-4"})}]},{title:"Alignment",options:[{key:"alignment",value:"light",label:"Light Side",icon:d.jsx(C2,{className:"w-4 h-4"})},{key:"alignment",value:"dark",label:"Dark Side",icon:d.jsx(S2,{className:"w-4 h-4"})}]}],[]),a=[{key:"showTWOmicronOnly",label:"TW Omicron Only",description:"Show only teams with Territory Wars Omicron abilities"},{key:"showHardCounters",label:"Hard Counters Only",description:"Show only teams with reliable counter options"},{key:"excludeGL",label:"Exclude Galactic Legends",description:"Hide teams with Galactic Legend characters"}];R.useEffect(()=>{if(t&&i.current){const u=k6(i.current,{escapeDeactivates:!0,allowOutsideClick:!0});return u.activate(),()=>{u.deactivate()}}},[t]);const l=()=>{r("battleType",null),r("alignment",null),r("showTWOmicronOnly",!1),r("showHardCounters",!1),r("excludeGL",!1)};return d.jsx(ue.div,{initial:{opacity:0},animate:{opacity:t?1:0},exit:{opacity:0},transition:{duration:.2},className:`fixed inset-0 bg-black/50 backdrop-blur-sm z-50 ${!t&&"pointer-events-none"}`,children:d.jsxs(ue.div,{ref:i,initial:{x:"100%",opacity:0},animate:{x:t?0:"100%",opacity:t?1:0},transition:{type:"spring",stiffness:300,damping:30},className:`fixed inset-y-0 right-0 w-full max-w-md bg-gradient-to-br \r
                 from-space-darker/90 to-space-dark/90 backdrop-blur-xl\r
                 border-l border-white/10 shadow-2xl rounded-l-2xl\r
                 overflow-hidden z-50`,children:[d.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-white/10",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(w2,{className:`w-5 h-5 ${s?"text-blue-400":"text-white/60"}`}),d.jsx("h2",{className:"text-xl font-orbitron text-white",children:"Filters"})]}),d.jsx(ue.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:e,className:`p-2 text-white/60 hover:text-white hover:bg-white/5 rounded-lg \r
                     transition-colors`,children:d.jsx(Le,{className:"w-5 h-5"})})]}),d.jsx("div",{className:"h-[calc(100vh-80px)] overflow-y-auto custom-scrollbar",children:d.jsxs("div",{className:"p-6 space-y-8",children:[o.map(u=>d.jsxs("div",{className:"space-y-4",children:[d.jsx("h3",{className:"text-sm font-medium text-white/60",children:u.title}),d.jsx("div",{className:"grid grid-cols-2 gap-3",children:u.options.map(h=>d.jsxs(ue.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>r(h.key,n[h.key]===h.value?null:h.value),className:`flex items-center justify-center gap-2 p-3 rounded-lg border 
                              transition-all ${n[h.key]===h.value?"bg-blue-500/20 border-blue-400 text-white shadow-neon-blue":"border-white/10 text-white/60 hover:bg-white/5"}`,children:[h.icon,h.label]},h.value))})]},u.title)),d.jsxs("div",{className:"space-y-4",children:[d.jsx("h3",{className:"text-sm font-medium text-white/60",children:"Additional Options"}),a.map(u=>d.jsxs(ue.label,{whileHover:{scale:1.01},className:`flex items-start gap-3 p-4 rounded-lg border border-white/10 \r
                           hover:bg-white/5 cursor-pointer group`,children:[d.jsx("input",{type:"checkbox",checked:n[u.key],onChange:h=>r(u.key,h.target.checked),className:`mt-1 w-4 h-4 rounded border-white/20 bg-white/5 checked:bg-blue-500 \r
                             checked:border-blue-500 transition-colors`}),d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:"text-white group-hover:text-blue-400 transition-colors",children:u.label}),d.jsx("div",{className:"text-sm text-white/40",children:u.description})]})]},u.key))]})]})}),d.jsx("div",{className:`absolute bottom-0 left-0 right-0 p-6 border-t border-white/10 \r
                      bg-space-darker/90 backdrop-blur-xl`,children:d.jsxs(ue.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:l,disabled:!s,className:`flex items-center justify-center gap-2 w-full p-3 rounded-lg \r
                     bg-white/5 text-white hover:bg-white/10 disabled:opacity-50 \r
                     disabled:cursor-not-allowed transition-colors`,children:[d.jsx(Cr,{className:"w-4 h-4"}),"Reset All Filters"]})})]})})},P6="modulepreload",R6=function(t,e){return new URL(t,e).href},PE={},N6=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(n.map(u=>{if(u=R6(u,r),u in PE)return;PE[u]=!0;const h=u.endsWith(".css"),f=h?'[rel="stylesheet"]':"";if(!!r)for(let b=o.length-1;b>=0;b--){const E=o[b];if(E.href===u&&(!h||E.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${f}`))return;const v=document.createElement("link");if(v.rel=h?"stylesheet":P6,h||(v.as="script"),v.crossOrigin="",v.href=u,l&&v.setAttribute("nonce",l),document.head.appendChild(v),h)return new Promise((b,E)=>{v.addEventListener("load",b),v.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},RE=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,NE=GC,D6=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return NE(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(u=>{const h=n==null?void 0:n[u],f=s==null?void 0:s[u];if(h===null)return null;const p=RE(h)||RE(f);return i[u][p]}),a=n&&Object.entries(n).reduce((u,h)=>{let[f,p]=h;return p===void 0||(u[f]=p),u},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,h)=>{let{class:f,className:p,...v}=h;return Object.entries(v).every(b=>{let[E,A]=b;return Array.isArray(A)?A.includes({...s,...a}[E]):{...s,...a}[E]===A})?[...u,f,p]:u},[]);return NE(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)},V6=D6("relative w-full rounded-lg border border-gray-200 p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-gray-950 dark:border-gray-800 dark:[&>svg]:text-gray-50",{variants:{variant:{default:"bg-white text-gray-950 dark:bg-gray-950 dark:text-gray-50",destructive:"border-red-500/50 text-red-500 dark:border-red-500 [&>svg]:text-red-500 dark:border-red-900/50 dark:text-red-900 dark:dark:border-red-900 dark:[&>svg]:text-red-900"}},defaultVariants:{variant:"default"}}),Sn=R.forwardRef(({className:t,variant:e,...n},r)=>d.jsx("div",{ref:r,role:"alert",className:Zo(V6({variant:e}),t),...n}));Sn.displayName="Alert";const In=R.forwardRef(({className:t,...e},n)=>d.jsx("h5",{ref:n,className:Zo("mb-1 font-medium leading-none tracking-tight",t),...e}));In.displayName="AlertTitle";const An=R.forwardRef(({className:t,...e},n)=>d.jsx("div",{ref:n,className:Zo("text-sm [&_p]:leading-relaxed",t),...e}));An.displayName="AlertDescription";function a0({type:t,isOpen:e,onClose:n,onSelect:r,availableUnits:i,alignment:s,selectionType:o,title:a="Select Unit",isCounterContext:l}){const[u,h]=R.useState(""),f=R.useMemo(()=>i!=null&&i.length?i.filter(v=>{const b=!u||v.name.toLowerCase().includes(u.toLowerCase());if(t==="ship"){const E=v;if(l||o==="capital")return b&&E.isCapital}return b}):[],[i,u,s,t,o,l]);R.useEffect(()=>{var v;console.log("UnitSelector mounted/updated:",{type:t,alignment:s,availableUnitsCount:i.length,selectionType:o,firstUnitName:(v=i[0])==null?void 0:v.name,filteredCount:f.length})},[t,s,i,o,f]),R.useEffect(()=>{console.log("Available Units:",i)},[i]);const p=R.useCallback(v=>{r(v)},[r]);return d.jsx(qt,{children:e&&d.jsx(ue.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[70] flex items-center justify-center",onClick:n,children:d.jsxs(ue.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"w-full max-w-md bg-space-darker rounded-lg border border-white/10",onClick:v=>v.stopPropagation(),children:[d.jsxs("div",{className:"p-4 border-b border-white/10 flex justify-between items-center",children:[d.jsx("h3",{className:"text-lg font-medium text-white",children:a}),d.jsx("button",{onClick:n,className:"p-2 text-white/60 hover:text-white hover:bg-white/5 rounded-lg",children:d.jsx(Le,{className:"w-5 h-5"})})]}),d.jsxs("div",{className:"p-4",children:[d.jsxs("div",{className:"relative mb-4",children:[d.jsx(Ah,{className:"absolute left-3 top-2.5 w-4 h-4 text-white/40"}),d.jsx("input",{type:"text",value:u,onChange:v=>h(v.target.value),className:`w-full pl-10 pr-4 py-2 bg-white/5 border border-white/10 rounded-lg \r
                         text-white placeholder-white/40`,placeholder:`Search ${t}s...`,autoFocus:!0})]}),d.jsx("div",{className:"max-h-[60vh] overflow-y-auto",children:d.jsx("div",{className:"space-y-2",children:f.length>0?f.map(v=>d.jsxs(ue.button,{onClick:()=>p(v),className:`w-full flex items-center gap-3 p-2 hover:bg-white/5 rounded-lg \r
                               text-left transition-colors`,whileHover:{x:4},children:[d.jsx(_e,{id:v.id,name:v.name,type:t==="character"?o==="leader"?"squad-leader":"squad-member":o==="capital"?"capital-ship":"ship",size:"sm",className:"rounded-full border-2 border-blue-500/50",isLeader:o==="leader",isCapital:o==="capital"}),d.jsxs("div",{children:[d.jsx("div",{className:"text-white",children:v.name}),"role"in v&&d.jsx("div",{className:"text-sm text-white/60",children:v.role}),"isCapital"in v&&v.isCapital&&d.jsx("div",{className:"text-sm text-blue-400",children:"Capital Ship"})]})]},v.id)):d.jsx("div",{className:"text-center text-white/60 py-4",children:u.trim()?`No ${t}s found matching "${u}"`:`No ${t}s available`})})})]})]})})})}const j6=({videoUrl:t,title:e,autoplay:n=!1})=>{const[r,i]=R.useState(!1),[s,o]=R.useState(n),l=(f=>{const p=f.match(/(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))([^&?\s]+)/);return p?p[1]:null})(t);if(!l)return null;const u=`https://img.youtube.com/vi/${l}/maxresdefault.jpg`,h=()=>{o(!0)};return d.jsx("div",{className:`relative ${r?"fixed inset-0 z-50 bg-black/90":""}`,children:d.jsxs("div",{className:`relative ${r?"w-full h-full flex items-center justify-center p-4":"w-full aspect-video"}`,children:[s?d.jsx("iframe",{src:`https://www.youtube.com/embed/${l}?autoplay=1`,title:e||"Strategy Guide",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:`rounded-lg ${r?"w-full max-w-6xl aspect-video":"w-full h-full"}`}):d.jsxs("div",{className:"relative w-full aspect-video rounded-lg overflow-hidden group",children:[d.jsx("img",{src:u,alt:e||"Video thumbnail",className:"w-full h-full object-cover"}),d.jsx("div",{className:`absolute inset-0 bg-black/40 flex items-center justify-center\r
                         group-hover:bg-black/60 transition-colors`,children:d.jsx("button",{onClick:h,className:`bg-red-600 text-white rounded-full p-4 transform\r
                         transition-transform group-hover:scale-110`,children:d.jsx(I2,{className:"w-8 h-8"})})}),e&&d.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black/80",children:d.jsx("h3",{className:"text-white font-medium",children:e})})]}),d.jsx("button",{onClick:()=>i(!r),className:`absolute top-2 right-2 p-2 rounded-lg bg-black/50 text-white hover:bg-black/70\r
                   transition-colors`,children:r?d.jsx(Le,{className:"w-5 h-5"}):d.jsx(T2,{className:"w-5 h-5"})})]})})},O6=({isOpen:t,onClose:e,targetDefense:n,onSave:r,onDelete:i,availableUnits:s,existingCounter:o,isFleet:a})=>{var se,X,B;const[l,u]=R.useState(()=>{if(!o)return[];if(a){const j=o.counterSquad;return[j.capitalShip,...j.startingLineup,...j.reinforcements].filter(K=>K!==null)}else{const j=o.counterSquad;return[j.leader,...j.characters||[]].filter(K=>K!==null)}}),[h,f]=R.useState((o==null?void 0:o.counterType)||"hard"),[p,v]=R.useState((o==null?void 0:o.description)||""),[b,E]=R.useState(null),[A,_]=R.useState(!1),[y,w]=R.useState(!1),[P,V]=R.useState({required:(o==null?void 0:o.twOmicronRequired)||!1,comment:(o==null?void 0:o.twOmicronComment)||""}),[O,I]=R.useState((o==null?void 0:o.video_url)||""),[x,k]=R.useState((o==null?void 0:o.datacronRequired)||null),[C,D]=R.useState(((se=o==null?void 0:o.requirements)==null?void 0:se.filter(j=>j.type==="mods").map(j=>{const[K,...te]=j.description.split(":");return{character:K.trim(),description:te.join(":").trim()}}))||[]);R.useEffect(()=>{console.log("CounterEditor received props:",{targetDefenseType:n.type,targetDefenseName:n.name,availableUnitsCount:s.length,hasExistingCounter:!!o,isFleet:a})},[n,s,o,a]),R.useEffect(()=>{if(o)if(f(o.counterType),v(o.description),o.counterSquad.type==="squad"){const j=o.counterSquad;u([j.leader,...j.characters].filter(K=>K!==null))}else{const j=o.counterSquad;u([j.capitalShip,...j.startingLineup,...j.reinforcements].filter(K=>K!==null))}},[o]);const N=async()=>{if(!navigator.onLine){E("Cannot save while offline");return}try{if(w(!0),l.length===0){E("Please select counter units");return}let j;const K={id:(o==null?void 0:o.id)||`counter-${Date.now()}`,counterType:h,description:p.trim(),video_url:O||void 0,strategy:(o==null?void 0:o.strategy)||[]};if(a){const te=l,$=q(te);if($){E($);return}j={...K,targetSquad:n,counterSquad:{id:`fleet-${Date.now()}`,type:"fleet",name:`Counter for ${n.name}`,alignment:n.alignment,capitalShip:te[0],startingLineup:te.slice(1,4),reinforcements:te.slice(4)},requirements:[]}}else j={...K,targetSquad:n,counterSquad:{id:`squad-${Date.now()}`,type:"squad",name:`Counter for ${n.name}`,alignment:n.alignment,leader:l[0],characters:l.slice(1)},twOmicronRequired:P.required,twOmicronComment:P.comment,datacronRequired:x!=null&&x.level?x:void 0,requirements:C.map(te=>({type:"mods",description:`${te.character}: ${te.description}`,priority:"required"}))};await r(j),e()}catch(j){console.error("Error saving counter:",j),E(j instanceof Error?j.message:"Failed to save counter")}finally{w(!1)}},T=async()=>{if(!(!o||!i)){if(!navigator.onLine){E("Cannot delete while offline");return}try{w(!0),await i(o.id),e()}catch(j){console.error("Error deleting counter:",j),E(j instanceof Error?j.message:"Failed to delete counter")}finally{w(!1)}}},F=j=>j===0?"Capital Ship":j>=1&&j<=3?`Starting Ship ${j}`:`Reinforcement ${j-3}`,q=j=>j.length===0?"At least one ship is required":j[0].isCapital?j.length>7?"Maximum of 7 ships allowed":null:"First ship must be a capital ship";return d.jsx(Vc,{fallback:d.jsxs("div",{className:"p-6 bg-red-500/10 rounded-lg border border-red-500/20",children:[d.jsx("h3",{className:"text-lg font-medium text-red-400 mb-2",children:"Counter Editor Error"}),d.jsx("p",{className:"text-sm text-red-400/80 mb-4",children:"An error occurred while editing the counter."}),d.jsxs("div",{className:"flex gap-3",children:[d.jsx("button",{onClick:e,className:`px-4 py-2 rounded-lg bg-white/10 text-white \r
                       hover:bg-white/20`,children:"Close"}),d.jsxs("button",{onClick:()=>window.location.reload(),className:`flex items-center gap-2 px-4 py-2 rounded-lg \r
                       bg-red-500/20 text-red-400 hover:bg-red-500/30`,children:[d.jsx(Cr,{className:"w-4 h-4"}),"Refresh"]})]})]}),children:d.jsxs(ue.div,{initial:{opacity:0},animate:{opacity:t?1:0},exit:{opacity:0},className:`fixed inset-0 z-50 overflow-y-auto ${!t&&"pointer-events-none"}`,children:[d.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:e}),d.jsx("div",{className:"min-h-screen flex items-start justify-center py-8",children:d.jsxs(ue.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"relative w-full max-w-2xl mx-4 bg-space-darker rounded-lg border border-white/10",onClick:j=>j.stopPropagation(),children:[d.jsx("div",{className:"sticky top-0 z-10 bg-space-darker border-b border-white/10 p-4",children:d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("h2",{className:"text-xl font-medium text-white",children:o?"Edit Counter":"Add Counter"}),d.jsx("button",{onClick:e,className:"p-2 text-white/60 hover:text-white",children:d.jsx(Le,{className:"w-5 h-5"})})]})}),d.jsx("div",{className:"max-h-[calc(100vh-theme(spacing.32))] overflow-y-auto custom-scrollbar",children:d.jsxs("div",{className:"p-6 space-y-6",children:[b&&d.jsxs(Sn,{variant:"destructive",children:[d.jsx(Ai,{className:"w-4 h-4"}),d.jsx(In,{children:"Error"}),d.jsx(An,{children:b})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-sm font-medium text-white",children:"Counter Type"}),d.jsx("div",{className:"flex gap-3",children:["hard","soft","risky"].map(j=>d.jsx("button",{onClick:()=>f(j),className:`px-4 py-2 rounded-lg capitalize ${h===j?j==="hard"?"bg-green-500/20 text-green-400":j==="soft"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400":"bg-white/5 text-white/60"}`,children:j},j))})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("label",{className:"text-sm font-medium text-white",children:"Counter Units"}),d.jsx("button",{onClick:()=>_(!0),className:"text-sm text-blue-400 hover:text-blue-300",children:"+ Add Unit"})]}),d.jsx("div",{className:"flex flex-wrap gap-4",children:l.filter(j=>j&&j.id).map((j,K)=>d.jsxs("div",{className:"relative",children:[d.jsx(_e,{id:j.id,name:j.name,type:n.type==="squad"?"squad-member":"ship",size:"md",className:`${K===0&&a?"border-2 border-blue-400":""}`}),a&&d.jsx("div",{className:"absolute -bottom-6 left-1/2 transform -translate-x-1/2 bg-black/90 px-2 py-1 rounded text-xs text-white whitespace-nowrap",children:F(K)}),d.jsx("button",{onClick:()=>u(te=>te.filter(($,H)=>H!==K)),className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center hover:bg-red-600",children:d.jsx(Le,{className:"w-3 h-3 text-white"})})]},j.id))})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-sm font-medium text-white",children:"Description"}),d.jsx("textarea",{value:p,onChange:j=>v(j.target.value),className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white",rows:3,placeholder:"Describe how this counter works..."})]}),!a&&d.jsx(d.Fragment,{children:d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-sm font-medium text-white mb-2",children:"Datacron Requirement (Optional)"}),d.jsxs("div",{className:"flex gap-4",children:[d.jsx("input",{type:"number",min:"1",max:"9",placeholder:"Level",value:(x==null?void 0:x.level)||"",onChange:j=>k({level:parseInt(j.target.value),description:(x==null?void 0:x.description)||""}),className:"w-24 px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white"}),d.jsx("input",{type:"text",placeholder:"Description",value:(x==null?void 0:x.description)||"",onChange:j=>k({level:(x==null?void 0:x.level)||1,description:j.target.value}),className:"flex-1 px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white"})]})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-sm font-medium text-white mb-2",children:"Mod Requirements (Optional)"}),d.jsxs("div",{className:"flex gap-4",children:[d.jsx("input",{type:"text",placeholder:"Character",value:((X=C[0])==null?void 0:X.character)||"",onChange:j=>{var K;return D([{character:j.target.value,description:((K=C[0])==null?void 0:K.description)||""}])},className:"w-1/3 px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white"}),d.jsx("input",{type:"text",placeholder:"Description",value:((B=C[0])==null?void 0:B.description)||"",onChange:j=>{var K;return D([{character:((K=C[0])==null?void 0:K.character)||"",description:j.target.value}])},className:"flex-1 px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white"})]})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("input",{type:"checkbox",id:"twOmicron",checked:P.required,onChange:j=>V({...P,required:j.target.checked}),className:"w-4 h-4 rounded border-white/10 bg-white/5 text-blue-500"}),d.jsx("label",{htmlFor:"twOmicron",className:"text-sm text-white",children:"Requires Territory Wars Omicron"})]})]})}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-sm font-medium text-white",children:"Video Guide URL (Optional)"}),d.jsx("input",{type:"url",value:O,onChange:j=>I(j.target.value),placeholder:"YouTube URL...",className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white"}),O&&d.jsx("div",{className:"mt-2",children:d.jsx(j6,{videoUrl:O})})]}),d.jsxs("div",{className:"flex justify-between gap-3 pt-4",children:[d.jsx("div",{children:o&&i&&d.jsx("button",{onClick:T,disabled:y,className:"px-4 py-2 rounded-lg bg-red-500/20 text-red-400 hover:bg-red-500/30 disabled:opacity-50",children:"Delete Counter"})}),d.jsxs("div",{className:"flex gap-3",children:[d.jsx("button",{onClick:e,disabled:y,className:"px-4 py-2 rounded-lg bg-white/10 text-white hover:bg-white/20 disabled:opacity-50",children:"Cancel"}),d.jsx("button",{onClick:N,disabled:y,className:"px-4 py-2 rounded-lg bg-blue-500 text-white hover:bg-blue-600 disabled:opacity-50",children:y?"Saving...":o?"Update Counter":"Save Counter"})]})]})]})}),A&&d.jsx(a0,{type:n.type==="squad"?"character":"ship",isOpen:A,onClose:()=>_(!1),onSelect:j=>{if(a){const K=j;u(te=>{const $=te;return $.length===0?K.isCapital?[K]:(E("First ship must be a capital ship"),$):$.length<=3?[...$,K]:$.length<=6?[...$,K]:$})}else u(K=>[...K,j]);_(!1)},availableUnits:s,alignment:n.alignment,selectionType:"member"})]})})]})})},L6={validateSquadStructure:t=>!!(t.id&&t.name&&t.alignment&&Array.isArray(t.characters)),validateCharacters:t=>t.every(e=>!!(e.id&&e.name&&e.alignment)),validateLeader:t=>t?!!(t.id&&t.name&&t.alignment):!0,validateCompleteSquad:t=>{var e,n,r;return console.log("Validating squad:",{name:t.name,hasLeader:!!t.leader,leader:t.leader,membersCount:(e=t.characters)==null?void 0:e.length,members:t.characters}),(n=t.name)!=null&&n.trim()?t.leader?(r=t.characters)!=null&&r.length?{isValid:!0,error:null}:{isValid:!1,error:"Squad must have at least one member"}:(console.log("Leader validation failed:",t.leader),{isValid:!1,error:"Squad must have a leader"}):{isValid:!1,error:"Squad name is required"}}};class kl{static async withLock(e,n,r=3e4){return this.locks.get(e)?(console.log(`Operation ${e} is locked, waiting...`),new Promise((i,s)=>{const o=setTimeout(()=>{this.locks.set(e,!1),s(new Error(`Operation ${e} timed out`))},r),a=setInterval(()=>{this.locks.get(e)||(clearInterval(a),clearTimeout(o),this.executeWithLock(e,n).then(i).catch(s))},100)})):this.executeWithLock(e,n)}static async executeWithLock(e,n){try{return console.log(`Acquiring lock for ${e}`),this.locks.set(e,!0),await n()}finally{console.log(`Releasing lock for ${e}`),this.locks.set(e,!1)}}static isLocked(e){return this.locks.get(e)||!1}}Mt(kl,"locks",new Map);class uh{static async add(e,n){console.log(`Adding operation to queue: ${e}`),this.queue.push({operation:n,key:e}),this.isProcessing||await this.processQueue()}static async processQueue(){if(!(this.isProcessing||this.queue.length===0)){for(this.isProcessing=!0,console.log("Starting queue processing");this.queue.length>0;){const e=this.queue.shift();if(e)try{await kl.withLock(e.key,e.operation),console.log(`Successfully processed operation: ${e.key}`)}catch(n){console.error(`Error processing operation ${e.key}:`,n)}}this.isProcessing=!1,console.log("Queue processing completed")}}}Mt(uh,"queue",[]),Mt(uh,"isProcessing",!1);class Cl{static schedule(e,n,r=this.defaultDelay){this.timers.has(e)&&clearTimeout(this.timers.get(e));const i=setTimeout(async()=>{try{await uh.add(e,n),this.timers.delete(e)}catch(s){console.error(`Error in debounced operation ${e}:`,s)}},r);this.timers.set(e,i)}}Mt(Cl,"timers",new Map),Mt(Cl,"defaultDelay",1e3);class Qe{static async checkOnline(){return navigator.onLine}static async handleOperation(e,n){if(!await this.checkOnline())throw new Error("Operation cannot be performed while offline");try{return await e()}catch(i){throw console.error(`${n}:`,i),new Error(n)}}static cleanDataForFirestore(e){if(console.log("cleanDataForFirestore called with:",{type:typeof e,isArray:Array.isArray(e),value:e}),e==null)return null;if(Array.isArray(e))return console.log("Processing array with length:",e.length),e.map(n=>this.cleanDataForFirestore(n));if(typeof e=="object"){console.log("Processing object with keys:",Object.keys(e));const n={};for(const[r,i]of Object.entries(e)){console.log(`Processing key "${r}":`,{type:typeof i,isArray:Array.isArray(i),hasValue:i!=null});const s=this.cleanDataForFirestore(i),o=["characters","leader","startingLineup","reinforcements","capitalShip"].includes(r);(s!==null||o)&&(n[r]=s,console.log(`Saved value for "${r}":`,s))}return n}return e}static async logChange(e){var n,r;try{const i=vn(zr(He,"changes")),s={...e,id:i.id,timestamp:$a(),changes:{...e.changes,[e.entityType]:{old:((n=e.changes[e.entityType])==null?void 0:n.old)||null,new:((r=e.changes[e.entityType])==null?void 0:r.new)||null}}};await is(i,s)}catch(i){console.error("Error logging change:",i)}}static async deleteSquad(e){try{const n=ad(He),r=await this.getCurrentUserId(),i=vn(He,"squads",e),s=await rs(i);if(!s.exists())throw new Error("Squad not found");n.delete(i);const o=pE(zr(He,"counters"),mE("targetSquad.id","==",e));(await Xs(o)).docs.forEach(l=>{n.delete(l.ref)}),await n.commit(),await this.logChange({entityId:e,entityType:"squad",changeType:"delete",userId:r,changes:{squad:{old:s.data(),new:null}}})}catch(n){throw console.error("Error deleting squad:",n),new Error("Failed to delete squad")}}static async addOrUpdateSquad(e){return kl.withLock("squad-sync",async()=>this.handleOperation(async()=>{const n=L6.validateCompleteSquad(e);if(!n.isValid)throw new Error(n.error||"Invalid squad data");const r=await this.getCurrentUserId(),i=await this.documentExists("squads",e.id),s=$a(),o={...e,lastUpdated:s,createdAt:i?void 0:s,updatedBy:r},a=vn(He,"squads",e.id);await is(a,this.cleanDataForFirestore(o))},"Failed to save squad"))}static validateFleetData(e){var i;const n=(i=e.startingLineup)==null?void 0:i.every(s=>s.id&&s.name&&s.alignment),r=!e.capitalShip||e.capitalShip.id&&e.capitalShip.name&&e.capitalShip.alignment;return!!(e.id&&e.name&&e.alignment&&n&&r)}static async addOrUpdateFleet(e){return kl.withLock("fleet-sync",async()=>this.handleOperation(async()=>{if(!this.validateFleetData(e))throw new Error("Invalid fleet data structure");const n=await this.getCurrentUserId(),r=await this.documentExists("fleets",e.id),i=$a(),s={...e,lastUpdated:i,createdAt:r?void 0:i,updatedBy:n},o=vn(He,"fleets",e.id);await is(o,this.cleanDataForFirestore(s))},"Failed to save fleet"))}static async deleteFleet(e){try{const n=ad(He),r=await this.getCurrentUserId(),i=vn(He,"fleets",e),s=await rs(i);if(!s.exists())throw new Error("Fleet not found");n.delete(i);const o=pE(zr(He,"counters"),mE("targetSquad.id","==",e));(await Xs(o)).docs.forEach(l=>{n.delete(l.ref)}),await n.commit(),await this.logChange({entityId:e,entityType:"fleet",changeType:"delete",userId:r,changes:{fleet:{old:s.data(),new:null}}})}catch(n){throw console.error("Error deleting fleet:",n),new Error("Failed to delete fleet")}}static async addOrUpdateCounter(e){return kl.withLock("counter-sync",async()=>this.handleOperation(async()=>{const n=e.id||`counter-${Date.now()}`,r=await this.documentExists("counters",n),i=$a(),s=await this.getCurrentUserId(),o={...e,id:n,lastUpdated:i,createdAt:r?void 0:i,updatedBy:s},a=vn(He,"counters",n);return await is(a,this.cleanDataForFirestore(o)),o},"Failed to save counter"))}static async deleteCounter(e){return this.handleOperation(async()=>{console.log("Starting delete operation for counter:",e);const n=vn(He,"counters",e),r=await rs(n);if(!r.exists()){console.log(`Counter ${e} already deleted or doesn't exist`);return}const i=r.data();console.log("Found counter data:",i);const s=ad(He);s.delete(n);const o=vn(zr(He,"changes")),a=await this.getCurrentUserId();s.set(o,{id:o.id,entityId:e,entityType:"counter",changeType:"delete",userId:a,timestamp:$a(),changes:{counter:{old:i,new:null}}}),await s.commit(),console.log("Successfully deleted counter and created change log")},"Failed to delete counter")}static async getSquads(){try{return(await Xs(zr(He,"squads"))).docs.map(n=>({id:n.id,...n.data()}))}catch(e){throw console.error("Error getting squads:",e),new Error("Failed to get squads")}}static async getFleets(){try{return(await Xs(zr(He,"fleets"))).docs.map(n=>({id:n.id,...n.data()}))}catch(e){throw console.error("Error getting fleets:",e),new Error("Failed to get fleets")}}static async getCounters(){try{return(await Xs(zr(He,"counters"))).docs.map(n=>({id:n.id,...n.data()}))}catch(e){throw console.error("Error getting counters:",e),new Error("Failed to get counters")}}static async documentExists(e,n){const r=vn(He,e,n);return(await rs(r)).exists()}static async syncAllData(){try{const[e,n,r]=await Promise.all([this.getSquads(),this.getFleets(),this.getCounters()]);return{squads:e,fleets:n,counters:r,timestamp:new Date().toISOString()}}catch(e){throw console.error("Error syncing data:",e),new Error("Failed to sync data")}}static async getCurrentUserId(){const e=al.currentUser;if(!e)throw new Error("No authenticated user");return e.uid}}const M6={sm:"w-8 h-8",md:"w-12 h-12",lg:"w-16 h-16"},fa=({size:t="md",variant:e="default"})=>{const n={default:"border-blue-400",light:"border-white/40",dark:"border-gray-600"};return d.jsx(ue.div,{className:`border-2 border-t-transparent rounded-full ${M6[t]} ${n[e]}`,animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}})},lP=R.createContext(null);function F6({children:t}){const[e,n]=R.useState(!1),[r,i]=R.useState(navigator.onLine),[s,o]=R.useState(!0),[a,l]=R.useState(null),[u,h]=R.useState(0);R.useEffect(()=>{(async()=>{try{o(!0),l(null);try{await qC()}catch{throw new Error("Firebase failed to initialize")}await Qe.syncAllData(),n(!0)}catch(v){console.error("Firebase initialization error:",v),l(v instanceof Error?v.message:"Failed to initialize Firebase")}finally{o(!1)}})()},[u]),R.useEffect(()=>{const p=()=>{i(!0)},v=()=>i(!1);return window.addEventListener("online",p),window.addEventListener("offline",v),()=>{window.removeEventListener("online",p),window.removeEventListener("offline",v)}},[]);const f=async()=>{h(p=>p+1)};return s&&!a?d.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-space-darker",children:d.jsxs("div",{className:"text-center",children:[d.jsx(fa,{size:"lg",className:"mb-4"}),d.jsx("p",{className:"text-white/60",children:"Initializing..."})]})}):a?d.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-space-darker",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-red-400 text-xl mb-4",children:a}),d.jsx("button",{onClick:f,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Retry"})]})}):d.jsx(lP.Provider,{value:{isInitialized:e,isOnline:r,isLoading:s,error:a,retry:f},children:d.jsxs("div",{className:"relative",children:[!r&&d.jsx("div",{className:"sticky top-0 bg-yellow-500/90 text-black py-2 px-4 text-center z-50",children:"You are currently offline. Changes will be synced when you reconnect."}),t]})})}function pa(){const t=R.useContext(lP);if(!t)throw new Error("useFirebase must be used within a FirebaseProvider");return t}const Un={SQUADS:"swgoh-tw-squads",FLEETS:"swgoh-tw-fleets",COUNTERS:"swgoh-tw-counters",VERSION:"1.0.0"};class U6{validateData(e){return Array.isArray(e)&&e.every(n=>typeof n=="object"&&n!==null)}async saveData(e,n){try{if(console.log(`Saving data to ${e}:`,n),!this.validateData(n))throw new Error("Invalid data format");const r={data:n,version:Un.VERSION,lastUpdated:new Date().toISOString()};localStorage.setItem(e,JSON.stringify(r)),console.log(`Data saved successfully to ${e}`)}catch(r){throw console.error(`Error saving ${e}:`,r),r}}getData(e,n=[]){try{console.log(`Getting data from ${e}`);const r=localStorage.getItem(e);if(!r)return console.log(`No data found in ${e}, using default value`),n;const i=JSON.parse(r);return Array.isArray(i)?(console.log(`Found legacy data format in ${e}`),i):i.data&&Array.isArray(i.data)?(console.log(`Found data in ${e}:`,i.data),i.data):(console.log(`Invalid data format in ${e}, using default value`),n)}catch(r){return console.error(`Error getting ${e}:`,r),n}}async saveSquads(e){Cl.schedule("save-squads",async()=>{await this.saveData(Un.SQUADS,e),await Qe.addOrUpdateSquad(e[e.length-1])})}getSquads(){return this.getData(Un.SQUADS,[])}async saveFleets(e){Cl.schedule("save-fleets",async()=>{await this.saveData(Un.FLEETS,e),await Qe.addOrUpdateFleet(e[e.length-1])})}getFleets(){return this.getData(Un.FLEETS,[])}async saveCounters(e){Cl.schedule("save-counters",async()=>{await this.saveData(Un.COUNTERS,e),e.length>0&&await Qe.addOrUpdateCounter(e[e.length-1])})}getCounters(){return this.getData(Un.COUNTERS,[])}async clearAllData(){await uh.add("clear-all",async()=>{try{console.log("Clearing all data"),localStorage.removeItem(Un.SQUADS),localStorage.removeItem(Un.FLEETS),localStorage.removeItem(Un.COUNTERS),console.log("All data cleared successfully")}catch(e){throw console.error("Error clearing data:",e),e}})}}const B6=new U6,cP=R.createContext(null);function uP({children:t}){const[e,n]=R.useState(navigator.onLine),[r,i]=R.useState(null),[s,o]=R.useState(!1),[a,l]=R.useState(!1),[u,h]=R.useState(!0),[f,p]=R.useState(null);R.useEffect(()=>{const A=fA(al,async _=>{try{if(_){const w=(await rs(vn(He,"users",_.uid))).data();o((w==null?void 0:w.isAdmin)||!1),l((w==null?void 0:w.isMasterAdmin)||!1),i(_)}else i(null),o(!1),l(!1)}catch(y){console.error("Error checking admin status:",y),p("Failed to verify admin status")}finally{h(!1)}});return()=>A()},[]),R.useEffect(()=>{const A=()=>n(!0),_=()=>n(!1);return window.addEventListener("online",A),window.addEventListener("offline",_),()=>{window.removeEventListener("online",A),window.removeEventListener("offline",_)}},[]);const E={currentUser:r,isAdmin:s,isMasterAdmin:a,login:async(A,_)=>{if(!e)throw new Error("Cannot login while offline");try{p(null);const y=await A4(al,A,_),w=vn(He,"users",y.user.uid);(await rs(w)).exists()?await is(w,{lastLogin:new Date().toISOString()},{merge:!0}):await is(w,{email:y.user.email,isAdmin:!1,isMasterAdmin:!1,createdAt:new Date().toISOString(),lastLogin:new Date().toISOString()});const O=(await rs(w)).data();if(!(O!=null&&O.isAdmin)&&!(O!=null&&O.isMasterAdmin))throw await Xx(al),new Error("Unauthorized access - not an admin user")}catch(y){const w=y;console.error("Login error:",w);let P="Failed to login. Please try again.";throw w.code==="auth/user-not-found"||w.code==="auth/wrong-password"?P="Invalid email or password":w.code==="auth/too-many-requests"&&(P="Too many failed attempts. Please try again later."),p(P),new Error(P)}},logout:async()=>{if(!e)throw new Error("Cannot logout while offline");try{await Xx(al),i(null),o(!1),l(!1),B6.clearAllData()}catch(A){throw console.error("Logout error:",A),p("Failed to logout"),A}},loading:u,error:f};return d.jsx(cP.Provider,{value:E,children:!u&&t})}function l0(){const t=R.useContext(cP);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t}const df=({value:t,onChange:e,label:n=!0})=>{const[r,i]=R.useState(!1),s=()=>{i(!r)},o=a=>{e(a),i(!1)};return d.jsxs("div",{className:"relative",children:[n&&d.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Alignment"}),d.jsxs("button",{type:"button",onClick:s,className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white text-left flex justify-between items-center",children:[d.jsx("span",{children:t==="light"?"Light Side":"Dark Side"}),d.jsx("svg",{className:`w-4 h-4 transition-transform ${r?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),r&&d.jsxs("div",{className:"absolute left-0 right-0 mt-1 bg-space-darker border border-white/10 rounded-lg shadow-lg z-[60]",children:[d.jsx("button",{type:"button",onClick:()=>o("light"),className:"w-full px-3 py-2 text-white hover:bg-white/5 text-left first:rounded-t-lg",children:"Light Side"}),d.jsx("button",{type:"button",onClick:()=>o("dark"),className:"w-full px-3 py-2 text-white hover:bg-white/5 text-left last:rounded-b-lg",children:"Dark Side"})]})]})},z6=({leader:t,members:e,onAddUnit:n,onRemoveUnit:r,alignment:i,showLeaderSelection:s=!0,availableUnits:o})=>{const[a,l]=R.useState(""),[u,h]=R.useState(!1),f=R.useCallback((b,E,A)=>{b.preventDefault(),b.stopPropagation();const _={id:E.id,name:E.name,role:E.role||"",alignment:E.alignment,isGalacticLegend:E.isGalacticLegend||!1};n(_,A),h(!1)},[n]),p=b=>{b.preventDefault(),b.stopPropagation(),h(!0)},v=R.useMemo(()=>{const b=a.toLowerCase(),E=new Set([t==null?void 0:t.id,...e.map(A=>A.id)]);return o.filter(A=>{const _=!a||A.name.toLowerCase().includes(b),y=!E.has(A.id),w=A.alignment===i;return _&&y&&w})},[a,o,t,e,i]);return d.jsxs("div",{className:"space-y-6",onClick:b=>b.stopPropagation(),children:[d.jsxs("div",{className:"relative",children:[d.jsx(Ah,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-white/40"}),d.jsx("input",{type:"text",value:a,onChange:b=>l(b.target.value),onClick:b=>{b.stopPropagation(),h(!0)},className:`w-full pl-10 pr-4 py-2 bg-white/5 border border-white/10 rounded-lg \r
                   text-white placeholder-white/40`,placeholder:"Search characters..."}),u&&d.jsxs(ue.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:`absolute z-50 w-full mt-2 bg-gray-900 border border-white/10 \r
                     rounded-lg shadow-lg max-h-64 overflow-y-auto`,onClick:b=>b.stopPropagation(),children:[d.jsxs("div",{className:"flex justify-between items-center p-2 border-b border-white/10",children:[d.jsx("span",{className:"text-sm text-white/60",children:"Select Character"}),d.jsx("button",{onClick:b=>{b.stopPropagation(),h(!1)},className:"p-1 hover:bg-white/10 rounded",children:d.jsx(Le,{className:"w-4 h-4 text-white/60"})})]}),v.length>0?v.map(b=>d.jsx("div",{className:"p-3 hover:bg-white/5 transition-colors",onClick:E=>E.stopPropagation(),children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(_e,{id:b.id,name:b.name,type:!t&&s?"squad-leader":"squad-member",size:"sm",className:"rounded-full border-2 border-white/20"}),d.jsxs("div",{children:[d.jsx("div",{className:"text-white",children:b.name}),d.jsx("div",{className:"text-sm text-white/60",children:b.role})]})]}),d.jsxs("div",{className:"flex gap-2",children:[s&&!t&&d.jsx("button",{onClick:E=>f(E,b,!0),className:"px-3 py-1 text-sm rounded-md bg-blue-500/20 text-blue-400 hover:bg-blue-500/30",children:"Set as Leader"}),e.length<4&&d.jsx("button",{onClick:E=>f(E,b,!1),className:"px-3 py-1 text-sm rounded-md bg-white/10 text-white hover:bg-white/20",children:"Add Member"})]})]})},b.id)):d.jsx("div",{className:"p-3 text-white/60 text-center",children:"No matching characters found"})]})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsxs("h3",{className:"text-sm font-medium text-white/60 mb-2 flex items-center gap-2",children:[d.jsx(Iy,{className:"w-4 h-4"}),"Leader"]}),d.jsx("div",{className:"relative group inline-block",children:t?d.jsxs("div",{className:"relative",children:[d.jsx(_e,{id:t.id,name:t.name,type:"squad-leader",size:"md",className:"rounded-full border-2 border-blue-400"}),d.jsx("button",{onClick:b=>{b.stopPropagation(),r(t.id,!0)},className:`absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full \r
                           flex items-center justify-center opacity-0 group-hover:opacity-100 \r
                           transition-opacity`,children:d.jsx(Le,{className:"w-3 h-3 text-white"})})]}):d.jsx("button",{onClick:p,className:`w-12 h-12 rounded-full border-2 border-dashed border-blue-400/40 \r
                         flex items-center justify-center hover:border-blue-400/60 \r
                         transition-colors`,children:d.jsx("span",{className:"text-blue-400/60",children:"+"})})})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-sm font-medium text-white/60 mb-2",children:"Squad Members"}),d.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.map(b=>d.jsxs("div",{className:"relative group",children:[d.jsx(_e,{id:b.id,name:b.name,type:"squad-member",size:"md",className:"rounded-full border-2 border-white/20"}),d.jsx("button",{onClick:E=>{E.stopPropagation(),r(b.id,!1)},className:`absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full \r
                           flex items-center justify-center opacity-0 group-hover:opacity-100 \r
                           transition-opacity`,children:d.jsx(Le,{className:"w-3 h-3 text-white"})})]},b.id)),e.length<4&&d.jsx("button",{onClick:p,className:`w-12 h-12 rounded-full border-2 border-dashed border-white/20 \r
                         flex items-center justify-center hover:border-white/40 \r
                         transition-colors`,children:d.jsx("span",{className:"text-white/40",children:"+"})})]})]})]})]})},$6=({onSave:t,onCancel:e,availableUnits:n})=>{const[r,i]=R.useState(""),[s,o]=R.useState("light"),[a,l]=R.useState(null),[u,h]=R.useState([]),[f,p]=R.useState(!1),[v,b]=R.useState(""),[E,A]=R.useState(null),_=y=>{if(y.preventDefault(),A(null),!r.trim()){A("Squad name is required");return}if(!a){A("Squad must have a leader");return}if(u.length===0){A("Squad must have at least one member");return}const w={id:Is(r),name:r.trim(),type:"squad",alignment:s,leader:a,characters:u,description:v.trim()||void 0,twOmicronRequired:f};t(w)};return d.jsxs("form",{onSubmit:_,className:"space-y-6",children:[E&&d.jsxs(Sn,{variant:"destructive",children:[d.jsx(Ai,{className:"w-4 h-4"}),d.jsx(In,{children:"Error"}),d.jsx(An,{children:E})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Squad Name"}),d.jsx("input",{type:"text",value:r,onChange:y=>i(y.target.value),className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white",placeholder:"Enter squad name"})]}),d.jsx("div",{children:d.jsx(df,{value:s,onChange:o})})]}),d.jsx(z6,{leader:a,members:u,onAddUnit:(y,w)=>{w?l(y):u.length<4&&h(P=>[...P,y])},onRemoveUnit:(y,w)=>{w?l(null):h(P=>P.filter(V=>V.id!==y))},alignment:s,availableUnits:n}),d.jsxs("div",{className:"flex items-center",children:[d.jsx("input",{type:"checkbox",id:"twOmicron",checked:f,onChange:y=>p(y.target.checked),className:"w-4 h-4 rounded border-white/10 bg-white/5 text-blue-500"}),d.jsx("label",{htmlFor:"twOmicron",className:"ml-2 text-sm text-white",children:"Requires Territory Wars Omicron"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Description (Optional)"}),d.jsx("textarea",{value:v,onChange:y=>b(y.target.value),className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white resize-none",rows:3,placeholder:"Add any notes or description..."})]}),d.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[d.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 rounded-lg bg-white/10 text-white hover:bg-white/20",children:"Cancel"}),d.jsx("button",{type:"submit",className:"px-4 py-2 rounded-lg bg-blue-500 text-white hover:bg-blue-600",children:"Save Squad"})]})]})},q6=({capitalShip:t,startingLineup:e,reinforcements:n,onAddUnit:r,onRemoveUnit:i,alignment:s,availableUnits:o,isCounterSelector:a=!1})=>{const[l,u]=R.useState(""),[h,f]=R.useState(!1),[p,v]=R.useState("capital"),b=R.useCallback((_,y,w)=>{_.preventDefault(),_.stopPropagation();const P={id:y.id,name:y.name,type:y.type,isCapital:y.isCapital,alignment:y.alignment};r(P,w),f(!1)},[r]),E=(_,y)=>{_.preventDefault(),_.stopPropagation(),v(y),f(!0)},A=R.useMemo(()=>{const _=l.toLowerCase(),y=new Set([t==null?void 0:t.id,...e.map(w=>w.id),...n.map(w=>w.id)]);return o.filter(w=>{const P=!l||w.name.toLowerCase().includes(_),V=!y.has(w.id),O=w.alignment===s;if(a)return P&&V&&O;const I=p==="capital"?w.isCapital:!w.isCapital;return P&&V&&O&&I})},[l,o,t,e,n,s,a,p]);return d.jsxs("div",{className:"space-y-6",onClick:_=>_.stopPropagation(),children:[d.jsxs("div",{className:"relative",children:[d.jsx(Ah,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-white/40"}),d.jsx("input",{type:"text",value:l,onChange:_=>u(_.target.value),onClick:_=>_.stopPropagation(),className:"w-full pl-10 pr-4 py-2 bg-white/5 border border-white/10 rounded-lg text-white placeholder-white/40",placeholder:"Search ships..."}),h&&d.jsxs(ue.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute z-50 w-full mt-2 bg-gray-900 border border-white/10 rounded-lg shadow-lg max-h-64 overflow-y-auto",onClick:_=>_.stopPropagation(),children:[d.jsxs("div",{className:"flex justify-between items-center p-2 border-b border-white/10",children:[d.jsxs("span",{className:"text-sm text-white/60",children:["Select ",p==="capital"?"Capital Ship":"Ship"]}),d.jsx("button",{onClick:_=>{_.stopPropagation(),f(!1)},className:"p-1 hover:bg-white/10 rounded",children:d.jsx(Le,{className:"w-4 h-4 text-white/60"})})]}),A.length>0?A.map(_=>d.jsx("div",{className:"p-3 hover:bg-white/5 transition-colors",onClick:y=>y.stopPropagation(),children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(_e,{id:_.id,name:_.name,type:_.isCapital?"capital-ship":"ship",size:"sm",className:"rounded-full border-2 border-white/20"}),d.jsxs("div",{children:[d.jsx("div",{className:"text-white",children:_.name}),d.jsx("div",{className:"text-sm text-white/60",children:_.isCapital?"Capital Ship":"Ship"})]})]}),d.jsxs("button",{onClick:y=>b(y,_,p),className:"px-3 py-1 text-sm rounded-md bg-blue-500/20 text-blue-400 hover:bg-blue-500/30",children:["Add ",p==="reinforcement"?"Reinforcement":""]})]})},_.id)):d.jsx("div",{className:"p-3 text-white/60 text-center",children:"No matching ships found"})]})]}),d.jsxs("div",{children:[d.jsxs("h3",{className:"text-sm font-medium text-white/60 mb-2 flex items-center gap-2",children:[d.jsx(g2,{className:"w-4 h-4"}),"Capital Ship"]}),d.jsx("div",{className:"relative group inline-block",children:t?d.jsxs("div",{className:"relative",children:[d.jsx(_e,{id:t.id,name:t.name,type:"capital-ship",size:"lg",className:"rounded-full border-2 border-blue-400"}),d.jsx("button",{onClick:_=>{_.stopPropagation(),i(t.id,"capital")},className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:d.jsx(Le,{className:"w-3 h-3 text-white"})})]}):d.jsx("button",{onClick:_=>E(_,"capital"),className:"w-16 h-16 rounded-full border-2 border-dashed border-blue-400/40 flex items-center justify-center hover:border-blue-400/60 transition-colors",children:d.jsx("span",{className:"text-blue-400/60",children:"+"})})})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-sm font-medium text-white/60 mb-2",children:"Starting Lineup"}),d.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.map(_=>d.jsxs("div",{className:"relative group",children:[d.jsx(_e,{id:_.id,name:_.name,type:"ship",size:"md",className:"rounded-full border-2 border-white/20"}),d.jsx("button",{onClick:y=>{y.stopPropagation(),i(_.id,"starting")},className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:d.jsx(Le,{className:"w-3 h-3 text-white"})})]},_.id)),e.length<3&&d.jsx("button",{onClick:_=>E(_,"starting"),className:"w-12 h-12 rounded-full border-2 border-dashed border-white/20 flex items-center justify-center hover:border-white/40 transition-colors",children:d.jsx("span",{className:"text-white/40",children:"+"})})]})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-sm font-medium text-white/60 mb-2",children:"Reinforcements"}),d.jsxs("div",{className:"flex flex-wrap gap-4",children:[n.map((_,y)=>d.jsx("div",{className:"relative group",children:d.jsxs("div",{className:"relative",children:[d.jsx(_e,{id:_.id,name:_.name,type:"ship",size:"md",className:"rounded-full border-2 border-white/20"}),d.jsx("div",{className:"absolute -top-1 -left-1 w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center text-white text-xs",children:y+1}),d.jsx("button",{onClick:w=>{w.stopPropagation(),i(_.id,"reinforcement")},className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:d.jsx(Le,{className:"w-3 h-3 text-white"})})]})},_.id)),n.length<3&&d.jsx("button",{onClick:_=>E(_,"reinforcement"),className:"w-12 h-12 rounded-full border-2 border-dashed border-white/20 flex items-center justify-center hover:border-white/40 transition-colors",children:d.jsx("span",{className:"text-white/40",children:"+"})})]})]})]})},K6=({onSave:t,onCancel:e,availableUnits:n})=>{const[r,i]=R.useState(""),[s,o]=R.useState("light"),[a,l]=R.useState(null),[u,h]=R.useState([]),[f,p]=R.useState([]),[v,b]=R.useState(""),[E,A]=R.useState(null),_=y=>{if(y.preventDefault(),A(null),!r.trim()){A("Fleet name is required");return}if(!a){A("Fleet must have a capital ship");return}if(u.length===0){A("Fleet must have at least one ship in starting lineup");return}const w={id:Is(r),name:r.trim(),type:"fleet",alignment:s,capitalShip:a,startingLineup:u,reinforcements:f,description:v.trim()||void 0};t(w)};return d.jsxs("form",{onSubmit:_,className:"space-y-6",children:[E&&d.jsxs(Sn,{variant:"destructive",children:[d.jsx(Ai,{className:"w-4 h-4"}),d.jsx(In,{children:"Error"}),d.jsx(An,{children:E})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Fleet Name"}),d.jsx("input",{type:"text",value:r,onChange:y=>i(y.target.value),className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white",placeholder:"Enter fleet name"})]}),d.jsx("div",{children:d.jsx(df,{value:s,onChange:o})})]}),d.jsx(q6,{capitalShip:a,startingLineup:u,reinforcements:f,onAddUnit:(y,w)=>{switch(w){case"capital":l(y);break;case"starting":u.length<3&&h(P=>[...P,y]);break;case"reinforcement":f.length<3&&p(P=>[...P,y]);break}},onRemoveUnit:(y,w)=>{switch(w){case"capital":l(null);break;case"starting":h(P=>P.filter(V=>V.id!==y));break;case"reinforcement":p(P=>P.filter(V=>V.id!==y));break}},alignment:s,availableUnits:n}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Description (Optional)"}),d.jsx("textarea",{value:v,onChange:y=>b(y.target.value),className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white resize-none",rows:3,placeholder:"Add any notes or description..."})]}),d.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[d.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 rounded-lg bg-white/10 text-white hover:bg-white/20",children:"Cancel"}),d.jsx("button",{type:"submit",className:"px-4 py-2 rounded-lg bg-blue-500 text-white hover:bg-blue-600",children:"Create Fleet"})]})]})},G6=({isOpen:t,onClose:e,onSave:n,initialType:r="squad",availableUnits:i})=>{const[s,o]=R.useState(r);if(!t)return null;const a=async l=>{try{await n(l),console.log("Defense saved successfully"),e()}catch(u){console.error("Error saving:",u)}};return d.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center overflow-y-auto",children:d.jsxs(ue.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"w-full max-w-2xl mx-4 my-8 bg-space-darker rounded-lg border border-white/10",children:[d.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-white/10",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsxs("button",{onClick:()=>o("squad"),className:`flex items-center gap-2 px-4 py-2 rounded-lg ${s==="squad"?"bg-blue-500":"bg-white/5"}`,children:[d.jsx(Iy,{className:"w-4 h-4"}),"Squad"]}),d.jsxs("button",{onClick:()=>o("fleet"),className:`flex items-center gap-2 px-4 py-2 rounded-lg ${s==="fleet"?"bg-blue-500":"bg-white/5"}`,children:[d.jsx(yc,{className:"w-4 h-4"}),"Fleet"]})]}),d.jsx("button",{onClick:e,className:"p-2 text-white/60 hover:text-white hover:bg-white/5 rounded-lg",children:d.jsx(Le,{className:"w-5 h-5"})})]}),d.jsx("div",{className:"max-h-[calc(100vh-200px)] overflow-y-auto",children:d.jsx("div",{className:"p-6",children:s==="squad"?d.jsx($6,{onSave:a,onCancel:e,availableUnits:i}):d.jsx(K6,{onSave:a,onCancel:e,availableUnits:i})})})]})})},W6=({notifications:t,onDismiss:e})=>d.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:d.jsx(qt,{children:t.map(n=>d.jsxs(ue.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm
              ${n.type==="success"?"bg-green-500/10 text-green-400 border border-green-400/20":"bg-red-500/10 text-red-400 border border-red-400/20"}`,onClick:()=>e(n.id),children:[n.type==="success"?d.jsx(y2,{className:"w-3.5 h-3.5"}):d.jsx(H1,{className:"w-3.5 h-3.5"}),n.message]},n.id))})}),H6=({onClose:t})=>d.jsx(ue.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center",children:d.jsxs(ue.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-space-darker w-full max-w-2xl rounded-lg border border-white/10",children:[d.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-white/10",children:[d.jsx("h2",{className:"text-xl font-bold text-white",children:"Admin Settings"}),d.jsx("button",{onClick:t,className:"p-2 text-green-500 hover:text-green-100 hover:bg-green-500 rounded-lg",children:"Tillbaka"})]}),d.jsx("div",{className:"p-6",children:d.jsx("p",{className:"text-white/60",children:"Här var det tom. Funktionen är för närvarande inaktiverad men kan användas i framtiden."})})]})});class Q6{static cleanDataForFirestore(e){if(e==null)return null;if(Array.isArray(e))return e.map(n=>this.cleanDataForFirestore(n)).filter(n=>n!=null);if(typeof e=="object"){const n={};for(const[r,i]of Object.entries(e)){const s=this.cleanDataForFirestore(i);s!=null&&(n[r]=s)}return n}return e}static async createAdminUser(e){try{console.log("Creating admin user...");const n=vn(He,"users","admin");return await is(n,{email:e,isAdmin:!0,isMasterAdmin:!0,createdAt:new Date().toISOString(),lastLogin:new Date().toISOString()}),console.log("Admin user created successfully"),!0}catch(n){throw console.error("Error creating admin user:",n),n}}static async syncAll(){try{return console.log("Starting full data sync..."),await Promise.all([this.createAdminUser("admin@example.com")]),console.log("All data synced successfully"),!0}catch(e){throw console.error("Error during full sync:",e),e}}static async clearAllData(){try{console.log("Starting data clear...");const e=["squads","fleets","counters"],n=ad(He);for(const r of e)(await Xs(zr(He,r))).forEach(s=>{n.delete(s.ref)});return await n.commit(),console.log("All data cleared successfully"),!0}catch(e){throw console.error("Error clearing data:",e),e}}}const Y6=()=>{const[t,e]=R.useState(!1),[n,r]=R.useState(null),[i,s]=R.useState(!1),[o,a]=R.useState(!1);R.useEffect(()=>{let h;return o&&(h=setTimeout(()=>{a(!1)},4e3)),()=>{h&&clearTimeout(h)}},[o]);const l=async()=>{e(!0),r(null),s(!1),a(!1);try{await Promise.all([Q6.syncAll(),new Promise(h=>setTimeout(h,2e3))]),s(!0),setTimeout(()=>{a(!0),s(!0),setTimeout(()=>{s(!1),a(!1)},4e3)},100)}catch(h){r(h instanceof Error?h.message:"Ett fel uppstod vid synkronisering"),setTimeout(()=>{a(!0),setTimeout(()=>{r(null),a(!1)},4e3)},100)}finally{e(!1)}},u=()=>{if(t)return"bg-gray-500 cursor-not-allowed";if(o){if(i)return"bg-green-500 hover:bg-green-600";if(n)return"bg-red-500 hover:bg-red-600"}return"bg-blue-500 hover:bg-blue-600"};return d.jsxs("div",{className:"relative",children:[d.jsxs(ue.button,{onClick:l,disabled:t,className:`flex items-center gap-2 px-4 py-2 rounded-lg ${u()} 
                   text-white transition-all duration-300`,animate:{scale:t?.98:1},children:[d.jsx(Cr,{className:`w-4 h-4 transition-transform ${t?"animate-spin":""}`}),t?"Syncing...":"Sync Data"]}),d.jsx(qt,{children:(n||i)&&d.jsxs(ue.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"absolute top-full mt-2 right-0 min-w-[200px]",children:[n&&d.jsxs(Sn,{variant:"destructive",children:[d.jsx(In,{children:"Error"}),d.jsx(An,{children:n})]}),i&&d.jsxs(Sn,{className:"bg-green-500/10 border-green-500/20 text-green-400",children:[d.jsx(In,{children:"Success"}),d.jsx(An,{children:"Data synced successfully!"})]})]})})]})},c0=R.memo(({value:t,onChange:e,onClear:n,suggestions:r=[],onSelectSuggestion:i,placeholder:s="Search teams or ships..."})=>{const o=R.useMemo(()=>r.slice(0,10),[r]),[a,l]=R.useState(!1),[u,h]=R.useState({}),f=R.useRef(null);return R.useEffect(()=>{const p=async()=>{const v={};for(const b of o)try{"leader"in b&&b.leader?v[b.leader.id]=await kg(b.leader.id,"character"):"capitalShip"in b&&b.capitalShip&&(v[b.capitalShip.id]=await kg(b.capitalShip.id,"ship"))}catch(E){console.error("Failed to load image for suggestion:",E),v[b.id]="/placeholder.png"}h(v)};o.length>0&&p()},[o]),d.jsxs("div",{className:"relative w-full",children:[d.jsxs("div",{className:"relative",children:[d.jsx("input",{ref:f,type:"text",value:t,onChange:p=>e(p.target.value),onFocus:()=>l(!0),onBlur:()=>setTimeout(()=>l(!1),200),className:`w-full bg-white/5 border border-white/10 rounded-lg pl-10 pr-10 py-2 \r
                   text-white placeholder-white/40 focus:outline-none focus:ring-2 \r
                   focus:ring-blue-400/50 focus:border-transparent`,placeholder:s}),d.jsx(Ah,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-white/40"}),t&&d.jsx("button",{onClick:()=>{var p;n(),(p=f.current)==null||p.focus()},className:`absolute right-3 top-1/2 transform -translate-y-1/2 \r
                     text-white/40 hover:text-white`,children:d.jsx(Le,{className:"w-4 h-4"})})]}),d.jsx(qt,{children:a&&o.length>0&&d.jsx(ue.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:`absolute z-50 w-full mt-2 bg-space-dark border border-white/10 \r
                     rounded-lg shadow-lg overflow-hidden max-h-[300px] overflow-y-auto`,children:o.map(p=>d.jsxs("button",{onClick:()=>i==null?void 0:i(p),className:`w-full px-4 py-3 flex items-center gap-3 hover:bg-white/5 \r
                         transition-colors text-left`,children:["leader"in p&&p.leader?d.jsx("img",{src:u[p.leader.id]||"/placeholder.png",alt:p.leader.name,className:"w-8 h-8 rounded-full object-cover"}):"capitalShip"in p&&p.capitalShip?d.jsx("img",{src:u[p.capitalShip.id]||"/placeholder.png",alt:p.capitalShip.name,className:"w-8 h-8 rounded-full object-cover"}):null,d.jsxs("div",{children:[d.jsx("div",{className:"text-white",children:p.name}),d.jsx("div",{className:"text-sm text-white/40",children:"leader"in p?"Squad":"Fleet"})]})]},p.id))})})]})});c0.displayName="SearchBar";const X6=t=>"leader"in t.counterSquad,hf=({counters:t,targetDefense:e,onEdit:n,onDelete:r})=>{const i=a=>!!(a&&a.id&&a.targetSquad&&a.counterSquad),s=(a,l,u)=>`${a.id}-${l}-${u}`;if(!Array.isArray(t)||t.length===0)return null;const o=t.filter(a=>i(a)&&a.targetSquad.id===e.id);return o.length===0?null:d.jsxs("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto",children:[d.jsxs("h4",{className:"text-sm font-medium text-white/60",children:["Counters for ",e.name]}),d.jsx("div",{className:"space-y-3",children:d.jsx(qt,{children:o.map((a,l)=>{var u;return d.jsxs(ue.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"p-4 bg-white/5 rounded-lg space-y-4",children:[d.jsxs("div",{className:"flex justify-between items-start",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${a.counterType==="hard"?"bg-green-500/20 text-green-400":a.counterType==="soft"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:a.counterType.charAt(0).toUpperCase()+a.counterType.slice(1)}),a.twOmicronRequired&&d.jsx("span",{className:"px-2 py-1 rounded-full text-xs bg-purple-500/20 text-purple-400",children:"TW Omicron"}),a.video_url&&d.jsxs("span",{className:"flex items-center gap-1 px-2 py-1 rounded-full text-xs bg-red-500/20 text-red-400",children:[d.jsx(tS,{className:"w-3 h-3"}),"Video"]})]}),d.jsxs("div",{className:"flex gap-2",children:[n&&d.jsx("button",{onClick:()=>n(a),className:"p-2 text-blue-400 hover:bg-blue-400/10 rounded-lg",children:d.jsx(A2,{className:"w-4 h-4"})}),r&&d.jsx("button",{onClick:()=>r(a.id),className:"p-2 text-red-400 hover:bg-red-400/10 rounded-lg",children:d.jsx(vc,{className:"w-4 h-4"})})]})]}),a.description&&d.jsx("p",{className:"text-white/70",children:a.description}),a.counterSquad&&d.jsx("div",{className:"flex items-center gap-2",children:X6(a)?d.jsxs(d.Fragment,{children:[a.counterSquad.leader&&d.jsx(_e,{id:a.counterSquad.leader.id,name:a.counterSquad.leader.name,type:"squad-leader",size:"sm",className:"border-2 border-blue-400"},s(a,l,a.counterSquad.leader.id)),a.counterSquad.characters.map(h=>d.jsx(_e,{id:h.id,name:h.name,type:"squad-member",size:"sm",className:"border-2 border-white/20"},s(a,l,h.id)))]}):d.jsxs(d.Fragment,{children:["capitalShip"in a.counterSquad&&a.counterSquad.capitalShip&&d.jsx(_e,{id:a.counterSquad.capitalShip.id,name:a.counterSquad.capitalShip.name,type:"capital-ship",size:"sm",className:"border-2 border-blue-400"},s(a,l,a.counterSquad.capitalShip.id)),"startingLineup"in a.counterSquad&&((u=a.counterSquad.startingLineup)==null?void 0:u.map(h=>d.jsx(_e,{id:h.id,name:h.name,type:"ship",size:"sm",className:"border-2 border-white/20"},s(a,l,h.id))))]})}),a.requirements&&a.requirements.length>0&&d.jsxs("div",{className:"mt-3 p-3 bg-blue-500/10 rounded-lg border border-blue-500/20",children:[d.jsx("h4",{className:"text-sm font-medium text-blue-400 mb-2",children:"Requirements"}),a.requirements.map((h,f)=>d.jsx("div",{className:"text-sm text-white/70",children:h.description},`${a.id}-req-${f}`))]})]},a.id)})})})]})},ff=({defense:t,onAddCounter:e,disabled:n=!1})=>d.jsxs("button",{onClick:()=>e(t),disabled:n,className:`flex items-center gap-2 px-4 py-2 rounded-lg 
                ${n?"bg-gray-500/20 text-gray-400 cursor-not-allowed":"bg-green-500/20 text-green-400 hover:bg-green-500/30"} 
                transition-colors`,children:[d.jsx(ci,{className:"w-4 h-4"}),"Add Counter"]}),J6=({squad:t,counters:e,availableUnits:n,onClose:r,onUpdate:i,onDelete:s,onUpdateCounter:o,onDeleteCounter:a,onAddCounter:l,isOnline:u,saving:h=!1})=>{const[f,p]=R.useState(t.name),[v,b]=R.useState(!1),[E,A]=R.useState(t.alignment),[_,y]=R.useState(t.description||""),[w,P]=R.useState(t.twOmicronRequired||!1),[V,O]=R.useState(!1),[I,x]=R.useState("leader"),k=async()=>{if(u)try{const F={...t,name:f,alignment:E,id:Is(f),description:_.trim()||void 0,twOmicronRequired:w};await i(F),r()}catch(F){console.error("Error saving squad:",F)}},C=()=>{s(t.id),r()},D=(F,q)=>{const se={...t};q?se.leader=null:se.characters=se.characters.filter(X=>X.id!==F),i(se)},N=(F,q)=>{const se={...F,id:Is(F.name)},X={...t};q?X.leader=se:X.characters.length<4&&(X.characters=[...X.characters,se]),i(X)},T=e.filter(F=>F.targetSquad.id===t.id);return d.jsxs("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 overflow-y-auto",children:[d.jsx("div",{className:"min-h-full w-full flex items-start justify-center py-8",children:d.jsxs("div",{className:"relative w-full max-w-4xl mx-4 bg-space-darker rounded-lg border border-white/10",children:[d.jsxs("div",{className:"sticky top-0 z-10 flex justify-between items-center p-4 border-b border-white/10 bg-space-darker",children:[d.jsx("h2",{className:"text-xl font-bold text-white",children:"Edit Squad"}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{onClick:()=>b(!0),className:"p-2 text-red-400 hover:bg-red-400/10 rounded-lg",children:d.jsx(vc,{className:"w-5 h-5"})}),d.jsx("button",{onClick:r,className:"p-2 text-white/60 hover:text-white hover:bg-white/5 rounded-lg",children:d.jsx(Le,{className:"w-5 h-5"})})]})]}),d.jsxs("div",{className:"p-6 space-y-6",children:[d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Squad Name"}),d.jsx("input",{type:"text",value:f,onChange:F=>p(F.target.value),className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white"})]}),d.jsx("div",{children:d.jsx(df,{value:E,onChange:A})})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-medium text-white mb-4",children:"Squad Formation"}),d.jsxs("div",{className:"mb-6",children:[d.jsx("h4",{className:"text-sm font-medium text-white/60 mb-2",children:"Leader"}),d.jsxs("div",{className:"flex flex-wrap gap-4",children:[t.leader&&d.jsxs("div",{className:"relative",children:[d.jsx(_e,{id:t.leader.id,name:t.leader.name,type:"squad-leader",size:"lg",className:"border-2 border-blue-400"}),d.jsx("button",{onClick:()=>D(t.leader.id,!0),className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center hover:bg-red-600",children:d.jsx(Le,{className:"w-3 h-3 text-white"})})]}),!t.leader&&d.jsx("button",{onClick:()=>{x("leader"),O(!0)},className:"w-20 h-20 rounded-lg border-2 border-dashed border-blue-500/50 flex items-center justify-center hover:border-blue-500",children:d.jsx(ci,{className:"w-6 h-6 text-blue-500/50"})})]})]}),d.jsxs("div",{children:[d.jsx("h4",{className:"text-sm font-medium text-white/60 mb-2",children:"Squad Members"}),d.jsxs("div",{className:"flex flex-wrap gap-4",children:[t.characters.map(F=>d.jsxs("div",{className:"relative",children:[d.jsx(_e,{id:F.id,name:F.name,type:"squad-member",size:"md",className:"border-2 border-white/20"}),d.jsx("button",{onClick:()=>D(F.id,!1),className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center hover:bg-red-600",children:d.jsx(Le,{className:"w-3 h-3 text-white"})})]},F.id)),t.characters.length<4&&d.jsx("button",{onClick:()=>{x("member"),O(!0)},className:"w-16 h-16 rounded-lg border-2 border-dashed border-white/20 flex items-center justify-center hover:border-white/40",children:d.jsx(ci,{className:"w-4 h-4 text-white/40"})})]})]})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Description (Optional)"}),d.jsx("textarea",{value:_,onChange:F=>y(F.target.value),className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white resize-none",rows:2,placeholder:"Add any additional notes about this squad..."})]}),d.jsxs("div",{className:"flex items-center",children:[d.jsx("input",{type:"checkbox",id:"twOmicron",checked:w,onChange:F=>P(F.target.checked),className:`w-4 h-4 rounded border-white/10 bg-white/5 text-blue-500 \r
                           focus:ring-blue-500 focus:ring-offset-space-darker`}),d.jsx("label",{htmlFor:"twOmicron",className:"ml-2 text-sm text-white",children:"Requires Territory Wars Omicron"})]})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsx("h3",{className:"text-lg font-medium text-white",children:"Counters"}),d.jsx(ff,{defense:t,onAddCounter:()=>l(t)})]}),d.jsx(hf,{counters:T,targetDefense:t,onEdit:o,onDelete:a})]}),d.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[d.jsx("button",{onClick:r,className:"px-4 py-2 rounded-lg bg-white/10 text-white hover:bg-white/20",disabled:h,children:"Cancel"}),d.jsx("button",{onClick:k,disabled:!u||h,className:`px-4 py-2 rounded-lg ${!u||h?"bg-gray-500 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600"} text-white`,children:h?"Saving...":"Save Changes"})]})]})]})}),d.jsx(qt,{children:v&&d.jsx(ue.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[60] flex items-center justify-center",children:d.jsxs(ue.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-space-darker p-6 rounded-lg max-w-md w-full mx-4 border border-white/10",children:[d.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Delete Squad"}),d.jsx("p",{className:"text-white/70 mb-6",children:"Are you sure you want to delete this squad? This action cannot be undone."}),d.jsxs("div",{className:"flex justify-end gap-3",children:[d.jsx("button",{onClick:()=>b(!1),className:"px-4 py-2 rounded-lg bg-white/10 text-white hover:bg-white/20",children:"Cancel"}),d.jsx("button",{onClick:C,className:"px-4 py-2 rounded-lg bg-red-500 text-white hover:bg-red-600",children:"Delete"})]})]})})}),h&&d.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:d.jsx(fa,{size:"lg"})}),V&&d.jsx(a0,{type:"character",isOpen:V,onClose:()=>O(!1),onSelect:F=>{N(F,I==="leader"),O(!1)},availableUnits:n,alignment:t.alignment,selectionType:I,title:`Select ${I==="leader"?"Leader":"Member"}`})]})},Z6=({squads:t,counters:e,availableUnits:n,onUpdate:r,onDelete:i,onAddCounter:s,onEditCounter:o,onDeleteCounter:a})=>{const{isOnline:l,isLoading:u}=pa(),[h,f]=R.useState(!1),[p,v]=R.useState(null),[b,E]=R.useState(null),A=async y=>{if(!l){E("Cannot save while offline");return}try{f(!0),await r(y),E(null)}catch(w){console.error("Error updating squad:",w),E("Failed to update squad")}finally{f(!1)}},_=async y=>{try{await i(y),E(null)}catch(w){console.error("Error deleting squad:",w),E("Failed to delete squad")}};return u?d.jsx("div",{className:"flex justify-center items-center p-8",children:d.jsx(fa,{size:"lg"})}):d.jsxs("div",{className:"space-y-4",children:[!l&&d.jsxs(Sn,{children:[d.jsx(In,{children:"Offline Mode"}),d.jsx(An,{children:"You are currently offline. Changes will be saved when you reconnect."})]}),b&&d.jsxs(Sn,{variant:"destructive",children:[d.jsx(Ai,{className:"w-4 h-4"}),d.jsx(In,{children:"Error"}),d.jsx(An,{children:b})]}),t.map(y=>d.jsxs("div",{className:"p-4 rounded-lg bg-space-dark border border-white/10",children:[d.jsxs("div",{className:"flex justify-between items-start",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsxs("div",{className:"flex items-center space-x-2",children:[y.leader&&d.jsx(_e,{id:y.leader.id,name:y.leader.name,type:"squad-leader",size:"md",className:"border-2 border-blue-400"}),y.characters.map(w=>d.jsx(_e,{id:w.id,name:w.name,type:"squad-member",size:"md",className:"border-2 border-white/20"},w.id))]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-medium text-white",children:y.name}),d.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[d.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs
                    ${y.alignment==="light"?"bg-blue-500/20 text-blue-400":"bg-red-500/20 text-red-400"}`,children:y.alignment==="light"?"Light Side":"Dark Side"}),y.twOmicronRequired&&d.jsx("span",{className:"inline-block px-2 py-1 rounded-full text-xs bg-purple-500/20 text-purple-400",children:"TW Omicron"})]})]})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(ff,{defense:y,onAddCounter:()=>s(y),disabled:!l}),d.jsx("button",{onClick:()=>v(y),className:"p-2 text-blue-400 hover:bg-blue-400/10 rounded-lg",disabled:!l,children:d.jsx(gc,{className:"w-4 h-4"})})]})]}),y.description&&d.jsx("div",{className:"mt-2 text-sm text-white/60",children:y.description}),d.jsx("div",{className:"mt-4",children:d.jsx(hf,{counters:e.filter(w=>w.targetSquad.id===y.id),targetDefense:y,onEdit:o,onDelete:a})})]},y.id)),p&&d.jsx(J6,{squad:p,counters:e,availableUnits:n,onClose:()=>{v(null),E(null)},onUpdate:A,onDelete:_,onUpdateCounter:o,onDeleteCounter:a,onAddCounter:s,isOnline:l,saving:h})]})},e9=({fleet:t,counters:e,availableUnits:n,onClose:r,onUpdate:i,onDelete:s,onUpdateCounter:o,onDeleteCounter:a,onSelectForCounter:l})=>{const[u,h]=R.useState(t.name),[f,p]=R.useState(t.callOrder||""),[v,b]=R.useState(!1),[E,A]=R.useState(t.alignment),[_,y]=R.useState(!1),[w,P]=R.useState("capital"),[V,O]=R.useState(!1),[I,x]=R.useState(null),{isOnline:k}=pa(),C=async()=>{if(!k){x("Cannot save while offline");return}try{O(!0);const q={...t,name:u,alignment:E,id:Is(u),callOrder:f.trim()||void 0};await i(q),r()}catch(q){console.error("Error saving fleet:",q),x("Failed to save fleet")}finally{O(!1)}},D=async()=>{if(!k){x("Cannot delete while offline");return}try{O(!0),await s(t.id),r()}catch(q){console.error("Error deleting fleet:",q),x("Failed to delete fleet")}finally{O(!1)}},N=(q,se)=>{const X={...q,id:Is(q.name)},B={...t};switch(se){case"capital":B.capitalShip=X;break;case"starting":B.startingLineup.length<3&&(B.startingLineup=[...B.startingLineup,X]);break;case"reinforcement":B.reinforcements.length<3&&(B.reinforcements=[...B.reinforcements,X]);break}i(B)},T=(q,se)=>{const X={...t};switch(se){case"capital":X.capitalShip=null;break;case"starting":X.startingLineup=X.startingLineup.filter(B=>B.id!==q);break;case"reinforcement":X.reinforcements=X.reinforcements.filter(B=>B.id!==q);break}i(X)},F=e.filter(q=>q.targetSquad.id===t.id);return d.jsxs("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 overflow-y-auto",children:[d.jsx("div",{className:"min-h-full w-full flex items-start justify-center py-8",children:d.jsxs("div",{className:"relative w-full max-w-4xl mx-4 bg-space-darker rounded-lg border border-white/10",children:[d.jsxs("div",{className:"sticky top-0 z-10 flex justify-between items-center p-4 border-b border-white/10 bg-space-darker",children:[d.jsx("h2",{className:"text-xl font-bold text-white",children:"Edit Fleet"}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{onClick:()=>b(!0),className:"p-2 text-red-400 hover:bg-red-400/10 rounded-lg",children:d.jsx(vc,{className:"w-5 h-5"})}),d.jsx("button",{onClick:r,className:"p-2 text-white/60 hover:text-white hover:bg-white/5 rounded-lg",children:d.jsx(Le,{className:"w-5 h-5"})})]})]}),d.jsxs("div",{className:"p-6 space-y-6",children:[d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Fleet Name"}),d.jsx("input",{type:"text",value:u,onChange:q=>h(q.target.value),className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white"})]}),d.jsx("div",{children:d.jsx(df,{value:E,onChange:A})})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-medium text-white mb-4",children:"Fleet Formation"}),d.jsxs("div",{className:"mb-6",children:[d.jsx("h4",{className:"text-sm font-medium text-white/60 mb-2",children:"Capital Ship"}),d.jsxs("div",{className:"flex flex-wrap gap-4",children:[t.capitalShip&&d.jsxs("div",{className:"relative",children:[d.jsx(_e,{id:t.capitalShip.id,name:t.capitalShip.name,type:"capital-ship",size:"lg",className:"border-2 border-blue-400"}),d.jsx("button",{onClick:()=>T(t.capitalShip.id,"capital"),className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center hover:bg-red-600",children:d.jsx(Le,{className:"w-3 h-3 text-white"})})]}),!t.capitalShip&&d.jsx("button",{onClick:()=>{P("capital"),y(!0)},className:"w-20 h-20 rounded-lg border-2 border-dashed border-blue-500/50 flex items-center justify-center hover:border-blue-500",children:d.jsx(ci,{className:"w-6 h-6 text-blue-500/50"})})]})]}),d.jsxs("div",{className:"mb-6",children:[d.jsx("h4",{className:"text-sm font-medium text-white/60 mb-2",children:"Starting Lineup"}),d.jsxs("div",{className:"flex flex-wrap gap-4",children:[t.startingLineup.map(q=>d.jsxs("div",{className:"relative",children:[d.jsx(_e,{id:q.id,name:q.name,type:"ship",size:"md",className:"border-2 border-white/20"}),d.jsx("button",{onClick:()=>T(q.id,"starting"),className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center hover:bg-red-600",children:d.jsx(Le,{className:"w-3 h-3 text-white"})})]},q.id)),t.startingLineup.length<3&&d.jsx("button",{onClick:()=>{P("starting"),y(!0)},className:"w-16 h-16 rounded-lg border-2 border-dashed border-white/20 flex items-center justify-center hover:border-white/40",children:d.jsx(ci,{className:"w-4 h-4 text-white/40"})})]})]}),d.jsxs("div",{children:[d.jsx("h4",{className:"text-sm font-medium text-white/60 mb-2",children:"Reinforcements"}),d.jsxs("div",{className:"flex flex-wrap gap-4",children:[t.reinforcements.map((q,se)=>d.jsxs("div",{className:"relative",children:[d.jsx(_e,{id:q.id,name:q.name,type:"ship",size:"md",className:"border-2 border-white/20"}),d.jsx("div",{className:"absolute -top-1 -left-1 w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center text-white text-xs",children:se+1}),d.jsx("button",{onClick:()=>T(q.id,"reinforcement"),className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center hover:bg-red-600",children:d.jsx(Le,{className:"w-3 h-3 text-white"})})]},q.id)),t.reinforcements.length<3&&d.jsx("button",{onClick:()=>{P("reinforcement"),y(!0)},className:"w-16 h-16 rounded-lg border-2 border-dashed border-white/20 flex items-center justify-center hover:border-white/40",children:d.jsx(ci,{className:"w-4 h-4 text-white/40"})})]})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Call Order"}),d.jsx("textarea",{value:f,onChange:q=>p(q.target.value),className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white resize-none",rows:2,placeholder:"Enter reinforcement call order strategy..."})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsx("h3",{className:"text-lg font-medium text-white",children:"Counters"}),d.jsx(ff,{defense:t,onAddCounter:()=>l(t),disabled:!k||V})]}),d.jsx(hf,{counters:F,targetDefense:t,onEdit:o,onDelete:a})]}),d.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[d.jsx("button",{onClick:r,className:"px-4 py-2 rounded-lg bg-white/10 text-white hover:bg-white/20",children:"Cancel"}),d.jsx("button",{onClick:C,className:"px-4 py-2 rounded-lg bg-blue-500 text-white hover:bg-blue-600",disabled:!k||V,children:"Save Changes"})]})]})]})}),d.jsx(qt,{children:v&&d.jsx(ue.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[60] flex items-center justify-center",children:d.jsxs(ue.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-space-darker p-6 rounded-lg max-w-md w-full mx-4 border border-white/10",children:[d.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Delete Fleet"}),d.jsx("p",{className:"text-white/70 mb-6",children:"Are you sure you want to delete this fleet? This action cannot be undone."}),d.jsxs("div",{className:"flex justify-end gap-3",children:[d.jsx("button",{onClick:()=>b(!1),className:"px-4 py-2 rounded-lg bg-white/10 text-white hover:bg-white/20",children:"Cancel"}),d.jsx("button",{onClick:D,className:"px-4 py-2 rounded-lg bg-red-500 text-white hover:bg-red-600",disabled:!k||V,children:"Delete"})]})]})})}),_&&d.jsx(a0,{type:"ship",isOpen:_,onClose:()=>y(!1),onSelect:q=>{N(q,w),y(!1)},availableUnits:n,alignment:t.alignment,selectionType:w,title:`Select ${w==="capital"?"Capital Ship":w==="starting"?"Starting Ship":"Reinforcement"}`}),V&&d.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:d.jsx(fa,{size:"lg"})}),I&&d.jsxs(Sn,{variant:"destructive",children:[d.jsx(In,{children:"Error"}),d.jsxs(An,{className:"flex justify-between items-center",children:[I,d.jsx("button",{onClick:()=>x(null),className:"ml-2 text-red-400 hover:text-red-300",children:d.jsx(Le,{className:"w-4 h-4"})})]})]})]})},t9=({fleets:t,counters:e,availableUnits:n,onUpdate:r,onDelete:i,onAddCounter:s,onEditCounter:o,onDeleteCounter:a})=>{const{isOnline:l,isLoading:u}=pa(),[h,f]=R.useState(null),[p,v]=R.useState(!1),[b,E]=R.useState(null),A=async _=>{if(!l){E("Cannot save while offline");return}try{v(!0),await r(_),E(null)}catch(y){throw console.error("Error updating fleet:",y),E("Failed to update fleet"),y}finally{v(!1)}};return u?d.jsx("div",{className:"flex justify-center items-center p-8",children:d.jsx(fa,{size:"lg"})}):d.jsxs("div",{className:"space-y-4",children:[!l&&d.jsxs(Sn,{children:[d.jsx(In,{children:"Offline Mode"}),d.jsx(An,{children:"You are currently offline. Changes will be saved when you reconnect."})]}),b&&d.jsxs(Sn,{variant:"destructive",children:[d.jsx(In,{children:"Error"}),d.jsxs(An,{className:"flex justify-between items-center",children:[b,d.jsx("button",{onClick:()=>E(null),className:"ml-2 text-red-400 hover:text-red-300",children:d.jsx(Le,{className:"w-4 h-4"})})]})]}),t.map(_=>d.jsxs("div",{className:"p-4 rounded-lg bg-space-dark border border-white/10",children:[d.jsxs("div",{className:"flex justify-between items-start",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsxs("div",{className:"flex items-center space-x-2",children:[_.capitalShip&&d.jsx(_e,{id:_.capitalShip.id,name:_.capitalShip.name,type:"capital-ship",size:"md",className:"border-2 border-blue-400"}),_.startingLineup.map(y=>d.jsx(_e,{id:y.id,name:y.name,type:"ship",size:"md",className:"border-2 border-white/20"},y.id))]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-medium text-white",children:_.name}),d.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs mt-1
                    ${_.alignment==="light"?"bg-blue-500/20 text-blue-400":"bg-red-500/20 text-red-400"}`,children:_.alignment==="light"?"Light Side":"Dark Side"})]})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(ff,{defense:_,onAddCounter:()=>s(_),disabled:!l||p}),d.jsx("button",{onClick:()=>f(_),className:"p-2 text-blue-400 hover:bg-blue-400/10 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",disabled:!l||p,children:d.jsx(gc,{className:"w-4 h-4"})})]})]}),_.reinforcements.length>0&&d.jsxs("div",{className:"mt-4 border-t border-white/10 pt-4",children:[d.jsx("span",{className:"text-sm text-white/40 block mb-2",children:"Reinforcements:"}),d.jsx("div",{className:"flex items-center gap-2",children:_.reinforcements.map((y,w)=>d.jsxs("div",{className:"relative",children:[d.jsx(_e,{id:y.id,name:y.name,type:"ship",size:"sm",className:"border-2 border-white/20"}),d.jsx("div",{className:`absolute -top-1 -left-1 w-5 h-5 bg-blue-500 rounded-full \r
                                  flex items-center justify-center text-white text-xs`,children:w+1})]},y.id))})]}),_.callOrder&&d.jsx("div",{className:"mt-2 text-sm text-white/60",children:_.callOrder}),d.jsx("div",{className:"mt-4",children:d.jsx(hf,{counters:e.filter(y=>y.targetSquad.id===_.id),targetDefense:_,onEdit:o,onDelete:a})})]},_.id)),h&&d.jsx(e9,{fleet:h,counters:e,availableUnits:n,onClose:()=>{f(null),E(null)},onUpdate:A,onDelete:i,onUpdateCounter:o,onDeleteCounter:a,onSelectForCounter:s})]})},n9=({error:t,onDismiss:e})=>t?d.jsxs(Sn,{variant:"destructive",className:"mb-4",children:[d.jsx(In,{children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Ai,{className:"w-4 h-4"}),d.jsx("span",{children:"Error"})]}),d.jsx("button",{onClick:e,className:"text-red-400 hover:text-red-300",children:d.jsx(Le,{className:"w-4 h-4"})})]})}),d.jsx(An,{children:t})]}):null,r9=({squads:t,fleets:e,counters:n,onUpdateSquad:r,onDeleteSquad:i,onUpdateFleet:s,onDeleteFleet:o,onAddCounter:a,onDeleteCounter:l,onLogout:u})=>{const[h,f]=R.useState("squads"),[p,v]=R.useState(null),[b,E]=R.useState(!1),[A,_]=R.useState(null),[y,w]=R.useState([]),[P,V]=R.useState([]),[O,I]=R.useState(null),[x,k]=R.useState(!1),{isOnline:C,error:D}=pa(),{isAdmin:N,currentUser:T}=l0(),[F,q]=R.useState([]),[se,X]=R.useState(!1),[B,j]=R.useState(""),[K,te]=R.useState(!1);R.useEffect(()=>{(async()=>{try{const{characters:Pe,ships:jt,capital_ships:Mn}=await N6(async()=>{const{characters:pf,ships:mf,capital_ships:jc}=await import("./initialData-Bghu_pyR.js");return{characters:pf,ships:mf,capital_ships:jc}},[],import.meta.url);console.log("Loading initial units:",{charactersCount:Object.keys(Pe).length,shipsCount:Object.keys(jt).length,capitalShipsCount:Object.keys(Mn).length});const Rr=Object.values(Pe),ma=[...Object.values(jt),...Object.values(Mn)];w(Rr),V(ma),console.log("Units loaded into state:",{charactersLoaded:Rr.length,shipsLoaded:ma.length})}catch(Pe){console.error("Failed to load units:",Pe),v("Failed to load available units")}})()},[]);const $=he=>{const Pe=!("leader"in he),jt=Pe?P:y;console.log("Adding counter for:",{defenseType:Pe?"Fleet":"Squad",defenseName:he.name,availableUnits:jt.length}),_(he),te(Pe),E(!0),v(null)},H=async he=>{if(!C||!N||!T){v("Not authorized or offline");return}try{console.log("AdminDashboard: Saving counter data:",he),await a(he),E(!1),_(null),v(null)}catch(Pe){console.error("Error saving counter:",Pe);const jt=Pe instanceof Error?Pe.message:"Failed to save counter";v(jt)}},W=async he=>{try{console.log("AdminDashboard handling delete for counter:",he),await Qe.deleteCounter(he),l(he)}catch(Pe){console.error("Error deleting counter:",Pe),v("Failed to delete counter")}},ee=(he,Pe)=>{const jt=Date.now().toString();q(Mn=>[...Mn,{id:jt,type:he,message:Pe}]),setTimeout(()=>{q(Mn=>Mn.filter(Rr=>Rr.id!==jt))},3e3)},Ee=R.useCallback(async he=>{try{if(!C){v("Cannot save while offline");return}he.type==="squad"?(await Qe.addOrUpdateSquad(he),r(he),ee("success","Squad saved successfully")):(await Qe.addOrUpdateFleet(he),s(he),ee("success","Fleet saved successfully")),v(null)}catch(Pe){console.error("Error saving defense:",Pe),ee("error","Failed to save defense")}},[C,r,s]),Ce=async he=>{try{localStorage.setItem("adminUsers",JSON.stringify(he.users)),ee("success","Settings saved successfully"),X(!1)}catch{ee("error","Failed to save settings")}},nn=p||D,Vi=async he=>{_(he.targetSquad),E(!0),I(he),v(null)},Ln=()=>{k(!1)};return d.jsx("div",{className:"min-h-screen bg-space-darker",children:d.jsxs("div",{className:"container mx-auto px-4 py-6",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsxs("h1",{className:"text-2xl font-orbitron text-white flex items-center gap-2",children:[d.jsx(J1,{className:"w-6 h-6"}),"Defense Manager"]}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsxs("button",{onClick:()=>k(!0),className:`flex items-center gap-2 px-4 py-2 rounded-lg bg-blue-500 \r
                       text-white hover:bg-blue-600`,children:[d.jsx(ci,{className:"w-4 h-4"}),"Add New Defense"]}),d.jsx(Y6,{}),d.jsx("div",{className:"flex-1"}),d.jsx("button",{onClick:()=>X(!0),className:`p-2 text-blue-400/70 hover:text-blue-400 \r
                       hover:bg-blue-400/10 rounded-lg transition-colors`,children:d.jsx(gc,{className:"w-5 h-5"})}),d.jsxs("button",{onClick:u,className:`flex items-center gap-2 px-4 py-2 rounded-lg \r
                       bg-red-500/20 text-red-400 hover:bg-red-500/30`,children:[d.jsx(eS,{className:"w-4 h-4"}),"Logout"]})]})]}),d.jsx(n9,{error:nn,onDismiss:()=>v(null)}),d.jsxs(Vc,{fallback:d.jsx("div",{className:"min-h-screen bg-space-darker flex items-center justify-center",children:d.jsxs("div",{className:"p-6 bg-red-500/10 rounded-lg border border-red-500/20 max-w-md w-full",children:[d.jsx("h3",{className:"text-lg font-medium text-red-400 mb-2",children:"Admin Dashboard Error"}),d.jsx("p",{className:"text-sm text-red-400/80 mb-4",children:"There was an error loading the admin dashboard. Please try logging in again."}),d.jsxs("div",{className:"flex gap-3",children:[d.jsx("button",{onClick:u,className:`px-4 py-2 rounded-lg bg-red-500/20 text-red-400 \r
                             hover:bg-red-500/30`,children:"Logout"}),d.jsxs("button",{onClick:()=>window.location.reload(),className:`flex items-center gap-2 px-4 py-2 rounded-lg \r
                             bg-blue-500 text-white hover:bg-blue-600`,children:[d.jsx(Cr,{className:"w-4 h-4"}),"Refresh"]})]})]})}),children:[d.jsxs("div",{className:"flex gap-4 mb-6",children:[d.jsxs("button",{onClick:()=>f("squads"),className:`px-4 py-2 rounded-lg flex items-center gap-2 ${h==="squads"?"bg-blue-500 text-white":"bg-white/5 text-white/60"}`,children:[d.jsx(kh,{className:"w-4 h-4"}),"Squad Defense"]}),d.jsxs("button",{onClick:()=>f("fleets"),className:`px-4 py-2 rounded-lg flex items-center gap-2 ${h==="fleets"?"bg-blue-500 text-white":"bg-white/5 text-white/60"}`,children:[d.jsx(yc,{className:"w-4 h-4"}),"Fleet Defense"]})]}),d.jsx("div",{className:"mb-6",children:d.jsx("div",{className:"w-96",children:d.jsx(c0,{value:B,onChange:j,onClear:()=>j(""),placeholder:`Search ${h}...`})})}),d.jsx("div",{className:"space-y-6",children:h==="squads"?d.jsx(Z6,{squads:t.filter(he=>he.name.toLowerCase().includes(B.toLowerCase())),counters:n.filter(he=>"leader"in he.targetSquad),availableUnits:y,onUpdate:r,onDelete:i,onAddCounter:$,onEditCounter:Vi,onDeleteCounter:W}):d.jsx(t9,{fleets:e.filter(he=>he.name.toLowerCase().includes(B.toLowerCase())),counters:n.filter(he=>!("leader"in he.targetSquad)),availableUnits:P,onUpdate:s,onDelete:o,onAddCounter:$,onEditCounter:Vi,onDeleteCounter:W})})]}),b&&A&&d.jsx(O6,{isOpen:b,onClose:()=>{E(!1),_(null),I(null),v(null)},targetDefense:A,onSave:H,onDelete:W,availableUnits:"leader"in A?y:P,existingCounter:O,isFleet:K}),x&&d.jsx(G6,{isOpen:x,onClose:Ln,onSave:Ee,initialType:h==="squads"?"squad":"fleet",availableUnits:h==="squads"?y:P}),se&&d.jsx(H6,{onClose:()=>X(!1),onSave:Ce}),d.jsx(W6,{notifications:F,onDismiss:he=>q(Pe=>Pe.filter(jt=>jt.id!==he))})]})})},i9=({onLogin:t,onClose:e})=>{const[n,r]=R.useState(!1),[i,s]=R.useState({email:"",password:""}),[o,a]=R.useState(!1),{login:l,error:u}=l0(),[h,f]=R.useState(null),[p,v]=R.useState(0);R.useEffect(()=>{u&&f(u)},[u]);const b=async E=>{E.preventDefault(),f(null),a(!0);try{if(p>=5)throw new Error("Too many login attempts. Please try again later.");await l(i.email,i.password),t(!0),e()}catch(A){console.error("Login error:",A),v(_=>_+1),f(A instanceof Error?A.message:"Failed to login")}finally{a(!1)}};return d.jsx(ue.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:d.jsx(ue.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"w-full max-w-md bg-space-darker rounded-lg border border-white/10",children:d.jsxs("div",{className:"p-6",children:[d.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Admin Login"}),d.jsxs("form",{onSubmit:b,className:"space-y-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"block text-sm font-medium text-white",children:"Email"}),d.jsxs("div",{className:"relative",children:[d.jsx("input",{type:"email",value:i.email,onChange:E=>s({...i,email:E.target.value}),className:"w-full pl-10 pr-4 py-2 bg-white/5 border border-white/10 rounded-lg text-white",placeholder:"Enter email",required:!0,disabled:o}),d.jsx(R2,{className:"absolute left-3 top-2.5 h-5 w-5 text-white/40"})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"block text-sm font-medium text-white",children:"Password"}),d.jsxs("div",{className:"relative",children:[d.jsx("input",{type:n?"text":"password",value:i.password,onChange:E=>s({...i,password:E.target.value}),className:"w-full pl-10 pr-12 py-2 bg-white/5 border border-white/10 rounded-lg text-white",placeholder:"Enter password",required:!0,disabled:o}),d.jsx(b2,{className:"absolute left-3 top-2.5 h-5 w-5 text-white/40"}),d.jsx("button",{type:"button",onClick:()=>r(!n),className:"absolute right-3 top-2.5 text-white/40 hover:text-white",disabled:o,children:n?d.jsx(v2,{className:"h-5 w-5"}):d.jsx(_2,{className:"h-5 w-5"})})]})]}),d.jsx(qt,{children:h&&d.jsxs(ue.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:`p-3 rounded-lg bg-red-500/10 border border-red-500/20 \r
                           flex items-start gap-2 text-red-400 text-sm`,children:[d.jsx(H1,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),d.jsx("span",{children:h})]})}),d.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[d.jsx("button",{type:"button",onClick:e,className:`px-4 py-2 rounded-lg bg-white/10 text-white hover:bg-white/20 \r
                         disabled:opacity-50 disabled:cursor-not-allowed`,disabled:o,children:"Cancel"}),d.jsx("button",{type:"submit",disabled:o||p>=5,className:`px-4 py-2 rounded-lg bg-blue-500 text-white hover:bg-blue-600 \r
                         disabled:opacity-50 disabled:cursor-not-allowed relative`,children:o?d.jsxs("span",{className:"flex items-center gap-2",children:[d.jsx(ue.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-4 h-4 border-2 border-white/20 border-t-white rounded-full"}),"Logging in..."]}):"Login"})]}),p>=5&&d.jsx(ue.p,{initial:{opacity:0},animate:{opacity:1},className:"text-sm text-yellow-400 mt-4",children:"Too many login attempts. Please try again later."})]})]})})})},s9=({title:t,subtitle:e,className:n,withAnimation:r=!0,onAction:i,children:s,...o})=>{const a=l=>{(l.key==="Enter"||l.key===" ")&&(l.preventDefault(),i==null||i())};return d.jsxs(ue.div,{role:"region","aria-label":t||"Hero section",tabIndex:0,onKeyDown:a,initial:r?{opacity:0,y:20}:!1,animate:r?{opacity:1,y:0}:!1,transition:{duration:.5},className:Zo("relative overflow-hidden","min-h-[300px] py-16 px-4",n),...o,children:[d.jsx("div",{className:"absolute inset-0 bg-hero-pattern animate-pulse-slow"}),d.jsx("div",{className:"absolute inset-0 bg-grid-pattern bg-grid opacity-20"}),d.jsx(ue.div,{animate:{opacity:[.4,.6,.4],scale:[1,1.2,1]},transition:{duration:4,repeat:1/0,repeatType:"reverse"},className:"absolute inset-0 bg-glow-pattern"}),d.jsxs("div",{className:"relative z-10 container mx-auto",children:[t&&d.jsx(ue.h1,{initial:r?{opacity:0,y:20}:!1,animate:r?{opacity:1,y:0}:!1,transition:{delay:.2},className:`text-4xl md:text-5xl lg:text-6xl font-orbitron text-white \r
                     text-center mb-4 tracking-wider`,children:t}),e&&d.jsx(ue.p,{initial:r?{opacity:0,y:20}:!1,animate:r?{opacity:1,y:0}:!1,transition:{delay:.3},className:"text-xl text-white/80 text-center mb-8 max-w-3xl mx-auto",children:e}),d.jsx(ue.div,{initial:r?{opacity:0,y:20}:!1,animate:r?{opacity:1,y:0}:!1,transition:{delay:.4},children:s})]})]})},DE={showEditor:!1,targetDefense:null,editingCounter:null},o9=R.createContext(void 0),a9=({children:t})=>{const[e,n]=R.useState(DE),{isOnline:r}=pa(),i=R.useCallback(a=>{n(l=>({...l,...a}))},[]),s=R.useCallback(()=>{n(DE)},[]),o=R.useCallback(async a=>{if(!r)throw new Error("Cannot update counter while offline");try{await Qe.addOrUpdateCounter(a),n(l=>({...l,editingCounter:null}))}catch(l){throw console.error("Failed to update counter:",l),l}},[r]);return d.jsx(o9.Provider,{value:{state:e,updateState:i,resetState:s,updateCounter:o},children:t})},l9=R.createContext(null);function c9({children:t}){const[e,n]=R.useState(()=>localStorage.getItem("theme")||"dark");R.useEffect(()=>{localStorage.setItem("theme",e),document.documentElement.classList.toggle("light-theme",e==="light"),document.documentElement.classList.toggle("dark-theme",e==="dark")},[e]);const r=()=>{n(i=>i==="dark"?"light":"dark")};return d.jsx(l9.Provider,{value:{theme:e,toggleTheme:r},children:t})}const u9=()=>d.jsx(Vc,{fallback:d.jsx("div",{className:"min-h-screen bg-space-darker flex items-center justify-center",children:d.jsxs("div",{className:"p-6 bg-red-500/10 rounded-lg border border-red-500/20 max-w-md w-full text-center",children:[d.jsx(Ai,{className:"w-12 h-12 text-red-400 mx-auto mb-4"}),d.jsx("h3",{className:"text-xl font-medium text-red-400 mb-2",children:"Application Error"}),d.jsx("p",{className:"text-sm text-red-400/80 mb-6",children:"We apologize, but something went wrong with the application. Please try refreshing the page."}),d.jsxs("button",{onClick:()=>window.location.reload(),className:`flex items-center gap-2 px-6 py-3 rounded-lg 
                       bg-red-500/20 text-red-400 hover:bg-red-500/30 mx-auto`,children:[d.jsx(Cr,{className:"w-4 h-4"}),"Reload Application"]})]})}),children:d.jsx(F6,{children:d.jsx(uP,{children:d.jsx(c9,{children:d.jsx(a9,{children:d.jsx(d9,{})})})})})});function VE(t,e){return Array.isArray(t)?t.filter(n=>{if(e.searchTerm){const r=e.searchTerm.toLowerCase(),i=n.name.toLowerCase().includes(r);if("characters"in n){const s=n.characters.some(a=>a.name.toLowerCase().includes(r)),o=n.leader&&n.leader.name.toLowerCase().includes(r);if(!i&&!s&&!o)return!1}else if(!i)return!1}return!(e.alignment&&n.alignment!==e.alignment||e.showTWOmicronOnly&&"twOmicronRequired"in n&&!n.twOmicronRequired||e.excludeGL&&"characters"in n&&(n.characters.some(i=>i.isGalacticLegend)||n.leader&&n.leader.isGalacticLegend))}):[]}function d9(){const[t,e]=R.useState(null),{isOnline:n,isLoading:r}=pa(),{isAdmin:i,loading:s,logout:o}=l0(),[a,l]=R.useState(!1),[u,h]=R.useState("squads"),[f,p]=R.useState([]),[v,b]=R.useState([]),[E,A]=R.useState([]),[_,y]=R.useState(null),[w,P]=R.useState(!0),[V,O]=R.useState(!1),[I,x]=R.useState(""),[k,C]=R.useState(!1),[D,N]=R.useState({battleType:null,alignment:null,showTWOmicronOnly:!1,showHardCounters:!1,excludeGL:!1,searchTerm:""});R.useEffect(()=>{(async()=>{P(!0),e(null);try{await qC();const{squads:H,fleets:W,counters:ee}=await Qe.syncAllData();p(H),b(W),A(ee),O(!1)}catch(H){console.error("Failed to initialize app:",H),e("Failed to load application data. Please try again.")}finally{P(!1)}})()},[]);const T=u==="squads"?VE(f,D):[],F=u==="fleets"?VE(v,D):[],q=R.useCallback(($,H)=>!E||!$?[]:E.filter(W=>{var ee,Ee,Ce,nn,Vi;if(H==="squad"){const Ln=((ee=W==null?void 0:W.targetSquad)==null?void 0:ee.id)===$,he=((Ee=W==null?void 0:W.counterSquad)==null?void 0:Ee.id)===$;return Ln||he}else{const Ln=((Ce=W==null?void 0:W.targetSquad)==null?void 0:Ce.id)===$,he=((nn=W==null?void 0:W.counterSquad)==null?void 0:nn.id)===$,Pe="capitalShip"in W.targetSquad&&((Vi=W.targetSquad.capitalShip)==null?void 0:Vi.id)===$;return Ln||he||Pe}}),[E]);R.useEffect(()=>{!w&&V&&(async()=>{try{await Promise.all([...f.map(H=>Qe.addOrUpdateSquad(H)),...v.map(H=>Qe.addOrUpdateFleet(H)),...E.map(H=>Qe.addOrUpdateCounter(H))]),O(!1)}catch(H){console.error("Error saving data:",H)}})()},[f,v,E,w,V]),R.useEffect(()=>{const $=H=>{V&&(H.preventDefault(),H.returnValue="")};return window.addEventListener("beforeunload",$),()=>window.removeEventListener("beforeunload",$)},[V]);const se=()=>{l(!1)},X=async()=>{try{if(V&&!window.confirm("Du har osparade ändringar. Vill du verkligen logga ut?"))return;await o(),l(!1)}catch($){console.error("Error logging out:",$)}},B=($,H)=>{N(W=>({...W,[$]:H})),y(null)},j=$=>{x($),N(H=>({...H,searchTerm:$}))},K=async $=>{if(!n){e("Cannot delete counter while offline");return}try{console.log("Starting delete counter process for:",$),await Qe.deleteCounter($),A(H=>H.filter(W=>W.id!==$)),console.log("Counter removed from local state"),e(null)}catch(H){console.error("Error deleting counter:",H);const W=H instanceof Error?H.message:"Failed to delete counter";W!=="Counter not found"&&e(W)}},te={onUpdateSquad:async $=>{try{await Qe.addOrUpdateSquad($),p(H=>{const W=H.findIndex(ee=>ee.id===$.id);if(W>=0){const ee=[...H];return ee[W]=$,ee}return[...H,$]})}catch(H){console.error("Error updating squad:",H)}},onDeleteSquad:async $=>{if(!n){e("Cannot delete while offline");return}try{const H=E.filter(W=>{var ee,Ee;return(((ee=W==null?void 0:W.targetSquad)==null?void 0:ee.id)===$||((Ee=W==null?void 0:W.counterSquad)==null?void 0:Ee.id)===$)&&(W==null?void 0:W.id)});await Promise.all(H.map(W=>Qe.deleteCounter(W.id))),await Qe.deleteSquad($),A(W=>W.filter(ee=>{var Ee,Ce;return((Ee=ee==null?void 0:ee.targetSquad)==null?void 0:Ee.id)!==$&&((Ce=ee==null?void 0:ee.counterSquad)==null?void 0:Ce.id)!==$})),p(W=>W.filter(ee=>ee.id!==$))}catch(H){console.error("Error deleting squad:",H),e("Failed to delete squad and its counters")}},onUpdateFleet:async $=>{try{await Qe.addOrUpdateFleet($),b(H=>{const W=H.findIndex(ee=>ee.id===$.id);if(W>=0){const ee=[...H];return ee[W]=$,ee}return[...H,$]})}catch(H){console.error("Error updating fleet:",H)}},onDeleteFleet:async $=>{if(!n){e("Cannot delete while offline");return}try{const H=E.filter(W=>{var ee,Ee,Ce;return(((ee=W==null?void 0:W.targetSquad)==null?void 0:ee.id)===$||((Ee=W==null?void 0:W.counterSquad)==null?void 0:Ee.id)===$||(W==null?void 0:W.targetSquad)&&"capitalShip"in W.targetSquad&&((Ce=W.targetSquad.capitalShip)==null?void 0:Ce.id)===$)&&(W==null?void 0:W.id)});await Promise.all(H.map(W=>Qe.deleteCounter(W.id))),await Qe.deleteFleet($),A(W=>W.filter(ee=>{var Ee,Ce,nn;return((Ee=ee==null?void 0:ee.targetSquad)==null?void 0:Ee.id)!==$&&((Ce=ee==null?void 0:ee.counterSquad)==null?void 0:Ce.id)!==$&&!("capitalShip"in(ee==null?void 0:ee.targetSquad)&&((nn=ee.targetSquad.capitalShip)==null?void 0:nn.id)===$)})),b(W=>W.filter(ee=>ee.id!==$))}catch(H){console.error("Error deleting fleet:",H),e("Failed to delete fleet and its counters")}},onAddCounter:async $=>{try{const H={...$,id:`counter-${Date.now()}`},W=await Qe.addOrUpdateCounter(H);A(ee=>ee.filter(Ee=>Ee.id!==W.id).concat(W))}catch(H){console.error("Error adding counter:",H)}},onDeleteCounter:async $=>{if(!n){e("Cannot delete counter while offline");return}try{console.log("Starting delete counter process for:",$),await Qe.deleteCounter($),A(H=>H.filter(W=>W.id!==$)),console.log("Counter deleted and state updated")}catch(H){console.error("Error deleting counter:",H);const W=H instanceof Error?H.message:"Failed to delete counter";e(W)}},onUpdateCounter:async $=>{try{await Qe.addOrUpdateCounter($),A(H=>{const W=H.findIndex(ee=>ee.id===$.id);if(W>=0){const ee=[...H];return ee[W]=$,ee}return H})}catch(H){console.error("Error updating counter:",H)}}};return r||s||w?d.jsx("div",{className:"min-h-screen bg-space-black flex items-center justify-center",children:d.jsxs("div",{className:"flex flex-col items-center gap-4",children:[d.jsx(fa,{size:"lg"}),d.jsx("p",{className:"text-white/60",children:"Loading application data..."})]})}):t?d.jsx("div",{className:"min-h-screen bg-space-black flex items-center justify-center",children:d.jsxs("div",{className:"p-6 bg-red-500/10 rounded-lg border border-red-500/20 max-w-md w-full text-center",children:[d.jsx(Ai,{className:"w-12 h-12 text-red-400 mx-auto mb-4"}),d.jsx("h3",{className:"text-xl font-medium text-red-400 mb-2",children:"Application Error"}),d.jsx("p",{className:"text-sm text-red-400/80 mb-6",children:t}),d.jsxs("button",{onClick:()=>window.location.reload(),className:`flex items-center gap-2 px-6 py-3 rounded-lg 
                     bg-red-500/20 text-red-400 hover:bg-red-500/30 mx-auto`,children:[d.jsx(Cr,{className:"w-4 h-4"}),"Retry Loading"]})]})}):d.jsxs("div",{className:"min-h-screen bg-space-black text-white",children:[!n&&d.jsx("div",{className:"fixed top-0 left-0 right-0 bg-yellow-500/90 text-black py-2 px-4 text-center z-50",children:"Du är offline. Ändringar kommer att synkroniseras när du återansluter."}),d.jsxs("div",{className:"min-h-screen bg-space-gradient bg-fixed",children:[d.jsx(qt,{mode:"wait",children:i?d.jsx(ue.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:d.jsx(r9,{squads:f,fleets:v,counters:E,...te,onLogout:X})},"admin-interface"):d.jsxs(ue.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[d.jsx(XO,{isAdmin:i,onAdminClick:()=>l(!0),onLogout:X}),d.jsx(s9,{title:"SWGOH Territory Wars",subtitle:"Find the perfect counter for any squad or fleet",children:d.jsx(JO,{activeView:u,onViewChange:h,onOptionsClick:()=>C(!0),filters:D,children:d.jsx(c0,{value:I,onChange:j,onClear:()=>j(""),suggestions:u==="squads"?T:F,onSelectSuggestion:$=>{y($.id),j("")},placeholder:`Search ${u==="squads"?"teams":"fleets"}...`})})}),d.jsx("main",{className:"container mx-auto px-4 py-8",children:d.jsx(qt,{mode:"wait",children:w?d.jsx(ue.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex justify-center items-center min-h-[400px]",children:d.jsx(ue.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-12 h-12 border-4 border-saber-blue-400/50 border-t-saber-blue-400 rounded-full"})},"loading"):d.jsx(ue.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:u==="squads"?d.jsx(Yz,{squads:f,filteredSquads:T,selectedSquadId:_,onSelectSquad:y,getCounters:$=>q($,"squad"),isAdmin:i,onDeleteCounter:K,onViewDetails:()=>{}}):d.jsx(Xz,{fleets:v,filteredFleets:F,selectedFleetId:_,onSelectFleet:y,getCounters:$=>q($,"fleet"),isAdmin:i,onDeleteCounter:K,onViewDetails:()=>{}})},`content-${u}`)})}),d.jsx(C6,{isOpen:k,onClose:()=>C(!1),filters:D,onFilterChange:B})]},"user-interface")}),a&&d.jsx(i9,{onLogin:se,onClose:()=>l(!1)})]})]})}W1(document.getElementById("root")).render(d.jsx(R.StrictMode,{children:d.jsx(uP,{children:d.jsx(u9,{})})}));
//# sourceMappingURL=index-IL1QxwiN.js.map
