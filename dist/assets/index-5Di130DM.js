var zP=Object.defineProperty;var $P=(t,e,n)=>e in t?zP(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var nn=(t,e,n)=>$P(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function qP(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var LE={exports:{}},dh={},ME={exports:{}},me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cc=Symbol.for("react.element"),KP=Symbol.for("react.portal"),GP=Symbol.for("react.fragment"),WP=Symbol.for("react.strict_mode"),HP=Symbol.for("react.profiler"),QP=Symbol.for("react.provider"),YP=Symbol.for("react.context"),XP=Symbol.for("react.forward_ref"),JP=Symbol.for("react.suspense"),ZP=Symbol.for("react.memo"),eR=Symbol.for("react.lazy"),l_=Symbol.iterator;function tR(t){return t===null||typeof t!="object"?null:(t=l_&&t[l_]||t["@@iterator"],typeof t=="function"?t:null)}var FE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},UE=Object.assign,BE={};function Zo(t,e,n){this.props=t,this.context=e,this.refs=BE,this.updater=n||FE}Zo.prototype.isReactComponent={};Zo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Zo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function zE(){}zE.prototype=Zo.prototype;function Dg(t,e,n){this.props=t,this.context=e,this.refs=BE,this.updater=n||FE}var Vg=Dg.prototype=new zE;Vg.constructor=Dg;UE(Vg,Zo.prototype);Vg.isPureReactComponent=!0;var c_=Array.isArray,$E=Object.prototype.hasOwnProperty,jg={current:null},qE={key:!0,ref:!0,__self:!0,__source:!0};function KE(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)$E.call(e,r)&&!qE.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:cc,type:t,key:s,ref:o,props:i,_owner:jg.current}}function nR(t,e){return{$$typeof:cc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Og(t){return typeof t=="object"&&t!==null&&t.$$typeof===cc}function rR(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var u_=/\/+/g;function Of(t,e){return typeof t=="object"&&t!==null&&t.key!=null?rR(""+t.key):e.toString(36)}function Nu(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case cc:case KP:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Of(o,0):r,c_(i)?(n="",t!=null&&(n=t.replace(u_,"$&/")+"/"),Nu(i,e,n,"",function(u){return u})):i!=null&&(Og(i)&&(i=nR(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(u_,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",c_(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Of(s,a);o+=Nu(s,e,n,l,i)}else if(l=tR(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Of(s,a++),o+=Nu(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Xc(t,e,n){if(t==null)return t;var r=[],i=0;return Nu(t,r,"","",function(s){return e.call(n,s,i++)}),r}function iR(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var $t={current:null},Du={transition:null},sR={ReactCurrentDispatcher:$t,ReactCurrentBatchConfig:Du,ReactCurrentOwner:jg};function GE(){throw Error("act(...) is not supported in production builds of React.")}me.Children={map:Xc,forEach:function(t,e,n){Xc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Xc(t,function(){e++}),e},toArray:function(t){return Xc(t,function(e){return e})||[]},only:function(t){if(!Og(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};me.Component=Zo;me.Fragment=GP;me.Profiler=HP;me.PureComponent=Dg;me.StrictMode=WP;me.Suspense=JP;me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sR;me.act=GE;me.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=UE({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=jg.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)$E.call(e,l)&&!qE.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:cc,type:t.type,key:i,ref:s,props:r,_owner:o}};me.createContext=function(t){return t={$$typeof:YP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:QP,_context:t},t.Consumer=t};me.createElement=KE;me.createFactory=function(t){var e=KE.bind(null,t);return e.type=t,e};me.createRef=function(){return{current:null}};me.forwardRef=function(t){return{$$typeof:XP,render:t}};me.isValidElement=Og;me.lazy=function(t){return{$$typeof:eR,_payload:{_status:-1,_result:t},_init:iR}};me.memo=function(t,e){return{$$typeof:ZP,type:t,compare:e===void 0?null:e}};me.startTransition=function(t){var e=Du.transition;Du.transition={};try{t()}finally{Du.transition=e}};me.unstable_act=GE;me.useCallback=function(t,e){return $t.current.useCallback(t,e)};me.useContext=function(t){return $t.current.useContext(t)};me.useDebugValue=function(){};me.useDeferredValue=function(t){return $t.current.useDeferredValue(t)};me.useEffect=function(t,e){return $t.current.useEffect(t,e)};me.useId=function(){return $t.current.useId()};me.useImperativeHandle=function(t,e,n){return $t.current.useImperativeHandle(t,e,n)};me.useInsertionEffect=function(t,e){return $t.current.useInsertionEffect(t,e)};me.useLayoutEffect=function(t,e){return $t.current.useLayoutEffect(t,e)};me.useMemo=function(t,e){return $t.current.useMemo(t,e)};me.useReducer=function(t,e,n){return $t.current.useReducer(t,e,n)};me.useRef=function(t){return $t.current.useRef(t)};me.useState=function(t){return $t.current.useState(t)};me.useSyncExternalStore=function(t,e,n){return $t.current.useSyncExternalStore(t,e,n)};me.useTransition=function(){return $t.current.useTransition()};me.version="18.3.1";ME.exports=me;var R=ME.exports;const oR=qP(R);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aR=R,lR=Symbol.for("react.element"),cR=Symbol.for("react.fragment"),uR=Object.prototype.hasOwnProperty,dR=aR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,hR={key:!0,ref:!0,__self:!0,__source:!0};function WE(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)uR.call(e,r)&&!hR.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:lR,type:t,key:s,ref:o,props:i,_owner:dR.current}}dh.Fragment=cR;dh.jsx=WE;dh.jsxs=WE;LE.exports=dh;var d=LE.exports,HE={exports:{}},fn={},QE={exports:{}},YE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,j){var K=B.length;B.push(j);e:for(;0<K;){var Z=K-1>>>1,$=B[Z];if(0<i($,j))B[Z]=j,B[K]=$,K=Z;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var j=B[0],K=B.pop();if(K!==j){B[0]=K;e:for(var Z=0,$=B.length,W=$>>>1;Z<W;){var te=2*(Z+1)-1,de=B[te],tt=te+1,st=B[tt];if(0>i(de,K))tt<$&&0>i(st,de)?(B[Z]=st,B[tt]=K,Z=tt):(B[Z]=de,B[te]=K,Z=te);else if(tt<$&&0>i(st,K))B[Z]=st,B[tt]=K,Z=tt;else break e}}return j}function i(B,j){var K=B.sortIndex-j.sortIndex;return K!==0?K:B.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,f=null,p=3,v=!1,b=!1,T=!1,A=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(B){for(var j=n(u);j!==null;){if(j.callback===null)r(u);else if(j.startTime<=B)r(u),j.sortIndex=j.expirationTime,e(l,j);else break;j=n(u)}}function P(B){if(T=!1,w(B),!b)if(n(l)!==null)b=!0,ie(V);else{var j=n(u);j!==null&&Q(P,j.startTime-B)}}function V(B,j){b=!1,T&&(T=!1,_(x),x=-1),v=!0;var K=p;try{for(w(j),f=n(l);f!==null&&(!(f.expirationTime>j)||B&&!D());){var Z=f.callback;if(typeof Z=="function"){f.callback=null,p=f.priorityLevel;var $=Z(f.expirationTime<=j);j=t.unstable_now(),typeof $=="function"?f.callback=$:f===n(l)&&r(l),w(j)}else r(l);f=n(l)}if(f!==null)var W=!0;else{var te=n(u);te!==null&&Q(P,te.startTime-j),W=!1}return W}finally{f=null,p=K,v=!1}}var O=!1,I=null,x=-1,k=5,C=-1;function D(){return!(t.unstable_now()-C<k)}function N(){if(I!==null){var B=t.unstable_now();C=B;var j=!0;try{j=I(!0,B)}finally{j?E():(O=!1,I=null)}}else O=!1}var E;if(typeof y=="function")E=function(){y(N)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,q=F.port2;F.port1.onmessage=N,E=function(){q.postMessage(null)}}else E=function(){A(N,0)};function ie(B){I=B,O||(O=!0,E())}function Q(B,j){x=A(function(){B(t.unstable_now())},j)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){b||v||(b=!0,ie(V))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(B){switch(p){case 1:case 2:case 3:var j=3;break;default:j=p}var K=p;p=j;try{return B()}finally{p=K}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,j){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var K=p;p=B;try{return j()}finally{p=K}},t.unstable_scheduleCallback=function(B,j,K){var Z=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?Z+K:Z):K=Z,B){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=K+$,B={id:h++,callback:j,priorityLevel:B,startTime:K,expirationTime:$,sortIndex:-1},K>Z?(B.sortIndex=K,e(u,B),n(l)===null&&B===n(u)&&(T?(_(x),x=-1):T=!0,Q(P,K-Z))):(B.sortIndex=$,e(l,B),b||v||(b=!0,ie(V))),B},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(B){var j=p;return function(){var K=p;p=j;try{return B.apply(this,arguments)}finally{p=K}}}})(YE);QE.exports=YE;var fR=QE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pR=R,un=fR;function H(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var XE=new Set,Cl={};function Is(t,e){ko(t,e),ko(t+"Capture",e)}function ko(t,e){for(Cl[t]=e,t=0;t<e.length;t++)XE.add(e[t])}var _r=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bp=Object.prototype.hasOwnProperty,mR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d_={},h_={};function gR(t){return Bp.call(h_,t)?!0:Bp.call(d_,t)?!1:mR.test(t)?h_[t]=!0:(d_[t]=!0,!1)}function yR(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function vR(t,e,n,r){if(e===null||typeof e>"u"||yR(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function qt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var xt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){xt[t]=new qt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];xt[e]=new qt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){xt[t]=new qt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){xt[t]=new qt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){xt[t]=new qt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){xt[t]=new qt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){xt[t]=new qt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){xt[t]=new qt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){xt[t]=new qt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Lg=/[\-:]([a-z])/g;function Mg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Lg,Mg);xt[e]=new qt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Lg,Mg);xt[e]=new qt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Lg,Mg);xt[e]=new qt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){xt[t]=new qt(t,1,!1,t.toLowerCase(),null,!1,!1)});xt.xlinkHref=new qt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){xt[t]=new qt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Fg(t,e,n,r){var i=xt.hasOwnProperty(e)?xt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(vR(e,n,i,r)&&(n=null),r||i===null?gR(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var kr=pR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Jc=Symbol.for("react.element"),Js=Symbol.for("react.portal"),Zs=Symbol.for("react.fragment"),Ug=Symbol.for("react.strict_mode"),zp=Symbol.for("react.profiler"),JE=Symbol.for("react.provider"),ZE=Symbol.for("react.context"),Bg=Symbol.for("react.forward_ref"),$p=Symbol.for("react.suspense"),qp=Symbol.for("react.suspense_list"),zg=Symbol.for("react.memo"),zr=Symbol.for("react.lazy"),eT=Symbol.for("react.offscreen"),f_=Symbol.iterator;function ka(t){return t===null||typeof t!="object"?null:(t=f_&&t[f_]||t["@@iterator"],typeof t=="function"?t:null)}var qe=Object.assign,Lf;function Wa(t){if(Lf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Lf=e&&e[1]||""}return`
`+Lf+t}var Mf=!1;function Ff(t,e){if(!t||Mf)return"";Mf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Mf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Wa(t):""}function _R(t){switch(t.tag){case 5:return Wa(t.type);case 16:return Wa("Lazy");case 13:return Wa("Suspense");case 19:return Wa("SuspenseList");case 0:case 2:case 15:return t=Ff(t.type,!1),t;case 11:return t=Ff(t.type.render,!1),t;case 1:return t=Ff(t.type,!0),t;default:return""}}function Kp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Zs:return"Fragment";case Js:return"Portal";case zp:return"Profiler";case Ug:return"StrictMode";case $p:return"Suspense";case qp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case ZE:return(t.displayName||"Context")+".Consumer";case JE:return(t._context.displayName||"Context")+".Provider";case Bg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case zg:return e=t.displayName||null,e!==null?e:Kp(t.type)||"Memo";case zr:e=t._payload,t=t._init;try{return Kp(t(e))}catch{}}return null}function wR(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Kp(e);case 8:return e===Ug?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function pi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function tT(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function xR(t){var e=tT(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Zc(t){t._valueTracker||(t._valueTracker=xR(t))}function nT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=tT(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ad(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Gp(t,e){var n=e.checked;return qe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function p_(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=pi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function rT(t,e){e=e.checked,e!=null&&Fg(t,"checked",e,!1)}function Wp(t,e){rT(t,e);var n=pi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Hp(t,e.type,n):e.hasOwnProperty("defaultValue")&&Hp(t,e.type,pi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function m_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Hp(t,e,n){(e!=="number"||ad(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ha=Array.isArray;function yo(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+pi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Qp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(H(91));return qe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function g_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(H(92));if(Ha(n)){if(1<n.length)throw Error(H(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:pi(n)}}function iT(t,e){var n=pi(e.value),r=pi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function y_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function sT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Yp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?sT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var eu,oT=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(eu=eu||document.createElement("div"),eu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=eu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Pl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var al={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bR=["Webkit","ms","Moz","O"];Object.keys(al).forEach(function(t){bR.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),al[e]=al[t]})});function aT(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||al.hasOwnProperty(t)&&al[t]?(""+e).trim():e+"px"}function lT(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=aT(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var ER=qe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Xp(t,e){if(e){if(ER[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(H(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(H(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(H(61))}if(e.style!=null&&typeof e.style!="object")throw Error(H(62))}}function Jp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zp=null;function $g(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var em=null,vo=null,_o=null;function v_(t){if(t=hc(t)){if(typeof em!="function")throw Error(H(280));var e=t.stateNode;e&&(e=gh(e),em(t.stateNode,t.type,e))}}function cT(t){vo?_o?_o.push(t):_o=[t]:vo=t}function uT(){if(vo){var t=vo,e=_o;if(_o=vo=null,v_(t),e)for(t=0;t<e.length;t++)v_(e[t])}}function dT(t,e){return t(e)}function hT(){}var Uf=!1;function fT(t,e,n){if(Uf)return t(e,n);Uf=!0;try{return dT(t,e,n)}finally{Uf=!1,(vo!==null||_o!==null)&&(hT(),uT())}}function Rl(t,e){var n=t.stateNode;if(n===null)return null;var r=gh(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(H(231,e,typeof n));return n}var tm=!1;if(_r)try{var Ca={};Object.defineProperty(Ca,"passive",{get:function(){tm=!0}}),window.addEventListener("test",Ca,Ca),window.removeEventListener("test",Ca,Ca)}catch{tm=!1}function TR(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var ll=!1,ld=null,cd=!1,nm=null,SR={onError:function(t){ll=!0,ld=t}};function IR(t,e,n,r,i,s,o,a,l){ll=!1,ld=null,TR.apply(SR,arguments)}function AR(t,e,n,r,i,s,o,a,l){if(IR.apply(this,arguments),ll){if(ll){var u=ld;ll=!1,ld=null}else throw Error(H(198));cd||(cd=!0,nm=u)}}function As(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function pT(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function __(t){if(As(t)!==t)throw Error(H(188))}function kR(t){var e=t.alternate;if(!e){if(e=As(t),e===null)throw Error(H(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return __(i),t;if(s===r)return __(i),e;s=s.sibling}throw Error(H(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(H(189))}}if(n.alternate!==r)throw Error(H(190))}if(n.tag!==3)throw Error(H(188));return n.stateNode.current===n?t:e}function mT(t){return t=kR(t),t!==null?gT(t):null}function gT(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=gT(t);if(e!==null)return e;t=t.sibling}return null}var yT=un.unstable_scheduleCallback,w_=un.unstable_cancelCallback,CR=un.unstable_shouldYield,PR=un.unstable_requestPaint,Je=un.unstable_now,RR=un.unstable_getCurrentPriorityLevel,qg=un.unstable_ImmediatePriority,vT=un.unstable_UserBlockingPriority,ud=un.unstable_NormalPriority,NR=un.unstable_LowPriority,_T=un.unstable_IdlePriority,hh=null,$n=null;function DR(t){if($n&&typeof $n.onCommitFiberRoot=="function")try{$n.onCommitFiberRoot(hh,t,void 0,(t.current.flags&128)===128)}catch{}}var Nn=Math.clz32?Math.clz32:OR,VR=Math.log,jR=Math.LN2;function OR(t){return t>>>=0,t===0?32:31-(VR(t)/jR|0)|0}var tu=64,nu=4194304;function Qa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function dd(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Qa(a):(s&=o,s!==0&&(r=Qa(s)))}else o=n&~i,o!==0?r=Qa(o):s!==0&&(r=Qa(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Nn(e),i=1<<n,r|=t[n],e&=~i;return r}function LR(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function MR(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Nn(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=LR(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function rm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function wT(){var t=tu;return tu<<=1,!(tu&4194240)&&(tu=64),t}function Bf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function uc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Nn(e),t[e]=n}function FR(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Nn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Kg(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Nn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Se=0;function xT(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var bT,Gg,ET,TT,ST,im=!1,ru=[],ei=null,ti=null,ni=null,Nl=new Map,Dl=new Map,qr=[],UR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function x_(t,e){switch(t){case"focusin":case"focusout":ei=null;break;case"dragenter":case"dragleave":ti=null;break;case"mouseover":case"mouseout":ni=null;break;case"pointerover":case"pointerout":Nl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dl.delete(e.pointerId)}}function Pa(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=hc(e),e!==null&&Gg(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function BR(t,e,n,r,i){switch(e){case"focusin":return ei=Pa(ei,t,e,n,r,i),!0;case"dragenter":return ti=Pa(ti,t,e,n,r,i),!0;case"mouseover":return ni=Pa(ni,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Nl.set(s,Pa(Nl.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Dl.set(s,Pa(Dl.get(s)||null,t,e,n,r,i)),!0}return!1}function IT(t){var e=Yi(t.target);if(e!==null){var n=As(e);if(n!==null){if(e=n.tag,e===13){if(e=pT(n),e!==null){t.blockedOn=e,ST(t.priority,function(){ET(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Vu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=sm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Zp=r,n.target.dispatchEvent(r),Zp=null}else return e=hc(n),e!==null&&Gg(e),t.blockedOn=n,!1;e.shift()}return!0}function b_(t,e,n){Vu(t)&&n.delete(e)}function zR(){im=!1,ei!==null&&Vu(ei)&&(ei=null),ti!==null&&Vu(ti)&&(ti=null),ni!==null&&Vu(ni)&&(ni=null),Nl.forEach(b_),Dl.forEach(b_)}function Ra(t,e){t.blockedOn===e&&(t.blockedOn=null,im||(im=!0,un.unstable_scheduleCallback(un.unstable_NormalPriority,zR)))}function Vl(t){function e(i){return Ra(i,t)}if(0<ru.length){Ra(ru[0],t);for(var n=1;n<ru.length;n++){var r=ru[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ei!==null&&Ra(ei,t),ti!==null&&Ra(ti,t),ni!==null&&Ra(ni,t),Nl.forEach(e),Dl.forEach(e),n=0;n<qr.length;n++)r=qr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<qr.length&&(n=qr[0],n.blockedOn===null);)IT(n),n.blockedOn===null&&qr.shift()}var wo=kr.ReactCurrentBatchConfig,hd=!0;function $R(t,e,n,r){var i=Se,s=wo.transition;wo.transition=null;try{Se=1,Wg(t,e,n,r)}finally{Se=i,wo.transition=s}}function qR(t,e,n,r){var i=Se,s=wo.transition;wo.transition=null;try{Se=4,Wg(t,e,n,r)}finally{Se=i,wo.transition=s}}function Wg(t,e,n,r){if(hd){var i=sm(t,e,n,r);if(i===null)Xf(t,e,r,fd,n),x_(t,r);else if(BR(i,t,e,n,r))r.stopPropagation();else if(x_(t,r),e&4&&-1<UR.indexOf(t)){for(;i!==null;){var s=hc(i);if(s!==null&&bT(s),s=sm(t,e,n,r),s===null&&Xf(t,e,r,fd,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Xf(t,e,r,null,n)}}var fd=null;function sm(t,e,n,r){if(fd=null,t=$g(r),t=Yi(t),t!==null)if(e=As(t),e===null)t=null;else if(n=e.tag,n===13){if(t=pT(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return fd=t,null}function AT(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(RR()){case qg:return 1;case vT:return 4;case ud:case NR:return 16;case _T:return 536870912;default:return 16}default:return 16}}var Xr=null,Hg=null,ju=null;function kT(){if(ju)return ju;var t,e=Hg,n=e.length,r,i="value"in Xr?Xr.value:Xr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return ju=i.slice(t,1<r?1-r:void 0)}function Ou(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function iu(){return!0}function E_(){return!1}function pn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?iu:E_,this.isPropagationStopped=E_,this}return qe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=iu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=iu)},persist:function(){},isPersistent:iu}),e}var ea={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qg=pn(ea),dc=qe({},ea,{view:0,detail:0}),KR=pn(dc),zf,$f,Na,fh=qe({},dc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Na&&(Na&&t.type==="mousemove"?(zf=t.screenX-Na.screenX,$f=t.screenY-Na.screenY):$f=zf=0,Na=t),zf)},movementY:function(t){return"movementY"in t?t.movementY:$f}}),T_=pn(fh),GR=qe({},fh,{dataTransfer:0}),WR=pn(GR),HR=qe({},dc,{relatedTarget:0}),qf=pn(HR),QR=qe({},ea,{animationName:0,elapsedTime:0,pseudoElement:0}),YR=pn(QR),XR=qe({},ea,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),JR=pn(XR),ZR=qe({},ea,{data:0}),S_=pn(ZR),eN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rN(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=nN[t])?!!e[t]:!1}function Yg(){return rN}var iN=qe({},dc,{key:function(t){if(t.key){var e=eN[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ou(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?tN[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yg,charCode:function(t){return t.type==="keypress"?Ou(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ou(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),sN=pn(iN),oN=qe({},fh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),I_=pn(oN),aN=qe({},dc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yg}),lN=pn(aN),cN=qe({},ea,{propertyName:0,elapsedTime:0,pseudoElement:0}),uN=pn(cN),dN=qe({},fh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),hN=pn(dN),fN=[9,13,27,32],Xg=_r&&"CompositionEvent"in window,cl=null;_r&&"documentMode"in document&&(cl=document.documentMode);var pN=_r&&"TextEvent"in window&&!cl,CT=_r&&(!Xg||cl&&8<cl&&11>=cl),A_=" ",k_=!1;function PT(t,e){switch(t){case"keyup":return fN.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function RT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var eo=!1;function mN(t,e){switch(t){case"compositionend":return RT(e);case"keypress":return e.which!==32?null:(k_=!0,A_);case"textInput":return t=e.data,t===A_&&k_?null:t;default:return null}}function gN(t,e){if(eo)return t==="compositionend"||!Xg&&PT(t,e)?(t=kT(),ju=Hg=Xr=null,eo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return CT&&e.locale!=="ko"?null:e.data;default:return null}}var yN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function C_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!yN[t.type]:e==="textarea"}function NT(t,e,n,r){cT(r),e=pd(e,"onChange"),0<e.length&&(n=new Qg("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ul=null,jl=null;function vN(t){$T(t,0)}function ph(t){var e=ro(t);if(nT(e))return t}function _N(t,e){if(t==="change")return e}var DT=!1;if(_r){var Kf;if(_r){var Gf="oninput"in document;if(!Gf){var P_=document.createElement("div");P_.setAttribute("oninput","return;"),Gf=typeof P_.oninput=="function"}Kf=Gf}else Kf=!1;DT=Kf&&(!document.documentMode||9<document.documentMode)}function R_(){ul&&(ul.detachEvent("onpropertychange",VT),jl=ul=null)}function VT(t){if(t.propertyName==="value"&&ph(jl)){var e=[];NT(e,jl,t,$g(t)),fT(vN,e)}}function wN(t,e,n){t==="focusin"?(R_(),ul=e,jl=n,ul.attachEvent("onpropertychange",VT)):t==="focusout"&&R_()}function xN(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ph(jl)}function bN(t,e){if(t==="click")return ph(e)}function EN(t,e){if(t==="input"||t==="change")return ph(e)}function TN(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Vn=typeof Object.is=="function"?Object.is:TN;function Ol(t,e){if(Vn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Bp.call(e,i)||!Vn(t[i],e[i]))return!1}return!0}function N_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function D_(t,e){var n=N_(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=N_(n)}}function jT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?jT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function OT(){for(var t=window,e=ad();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ad(t.document)}return e}function Jg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function SN(t){var e=OT(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&jT(n.ownerDocument.documentElement,n)){if(r!==null&&Jg(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=D_(n,s);var o=D_(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var IN=_r&&"documentMode"in document&&11>=document.documentMode,to=null,om=null,dl=null,am=!1;function V_(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;am||to==null||to!==ad(r)||(r=to,"selectionStart"in r&&Jg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),dl&&Ol(dl,r)||(dl=r,r=pd(om,"onSelect"),0<r.length&&(e=new Qg("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=to)))}function su(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var no={animationend:su("Animation","AnimationEnd"),animationiteration:su("Animation","AnimationIteration"),animationstart:su("Animation","AnimationStart"),transitionend:su("Transition","TransitionEnd")},Wf={},LT={};_r&&(LT=document.createElement("div").style,"AnimationEvent"in window||(delete no.animationend.animation,delete no.animationiteration.animation,delete no.animationstart.animation),"TransitionEvent"in window||delete no.transitionend.transition);function mh(t){if(Wf[t])return Wf[t];if(!no[t])return t;var e=no[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in LT)return Wf[t]=e[n];return t}var MT=mh("animationend"),FT=mh("animationiteration"),UT=mh("animationstart"),BT=mh("transitionend"),zT=new Map,j_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function bi(t,e){zT.set(t,e),Is(e,[t])}for(var Hf=0;Hf<j_.length;Hf++){var Qf=j_[Hf],AN=Qf.toLowerCase(),kN=Qf[0].toUpperCase()+Qf.slice(1);bi(AN,"on"+kN)}bi(MT,"onAnimationEnd");bi(FT,"onAnimationIteration");bi(UT,"onAnimationStart");bi("dblclick","onDoubleClick");bi("focusin","onFocus");bi("focusout","onBlur");bi(BT,"onTransitionEnd");ko("onMouseEnter",["mouseout","mouseover"]);ko("onMouseLeave",["mouseout","mouseover"]);ko("onPointerEnter",["pointerout","pointerover"]);ko("onPointerLeave",["pointerout","pointerover"]);Is("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Is("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Is("onBeforeInput",["compositionend","keypress","textInput","paste"]);Is("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Is("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Is("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ya="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),CN=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ya));function O_(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,AR(r,e,void 0,t),t.currentTarget=null}function $T(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;O_(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;O_(i,a,u),s=l}}}if(cd)throw t=nm,cd=!1,nm=null,t}function Ve(t,e){var n=e[hm];n===void 0&&(n=e[hm]=new Set);var r=t+"__bubble";n.has(r)||(qT(e,t,2,!1),n.add(r))}function Yf(t,e,n){var r=0;e&&(r|=4),qT(n,t,r,e)}var ou="_reactListening"+Math.random().toString(36).slice(2);function Ll(t){if(!t[ou]){t[ou]=!0,XE.forEach(function(n){n!=="selectionchange"&&(CN.has(n)||Yf(n,!1,t),Yf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ou]||(e[ou]=!0,Yf("selectionchange",!1,e))}}function qT(t,e,n,r){switch(AT(e)){case 1:var i=$R;break;case 4:i=qR;break;default:i=Wg}n=i.bind(null,e,n,t),i=void 0,!tm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Xf(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Yi(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}fT(function(){var u=s,h=$g(n),f=[];e:{var p=zT.get(t);if(p!==void 0){var v=Qg,b=t;switch(t){case"keypress":if(Ou(n)===0)break e;case"keydown":case"keyup":v=sN;break;case"focusin":b="focus",v=qf;break;case"focusout":b="blur",v=qf;break;case"beforeblur":case"afterblur":v=qf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=T_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=WR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=lN;break;case MT:case FT:case UT:v=YR;break;case BT:v=uN;break;case"scroll":v=KR;break;case"wheel":v=hN;break;case"copy":case"cut":case"paste":v=JR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=I_}var T=(e&4)!==0,A=!T&&t==="scroll",_=T?p!==null?p+"Capture":null:p;T=[];for(var y=u,w;y!==null;){w=y;var P=w.stateNode;if(w.tag===5&&P!==null&&(w=P,_!==null&&(P=Rl(y,_),P!=null&&T.push(Ml(y,P,w)))),A)break;y=y.return}0<T.length&&(p=new v(p,b,null,n,h),f.push({event:p,listeners:T}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",p&&n!==Zp&&(b=n.relatedTarget||n.fromElement)&&(Yi(b)||b[wr]))break e;if((v||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,v?(b=n.relatedTarget||n.toElement,v=u,b=b?Yi(b):null,b!==null&&(A=As(b),b!==A||b.tag!==5&&b.tag!==6)&&(b=null)):(v=null,b=u),v!==b)){if(T=T_,P="onMouseLeave",_="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(T=I_,P="onPointerLeave",_="onPointerEnter",y="pointer"),A=v==null?p:ro(v),w=b==null?p:ro(b),p=new T(P,y+"leave",v,n,h),p.target=A,p.relatedTarget=w,P=null,Yi(h)===u&&(T=new T(_,y+"enter",b,n,h),T.target=w,T.relatedTarget=A,P=T),A=P,v&&b)t:{for(T=v,_=b,y=0,w=T;w;w=Us(w))y++;for(w=0,P=_;P;P=Us(P))w++;for(;0<y-w;)T=Us(T),y--;for(;0<w-y;)_=Us(_),w--;for(;y--;){if(T===_||_!==null&&T===_.alternate)break t;T=Us(T),_=Us(_)}T=null}else T=null;v!==null&&L_(f,p,v,T,!1),b!==null&&A!==null&&L_(f,A,b,T,!0)}}e:{if(p=u?ro(u):window,v=p.nodeName&&p.nodeName.toLowerCase(),v==="select"||v==="input"&&p.type==="file")var V=_N;else if(C_(p))if(DT)V=EN;else{V=xN;var O=wN}else(v=p.nodeName)&&v.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(V=bN);if(V&&(V=V(t,u))){NT(f,V,n,h);break e}O&&O(t,p,u),t==="focusout"&&(O=p._wrapperState)&&O.controlled&&p.type==="number"&&Hp(p,"number",p.value)}switch(O=u?ro(u):window,t){case"focusin":(C_(O)||O.contentEditable==="true")&&(to=O,om=u,dl=null);break;case"focusout":dl=om=to=null;break;case"mousedown":am=!0;break;case"contextmenu":case"mouseup":case"dragend":am=!1,V_(f,n,h);break;case"selectionchange":if(IN)break;case"keydown":case"keyup":V_(f,n,h)}var I;if(Xg)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else eo?PT(t,n)&&(x="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(CT&&n.locale!=="ko"&&(eo||x!=="onCompositionStart"?x==="onCompositionEnd"&&eo&&(I=kT()):(Xr=h,Hg="value"in Xr?Xr.value:Xr.textContent,eo=!0)),O=pd(u,x),0<O.length&&(x=new S_(x,t,null,n,h),f.push({event:x,listeners:O}),I?x.data=I:(I=RT(n),I!==null&&(x.data=I)))),(I=pN?mN(t,n):gN(t,n))&&(u=pd(u,"onBeforeInput"),0<u.length&&(h=new S_("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:u}),h.data=I))}$T(f,e)})}function Ml(t,e,n){return{instance:t,listener:e,currentTarget:n}}function pd(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Rl(t,n),s!=null&&r.unshift(Ml(t,s,i)),s=Rl(t,e),s!=null&&r.push(Ml(t,s,i))),t=t.return}return r}function Us(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function L_(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=Rl(n,s),l!=null&&o.unshift(Ml(n,l,a))):i||(l=Rl(n,s),l!=null&&o.push(Ml(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var PN=/\r\n?/g,RN=/\u0000|\uFFFD/g;function M_(t){return(typeof t=="string"?t:""+t).replace(PN,`
`).replace(RN,"")}function au(t,e,n){if(e=M_(e),M_(t)!==e&&n)throw Error(H(425))}function md(){}var lm=null,cm=null;function um(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var dm=typeof setTimeout=="function"?setTimeout:void 0,NN=typeof clearTimeout=="function"?clearTimeout:void 0,F_=typeof Promise=="function"?Promise:void 0,DN=typeof queueMicrotask=="function"?queueMicrotask:typeof F_<"u"?function(t){return F_.resolve(null).then(t).catch(VN)}:dm;function VN(t){setTimeout(function(){throw t})}function Jf(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Vl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Vl(e)}function ri(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function U_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ta=Math.random().toString(36).slice(2),Un="__reactFiber$"+ta,Fl="__reactProps$"+ta,wr="__reactContainer$"+ta,hm="__reactEvents$"+ta,jN="__reactListeners$"+ta,ON="__reactHandles$"+ta;function Yi(t){var e=t[Un];if(e)return e;for(var n=t.parentNode;n;){if(e=n[wr]||n[Un]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=U_(t);t!==null;){if(n=t[Un])return n;t=U_(t)}return e}t=n,n=t.parentNode}return null}function hc(t){return t=t[Un]||t[wr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ro(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(H(33))}function gh(t){return t[Fl]||null}var fm=[],io=-1;function Ei(t){return{current:t}}function Oe(t){0>io||(t.current=fm[io],fm[io]=null,io--)}function Ce(t,e){io++,fm[io]=t.current,t.current=e}var mi={},Vt=Ei(mi),Yt=Ei(!1),ls=mi;function Co(t,e){var n=t.type.contextTypes;if(!n)return mi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Xt(t){return t=t.childContextTypes,t!=null}function gd(){Oe(Yt),Oe(Vt)}function B_(t,e,n){if(Vt.current!==mi)throw Error(H(168));Ce(Vt,e),Ce(Yt,n)}function KT(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(H(108,wR(t)||"Unknown",i));return qe({},n,r)}function yd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||mi,ls=Vt.current,Ce(Vt,t),Ce(Yt,Yt.current),!0}function z_(t,e,n){var r=t.stateNode;if(!r)throw Error(H(169));n?(t=KT(t,e,ls),r.__reactInternalMemoizedMergedChildContext=t,Oe(Yt),Oe(Vt),Ce(Vt,t)):Oe(Yt),Ce(Yt,n)}var ir=null,yh=!1,Zf=!1;function GT(t){ir===null?ir=[t]:ir.push(t)}function LN(t){yh=!0,GT(t)}function Ti(){if(!Zf&&ir!==null){Zf=!0;var t=0,e=Se;try{var n=ir;for(Se=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ir=null,yh=!1}catch(i){throw ir!==null&&(ir=ir.slice(t+1)),yT(qg,Ti),i}finally{Se=e,Zf=!1}}return null}var so=[],oo=0,vd=null,_d=0,vn=[],_n=0,cs=null,sr=1,or="";function Mi(t,e){so[oo++]=_d,so[oo++]=vd,vd=t,_d=e}function WT(t,e,n){vn[_n++]=sr,vn[_n++]=or,vn[_n++]=cs,cs=t;var r=sr;t=or;var i=32-Nn(r)-1;r&=~(1<<i),n+=1;var s=32-Nn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,sr=1<<32-Nn(e)+i|n<<i|r,or=s+t}else sr=1<<s|n<<i|r,or=t}function Zg(t){t.return!==null&&(Mi(t,1),WT(t,1,0))}function ey(t){for(;t===vd;)vd=so[--oo],so[oo]=null,_d=so[--oo],so[oo]=null;for(;t===cs;)cs=vn[--_n],vn[_n]=null,or=vn[--_n],vn[_n]=null,sr=vn[--_n],vn[_n]=null}var ln=null,sn=null,Me=!1,Rn=null;function HT(t,e){var n=wn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function $_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ln=t,sn=ri(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ln=t,sn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=cs!==null?{id:sr,overflow:or}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=wn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ln=t,sn=null,!0):!1;default:return!1}}function pm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function mm(t){if(Me){var e=sn;if(e){var n=e;if(!$_(t,e)){if(pm(t))throw Error(H(418));e=ri(n.nextSibling);var r=ln;e&&$_(t,e)?HT(r,n):(t.flags=t.flags&-4097|2,Me=!1,ln=t)}}else{if(pm(t))throw Error(H(418));t.flags=t.flags&-4097|2,Me=!1,ln=t}}}function q_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ln=t}function lu(t){if(t!==ln)return!1;if(!Me)return q_(t),Me=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!um(t.type,t.memoizedProps)),e&&(e=sn)){if(pm(t))throw QT(),Error(H(418));for(;e;)HT(t,e),e=ri(e.nextSibling)}if(q_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(H(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){sn=ri(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}sn=null}}else sn=ln?ri(t.stateNode.nextSibling):null;return!0}function QT(){for(var t=sn;t;)t=ri(t.nextSibling)}function Po(){sn=ln=null,Me=!1}function ty(t){Rn===null?Rn=[t]:Rn.push(t)}var MN=kr.ReactCurrentBatchConfig;function Da(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(H(309));var r=n.stateNode}if(!r)throw Error(H(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(H(284));if(!n._owner)throw Error(H(290,t))}return t}function cu(t,e){throw t=Object.prototype.toString.call(e),Error(H(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function K_(t){var e=t._init;return e(t._payload)}function YT(t){function e(_,y){if(t){var w=_.deletions;w===null?(_.deletions=[y],_.flags|=16):w.push(y)}}function n(_,y){if(!t)return null;for(;y!==null;)e(_,y),y=y.sibling;return null}function r(_,y){for(_=new Map;y!==null;)y.key!==null?_.set(y.key,y):_.set(y.index,y),y=y.sibling;return _}function i(_,y){return _=ai(_,y),_.index=0,_.sibling=null,_}function s(_,y,w){return _.index=w,t?(w=_.alternate,w!==null?(w=w.index,w<y?(_.flags|=2,y):w):(_.flags|=2,y)):(_.flags|=1048576,y)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,y,w,P){return y===null||y.tag!==6?(y=op(w,_.mode,P),y.return=_,y):(y=i(y,w),y.return=_,y)}function l(_,y,w,P){var V=w.type;return V===Zs?h(_,y,w.props.children,P,w.key):y!==null&&(y.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===zr&&K_(V)===y.type)?(P=i(y,w.props),P.ref=Da(_,y,w),P.return=_,P):(P=$u(w.type,w.key,w.props,null,_.mode,P),P.ref=Da(_,y,w),P.return=_,P)}function u(_,y,w,P){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=ap(w,_.mode,P),y.return=_,y):(y=i(y,w.children||[]),y.return=_,y)}function h(_,y,w,P,V){return y===null||y.tag!==7?(y=rs(w,_.mode,P,V),y.return=_,y):(y=i(y,w),y.return=_,y)}function f(_,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return y=op(""+y,_.mode,w),y.return=_,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Jc:return w=$u(y.type,y.key,y.props,null,_.mode,w),w.ref=Da(_,null,y),w.return=_,w;case Js:return y=ap(y,_.mode,w),y.return=_,y;case zr:var P=y._init;return f(_,P(y._payload),w)}if(Ha(y)||ka(y))return y=rs(y,_.mode,w,null),y.return=_,y;cu(_,y)}return null}function p(_,y,w,P){var V=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return V!==null?null:a(_,y,""+w,P);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Jc:return w.key===V?l(_,y,w,P):null;case Js:return w.key===V?u(_,y,w,P):null;case zr:return V=w._init,p(_,y,V(w._payload),P)}if(Ha(w)||ka(w))return V!==null?null:h(_,y,w,P,null);cu(_,w)}return null}function v(_,y,w,P,V){if(typeof P=="string"&&P!==""||typeof P=="number")return _=_.get(w)||null,a(y,_,""+P,V);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Jc:return _=_.get(P.key===null?w:P.key)||null,l(y,_,P,V);case Js:return _=_.get(P.key===null?w:P.key)||null,u(y,_,P,V);case zr:var O=P._init;return v(_,y,w,O(P._payload),V)}if(Ha(P)||ka(P))return _=_.get(w)||null,h(y,_,P,V,null);cu(y,P)}return null}function b(_,y,w,P){for(var V=null,O=null,I=y,x=y=0,k=null;I!==null&&x<w.length;x++){I.index>x?(k=I,I=null):k=I.sibling;var C=p(_,I,w[x],P);if(C===null){I===null&&(I=k);break}t&&I&&C.alternate===null&&e(_,I),y=s(C,y,x),O===null?V=C:O.sibling=C,O=C,I=k}if(x===w.length)return n(_,I),Me&&Mi(_,x),V;if(I===null){for(;x<w.length;x++)I=f(_,w[x],P),I!==null&&(y=s(I,y,x),O===null?V=I:O.sibling=I,O=I);return Me&&Mi(_,x),V}for(I=r(_,I);x<w.length;x++)k=v(I,_,x,w[x],P),k!==null&&(t&&k.alternate!==null&&I.delete(k.key===null?x:k.key),y=s(k,y,x),O===null?V=k:O.sibling=k,O=k);return t&&I.forEach(function(D){return e(_,D)}),Me&&Mi(_,x),V}function T(_,y,w,P){var V=ka(w);if(typeof V!="function")throw Error(H(150));if(w=V.call(w),w==null)throw Error(H(151));for(var O=V=null,I=y,x=y=0,k=null,C=w.next();I!==null&&!C.done;x++,C=w.next()){I.index>x?(k=I,I=null):k=I.sibling;var D=p(_,I,C.value,P);if(D===null){I===null&&(I=k);break}t&&I&&D.alternate===null&&e(_,I),y=s(D,y,x),O===null?V=D:O.sibling=D,O=D,I=k}if(C.done)return n(_,I),Me&&Mi(_,x),V;if(I===null){for(;!C.done;x++,C=w.next())C=f(_,C.value,P),C!==null&&(y=s(C,y,x),O===null?V=C:O.sibling=C,O=C);return Me&&Mi(_,x),V}for(I=r(_,I);!C.done;x++,C=w.next())C=v(I,_,x,C.value,P),C!==null&&(t&&C.alternate!==null&&I.delete(C.key===null?x:C.key),y=s(C,y,x),O===null?V=C:O.sibling=C,O=C);return t&&I.forEach(function(N){return e(_,N)}),Me&&Mi(_,x),V}function A(_,y,w,P){if(typeof w=="object"&&w!==null&&w.type===Zs&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Jc:e:{for(var V=w.key,O=y;O!==null;){if(O.key===V){if(V=w.type,V===Zs){if(O.tag===7){n(_,O.sibling),y=i(O,w.props.children),y.return=_,_=y;break e}}else if(O.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===zr&&K_(V)===O.type){n(_,O.sibling),y=i(O,w.props),y.ref=Da(_,O,w),y.return=_,_=y;break e}n(_,O);break}else e(_,O);O=O.sibling}w.type===Zs?(y=rs(w.props.children,_.mode,P,w.key),y.return=_,_=y):(P=$u(w.type,w.key,w.props,null,_.mode,P),P.ref=Da(_,y,w),P.return=_,_=P)}return o(_);case Js:e:{for(O=w.key;y!==null;){if(y.key===O)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){n(_,y.sibling),y=i(y,w.children||[]),y.return=_,_=y;break e}else{n(_,y);break}else e(_,y);y=y.sibling}y=ap(w,_.mode,P),y.return=_,_=y}return o(_);case zr:return O=w._init,A(_,y,O(w._payload),P)}if(Ha(w))return b(_,y,w,P);if(ka(w))return T(_,y,w,P);cu(_,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,y!==null&&y.tag===6?(n(_,y.sibling),y=i(y,w),y.return=_,_=y):(n(_,y),y=op(w,_.mode,P),y.return=_,_=y),o(_)):n(_,y)}return A}var Ro=YT(!0),XT=YT(!1),wd=Ei(null),xd=null,ao=null,ny=null;function ry(){ny=ao=xd=null}function iy(t){var e=wd.current;Oe(wd),t._currentValue=e}function gm(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function xo(t,e){xd=t,ny=ao=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Wt=!0),t.firstContext=null)}function bn(t){var e=t._currentValue;if(ny!==t)if(t={context:t,memoizedValue:e,next:null},ao===null){if(xd===null)throw Error(H(308));ao=t,xd.dependencies={lanes:0,firstContext:t}}else ao=ao.next=t;return e}var Xi=null;function sy(t){Xi===null?Xi=[t]:Xi.push(t)}function JT(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,sy(e)):(n.next=i.next,i.next=n),e.interleaved=n,xr(t,r)}function xr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var $r=!1;function oy(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ZT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function pr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ii(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,xe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,xr(t,n)}return i=r.interleaved,i===null?(e.next=e,sy(r)):(e.next=i.next,i.next=e),r.interleaved=e,xr(t,n)}function Lu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Kg(t,n)}}function G_(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function bd(t,e,n,r){var i=t.updateQueue;$r=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,h=u=l=null,a=s;do{var p=a.lane,v=a.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:v,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var b=t,T=a;switch(p=e,v=n,T.tag){case 1:if(b=T.payload,typeof b=="function"){f=b.call(v,f,p);break e}f=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=T.payload,p=typeof b=="function"?b.call(v,f,p):b,p==null)break e;f=qe({},f,p);break e;case 2:$r=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else v={eventTime:v,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=v,l=f):h=h.next=v,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(h===null&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);ds|=o,t.lanes=o,t.memoizedState=f}}function W_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(H(191,i));i.call(r)}}}var fc={},qn=Ei(fc),Ul=Ei(fc),Bl=Ei(fc);function Ji(t){if(t===fc)throw Error(H(174));return t}function ay(t,e){switch(Ce(Bl,e),Ce(Ul,t),Ce(qn,fc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Yp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Yp(e,t)}Oe(qn),Ce(qn,e)}function No(){Oe(qn),Oe(Ul),Oe(Bl)}function e1(t){Ji(Bl.current);var e=Ji(qn.current),n=Yp(e,t.type);e!==n&&(Ce(Ul,t),Ce(qn,n))}function ly(t){Ul.current===t&&(Oe(qn),Oe(Ul))}var Fe=Ei(0);function Ed(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ep=[];function cy(){for(var t=0;t<ep.length;t++)ep[t]._workInProgressVersionPrimary=null;ep.length=0}var Mu=kr.ReactCurrentDispatcher,tp=kr.ReactCurrentBatchConfig,us=0,ze=null,ot=null,dt=null,Td=!1,hl=!1,zl=0,FN=0;function St(){throw Error(H(321))}function uy(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Vn(t[n],e[n]))return!1;return!0}function dy(t,e,n,r,i,s){if(us=s,ze=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Mu.current=t===null||t.memoizedState===null?$N:qN,t=n(r,i),hl){s=0;do{if(hl=!1,zl=0,25<=s)throw Error(H(301));s+=1,dt=ot=null,e.updateQueue=null,Mu.current=KN,t=n(r,i)}while(hl)}if(Mu.current=Sd,e=ot!==null&&ot.next!==null,us=0,dt=ot=ze=null,Td=!1,e)throw Error(H(300));return t}function hy(){var t=zl!==0;return zl=0,t}function Fn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dt===null?ze.memoizedState=dt=t:dt=dt.next=t,dt}function En(){if(ot===null){var t=ze.alternate;t=t!==null?t.memoizedState:null}else t=ot.next;var e=dt===null?ze.memoizedState:dt.next;if(e!==null)dt=e,ot=t;else{if(t===null)throw Error(H(310));ot=t,t={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},dt===null?ze.memoizedState=dt=t:dt=dt.next=t}return dt}function $l(t,e){return typeof e=="function"?e(t):e}function np(t){var e=En(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=ot,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var h=u.lane;if((us&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,ze.lanes|=h,ds|=h}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,Vn(r,e.memoizedState)||(Wt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,ze.lanes|=s,ds|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function rp(t){var e=En(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Vn(s,e.memoizedState)||(Wt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function t1(){}function n1(t,e){var n=ze,r=En(),i=e(),s=!Vn(r.memoizedState,i);if(s&&(r.memoizedState=i,Wt=!0),r=r.queue,fy(s1.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||dt!==null&&dt.memoizedState.tag&1){if(n.flags|=2048,ql(9,i1.bind(null,n,r,i,e),void 0,null),ft===null)throw Error(H(349));us&30||r1(n,e,i)}return i}function r1(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ze.updateQueue,e===null?(e={lastEffect:null,stores:null},ze.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function i1(t,e,n,r){e.value=n,e.getSnapshot=r,o1(e)&&a1(t)}function s1(t,e,n){return n(function(){o1(e)&&a1(t)})}function o1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Vn(t,n)}catch{return!0}}function a1(t){var e=xr(t,1);e!==null&&Dn(e,t,1,-1)}function H_(t){var e=Fn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$l,lastRenderedState:t},e.queue=t,t=t.dispatch=zN.bind(null,ze,t),[e.memoizedState,t]}function ql(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ze.updateQueue,e===null?(e={lastEffect:null,stores:null},ze.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function l1(){return En().memoizedState}function Fu(t,e,n,r){var i=Fn();ze.flags|=t,i.memoizedState=ql(1|e,n,void 0,r===void 0?null:r)}function vh(t,e,n,r){var i=En();r=r===void 0?null:r;var s=void 0;if(ot!==null){var o=ot.memoizedState;if(s=o.destroy,r!==null&&uy(r,o.deps)){i.memoizedState=ql(e,n,s,r);return}}ze.flags|=t,i.memoizedState=ql(1|e,n,s,r)}function Q_(t,e){return Fu(8390656,8,t,e)}function fy(t,e){return vh(2048,8,t,e)}function c1(t,e){return vh(4,2,t,e)}function u1(t,e){return vh(4,4,t,e)}function d1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function h1(t,e,n){return n=n!=null?n.concat([t]):null,vh(4,4,d1.bind(null,e,t),n)}function py(){}function f1(t,e){var n=En();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&uy(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function p1(t,e){var n=En();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&uy(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function m1(t,e,n){return us&21?(Vn(n,e)||(n=wT(),ze.lanes|=n,ds|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Wt=!0),t.memoizedState=n)}function UN(t,e){var n=Se;Se=n!==0&&4>n?n:4,t(!0);var r=tp.transition;tp.transition={};try{t(!1),e()}finally{Se=n,tp.transition=r}}function g1(){return En().memoizedState}function BN(t,e,n){var r=oi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},y1(t))v1(e,n);else if(n=JT(t,e,n,r),n!==null){var i=Ut();Dn(n,t,r,i),_1(n,e,r)}}function zN(t,e,n){var r=oi(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(y1(t))v1(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Vn(a,o)){var l=e.interleaved;l===null?(i.next=i,sy(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=JT(t,e,i,r),n!==null&&(i=Ut(),Dn(n,t,r,i),_1(n,e,r))}}function y1(t){var e=t.alternate;return t===ze||e!==null&&e===ze}function v1(t,e){hl=Td=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function _1(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Kg(t,n)}}var Sd={readContext:bn,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useInsertionEffect:St,useLayoutEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useMutableSource:St,useSyncExternalStore:St,useId:St,unstable_isNewReconciler:!1},$N={readContext:bn,useCallback:function(t,e){return Fn().memoizedState=[t,e===void 0?null:e],t},useContext:bn,useEffect:Q_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Fu(4194308,4,d1.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Fu(4194308,4,t,e)},useInsertionEffect:function(t,e){return Fu(4,2,t,e)},useMemo:function(t,e){var n=Fn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Fn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=BN.bind(null,ze,t),[r.memoizedState,t]},useRef:function(t){var e=Fn();return t={current:t},e.memoizedState=t},useState:H_,useDebugValue:py,useDeferredValue:function(t){return Fn().memoizedState=t},useTransition:function(){var t=H_(!1),e=t[0];return t=UN.bind(null,t[1]),Fn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ze,i=Fn();if(Me){if(n===void 0)throw Error(H(407));n=n()}else{if(n=e(),ft===null)throw Error(H(349));us&30||r1(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Q_(s1.bind(null,r,s,t),[t]),r.flags|=2048,ql(9,i1.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Fn(),e=ft.identifierPrefix;if(Me){var n=or,r=sr;n=(r&~(1<<32-Nn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=zl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=FN++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},qN={readContext:bn,useCallback:f1,useContext:bn,useEffect:fy,useImperativeHandle:h1,useInsertionEffect:c1,useLayoutEffect:u1,useMemo:p1,useReducer:np,useRef:l1,useState:function(){return np($l)},useDebugValue:py,useDeferredValue:function(t){var e=En();return m1(e,ot.memoizedState,t)},useTransition:function(){var t=np($l)[0],e=En().memoizedState;return[t,e]},useMutableSource:t1,useSyncExternalStore:n1,useId:g1,unstable_isNewReconciler:!1},KN={readContext:bn,useCallback:f1,useContext:bn,useEffect:fy,useImperativeHandle:h1,useInsertionEffect:c1,useLayoutEffect:u1,useMemo:p1,useReducer:rp,useRef:l1,useState:function(){return rp($l)},useDebugValue:py,useDeferredValue:function(t){var e=En();return ot===null?e.memoizedState=t:m1(e,ot.memoizedState,t)},useTransition:function(){var t=rp($l)[0],e=En().memoizedState;return[t,e]},useMutableSource:t1,useSyncExternalStore:n1,useId:g1,unstable_isNewReconciler:!1};function Cn(t,e){if(t&&t.defaultProps){e=qe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function ym(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:qe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var _h={isMounted:function(t){return(t=t._reactInternals)?As(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ut(),i=oi(t),s=pr(r,i);s.payload=e,n!=null&&(s.callback=n),e=ii(t,s,i),e!==null&&(Dn(e,t,i,r),Lu(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ut(),i=oi(t),s=pr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ii(t,s,i),e!==null&&(Dn(e,t,i,r),Lu(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ut(),r=oi(t),i=pr(n,r);i.tag=2,e!=null&&(i.callback=e),e=ii(t,i,r),e!==null&&(Dn(e,t,r,n),Lu(e,t,r))}};function Y_(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Ol(n,r)||!Ol(i,s):!0}function w1(t,e,n){var r=!1,i=mi,s=e.contextType;return typeof s=="object"&&s!==null?s=bn(s):(i=Xt(e)?ls:Vt.current,r=e.contextTypes,s=(r=r!=null)?Co(t,i):mi),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=_h,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function X_(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&_h.enqueueReplaceState(e,e.state,null)}function vm(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},oy(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=bn(s):(s=Xt(e)?ls:Vt.current,i.context=Co(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(ym(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&_h.enqueueReplaceState(i,i.state,null),bd(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Do(t,e){try{var n="",r=e;do n+=_R(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function ip(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function _m(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var GN=typeof WeakMap=="function"?WeakMap:Map;function x1(t,e,n){n=pr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ad||(Ad=!0,Cm=r),_m(t,e)},n}function b1(t,e,n){n=pr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){_m(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){_m(t,e),typeof r!="function"&&(si===null?si=new Set([this]):si.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function J_(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new GN;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=o2.bind(null,t,e,n),e.then(t,t))}function Z_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ew(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=pr(-1,1),e.tag=2,ii(n,e,1))),n.lanes|=1),t)}var WN=kr.ReactCurrentOwner,Wt=!1;function Ft(t,e,n,r){e.child=t===null?XT(e,null,n,r):Ro(e,t.child,n,r)}function tw(t,e,n,r,i){n=n.render;var s=e.ref;return xo(e,i),r=dy(t,e,n,r,s,i),n=hy(),t!==null&&!Wt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,br(t,e,i)):(Me&&n&&Zg(e),e.flags|=1,Ft(t,e,r,i),e.child)}function nw(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!by(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,E1(t,e,s,r,i)):(t=$u(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ol,n(o,r)&&t.ref===e.ref)return br(t,e,i)}return e.flags|=1,t=ai(s,r),t.ref=e.ref,t.return=e,e.child=t}function E1(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Ol(s,r)&&t.ref===e.ref)if(Wt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Wt=!0);else return e.lanes=t.lanes,br(t,e,i)}return wm(t,e,n,r,i)}function T1(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ce(co,rn),rn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ce(co,rn),rn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ce(co,rn),rn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ce(co,rn),rn|=r;return Ft(t,e,i,n),e.child}function S1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function wm(t,e,n,r,i){var s=Xt(n)?ls:Vt.current;return s=Co(e,s),xo(e,i),n=dy(t,e,n,r,s,i),r=hy(),t!==null&&!Wt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,br(t,e,i)):(Me&&r&&Zg(e),e.flags|=1,Ft(t,e,n,i),e.child)}function rw(t,e,n,r,i){if(Xt(n)){var s=!0;yd(e)}else s=!1;if(xo(e,i),e.stateNode===null)Uu(t,e),w1(e,n,r),vm(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=bn(u):(u=Xt(n)?ls:Vt.current,u=Co(e,u));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&X_(e,o,r,u),$r=!1;var p=e.memoizedState;o.state=p,bd(e,r,o,i),l=e.memoizedState,a!==r||p!==l||Yt.current||$r?(typeof h=="function"&&(ym(e,n,h,r),l=e.memoizedState),(a=$r||Y_(e,n,a,r,p,l,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,ZT(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Cn(e.type,a),o.props=u,f=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=bn(l):(l=Xt(n)?ls:Vt.current,l=Co(e,l));var v=n.getDerivedStateFromProps;(h=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&X_(e,o,r,l),$r=!1,p=e.memoizedState,o.state=p,bd(e,r,o,i);var b=e.memoizedState;a!==f||p!==b||Yt.current||$r?(typeof v=="function"&&(ym(e,n,v,r),b=e.memoizedState),(u=$r||Y_(e,n,u,r,p,b,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,b,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,b,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=b),o.props=r,o.state=b,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return xm(t,e,n,r,s,i)}function xm(t,e,n,r,i,s){S1(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&z_(e,n,!1),br(t,e,s);r=e.stateNode,WN.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ro(e,t.child,null,s),e.child=Ro(e,null,a,s)):Ft(t,e,a,s),e.memoizedState=r.state,i&&z_(e,n,!0),e.child}function I1(t){var e=t.stateNode;e.pendingContext?B_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&B_(t,e.context,!1),ay(t,e.containerInfo)}function iw(t,e,n,r,i){return Po(),ty(i),e.flags|=256,Ft(t,e,n,r),e.child}var bm={dehydrated:null,treeContext:null,retryLane:0};function Em(t){return{baseLanes:t,cachePool:null,transitions:null}}function A1(t,e,n){var r=e.pendingProps,i=Fe.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ce(Fe,i&1),t===null)return mm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=bh(o,r,0,null),t=rs(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Em(n),e.memoizedState=bm,t):my(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return HN(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ai(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=ai(a,s):(s=rs(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Em(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=bm,r}return s=t.child,t=s.sibling,r=ai(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function my(t,e){return e=bh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function uu(t,e,n,r){return r!==null&&ty(r),Ro(e,t.child,null,n),t=my(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function HN(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=ip(Error(H(422))),uu(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=bh({mode:"visible",children:r.children},i,0,null),s=rs(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Ro(e,t.child,null,o),e.child.memoizedState=Em(o),e.memoizedState=bm,s);if(!(e.mode&1))return uu(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(H(419)),r=ip(s,r,void 0),uu(t,e,o,r)}if(a=(o&t.childLanes)!==0,Wt||a){if(r=ft,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,xr(t,i),Dn(r,t,i,-1))}return xy(),r=ip(Error(H(421))),uu(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=a2.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,sn=ri(i.nextSibling),ln=e,Me=!0,Rn=null,t!==null&&(vn[_n++]=sr,vn[_n++]=or,vn[_n++]=cs,sr=t.id,or=t.overflow,cs=e),e=my(e,r.children),e.flags|=4096,e)}function sw(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),gm(t.return,e,n)}function sp(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function k1(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Ft(t,e,r.children,n),r=Fe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&sw(t,n,e);else if(t.tag===19)sw(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ce(Fe,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Ed(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),sp(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Ed(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}sp(e,!0,n,null,s);break;case"together":sp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Uu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function br(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ds|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(H(153));if(e.child!==null){for(t=e.child,n=ai(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ai(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function QN(t,e,n){switch(e.tag){case 3:I1(e),Po();break;case 5:e1(e);break;case 1:Xt(e.type)&&yd(e);break;case 4:ay(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ce(wd,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ce(Fe,Fe.current&1),e.flags|=128,null):n&e.child.childLanes?A1(t,e,n):(Ce(Fe,Fe.current&1),t=br(t,e,n),t!==null?t.sibling:null);Ce(Fe,Fe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return k1(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ce(Fe,Fe.current),r)break;return null;case 22:case 23:return e.lanes=0,T1(t,e,n)}return br(t,e,n)}var C1,Tm,P1,R1;C1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Tm=function(){};P1=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ji(qn.current);var s=null;switch(n){case"input":i=Gp(t,i),r=Gp(t,r),s=[];break;case"select":i=qe({},i,{value:void 0}),r=qe({},r,{value:void 0}),s=[];break;case"textarea":i=Qp(t,i),r=Qp(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=md)}Xp(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Cl.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Cl.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Ve("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};R1=function(t,e,n,r){n!==r&&(e.flags|=4)};function Va(t,e){if(!Me)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function It(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function YN(t,e,n){var r=e.pendingProps;switch(ey(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return It(e),null;case 1:return Xt(e.type)&&gd(),It(e),null;case 3:return r=e.stateNode,No(),Oe(Yt),Oe(Vt),cy(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(lu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Rn!==null&&(Nm(Rn),Rn=null))),Tm(t,e),It(e),null;case 5:ly(e);var i=Ji(Bl.current);if(n=e.type,t!==null&&e.stateNode!=null)P1(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(H(166));return It(e),null}if(t=Ji(qn.current),lu(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Un]=e,r[Fl]=s,t=(e.mode&1)!==0,n){case"dialog":Ve("cancel",r),Ve("close",r);break;case"iframe":case"object":case"embed":Ve("load",r);break;case"video":case"audio":for(i=0;i<Ya.length;i++)Ve(Ya[i],r);break;case"source":Ve("error",r);break;case"img":case"image":case"link":Ve("error",r),Ve("load",r);break;case"details":Ve("toggle",r);break;case"input":p_(r,s),Ve("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ve("invalid",r);break;case"textarea":g_(r,s),Ve("invalid",r)}Xp(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&au(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&au(r.textContent,a,t),i=["children",""+a]):Cl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ve("scroll",r)}switch(n){case"input":Zc(r),m_(r,s,!0);break;case"textarea":Zc(r),y_(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=md)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=sT(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Un]=e,t[Fl]=r,C1(t,e,!1,!1),e.stateNode=t;e:{switch(o=Jp(n,r),n){case"dialog":Ve("cancel",t),Ve("close",t),i=r;break;case"iframe":case"object":case"embed":Ve("load",t),i=r;break;case"video":case"audio":for(i=0;i<Ya.length;i++)Ve(Ya[i],t);i=r;break;case"source":Ve("error",t),i=r;break;case"img":case"image":case"link":Ve("error",t),Ve("load",t),i=r;break;case"details":Ve("toggle",t),i=r;break;case"input":p_(t,r),i=Gp(t,r),Ve("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=qe({},r,{value:void 0}),Ve("invalid",t);break;case"textarea":g_(t,r),i=Qp(t,r),Ve("invalid",t);break;default:i=r}Xp(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?lT(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&oT(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Pl(t,l):typeof l=="number"&&Pl(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Cl.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Ve("scroll",t):l!=null&&Fg(t,s,l,o))}switch(n){case"input":Zc(t),m_(t,r,!1);break;case"textarea":Zc(t),y_(t);break;case"option":r.value!=null&&t.setAttribute("value",""+pi(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?yo(t,!!r.multiple,s,!1):r.defaultValue!=null&&yo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=md)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return It(e),null;case 6:if(t&&e.stateNode!=null)R1(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(H(166));if(n=Ji(Bl.current),Ji(qn.current),lu(e)){if(r=e.stateNode,n=e.memoizedProps,r[Un]=e,(s=r.nodeValue!==n)&&(t=ln,t!==null))switch(t.tag){case 3:au(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&au(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Un]=e,e.stateNode=r}return It(e),null;case 13:if(Oe(Fe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Me&&sn!==null&&e.mode&1&&!(e.flags&128))QT(),Po(),e.flags|=98560,s=!1;else if(s=lu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(H(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(H(317));s[Un]=e}else Po(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;It(e),s=!1}else Rn!==null&&(Nm(Rn),Rn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Fe.current&1?at===0&&(at=3):xy())),e.updateQueue!==null&&(e.flags|=4),It(e),null);case 4:return No(),Tm(t,e),t===null&&Ll(e.stateNode.containerInfo),It(e),null;case 10:return iy(e.type._context),It(e),null;case 17:return Xt(e.type)&&gd(),It(e),null;case 19:if(Oe(Fe),s=e.memoizedState,s===null)return It(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Va(s,!1);else{if(at!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ed(t),o!==null){for(e.flags|=128,Va(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ce(Fe,Fe.current&1|2),e.child}t=t.sibling}s.tail!==null&&Je()>Vo&&(e.flags|=128,r=!0,Va(s,!1),e.lanes=4194304)}else{if(!r)if(t=Ed(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Va(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Me)return It(e),null}else 2*Je()-s.renderingStartTime>Vo&&n!==1073741824&&(e.flags|=128,r=!0,Va(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Je(),e.sibling=null,n=Fe.current,Ce(Fe,r?n&1|2:n&1),e):(It(e),null);case 22:case 23:return wy(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?rn&1073741824&&(It(e),e.subtreeFlags&6&&(e.flags|=8192)):It(e),null;case 24:return null;case 25:return null}throw Error(H(156,e.tag))}function XN(t,e){switch(ey(e),e.tag){case 1:return Xt(e.type)&&gd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return No(),Oe(Yt),Oe(Vt),cy(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ly(e),null;case 13:if(Oe(Fe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(H(340));Po()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Oe(Fe),null;case 4:return No(),null;case 10:return iy(e.type._context),null;case 22:case 23:return wy(),null;case 24:return null;default:return null}}var du=!1,Ct=!1,JN=typeof WeakSet=="function"?WeakSet:Set,ee=null;function lo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){He(t,e,r)}else n.current=null}function Sm(t,e,n){try{n()}catch(r){He(t,e,r)}}var ow=!1;function ZN(t,e){if(lm=hd,t=OT(),Jg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,h=0,f=t,p=null;t:for(;;){for(var v;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(v=f.firstChild)!==null;)p=f,f=v;for(;;){if(f===t)break t;if(p===n&&++u===i&&(a=o),p===s&&++h===r&&(l=o),(v=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=v}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(cm={focusedElem:t,selectionRange:n},hd=!1,ee=e;ee!==null;)if(e=ee,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ee=t;else for(;ee!==null;){e=ee;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var T=b.memoizedProps,A=b.memoizedState,_=e.stateNode,y=_.getSnapshotBeforeUpdate(e.elementType===e.type?T:Cn(e.type,T),A);_.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(H(163))}}catch(P){He(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,ee=t;break}ee=e.return}return b=ow,ow=!1,b}function fl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Sm(e,n,s)}i=i.next}while(i!==r)}}function wh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Im(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function N1(t){var e=t.alternate;e!==null&&(t.alternate=null,N1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Un],delete e[Fl],delete e[hm],delete e[jN],delete e[ON])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function D1(t){return t.tag===5||t.tag===3||t.tag===4}function aw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||D1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Am(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=md));else if(r!==4&&(t=t.child,t!==null))for(Am(t,e,n),t=t.sibling;t!==null;)Am(t,e,n),t=t.sibling}function km(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(km(t,e,n),t=t.sibling;t!==null;)km(t,e,n),t=t.sibling}var yt=null,Pn=!1;function Vr(t,e,n){for(n=n.child;n!==null;)V1(t,e,n),n=n.sibling}function V1(t,e,n){if($n&&typeof $n.onCommitFiberUnmount=="function")try{$n.onCommitFiberUnmount(hh,n)}catch{}switch(n.tag){case 5:Ct||lo(n,e);case 6:var r=yt,i=Pn;yt=null,Vr(t,e,n),yt=r,Pn=i,yt!==null&&(Pn?(t=yt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):yt.removeChild(n.stateNode));break;case 18:yt!==null&&(Pn?(t=yt,n=n.stateNode,t.nodeType===8?Jf(t.parentNode,n):t.nodeType===1&&Jf(t,n),Vl(t)):Jf(yt,n.stateNode));break;case 4:r=yt,i=Pn,yt=n.stateNode.containerInfo,Pn=!0,Vr(t,e,n),yt=r,Pn=i;break;case 0:case 11:case 14:case 15:if(!Ct&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Sm(n,e,o),i=i.next}while(i!==r)}Vr(t,e,n);break;case 1:if(!Ct&&(lo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){He(n,e,a)}Vr(t,e,n);break;case 21:Vr(t,e,n);break;case 22:n.mode&1?(Ct=(r=Ct)||n.memoizedState!==null,Vr(t,e,n),Ct=r):Vr(t,e,n);break;default:Vr(t,e,n)}}function lw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new JN),e.forEach(function(r){var i=l2.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function kn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:yt=a.stateNode,Pn=!1;break e;case 3:yt=a.stateNode.containerInfo,Pn=!0;break e;case 4:yt=a.stateNode.containerInfo,Pn=!0;break e}a=a.return}if(yt===null)throw Error(H(160));V1(s,o,i),yt=null,Pn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){He(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)j1(e,t),e=e.sibling}function j1(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(kn(e,t),Ln(t),r&4){try{fl(3,t,t.return),wh(3,t)}catch(T){He(t,t.return,T)}try{fl(5,t,t.return)}catch(T){He(t,t.return,T)}}break;case 1:kn(e,t),Ln(t),r&512&&n!==null&&lo(n,n.return);break;case 5:if(kn(e,t),Ln(t),r&512&&n!==null&&lo(n,n.return),t.flags&32){var i=t.stateNode;try{Pl(i,"")}catch(T){He(t,t.return,T)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&rT(i,s),Jp(a,o);var u=Jp(a,s);for(o=0;o<l.length;o+=2){var h=l[o],f=l[o+1];h==="style"?lT(i,f):h==="dangerouslySetInnerHTML"?oT(i,f):h==="children"?Pl(i,f):Fg(i,h,f,u)}switch(a){case"input":Wp(i,s);break;case"textarea":iT(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var v=s.value;v!=null?yo(i,!!s.multiple,v,!1):p!==!!s.multiple&&(s.defaultValue!=null?yo(i,!!s.multiple,s.defaultValue,!0):yo(i,!!s.multiple,s.multiple?[]:"",!1))}i[Fl]=s}catch(T){He(t,t.return,T)}}break;case 6:if(kn(e,t),Ln(t),r&4){if(t.stateNode===null)throw Error(H(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(T){He(t,t.return,T)}}break;case 3:if(kn(e,t),Ln(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Vl(e.containerInfo)}catch(T){He(t,t.return,T)}break;case 4:kn(e,t),Ln(t);break;case 13:kn(e,t),Ln(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(vy=Je())),r&4&&lw(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Ct=(u=Ct)||h,kn(e,t),Ct=u):kn(e,t),Ln(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(ee=t,h=t.child;h!==null;){for(f=ee=h;ee!==null;){switch(p=ee,v=p.child,p.tag){case 0:case 11:case 14:case 15:fl(4,p,p.return);break;case 1:lo(p,p.return);var b=p.stateNode;if(typeof b.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(T){He(r,n,T)}}break;case 5:lo(p,p.return);break;case 22:if(p.memoizedState!==null){uw(f);continue}}v!==null?(v.return=p,ee=v):uw(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{i=f.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=aT("display",o))}catch(T){He(t,t.return,T)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(T){He(t,t.return,T)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:kn(e,t),Ln(t),r&4&&lw(t);break;case 21:break;default:kn(e,t),Ln(t)}}function Ln(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(D1(n)){var r=n;break e}n=n.return}throw Error(H(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Pl(i,""),r.flags&=-33);var s=aw(t);km(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=aw(t);Am(t,a,o);break;default:throw Error(H(161))}}catch(l){He(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function e2(t,e,n){ee=t,O1(t)}function O1(t,e,n){for(var r=(t.mode&1)!==0;ee!==null;){var i=ee,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||du;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Ct;a=du;var u=Ct;if(du=o,(Ct=l)&&!u)for(ee=i;ee!==null;)o=ee,l=o.child,o.tag===22&&o.memoizedState!==null?dw(i):l!==null?(l.return=o,ee=l):dw(i);for(;s!==null;)ee=s,O1(s),s=s.sibling;ee=i,du=a,Ct=u}cw(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ee=s):cw(t)}}function cw(t){for(;ee!==null;){var e=ee;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ct||wh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ct)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Cn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&W_(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}W_(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&Vl(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(H(163))}Ct||e.flags&512&&Im(e)}catch(p){He(e,e.return,p)}}if(e===t){ee=null;break}if(n=e.sibling,n!==null){n.return=e.return,ee=n;break}ee=e.return}}function uw(t){for(;ee!==null;){var e=ee;if(e===t){ee=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ee=n;break}ee=e.return}}function dw(t){for(;ee!==null;){var e=ee;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{wh(4,e)}catch(l){He(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){He(e,i,l)}}var s=e.return;try{Im(e)}catch(l){He(e,s,l)}break;case 5:var o=e.return;try{Im(e)}catch(l){He(e,o,l)}}}catch(l){He(e,e.return,l)}if(e===t){ee=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ee=a;break}ee=e.return}}var t2=Math.ceil,Id=kr.ReactCurrentDispatcher,gy=kr.ReactCurrentOwner,xn=kr.ReactCurrentBatchConfig,xe=0,ft=null,it=null,wt=0,rn=0,co=Ei(0),at=0,Kl=null,ds=0,xh=0,yy=0,pl=null,Gt=null,vy=0,Vo=1/0,rr=null,Ad=!1,Cm=null,si=null,hu=!1,Jr=null,kd=0,ml=0,Pm=null,Bu=-1,zu=0;function Ut(){return xe&6?Je():Bu!==-1?Bu:Bu=Je()}function oi(t){return t.mode&1?xe&2&&wt!==0?wt&-wt:MN.transition!==null?(zu===0&&(zu=wT()),zu):(t=Se,t!==0||(t=window.event,t=t===void 0?16:AT(t.type)),t):1}function Dn(t,e,n,r){if(50<ml)throw ml=0,Pm=null,Error(H(185));uc(t,n,r),(!(xe&2)||t!==ft)&&(t===ft&&(!(xe&2)&&(xh|=n),at===4&&Kr(t,wt)),Jt(t,r),n===1&&xe===0&&!(e.mode&1)&&(Vo=Je()+500,yh&&Ti()))}function Jt(t,e){var n=t.callbackNode;MR(t,e);var r=dd(t,t===ft?wt:0);if(r===0)n!==null&&w_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&w_(n),e===1)t.tag===0?LN(hw.bind(null,t)):GT(hw.bind(null,t)),DN(function(){!(xe&6)&&Ti()}),n=null;else{switch(xT(r)){case 1:n=qg;break;case 4:n=vT;break;case 16:n=ud;break;case 536870912:n=_T;break;default:n=ud}n=q1(n,L1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function L1(t,e){if(Bu=-1,zu=0,xe&6)throw Error(H(327));var n=t.callbackNode;if(bo()&&t.callbackNode!==n)return null;var r=dd(t,t===ft?wt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Cd(t,r);else{e=r;var i=xe;xe|=2;var s=F1();(ft!==t||wt!==e)&&(rr=null,Vo=Je()+500,ns(t,e));do try{i2();break}catch(a){M1(t,a)}while(!0);ry(),Id.current=s,xe=i,it!==null?e=0:(ft=null,wt=0,e=at)}if(e!==0){if(e===2&&(i=rm(t),i!==0&&(r=i,e=Rm(t,i))),e===1)throw n=Kl,ns(t,0),Kr(t,r),Jt(t,Je()),n;if(e===6)Kr(t,r);else{if(i=t.current.alternate,!(r&30)&&!n2(i)&&(e=Cd(t,r),e===2&&(s=rm(t),s!==0&&(r=s,e=Rm(t,s))),e===1))throw n=Kl,ns(t,0),Kr(t,r),Jt(t,Je()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(H(345));case 2:Fi(t,Gt,rr);break;case 3:if(Kr(t,r),(r&130023424)===r&&(e=vy+500-Je(),10<e)){if(dd(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Ut(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=dm(Fi.bind(null,t,Gt,rr),e);break}Fi(t,Gt,rr);break;case 4:if(Kr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Nn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Je()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*t2(r/1960))-r,10<r){t.timeoutHandle=dm(Fi.bind(null,t,Gt,rr),r);break}Fi(t,Gt,rr);break;case 5:Fi(t,Gt,rr);break;default:throw Error(H(329))}}}return Jt(t,Je()),t.callbackNode===n?L1.bind(null,t):null}function Rm(t,e){var n=pl;return t.current.memoizedState.isDehydrated&&(ns(t,e).flags|=256),t=Cd(t,e),t!==2&&(e=Gt,Gt=n,e!==null&&Nm(e)),t}function Nm(t){Gt===null?Gt=t:Gt.push.apply(Gt,t)}function n2(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Vn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Kr(t,e){for(e&=~yy,e&=~xh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Nn(e),r=1<<n;t[n]=-1,e&=~r}}function hw(t){if(xe&6)throw Error(H(327));bo();var e=dd(t,0);if(!(e&1))return Jt(t,Je()),null;var n=Cd(t,e);if(t.tag!==0&&n===2){var r=rm(t);r!==0&&(e=r,n=Rm(t,r))}if(n===1)throw n=Kl,ns(t,0),Kr(t,e),Jt(t,Je()),n;if(n===6)throw Error(H(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Fi(t,Gt,rr),Jt(t,Je()),null}function _y(t,e){var n=xe;xe|=1;try{return t(e)}finally{xe=n,xe===0&&(Vo=Je()+500,yh&&Ti())}}function hs(t){Jr!==null&&Jr.tag===0&&!(xe&6)&&bo();var e=xe;xe|=1;var n=xn.transition,r=Se;try{if(xn.transition=null,Se=1,t)return t()}finally{Se=r,xn.transition=n,xe=e,!(xe&6)&&Ti()}}function wy(){rn=co.current,Oe(co)}function ns(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,NN(n)),it!==null)for(n=it.return;n!==null;){var r=n;switch(ey(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&gd();break;case 3:No(),Oe(Yt),Oe(Vt),cy();break;case 5:ly(r);break;case 4:No();break;case 13:Oe(Fe);break;case 19:Oe(Fe);break;case 10:iy(r.type._context);break;case 22:case 23:wy()}n=n.return}if(ft=t,it=t=ai(t.current,null),wt=rn=e,at=0,Kl=null,yy=xh=ds=0,Gt=pl=null,Xi!==null){for(e=0;e<Xi.length;e++)if(n=Xi[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Xi=null}return t}function M1(t,e){do{var n=it;try{if(ry(),Mu.current=Sd,Td){for(var r=ze.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Td=!1}if(us=0,dt=ot=ze=null,hl=!1,zl=0,gy.current=null,n===null||n.return===null){at=1,Kl=e,it=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=wt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var v=Z_(o);if(v!==null){v.flags&=-257,ew(v,o,a,s,e),v.mode&1&&J_(s,u,e),e=v,l=u;var b=e.updateQueue;if(b===null){var T=new Set;T.add(l),e.updateQueue=T}else b.add(l);break e}else{if(!(e&1)){J_(s,u,e),xy();break e}l=Error(H(426))}}else if(Me&&a.mode&1){var A=Z_(o);if(A!==null){!(A.flags&65536)&&(A.flags|=256),ew(A,o,a,s,e),ty(Do(l,a));break e}}s=l=Do(l,a),at!==4&&(at=2),pl===null?pl=[s]:pl.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var _=x1(s,l,e);G_(s,_);break e;case 1:a=l;var y=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(si===null||!si.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var P=b1(s,a,e);G_(s,P);break e}}s=s.return}while(s!==null)}B1(n)}catch(V){e=V,it===n&&n!==null&&(it=n=n.return);continue}break}while(!0)}function F1(){var t=Id.current;return Id.current=Sd,t===null?Sd:t}function xy(){(at===0||at===3||at===2)&&(at=4),ft===null||!(ds&268435455)&&!(xh&268435455)||Kr(ft,wt)}function Cd(t,e){var n=xe;xe|=2;var r=F1();(ft!==t||wt!==e)&&(rr=null,ns(t,e));do try{r2();break}catch(i){M1(t,i)}while(!0);if(ry(),xe=n,Id.current=r,it!==null)throw Error(H(261));return ft=null,wt=0,at}function r2(){for(;it!==null;)U1(it)}function i2(){for(;it!==null&&!CR();)U1(it)}function U1(t){var e=$1(t.alternate,t,rn);t.memoizedProps=t.pendingProps,e===null?B1(t):it=e,gy.current=null}function B1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=XN(n,e),n!==null){n.flags&=32767,it=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{at=6,it=null;return}}else if(n=YN(n,e,rn),n!==null){it=n;return}if(e=e.sibling,e!==null){it=e;return}it=e=t}while(e!==null);at===0&&(at=5)}function Fi(t,e,n){var r=Se,i=xn.transition;try{xn.transition=null,Se=1,s2(t,e,n,r)}finally{xn.transition=i,Se=r}return null}function s2(t,e,n,r){do bo();while(Jr!==null);if(xe&6)throw Error(H(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(H(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(FR(t,s),t===ft&&(it=ft=null,wt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||hu||(hu=!0,q1(ud,function(){return bo(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=xn.transition,xn.transition=null;var o=Se;Se=1;var a=xe;xe|=4,gy.current=null,ZN(t,n),j1(n,t),SN(cm),hd=!!lm,cm=lm=null,t.current=n,e2(n),PR(),xe=a,Se=o,xn.transition=s}else t.current=n;if(hu&&(hu=!1,Jr=t,kd=i),s=t.pendingLanes,s===0&&(si=null),DR(n.stateNode),Jt(t,Je()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ad)throw Ad=!1,t=Cm,Cm=null,t;return kd&1&&t.tag!==0&&bo(),s=t.pendingLanes,s&1?t===Pm?ml++:(ml=0,Pm=t):ml=0,Ti(),null}function bo(){if(Jr!==null){var t=xT(kd),e=xn.transition,n=Se;try{if(xn.transition=null,Se=16>t?16:t,Jr===null)var r=!1;else{if(t=Jr,Jr=null,kd=0,xe&6)throw Error(H(331));var i=xe;for(xe|=4,ee=t.current;ee!==null;){var s=ee,o=s.child;if(ee.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(ee=u;ee!==null;){var h=ee;switch(h.tag){case 0:case 11:case 15:fl(8,h,s)}var f=h.child;if(f!==null)f.return=h,ee=f;else for(;ee!==null;){h=ee;var p=h.sibling,v=h.return;if(N1(h),h===u){ee=null;break}if(p!==null){p.return=v,ee=p;break}ee=v}}}var b=s.alternate;if(b!==null){var T=b.child;if(T!==null){b.child=null;do{var A=T.sibling;T.sibling=null,T=A}while(T!==null)}}ee=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ee=o;else e:for(;ee!==null;){if(s=ee,s.flags&2048)switch(s.tag){case 0:case 11:case 15:fl(9,s,s.return)}var _=s.sibling;if(_!==null){_.return=s.return,ee=_;break e}ee=s.return}}var y=t.current;for(ee=y;ee!==null;){o=ee;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,ee=w;else e:for(o=y;ee!==null;){if(a=ee,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:wh(9,a)}}catch(V){He(a,a.return,V)}if(a===o){ee=null;break e}var P=a.sibling;if(P!==null){P.return=a.return,ee=P;break e}ee=a.return}}if(xe=i,Ti(),$n&&typeof $n.onPostCommitFiberRoot=="function")try{$n.onPostCommitFiberRoot(hh,t)}catch{}r=!0}return r}finally{Se=n,xn.transition=e}}return!1}function fw(t,e,n){e=Do(n,e),e=x1(t,e,1),t=ii(t,e,1),e=Ut(),t!==null&&(uc(t,1,e),Jt(t,e))}function He(t,e,n){if(t.tag===3)fw(t,t,n);else for(;e!==null;){if(e.tag===3){fw(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(si===null||!si.has(r))){t=Do(n,t),t=b1(e,t,1),e=ii(e,t,1),t=Ut(),e!==null&&(uc(e,1,t),Jt(e,t));break}}e=e.return}}function o2(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ut(),t.pingedLanes|=t.suspendedLanes&n,ft===t&&(wt&n)===n&&(at===4||at===3&&(wt&130023424)===wt&&500>Je()-vy?ns(t,0):yy|=n),Jt(t,e)}function z1(t,e){e===0&&(t.mode&1?(e=nu,nu<<=1,!(nu&130023424)&&(nu=4194304)):e=1);var n=Ut();t=xr(t,e),t!==null&&(uc(t,e,n),Jt(t,n))}function a2(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),z1(t,n)}function l2(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(H(314))}r!==null&&r.delete(e),z1(t,n)}var $1;$1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Yt.current)Wt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Wt=!1,QN(t,e,n);Wt=!!(t.flags&131072)}else Wt=!1,Me&&e.flags&1048576&&WT(e,_d,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Uu(t,e),t=e.pendingProps;var i=Co(e,Vt.current);xo(e,n),i=dy(null,e,r,t,i,n);var s=hy();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Xt(r)?(s=!0,yd(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,oy(e),i.updater=_h,e.stateNode=i,i._reactInternals=e,vm(e,r,t,n),e=xm(null,e,r,!0,s,n)):(e.tag=0,Me&&s&&Zg(e),Ft(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Uu(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=u2(r),t=Cn(r,t),i){case 0:e=wm(null,e,r,t,n);break e;case 1:e=rw(null,e,r,t,n);break e;case 11:e=tw(null,e,r,t,n);break e;case 14:e=nw(null,e,r,Cn(r.type,t),n);break e}throw Error(H(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Cn(r,i),wm(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Cn(r,i),rw(t,e,r,i,n);case 3:e:{if(I1(e),t===null)throw Error(H(387));r=e.pendingProps,s=e.memoizedState,i=s.element,ZT(t,e),bd(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Do(Error(H(423)),e),e=iw(t,e,r,n,i);break e}else if(r!==i){i=Do(Error(H(424)),e),e=iw(t,e,r,n,i);break e}else for(sn=ri(e.stateNode.containerInfo.firstChild),ln=e,Me=!0,Rn=null,n=XT(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Po(),r===i){e=br(t,e,n);break e}Ft(t,e,r,n)}e=e.child}return e;case 5:return e1(e),t===null&&mm(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,um(r,i)?o=null:s!==null&&um(r,s)&&(e.flags|=32),S1(t,e),Ft(t,e,o,n),e.child;case 6:return t===null&&mm(e),null;case 13:return A1(t,e,n);case 4:return ay(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ro(e,null,r,n):Ft(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Cn(r,i),tw(t,e,r,i,n);case 7:return Ft(t,e,e.pendingProps,n),e.child;case 8:return Ft(t,e,e.pendingProps.children,n),e.child;case 12:return Ft(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ce(wd,r._currentValue),r._currentValue=o,s!==null)if(Vn(s.value,o)){if(s.children===i.children&&!Yt.current){e=br(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=pr(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),gm(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(H(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),gm(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ft(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,xo(e,n),i=bn(i),r=r(i),e.flags|=1,Ft(t,e,r,n),e.child;case 14:return r=e.type,i=Cn(r,e.pendingProps),i=Cn(r.type,i),nw(t,e,r,i,n);case 15:return E1(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Cn(r,i),Uu(t,e),e.tag=1,Xt(r)?(t=!0,yd(e)):t=!1,xo(e,n),w1(e,r,i),vm(e,r,i,n),xm(null,e,r,!0,t,n);case 19:return k1(t,e,n);case 22:return T1(t,e,n)}throw Error(H(156,e.tag))};function q1(t,e){return yT(t,e)}function c2(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wn(t,e,n,r){return new c2(t,e,n,r)}function by(t){return t=t.prototype,!(!t||!t.isReactComponent)}function u2(t){if(typeof t=="function")return by(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Bg)return 11;if(t===zg)return 14}return 2}function ai(t,e){var n=t.alternate;return n===null?(n=wn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function $u(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")by(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Zs:return rs(n.children,i,s,e);case Ug:o=8,i|=8;break;case zp:return t=wn(12,n,e,i|2),t.elementType=zp,t.lanes=s,t;case $p:return t=wn(13,n,e,i),t.elementType=$p,t.lanes=s,t;case qp:return t=wn(19,n,e,i),t.elementType=qp,t.lanes=s,t;case eT:return bh(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case JE:o=10;break e;case ZE:o=9;break e;case Bg:o=11;break e;case zg:o=14;break e;case zr:o=16,r=null;break e}throw Error(H(130,t==null?t:typeof t,""))}return e=wn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function rs(t,e,n,r){return t=wn(7,t,r,e),t.lanes=n,t}function bh(t,e,n,r){return t=wn(22,t,r,e),t.elementType=eT,t.lanes=n,t.stateNode={isHidden:!1},t}function op(t,e,n){return t=wn(6,t,null,e),t.lanes=n,t}function ap(t,e,n){return e=wn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function d2(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bf(0),this.expirationTimes=Bf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bf(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Ey(t,e,n,r,i,s,o,a,l){return t=new d2(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=wn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},oy(s),t}function h2(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Js,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function K1(t){if(!t)return mi;t=t._reactInternals;e:{if(As(t)!==t||t.tag!==1)throw Error(H(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Xt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(H(171))}if(t.tag===1){var n=t.type;if(Xt(n))return KT(t,n,e)}return e}function G1(t,e,n,r,i,s,o,a,l){return t=Ey(n,r,!0,t,i,s,o,a,l),t.context=K1(null),n=t.current,r=Ut(),i=oi(n),s=pr(r,i),s.callback=e??null,ii(n,s,i),t.current.lanes=i,uc(t,i,r),Jt(t,r),t}function Eh(t,e,n,r){var i=e.current,s=Ut(),o=oi(i);return n=K1(n),e.context===null?e.context=n:e.pendingContext=n,e=pr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ii(i,e,o),t!==null&&(Dn(t,i,o,s),Lu(t,i,o)),o}function Pd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function pw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ty(t,e){pw(t,e),(t=t.alternate)&&pw(t,e)}function f2(){return null}var W1=typeof reportError=="function"?reportError:function(t){console.error(t)};function Sy(t){this._internalRoot=t}Th.prototype.render=Sy.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(H(409));Eh(t,e,null,null)};Th.prototype.unmount=Sy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;hs(function(){Eh(null,t,null,null)}),e[wr]=null}};function Th(t){this._internalRoot=t}Th.prototype.unstable_scheduleHydration=function(t){if(t){var e=TT();t={blockedOn:null,target:t,priority:e};for(var n=0;n<qr.length&&e!==0&&e<qr[n].priority;n++);qr.splice(n,0,t),n===0&&IT(t)}};function Iy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Sh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function mw(){}function p2(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Pd(o);s.call(u)}}var o=G1(e,r,t,0,null,!1,!1,"",mw);return t._reactRootContainer=o,t[wr]=o.current,Ll(t.nodeType===8?t.parentNode:t),hs(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=Pd(l);a.call(u)}}var l=Ey(t,0,!1,null,null,!1,!1,"",mw);return t._reactRootContainer=l,t[wr]=l.current,Ll(t.nodeType===8?t.parentNode:t),hs(function(){Eh(e,l,n,r)}),l}function Ih(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Pd(o);a.call(l)}}Eh(e,o,t,i)}else o=p2(n,e,t,i,r);return Pd(o)}bT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Qa(e.pendingLanes);n!==0&&(Kg(e,n|1),Jt(e,Je()),!(xe&6)&&(Vo=Je()+500,Ti()))}break;case 13:hs(function(){var r=xr(t,1);if(r!==null){var i=Ut();Dn(r,t,1,i)}}),Ty(t,1)}};Gg=function(t){if(t.tag===13){var e=xr(t,134217728);if(e!==null){var n=Ut();Dn(e,t,134217728,n)}Ty(t,134217728)}};ET=function(t){if(t.tag===13){var e=oi(t),n=xr(t,e);if(n!==null){var r=Ut();Dn(n,t,e,r)}Ty(t,e)}};TT=function(){return Se};ST=function(t,e){var n=Se;try{return Se=t,e()}finally{Se=n}};em=function(t,e,n){switch(e){case"input":if(Wp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=gh(r);if(!i)throw Error(H(90));nT(r),Wp(r,i)}}}break;case"textarea":iT(t,n);break;case"select":e=n.value,e!=null&&yo(t,!!n.multiple,e,!1)}};dT=_y;hT=hs;var m2={usingClientEntryPoint:!1,Events:[hc,ro,gh,cT,uT,_y]},ja={findFiberByHostInstance:Yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},g2={bundleType:ja.bundleType,version:ja.version,rendererPackageName:ja.rendererPackageName,rendererConfig:ja.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:kr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=mT(t),t===null?null:t.stateNode},findFiberByHostInstance:ja.findFiberByHostInstance||f2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fu.isDisabled&&fu.supportsFiber)try{hh=fu.inject(g2),$n=fu}catch{}}fn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=m2;fn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Iy(e))throw Error(H(200));return h2(t,e,null,n)};fn.createRoot=function(t,e){if(!Iy(t))throw Error(H(299));var n=!1,r="",i=W1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Ey(t,1,!1,null,null,n,!1,r,i),t[wr]=e.current,Ll(t.nodeType===8?t.parentNode:t),new Sy(e)};fn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(H(188)):(t=Object.keys(t).join(","),Error(H(268,t)));return t=mT(e),t=t===null?null:t.stateNode,t};fn.flushSync=function(t){return hs(t)};fn.hydrate=function(t,e,n){if(!Sh(e))throw Error(H(200));return Ih(null,t,e,!0,n)};fn.hydrateRoot=function(t,e,n){if(!Iy(t))throw Error(H(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=W1;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=G1(e,null,t,1,n??null,i,!1,s,o),t[wr]=e.current,Ll(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Th(e)};fn.render=function(t,e,n){if(!Sh(e))throw Error(H(200));return Ih(null,t,e,!1,n)};fn.unmountComponentAtNode=function(t){if(!Sh(t))throw Error(H(40));return t._reactRootContainer?(hs(function(){Ih(null,null,t,!1,function(){t._reactRootContainer=null,t[wr]=null})}),!0):!1};fn.unstable_batchedUpdates=_y;fn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Sh(n))throw Error(H(200));if(t==null||t._reactInternals===void 0)throw Error(H(38));return Ih(t,e,n,!1,r)};fn.version="18.3.1-next-f1338f8080-20240426";function H1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(H1)}catch(t){console.error(t)}}H1(),HE.exports=fn;var y2=HE.exports,Q1,gw=y2;Q1=gw.createRoot,gw.hydrateRoot;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var v2={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _2=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ve=(t,e)=>{const n=R.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:a="",children:l,...u},h)=>R.createElement("svg",{ref:h,...v2,width:i,height:i,stroke:r,strokeWidth:o?Number(s)*24/Number(i):s,className:["lucide",`lucide-${_2(t)}`,a].join(" "),...u},[...e.map(([f,p])=>R.createElement(f,p)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y1=ve("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=ve("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w2=ve("Anchor",[["path",{d:"M12 22V8",key:"qkxhtm"}],["path",{d:"M5 12H2a10 10 0 0 0 20 0h-3",key:"1hv3nh"}],["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x2=ve("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X1=ve("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J1=ve("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z1=ve("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eS=ve("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b2=ve("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E2=ve("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T2=ve("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S2=ve("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I2=ve("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tS=ve("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A2=ve("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nS=ve("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rS=ve("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k2=ve("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C2=ve("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P2=ve("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const li=ve("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Si=ve("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ah=ve("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pc=ve("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ay=ve("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mc=ve("Ship",[["path",{d:"M2 21c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1 .6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"iegodh"}],["path",{d:"M19.38 20A11.6 11.6 0 0 0 21 14l-9-4-9 4c0 2.9.94 5.34 2.81 7.76",key:"fp8vka"}],["path",{d:"M19 13V7a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v6",key:"qpkstq"}],["path",{d:"M12 10v4",key:"1kjpxc"}],["path",{d:"M12 2v3",key:"qbqxhf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R2=ve("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N2=ve("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D2=ve("SunMedium",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 3v1",key:"1asbbs"}],["path",{d:"M12 20v1",key:"1wcdkc"}],["path",{d:"M3 12h1",key:"lp3yf2"}],["path",{d:"M20 12h1",key:"1vloll"}],["path",{d:"m18.364 5.636-.707.707",key:"1hakh0"}],["path",{d:"m6.343 17.657-.707.707",key:"18m9nf"}],["path",{d:"m5.636 5.636.707.707",key:"1xv1c5"}],["path",{d:"m17.657 17.657.707.707",key:"vl76zb"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V2=ve("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gc=ve("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j2=ve("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kh=ve("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iS=ve("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=ve("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function O2(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}function Ch(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Dm=t=>Array.isArray(t);function sS(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function Gl(t){return typeof t=="string"||Array.isArray(t)}function yw(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function ky(t,e,n,r){if(typeof e=="function"){const[i,s]=yw(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=yw(r);e=e(n!==void 0?n:t.custom,i,s)}return e}function Ph(t,e,n){const r=t.getProps();return ky(r,e,n!==void 0?n:r.custom,t)}const Cy=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Py=["initial",...Cy],yc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Cs=new Set(yc),mr=t=>t*1e3,gr=t=>t/1e3,L2={type:"spring",stiffness:500,damping:25,restSpeed:10},M2=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),F2={type:"keyframes",duration:.8},U2={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},B2=(t,{keyframes:e})=>e.length>2?F2:Cs.has(t)?t.startsWith("scale")?M2(e[1]):L2:U2;function Ry(t,e){return t?t[e]||t.default||t:void 0}const z2={skipAnimations:!1,useManualTiming:!1},$2=t=>t!==null;function Rh(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter($2),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const Dt=t=>t;function q2(t){let e=new Set,n=new Set,r=!1,i=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(u){s.has(u)&&(l.schedule(u),t()),u(o)}const l={schedule:(u,h=!1,f=!1)=>{const v=f&&r?e:n;return h&&s.add(u),v.has(u)||v.add(u),u},cancel:u=>{n.delete(u),s.delete(u)},process:u=>{if(o=u,r){i=!0;return}r=!0,[e,n]=[n,e],n.clear(),e.forEach(a),r=!1,i&&(i=!1,l.process(u))}};return l}const pu=["read","resolveKeyframes","update","preRender","render","postRender"],K2=40;function oS(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=pu.reduce((_,y)=>(_[y]=q2(s),_),{}),{read:a,resolveKeyframes:l,update:u,preRender:h,render:f,postRender:p}=o,v=()=>{const _=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(_-i.timestamp,K2),1),i.timestamp=_,i.isProcessing=!0,a.process(i),l.process(i),u.process(i),h.process(i),f.process(i),p.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(v))},b=()=>{n=!0,r=!0,i.isProcessing||t(v)};return{schedule:pu.reduce((_,y)=>{const w=o[y];return _[y]=(P,V=!1,O=!1)=>(n||b(),w.schedule(P,V,O)),_},{}),cancel:_=>{for(let y=0;y<pu.length;y++)o[pu[y]].cancel(_)},state:i,steps:o}}const{schedule:Ie,cancel:gi,state:vt,steps:lp}=oS(typeof requestAnimationFrame<"u"?requestAnimationFrame:Dt,!0),aS=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,G2=1e-7,W2=12;function H2(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=aS(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>G2&&++a<W2);return o}function vc(t,e,n,r){if(t===e&&n===r)return Dt;const i=s=>H2(s,0,1,t,n);return s=>s===0||s===1?s:aS(i(s),e,r)}const lS=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,cS=t=>e=>1-t(1-e),uS=vc(.33,1.53,.69,.99),Ny=cS(uS),dS=lS(Ny),hS=t=>(t*=2)<1?.5*Ny(t):.5*(2-Math.pow(2,-10*(t-1))),Dy=t=>1-Math.sin(Math.acos(t)),fS=cS(Dy),pS=lS(Dy),mS=t=>/^0[^.\s]+$/u.test(t);function Q2(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||mS(t):!0}let Vm=Dt;const gS=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),yS=t=>e=>typeof e=="string"&&e.startsWith(t),vS=yS("--"),Y2=yS("var(--"),Vy=t=>Y2(t)?X2.test(t.split("/*")[0].trim()):!1,X2=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,J2=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Z2(t){const e=J2.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function _S(t,e,n=1){const[r,i]=Z2(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return gS(o)?parseFloat(o):o}return Vy(i)?_S(i,e,n+1):i}const Er=(t,e,n)=>n>e?e:n<t?t:n,na={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Wl={...na,transform:t=>Er(0,1,t)},mu={...na,default:1},_c=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Ur=_c("deg"),Kn=_c("%"),ae=_c("px"),eD=_c("vh"),tD=_c("vw"),vw={...Kn,parse:t=>Kn.parse(t)/100,transform:t=>Kn.transform(t*100)},nD=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),_w=t=>t===na||t===ae,ww=(t,e)=>parseFloat(t.split(", ")[e]),xw=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return ww(i[1],e);{const s=r.match(/^matrix\((.+)\)$/u);return s?ww(s[1],t):0}},rD=new Set(["x","y","z"]),iD=yc.filter(t=>!rD.has(t));function sD(t){const e=[];return iD.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const jo={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:xw(4,13),y:xw(5,14)};jo.translateX=jo.x;jo.translateY=jo.y;const wS=t=>e=>e.test(t),oD={test:t=>t==="auto",parse:t=>t},xS=[na,ae,Kn,Ur,tD,eD,oD],bw=t=>xS.find(wS(t)),is=new Set;let jm=!1,Om=!1;function bS(){if(Om){const t=Array.from(is).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=sD(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))===null||a===void 0||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Om=!1,jm=!1,is.forEach(t=>t.complete()),is.clear()}function ES(){is.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Om=!0)})}function aD(){ES(),bS()}class jy{constructor(e,n,r,i,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(is.add(this),jm||(jm=!0,Ie.read(ES),Ie.resolveKeyframes(bS))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=i==null?void 0:i.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const l=r.readValue(n,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),i&&o===void 0&&i.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),is.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,is.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const gl=t=>Math.round(t*1e5)/1e5,Oy=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function lD(t){return t==null}const cD=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Ly=(t,e)=>n=>!!(typeof n=="string"&&cD.test(n)&&n.startsWith(t)||e&&!lD(n)&&Object.prototype.hasOwnProperty.call(n,e)),TS=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(Oy);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},uD=t=>Er(0,255,t),cp={...na,transform:t=>Math.round(uD(t))},Zi={test:Ly("rgb","red"),parse:TS("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+cp.transform(t)+", "+cp.transform(e)+", "+cp.transform(n)+", "+gl(Wl.transform(r))+")"};function dD(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Lm={test:Ly("#"),parse:dD,transform:Zi.transform},uo={test:Ly("hsl","hue"),parse:TS("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Kn.transform(gl(e))+", "+Kn.transform(gl(n))+", "+gl(Wl.transform(r))+")"},kt={test:t=>Zi.test(t)||Lm.test(t)||uo.test(t),parse:t=>Zi.test(t)?Zi.parse(t):uo.test(t)?uo.parse(t):Lm.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Zi.transform(t):uo.transform(t)},hD=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function fD(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Oy))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(hD))===null||n===void 0?void 0:n.length)||0)>0}const SS="number",IS="color",pD="var",mD="var(",Ew="${}",gD=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Hl(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(gD,l=>(kt.test(l)?(r.color.push(s),i.push(IS),n.push(kt.parse(l))):l.startsWith(mD)?(r.var.push(s),i.push(pD),n.push(l)):(r.number.push(s),i.push(SS),n.push(parseFloat(l))),++s,Ew)).split(Ew);return{values:n,split:a,indexes:r,types:i}}function AS(t){return Hl(t).values}function kS(t){const{split:e,types:n}=Hl(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===SS?s+=gl(i[o]):a===IS?s+=kt.transform(i[o]):s+=i[o]}return s}}const yD=t=>typeof t=="number"?0:t;function vD(t){const e=AS(t);return kS(t)(e.map(yD))}const yi={test:fD,parse:AS,createTransformer:kS,getAnimatableNone:vD},_D=new Set(["brightness","contrast","saturate","opacity"]);function wD(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Oy)||[];if(!r)return t;const i=n.replace(r,"");let s=_D.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const xD=/\b([a-z-]*)\(.*?\)/gu,Mm={...yi,getAnimatableNone:t=>{const e=t.match(xD);return e?e.map(wD).join(" "):t}},bD={borderWidth:ae,borderTopWidth:ae,borderRightWidth:ae,borderBottomWidth:ae,borderLeftWidth:ae,borderRadius:ae,radius:ae,borderTopLeftRadius:ae,borderTopRightRadius:ae,borderBottomRightRadius:ae,borderBottomLeftRadius:ae,width:ae,maxWidth:ae,height:ae,maxHeight:ae,top:ae,right:ae,bottom:ae,left:ae,padding:ae,paddingTop:ae,paddingRight:ae,paddingBottom:ae,paddingLeft:ae,margin:ae,marginTop:ae,marginRight:ae,marginBottom:ae,marginLeft:ae,backgroundPositionX:ae,backgroundPositionY:ae},ED={rotate:Ur,rotateX:Ur,rotateY:Ur,rotateZ:Ur,scale:mu,scaleX:mu,scaleY:mu,scaleZ:mu,skew:Ur,skewX:Ur,skewY:Ur,distance:ae,translateX:ae,translateY:ae,translateZ:ae,x:ae,y:ae,z:ae,perspective:ae,transformPerspective:ae,opacity:Wl,originX:vw,originY:vw,originZ:ae},Tw={...na,transform:Math.round},My={...bD,...ED,zIndex:Tw,size:ae,fillOpacity:Wl,strokeOpacity:Wl,numOctaves:Tw},TD={...My,color:kt,backgroundColor:kt,outlineColor:kt,fill:kt,stroke:kt,borderColor:kt,borderTopColor:kt,borderRightColor:kt,borderBottomColor:kt,borderLeftColor:kt,filter:Mm,WebkitFilter:Mm},Fy=t=>TD[t];function CS(t,e){let n=Fy(t);return n!==Mm&&(n=yi),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const SD=new Set(["auto","none","0"]);function ID(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!SD.has(s)&&Hl(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=CS(n,i)}class PS extends jy{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="string"&&(u=u.trim(),Vy(u))){const h=_S(u,n.current);h!==void 0&&(e[l]=h),l===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!nD.has(r)||e.length!==2)return;const[i,s]=e,o=bw(i),a=bw(s);if(o!==a)if(_w(o)&&_w(a))for(let l=0;l<e.length;l++){const u=e[l];typeof u=="string"&&(e[l]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)Q2(e[i])&&r.push(i);r.length&&ID(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=jo[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const s=n.getValue(r);s&&s.jump(this.measuredOrigin,!1);const o=i.length-1,a=i[o];i[o]=jo[r](n.measureViewportBox(),window.getComputedStyle(n.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,u])=>{n.getValue(l).set(u)}),this.resolveNoneKeyframes()}}function Uy(t){return typeof t=="function"}let qu;function AD(){qu=void 0}const Gn={now:()=>(qu===void 0&&Gn.set(vt.isProcessing||z2.useManualTiming?vt.timestamp:performance.now()),qu),set:t=>{qu=t,queueMicrotask(AD)}},Sw=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(yi.test(t)||t==="0")&&!t.startsWith("url("));function kD(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function CD(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=Sw(i,e),a=Sw(s,e);return!o||!a?!1:kD(t)||(n==="spring"||Uy(n))&&r}const PD=40;class RS{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Gn.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>PD?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&aD(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=Gn.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:s,delay:o,onComplete:a,onUpdate:l,isGenerator:u}=this.options;if(!u&&!CD(e,r,i,s))if(o)this.options.duration=0;else{l==null||l(Rh(e,this.options,n)),a==null||a(),this.resolveFinishedPromise();return}const h=this.initPlayback(e,n);h!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...h},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Oo=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},NS=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=t(Oo(0,i-1,s))+", ";return`linear(${r.substring(0,r.length-2)})`};function DS(t,e){return e?t*(1e3/e):0}const RD=5;function VS(t,e,n){const r=Math.max(e-RD,0);return DS(n-t(r),e-r)}const We={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},up=.001;function ND({duration:t=We.duration,bounce:e=We.bounce,velocity:n=We.velocity,mass:r=We.mass}){let i,s,o=1-e;o=Er(We.minDamping,We.maxDamping,o),t=Er(We.minDuration,We.maxDuration,gr(t)),o<1?(i=u=>{const h=u*o,f=h*t,p=h-n,v=Fm(u,o),b=Math.exp(-f);return up-p/v*b},s=u=>{const f=u*o*t,p=f*n+n,v=Math.pow(o,2)*Math.pow(u,2)*t,b=Math.exp(-f),T=Fm(Math.pow(u,2),o);return(-i(u)+up>0?-1:1)*((p-v)*b)/T}):(i=u=>{const h=Math.exp(-u*t),f=(u-n)*t+1;return-up+h*f},s=u=>{const h=Math.exp(-u*t),f=(n-u)*(t*t);return h*f});const a=5/t,l=VD(i,s,a);if(t=mr(t),isNaN(l))return{stiffness:We.stiffness,damping:We.damping,duration:t};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:t}}}const DD=12;function VD(t,e,n){let r=n;for(let i=1;i<DD;i++)r=r-t(r)/e(r);return r}function Fm(t,e){return t*Math.sqrt(1-e*e)}const Um=2e4;function jS(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Um;)e+=n,r=t.next(e);return e>=Um?1/0:e}const jD=["duration","bounce"],OD=["stiffness","damping","mass"];function Iw(t,e){return e.some(n=>t[n]!==void 0)}function LD(t){let e={velocity:We.velocity,stiffness:We.stiffness,damping:We.damping,mass:We.mass,isResolvedFromDuration:!1,...t};if(!Iw(t,OD)&&Iw(t,jD))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*Er(.05,1,1-t.bounce)*Math.sqrt(i);e={...e,mass:We.mass,stiffness:i,damping:s}}else{const n=ND(t);e={...e,...n,mass:We.mass},e.isResolvedFromDuration=!0}return e}function OS(t=We.visualDuration,e=We.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:u,mass:h,duration:f,velocity:p,isResolvedFromDuration:v}=LD({...n,velocity:-gr(n.velocity||0)}),b=p||0,T=u/(2*Math.sqrt(l*h)),A=o-s,_=gr(Math.sqrt(l/h)),y=Math.abs(A)<5;r||(r=y?We.restSpeed.granular:We.restSpeed.default),i||(i=y?We.restDelta.granular:We.restDelta.default);let w;if(T<1){const V=Fm(_,T);w=O=>{const I=Math.exp(-T*_*O);return o-I*((b+T*_*A)/V*Math.sin(V*O)+A*Math.cos(V*O))}}else if(T===1)w=V=>o-Math.exp(-_*V)*(A+(b+_*A)*V);else{const V=_*Math.sqrt(T*T-1);w=O=>{const I=Math.exp(-T*_*O),x=Math.min(V*O,300);return o-I*((b+T*_*A)*Math.sinh(x)+V*A*Math.cosh(x))/V}}const P={calculatedDuration:v&&f||null,next:V=>{const O=w(V);if(v)a.done=V>=f;else{let I=0;T<1&&(I=V===0?mr(b):VS(w,V,O));const x=Math.abs(I)<=r,k=Math.abs(o-O)<=i;a.done=x&&k}return a.value=a.done?o:O,a},toString:()=>{const V=Math.min(jS(P),Um),O=NS(I=>P.next(V*I).value,V,30);return V+"ms "+O}};return P}function Aw({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:h}){const f=t[0],p={done:!1,value:f},v=x=>a!==void 0&&x<a||l!==void 0&&x>l,b=x=>a===void 0?l:l===void 0||Math.abs(a-x)<Math.abs(l-x)?a:l;let T=n*e;const A=f+T,_=o===void 0?A:o(A);_!==A&&(T=_-f);const y=x=>-T*Math.exp(-x/r),w=x=>_+y(x),P=x=>{const k=y(x),C=w(x);p.done=Math.abs(k)<=u,p.value=p.done?_:C};let V,O;const I=x=>{v(p.value)&&(V=x,O=OS({keyframes:[p.value,b(p.value)],velocity:VS(w,x,p.value),damping:i,stiffness:s,restDelta:u,restSpeed:h}))};return I(0),{calculatedDuration:null,next:x=>{let k=!1;return!O&&V===void 0&&(k=!0,P(x),I(x)),V!==void 0&&x>=V?O.next(x-V):(!k&&P(x),p)}}}const MD=vc(.42,0,1,1),FD=vc(0,0,.58,1),LS=vc(.42,0,.58,1),UD=t=>Array.isArray(t)&&typeof t[0]!="number",By=t=>Array.isArray(t)&&typeof t[0]=="number",kw={linear:Dt,easeIn:MD,easeInOut:LS,easeOut:FD,circIn:Dy,circInOut:pS,circOut:fS,backIn:Ny,backInOut:dS,backOut:uS,anticipate:hS},Cw=t=>{if(By(t)){Vm(t.length===4);const[e,n,r,i]=t;return vc(e,n,r,i)}else if(typeof t=="string")return Vm(kw[t]!==void 0),kw[t];return t},BD=(t,e)=>n=>e(t(n)),yr=(...t)=>t.reduce(BD),Ue=(t,e,n)=>t+(e-t)*n;function dp(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function zD({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=dp(l,a,t+1/3),s=dp(l,a,t),o=dp(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function Rd(t,e){return n=>n>0?e:t}const hp=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},$D=[Lm,Zi,uo],qD=t=>$D.find(e=>e.test(t));function Pw(t){const e=qD(t);if(!e)return!1;let n=e.parse(t);return e===uo&&(n=zD(n)),n}const Rw=(t,e)=>{const n=Pw(t),r=Pw(e);if(!n||!r)return Rd(t,e);const i={...n};return s=>(i.red=hp(n.red,r.red,s),i.green=hp(n.green,r.green,s),i.blue=hp(n.blue,r.blue,s),i.alpha=Ue(n.alpha,r.alpha,s),Zi.transform(i))},Bm=new Set(["none","hidden"]);function KD(t,e){return Bm.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function GD(t,e){return n=>Ue(t,e,n)}function zy(t){return typeof t=="number"?GD:typeof t=="string"?Vy(t)?Rd:kt.test(t)?Rw:QD:Array.isArray(t)?MS:typeof t=="object"?kt.test(t)?Rw:WD:Rd}function MS(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>zy(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function WD(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=zy(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function HD(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],a=t.indexes[o][i[o]],l=(n=t.values[a])!==null&&n!==void 0?n:0;r[s]=l,i[o]++}return r}const QD=(t,e)=>{const n=yi.createTransformer(e),r=Hl(t),i=Hl(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?Bm.has(t)&&!i.values.length||Bm.has(e)&&!r.values.length?KD(t,e):yr(MS(HD(r,i),i.values),n):Rd(t,e)};function FS(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Ue(t,e,n):zy(t)(t,e)}function YD(t,e,n){const r=[],i=n||FS,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||Dt:e;a=yr(l,a)}r.push(a)}return r}function XD(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(Vm(s===e.length),s===1)return()=>e[0];if(s===2&&t[0]===t[1])return()=>e[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=YD(e,r,i),a=o.length,l=u=>{let h=0;if(a>1)for(;h<t.length-2&&!(u<t[h+1]);h++);const f=Oo(t[h],t[h+1],u);return o[h](f)};return n?u=>l(Er(t[0],t[s-1],u)):l}function JD(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Oo(0,e,r);t.push(Ue(n,1,i))}}function ZD(t){const e=[0];return JD(e,t.length-1),e}function eV(t,e){return t.map(n=>n*e)}function tV(t,e){return t.map(()=>e||LS).splice(0,t.length-1)}function Nd({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=UD(r)?r.map(Cw):Cw(r),s={done:!1,value:e[0]},o=eV(n&&n.length===e.length?n:ZD(e),t),a=XD(o,e,{ease:Array.isArray(i)?i:tV(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const nV=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Ie.update(e,!0),stop:()=>gi(e),now:()=>vt.isProcessing?vt.timestamp:Gn.now()}},rV={decay:Aw,inertia:Aw,tween:Nd,keyframes:Nd,spring:OS},iV=t=>t/100;class $y extends RS{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:i,keyframes:s}=this.options,o=(i==null?void 0:i.KeyframeResolver)||jy,a=(l,u)=>this.onKeyframesResolved(l,u);this.resolver=new o(s,a,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=this.options,a=Uy(n)?n:rV[n]||Nd;let l,u;a!==Nd&&typeof e[0]!="number"&&(l=yr(iV,FS(e[0],e[1])),e=[0,100]);const h=a({...this.options,keyframes:e});s==="mirror"&&(u=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),h.calculatedDuration===null&&(h.calculatedDuration=jS(h));const{calculatedDuration:f}=h,p=f+i,v=p*(r+1)-i;return{generator:h,mirroredGenerator:u,mapPercentToKeyframes:l,calculatedDuration:f,resolvedDuration:p,totalDuration:v}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:x}=this.options;return{done:!0,value:x[x.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:u,totalDuration:h,resolvedDuration:f}=r;if(this.startTime===null)return s.next(0);const{delay:p,repeat:v,repeatType:b,repeatDelay:T,onUpdate:A}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-h/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const _=this.currentTime-p*(this.speed>=0?1:-1),y=this.speed>=0?_<0:_>h;this.currentTime=Math.max(_,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=h);let w=this.currentTime,P=s;if(v){const x=Math.min(this.currentTime,h)/f;let k=Math.floor(x),C=x%1;!C&&x>=1&&(C=1),C===1&&k--,k=Math.min(k,v+1),!!(k%2)&&(b==="reverse"?(C=1-C,T&&(C-=T/f)):b==="mirror"&&(P=o)),w=Er(0,1,C)*f}const V=y?{done:!1,value:l[0]}:P.next(w);a&&(V.value=a(V.value));let{done:O}=V;!y&&u!==null&&(O=this.speed>=0?this.currentTime>=h:this.currentTime<=0);const I=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&O);return I&&i!==void 0&&(V.value=Rh(l,this.options,i)),A&&A(V.value),I&&this.finish(),V}get duration(){const{resolved:e}=this;return e?gr(e.calculatedDuration):0}get time(){return gr(this.currentTime)}set time(e){e=mr(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=gr(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=nV,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const sV=new Set(["opacity","clipPath","filter","transform"]);function qy(t){let e;return()=>(e===void 0&&(e=t()),e)}const oV={linearEasing:void 0};function aV(t,e){const n=qy(t);return()=>{var r;return(r=oV[e])!==null&&r!==void 0?r:n()}}const Dd=aV(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing");function US(t){return!!(typeof t=="function"&&Dd()||!t||typeof t=="string"&&(t in zm||Dd())||By(t)||Array.isArray(t)&&t.every(US))}const Xa=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,zm={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Xa([0,.65,.55,1]),circOut:Xa([.55,0,1,.45]),backIn:Xa([.31,.01,.66,-.59]),backOut:Xa([.33,1.53,.69,.99])};function BS(t,e){if(t)return typeof t=="function"&&Dd()?NS(t,e):By(t)?Xa(t):Array.isArray(t)?t.map(n=>BS(n,e)||zm.easeOut):zm[t]}function lV(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const u={[e]:n};l&&(u.offset=l);const h=BS(a,i);return Array.isArray(h)&&(u.easing=h),t.animate(u,{delay:r,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}function Nw(t,e){t.timeline=e,t.onfinish=null}const cV=qy(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Vd=10,uV=2e4;function dV(t){return Uy(t.type)||t.type==="spring"||!US(t.ease)}function hV(t,e){const n=new $y({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let s=0;for(;!r.done&&s<uV;)r=n.sample(s),i.push(r.value),s+=Vd;return{times:void 0,keyframes:i,duration:s-Vd,ease:"linear"}}const zS={anticipate:hS,backInOut:dS,circInOut:pS};function fV(t){return t in zS}class Dw extends RS{constructor(e){super(e);const{name:n,motionValue:r,element:i,keyframes:s}=this.options;this.resolver=new PS(s,(o,a)=>this.onKeyframesResolved(o,a),n,r,i),this.resolver.scheduleResolve()}initPlayback(e,n){var r;let{duration:i=300,times:s,ease:o,type:a,motionValue:l,name:u,startTime:h}=this.options;if(!(!((r=l.owner)===null||r===void 0)&&r.current))return!1;if(typeof o=="string"&&Dd()&&fV(o)&&(o=zS[o]),dV(this.options)){const{onComplete:p,onUpdate:v,motionValue:b,element:T,...A}=this.options,_=hV(e,A);e=_.keyframes,e.length===1&&(e[1]=e[0]),i=_.duration,s=_.times,o=_.ease,a="keyframes"}const f=lV(l.owner.current,u,e,{...this.options,duration:i,times:s,ease:o});return f.startTime=h??this.calcStartTime(),this.pendingTimeline?(Nw(f,this.pendingTimeline),this.pendingTimeline=void 0):f.onfinish=()=>{const{onComplete:p}=this.options;l.set(Rh(e,this.options,n)),p&&p(),this.cancel(),this.resolveFinishedPromise()},{animation:f,duration:i,times:s,type:a,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return gr(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return gr(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=mr(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Dt;const{animation:r}=n;Nw(r,e)}return Dt}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:s,ease:o,times:a}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:u,onUpdate:h,onComplete:f,element:p,...v}=this.options,b=new $y({...v,keyframes:r,duration:i,type:s,ease:o,times:a,isGenerator:!0}),T=mr(this.time);u.setWithVelocity(b.sample(T-Vd).value,b.sample(T).value,Vd)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:s,damping:o,type:a}=e;return cV()&&r&&sV.has(r)&&n&&n.owner&&n.owner.current instanceof HTMLElement&&!n.owner.getProps().onUpdate&&!i&&s!=="mirror"&&o!==0&&a!=="inertia"}}const pV=qy(()=>window.ScrollTimeline!==void 0);class mV{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}then(e,n){return Promise.all(this.animations).then(e).catch(n)}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(i=>pV()&&i.attachTimeline?i.attachTimeline(e):n(i));return()=>{r.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function gV({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:u,...h}){return!!Object.keys(h).length}const Ky=(t,e,n,r={},i,s)=>o=>{const a=Ry(r,t)||{},l=a.delay||r.delay||0;let{elapsed:u=0}=r;u=u-mr(l);let h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-u,onUpdate:p=>{e.set(p),a.onUpdate&&a.onUpdate(p)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};gV(a)||(h={...h,...B2(t,h)}),h.duration&&(h.duration=mr(h.duration)),h.repeatDelay&&(h.repeatDelay=mr(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let f=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(h.duration=0,h.delay===0&&(f=!0)),f&&!s&&e.get()!==void 0){const p=Rh(h.keyframes,a);if(p!==void 0)return Ie.update(()=>{h.onUpdate(p),h.onComplete()}),new mV([])}return!s&&Dw.supports(h)?new Dw(h):new $y(h)},yV=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),vV=t=>Dm(t)?t[t.length-1]||0:t;function Gy(t,e){t.indexOf(e)===-1&&t.push(e)}function Wy(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Hy{constructor(){this.subscriptions=[]}add(e){return Gy(this.subscriptions,e),()=>Wy(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Vw=30,_V=t=>!isNaN(parseFloat(t));class wV{constructor(e,n={}){this.version="11.12.0",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const s=Gn.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Gn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=_V(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Hy);const r=this.events[e].add(n);return e==="change"?()=>{r(),Ie.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Gn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Vw)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Vw);return DS(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ql(t,e){return new wV(t,e)}function xV(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Ql(n))}function bV(t,e){const n=Ph(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=vV(s[o]);xV(t,o,a)}}const Qy=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),EV="framerAppearId",$S="data-"+Qy(EV);function qS(t){return t.props[$S]}const Rt=t=>!!(t&&t.getVelocity);function TV(t){return!!(Rt(t)&&t.add)}function $m(t,e){const n=t.getValue("willChange");if(TV(n))return n.add(e)}function SV({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function KS(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var s;let{transition:o=t.getDefaultTransition(),transitionEnd:a,...l}=e;r&&(o=r);const u=[],h=i&&t.animationState&&t.animationState.getState()[i];for(const f in l){const p=t.getValue(f,(s=t.latestValues[f])!==null&&s!==void 0?s:null),v=l[f];if(v===void 0||h&&SV(h,f))continue;const b={delay:n,...Ry(o||{},f)};let T=!1;if(window.MotionHandoffAnimation){const _=qS(t);if(_){const y=window.MotionHandoffAnimation(_,f,Ie);y!==null&&(b.startTime=y,T=!0)}}$m(t,f),p.start(Ky(f,p,v,t.shouldReduceMotion&&Cs.has(f)?{type:!1}:b,t,T));const A=p.animation;A&&u.push(A)}return a&&Promise.all(u).then(()=>{Ie.update(()=>{a&&bV(t,a)})}),u}function qm(t,e,n={}){var r;const i=Ph(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const o=i?()=>Promise.all(KS(t,i,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:h=0,staggerChildren:f,staggerDirection:p}=s;return IV(t,e,h+u,f,p,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[u,h]=l==="beforeChildren"?[o,a]:[a,o];return u().then(()=>h())}else return Promise.all([o(),a(n.delay)])}function IV(t,e,n=0,r=0,i=1,s){const o=[],a=(t.variantChildren.size-1)*r,l=i===1?(u=0)=>u*r:(u=0)=>a-u*r;return Array.from(t.variantChildren).sort(AV).forEach((u,h)=>{u.notify("AnimationStart",e),o.push(qm(u,e,{...s,delay:n+l(h)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(o)}function AV(t,e){return t.sortNodePosition(e)}function kV(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>qm(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=qm(t,e,n);else{const i=typeof e=="function"?Ph(t,e,n.custom):e;r=Promise.all(KS(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const CV=Py.length;function GS(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?GS(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<CV;n++){const r=Py[n],i=t.props[r];(Gl(i)||i===!1)&&(e[r]=i)}return e}const PV=[...Cy].reverse(),RV=Cy.length;function NV(t){return e=>Promise.all(e.map(({animation:n,options:r})=>kV(t,n,r)))}function DV(t){let e=NV(t),n=jw(),r=!0;const i=l=>(u,h)=>{var f;const p=Ph(t,h,l==="exit"?(f=t.presenceContext)===null||f===void 0?void 0:f.custom:void 0);if(p){const{transition:v,transitionEnd:b,...T}=p;u={...u,...T,...b}}return u};function s(l){e=l(t)}function o(l){const{props:u}=t,h=GS(t.parent)||{},f=[],p=new Set;let v={},b=1/0;for(let A=0;A<RV;A++){const _=PV[A],y=n[_],w=u[_]!==void 0?u[_]:h[_],P=Gl(w),V=_===l?y.isActive:null;V===!1&&(b=A);let O=w===h[_]&&w!==u[_]&&P;if(O&&r&&t.manuallyAnimateOnMount&&(O=!1),y.protectedKeys={...v},!y.isActive&&V===null||!w&&!y.prevProp||Ch(w)||typeof w=="boolean")continue;const I=VV(y.prevProp,w);let x=I||_===l&&y.isActive&&!O&&P||A>b&&P,k=!1;const C=Array.isArray(w)?w:[w];let D=C.reduce(i(_),{});V===!1&&(D={});const{prevResolvedValues:N={}}=y,E={...N,...D},F=Q=>{x=!0,p.has(Q)&&(k=!0,p.delete(Q)),y.needsAnimating[Q]=!0;const B=t.getValue(Q);B&&(B.liveStyle=!1)};for(const Q in E){const B=D[Q],j=N[Q];if(v.hasOwnProperty(Q))continue;let K=!1;Dm(B)&&Dm(j)?K=!sS(B,j):K=B!==j,K?B!=null?F(Q):p.add(Q):B!==void 0&&p.has(Q)?F(Q):y.protectedKeys[Q]=!0}y.prevProp=w,y.prevResolvedValues=D,y.isActive&&(v={...v,...D}),r&&t.blockInitialAnimation&&(x=!1),x&&(!(O&&I)||k)&&f.push(...C.map(Q=>({animation:Q,options:{type:_}})))}if(p.size){const A={};p.forEach(_=>{const y=t.getBaseTarget(_),w=t.getValue(_);w&&(w.liveStyle=!0),A[_]=y??null}),f.push({animation:A})}let T=!!f.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(T=!1),r=!1,T?e(f):Promise.resolve()}function a(l,u){var h;if(n[l].isActive===u)return Promise.resolve();(h=t.variantChildren)===null||h===void 0||h.forEach(p=>{var v;return(v=p.animationState)===null||v===void 0?void 0:v.setActive(l,u)}),n[l].isActive=u;const f=o(l);for(const p in n)n[p].protectedKeys={};return f}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=jw(),r=!0}}}function VV(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!sS(e,t):!1}function Oi(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function jw(){return{animate:Oi(!0),whileInView:Oi(),whileHover:Oi(),whileTap:Oi(),whileDrag:Oi(),whileFocus:Oi(),exit:Oi()}}class Ii{constructor(e){this.isMounted=!1,this.node=e}update(){}}class jV extends Ii{constructor(e){super(e),e.animationState||(e.animationState=DV(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Ch(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let OV=0;class LV extends Ii{constructor(){super(...arguments),this.id=OV++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const MV={animation:{Feature:jV},exit:{Feature:LV}},WS=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function Nh(t,e="page"){return{point:{x:t[`${e}X`],y:t[`${e}Y`]}}}const FV=t=>e=>WS(e)&&t(e,Nh(e));function ar(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function vr(t,e,n,r){return ar(t,e,FV(n),r)}const Ow=(t,e)=>Math.abs(t-e);function UV(t,e){const n=Ow(t.x,e.x),r=Ow(t.y,e.y);return Math.sqrt(n**2+r**2)}class HS{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=pp(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,v=UV(f.offset,{x:0,y:0})>=3;if(!p&&!v)return;const{point:b}=f,{timestamp:T}=vt;this.history.push({...b,timestamp:T});const{onStart:A,onMove:_}=this.handlers;p||(A&&A(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),_&&_(this.lastMoveEvent,f)},this.handlePointerMove=(f,p)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=fp(p,this.transformPagePoint),Ie.update(this.updatePoint,!0)},this.handlePointerUp=(f,p)=>{this.end();const{onEnd:v,onSessionEnd:b,resumeAnimation:T}=this.handlers;if(this.dragSnapToOrigin&&T&&T(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const A=pp(f.type==="pointercancel"?this.lastMoveEventInfo:fp(p,this.transformPagePoint),this.history);this.startEvent&&v&&v(f,A),b&&b(f,A)},!WS(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=Nh(e),a=fp(o,this.transformPagePoint),{point:l}=a,{timestamp:u}=vt;this.history=[{...l,timestamp:u}];const{onSessionStart:h}=n;h&&h(e,pp(a,this.history)),this.removeListeners=yr(vr(this.contextWindow,"pointermove",this.handlePointerMove),vr(this.contextWindow,"pointerup",this.handlePointerUp),vr(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),gi(this.updatePoint)}}function fp(t,e){return e?{point:e(t.point)}:t}function Lw(t,e){return{x:t.x-e.x,y:t.y-e.y}}function pp({point:t},e){return{point:t,delta:Lw(t,QS(e)),offset:Lw(t,BV(e)),velocity:zV(e,.1)}}function BV(t){return t[0]}function QS(t){return t[t.length-1]}function zV(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=QS(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>mr(e)));)n--;if(!r)return{x:0,y:0};const s=gr(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function YS(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const Mw=YS("dragHorizontal"),Fw=YS("dragVertical");function XS(t){let e=!1;if(t==="y")e=Fw();else if(t==="x")e=Mw();else{const n=Mw(),r=Fw();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function JS(){const t=XS(!0);return t?(t(),!1):!0}function ho(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}const ZS=1e-4,$V=1-ZS,qV=1+ZS,eI=.01,KV=0-eI,GV=0+eI;function dn(t){return t.max-t.min}function WV(t,e,n){return Math.abs(t-e)<=n}function Uw(t,e,n,r=.5){t.origin=r,t.originPoint=Ue(e.min,e.max,t.origin),t.scale=dn(n)/dn(e),t.translate=Ue(n.min,n.max,t.origin)-t.originPoint,(t.scale>=$V&&t.scale<=qV||isNaN(t.scale))&&(t.scale=1),(t.translate>=KV&&t.translate<=GV||isNaN(t.translate))&&(t.translate=0)}function yl(t,e,n,r){Uw(t.x,e.x,n.x,r?r.originX:void 0),Uw(t.y,e.y,n.y,r?r.originY:void 0)}function Bw(t,e,n){t.min=n.min+e.min,t.max=t.min+dn(e)}function HV(t,e,n){Bw(t.x,e.x,n.x),Bw(t.y,e.y,n.y)}function zw(t,e,n){t.min=e.min-n.min,t.max=t.min+dn(e)}function vl(t,e,n){zw(t.x,e.x,n.x),zw(t.y,e.y,n.y)}function QV(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Ue(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Ue(n,t,r.max):Math.min(t,n)),t}function $w(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function YV(t,{top:e,left:n,bottom:r,right:i}){return{x:$w(t.x,n,i),y:$w(t.y,e,r)}}function qw(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function XV(t,e){return{x:qw(t.x,e.x),y:qw(t.y,e.y)}}function JV(t,e){let n=.5;const r=dn(t),i=dn(e);return i>r?n=Oo(e.min,e.max-r,t.min):r>i&&(n=Oo(t.min,t.max-i,e.min)),Er(0,1,n)}function ZV(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Km=.35;function ej(t=Km){return t===!1?t=0:t===!0&&(t=Km),{x:Kw(t,"left","right"),y:Kw(t,"top","bottom")}}function Kw(t,e,n){return{min:Gw(t,e),max:Gw(t,n)}}function Gw(t,e){return typeof t=="number"?t:t[e]||0}const Ww=()=>({translate:0,scale:1,origin:0,originPoint:0}),fo=()=>({x:Ww(),y:Ww()}),Hw=()=>({min:0,max:0}),Xe=()=>({x:Hw(),y:Hw()});function gn(t){return[t("x"),t("y")]}function tI({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function tj({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function nj(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function mp(t){return t===void 0||t===1}function Gm({scale:t,scaleX:e,scaleY:n}){return!mp(t)||!mp(e)||!mp(n)}function Ui(t){return Gm(t)||nI(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function nI(t){return Qw(t.x)||Qw(t.y)}function Qw(t){return t&&t!=="0%"}function jd(t,e,n){const r=t-n,i=e*r;return n+i}function Yw(t,e,n,r,i){return i!==void 0&&(t=jd(t,i,r)),jd(t,n,r)+e}function Wm(t,e=0,n=1,r,i){t.min=Yw(t.min,e,n,r,i),t.max=Yw(t.max,e,n,r,i)}function rI(t,{x:e,y:n}){Wm(t.x,e.translate,e.scale,e.originPoint),Wm(t.y,n.translate,n.scale,n.originPoint)}const Xw=.999999999999,Jw=1.0000000000001;function rj(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&mo(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,rI(t,o)),r&&Ui(s.latestValues)&&mo(t,s.latestValues))}e.x<Jw&&e.x>Xw&&(e.x=1),e.y<Jw&&e.y>Xw&&(e.y=1)}function po(t,e){t.min=t.min+e,t.max=t.max+e}function Zw(t,e,n,r,i=.5){const s=Ue(t.min,t.max,i);Wm(t,e,n,s,r)}function mo(t,e){Zw(t.x,e.x,e.scaleX,e.scale,e.originX),Zw(t.y,e.y,e.scaleY,e.scale,e.originY)}function iI(t,e){return tI(nj(t.getBoundingClientRect(),e))}function ij(t,e,n){const r=iI(t,n),{scroll:i}=e;return i&&(po(r.x,i.offset.x),po(r.y,i.offset.y)),r}const sI=({current:t})=>t?t.ownerDocument.defaultView:null,sj=new WeakMap;class oj{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Xe(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Nh(h,"page").point)},s=(h,f)=>{const{drag:p,dragPropagation:v,onDragStart:b}=this.getProps();if(p&&!v&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=XS(p),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),gn(A=>{let _=this.getAxisMotionValue(A).get()||0;if(Kn.test(_)){const{projection:y}=this.visualElement;if(y&&y.layout){const w=y.layout.layoutBox[A];w&&(_=dn(w)*(parseFloat(_)/100))}}this.originPoint[A]=_}),b&&Ie.postRender(()=>b(h,f)),$m(this.visualElement,"transform");const{animationState:T}=this.visualElement;T&&T.setActive("whileDrag",!0)},o=(h,f)=>{const{dragPropagation:p,dragDirectionLock:v,onDirectionLock:b,onDrag:T}=this.getProps();if(!p&&!this.openGlobalLock)return;const{offset:A}=f;if(v&&this.currentDirection===null){this.currentDirection=aj(A),this.currentDirection!==null&&b&&b(this.currentDirection);return}this.updateAxis("x",f.point,A),this.updateAxis("y",f.point,A),this.visualElement.render(),T&&T(h,f)},a=(h,f)=>this.stop(h,f),l=()=>gn(h=>{var f;return this.getAnimationState(h)==="paused"&&((f=this.getAxisMotionValue(h).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new HS(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:sI(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&Ie.postRender(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!gu(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=QV(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&ho(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=YV(i.layoutBox,n):this.constraints=!1,this.elastic=ej(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&gn(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=ZV(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!ho(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=ij(r,i.root,this.visualElement.getTransformPagePoint());let o=XV(i.layout.layoutBox,s);if(n){const a=n(tj(o));this.hasMutatedConstraints=!!a,a&&(o=tI(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=gn(h=>{if(!gu(h,n,this.currentDirection))return;let f=l&&l[h]||{};o&&(f={min:0,max:0});const p=i?200:1e6,v=i?40:1e7,b={type:"inertia",velocity:r?e[h]:0,bounceStiffness:p,bounceDamping:v,timeConstant:750,restDelta:1,restSpeed:10,...s,...f};return this.startAxisValueAnimation(h,b)});return Promise.all(u).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return $m(this.visualElement,e),r.start(Ky(e,r,0,n,this.visualElement,!1))}stopAnimation(){gn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){gn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){gn(n=>{const{drag:r}=this.getProps();if(!gu(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-Ue(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!ho(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};gn(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=JV({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),gn(o=>{if(!gu(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set(Ue(l,u,i[o]))})}addListeners(){if(!this.visualElement.current)return;sj.set(this.visualElement,this);const e=this.visualElement.current,n=vr(e,"pointerdown",l=>{const{drag:u,dragListener:h=!0}=this.getProps();u&&h&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();ho(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Ie.read(r);const o=ar(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(gn(h=>{const f=this.getAxisMotionValue(h);f&&(this.originPoint[h]+=l[h].translate,f.set(f.get()+l[h].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=Km,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function gu(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function aj(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class lj extends Ii{constructor(e){super(e),this.removeGroupControls=Dt,this.removeListeners=Dt,this.controls=new oj(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Dt}unmount(){this.removeGroupControls(),this.removeListeners()}}const ex=t=>(e,n)=>{t&&Ie.postRender(()=>t(e,n))};class cj extends Ii{constructor(){super(...arguments),this.removePointerDownListener=Dt}onPointerDown(e){this.session=new HS(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:sI(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:ex(e),onStart:ex(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Ie.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=vr(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Dh=R.createContext(null);function uj(){const t=R.useContext(Dh);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,i=R.useId();R.useEffect(()=>r(i),[]);const s=R.useCallback(()=>n&&n(i),[i,n]);return!e&&n?[!1,s]:[!0]}const Yy=R.createContext({}),oI=R.createContext({}),Ku={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function tx(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Oa={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ae.test(t))t=parseFloat(t);else return t;const n=tx(t,e.target.x),r=tx(t,e.target.y);return`${n}% ${r}%`}},dj={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=yi.parse(t);if(i.length>5)return r;const s=yi.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const u=Ue(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=u),typeof i[3+o]=="number"&&(i[3+o]/=u),s(i)}},Od={};function hj(t){Object.assign(Od,t)}const{schedule:Xy,cancel:p9}=oS(queueMicrotask,!1);class fj extends R.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;hj(pj),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Ku.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Ie.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Xy.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function aI(t){const[e,n]=uj(),r=R.useContext(Yy);return d.jsx(fj,{...t,layoutGroup:r,switchLayoutGroup:R.useContext(oI),isPresent:e,safeToRemove:n})}const pj={borderRadius:{...Oa,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Oa,borderTopRightRadius:Oa,borderBottomLeftRadius:Oa,borderBottomRightRadius:Oa,boxShadow:dj},lI=["TopLeft","TopRight","BottomLeft","BottomRight"],mj=lI.length,nx=t=>typeof t=="string"?parseFloat(t):t,rx=t=>typeof t=="number"||ae.test(t);function gj(t,e,n,r,i,s){i?(t.opacity=Ue(0,n.opacity!==void 0?n.opacity:1,yj(r)),t.opacityExit=Ue(e.opacity!==void 0?e.opacity:1,0,vj(r))):s&&(t.opacity=Ue(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<mj;o++){const a=`border${lI[o]}Radius`;let l=ix(e,a),u=ix(n,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||rx(l)===rx(u)?(t[a]=Math.max(Ue(nx(l),nx(u),r),0),(Kn.test(u)||Kn.test(l))&&(t[a]+="%")):t[a]=u}(e.rotate||n.rotate)&&(t.rotate=Ue(e.rotate||0,n.rotate||0,r))}function ix(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const yj=cI(0,.5,fS),vj=cI(.5,.95,Dt);function cI(t,e,n){return r=>r<t?0:r>e?1:n(Oo(t,e,r))}function sx(t,e){t.min=e.min,t.max=e.max}function mn(t,e){sx(t.x,e.x),sx(t.y,e.y)}function ox(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function ax(t,e,n,r,i){return t-=e,t=jd(t,1/n,r),i!==void 0&&(t=jd(t,1/i,r)),t}function _j(t,e=0,n=1,r=.5,i,s=t,o=t){if(Kn.test(e)&&(e=parseFloat(e),e=Ue(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Ue(s.min,s.max,r);t===s&&(a-=e),t.min=ax(t.min,e,n,a,i),t.max=ax(t.max,e,n,a,i)}function lx(t,e,[n,r,i],s,o){_j(t,e[n],e[r],e[i],e.scale,s,o)}const wj=["x","scaleX","originX"],xj=["y","scaleY","originY"];function cx(t,e,n,r){lx(t.x,e,wj,n?n.x:void 0,r?r.x:void 0),lx(t.y,e,xj,n?n.y:void 0,r?r.y:void 0)}function ux(t){return t.translate===0&&t.scale===1}function uI(t){return ux(t.x)&&ux(t.y)}function dx(t,e){return t.min===e.min&&t.max===e.max}function bj(t,e){return dx(t.x,e.x)&&dx(t.y,e.y)}function hx(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function dI(t,e){return hx(t.x,e.x)&&hx(t.y,e.y)}function fx(t){return dn(t.x)/dn(t.y)}function px(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class Ej{constructor(){this.members=[]}add(e){Gy(this.members,e),e.scheduleRender()}remove(e){if(Wy(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Tj(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:u,rotate:h,rotateX:f,rotateY:p,skewX:v,skewY:b}=n;u&&(r=`perspective(${u}px) ${r}`),h&&(r+=`rotate(${h}deg) `),f&&(r+=`rotateX(${f}deg) `),p&&(r+=`rotateY(${p}deg) `),v&&(r+=`skewX(${v}deg) `),b&&(r+=`skewY(${b}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const Sj=(t,e)=>t.depth-e.depth;class Ij{constructor(){this.children=[],this.isDirty=!1}add(e){Gy(this.children,e),this.isDirty=!0}remove(e){Wy(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Sj),this.isDirty=!1,this.children.forEach(e)}}function Gu(t){const e=Rt(t)?t.get():t;return yV(e)?e.toValue():e}function Aj(t,e){const n=Gn.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(gi(r),t(s-e))};return Ie.read(r,!0),()=>gi(r)}function kj(t){return t instanceof SVGElement&&t.tagName!=="svg"}function Cj(t,e,n){const r=Rt(t)?t:Ql(t);return r.start(Ky("",r,e,n)),r.animation}const Bi={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Ja=typeof window<"u"&&window.MotionDebug!==void 0,gp=["","X","Y","Z"],Pj={visibility:"hidden"},mx=1e3;let Rj=0;function yp(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function hI(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=qS(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Ie,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&hI(r)}function fI({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=Rj++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Ja&&(Bi.totalNodes=Bi.resolvedTargetDeltas=Bi.recalculatedProjection=0),this.nodes.forEach(Vj),this.nodes.forEach(Fj),this.nodes.forEach(Uj),this.nodes.forEach(jj),Ja&&window.MotionDebug.record(Bi)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new Ij)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Hy),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=kj(o),this.instance=o;const{layoutId:l,layout:u,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(u||l)&&(this.isLayoutDirty=!0),t){let f;const p=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=Aj(p,250),Ku.hasAnimatedSinceResize&&(Ku.hasAnimatedSinceResize=!1,this.nodes.forEach(yx))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&h&&(l||u)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:p,hasRelativeTargetChanged:v,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const T=this.options.transition||h.getDefaultTransition()||Kj,{onLayoutAnimationStart:A,onLayoutAnimationComplete:_}=h.getProps(),y=!this.targetLayout||!dI(this.targetLayout,b)||v,w=!p&&v;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||w||p&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,w);const P={...Ry(T,"layout"),onPlay:A,onComplete:_};(h.shouldReduceMotion||this.options.layoutRoot)&&(P.delay=0,P.type=!1),this.startAnimation(P)}else p||yx(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,gi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Bj),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&hI(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const f=this.path[h];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(gx);return}this.isUpdating||this.nodes.forEach(Lj),this.isUpdating=!1,this.nodes.forEach(Mj),this.nodes.forEach(Nj),this.nodes.forEach(Dj),this.clearAllSnapshots();const a=Gn.now();vt.delta=Er(0,1e3/60,a-vt.timestamp),vt.timestamp=a,vt.isProcessing=!0,lp.update.process(vt),lp.preRender.process(vt),lp.render.process(vt),vt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Xy.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Oj),this.sharedNodes.forEach(zj)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ie.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ie.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Xe(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!uI(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,h=u!==this.prevTransformTemplateValue;o&&(a||Ui(this.latestValues)||h)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),Gj(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return Xe();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(Wj))){const{scroll:h}=this.root;h&&(po(l.x,h.offset.x),po(l.y,h.offset.y))}return l}removeElementScroll(o){var a;const l=Xe();if(mn(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let u=0;u<this.path.length;u++){const h=this.path[u],{scroll:f,options:p}=h;h!==this.root&&f&&p.layoutScroll&&(f.wasRoot&&mn(l,o),po(l.x,f.offset.x),po(l.y,f.offset.y))}return l}applyTransform(o,a=!1){const l=Xe();mn(l,o);for(let u=0;u<this.path.length;u++){const h=this.path[u];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&mo(l,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Ui(h.latestValues)&&mo(l,h.latestValues)}return Ui(this.latestValues)&&mo(l,this.latestValues),l}removeTransform(o){const a=Xe();mn(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!Ui(u.latestValues))continue;Gm(u.latestValues)&&u.updateSnapshot();const h=Xe(),f=u.measurePageBox();mn(h,f),cx(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,h)}return Ui(this.latestValues)&&cx(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==vt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:p}=this.options;if(!(!this.layout||!(f||p))){if(this.resolvedRelativeTargetAt=vt.timestamp,!this.targetDelta&&!this.relativeTarget){const v=this.getClosestProjectingParent();v&&v.layout&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Xe(),this.relativeTargetOrigin=Xe(),vl(this.relativeTargetOrigin,this.layout.layoutBox,v.layout.layoutBox),mn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Xe(),this.targetWithTransforms=Xe()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),HV(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):mn(this.target,this.layout.layoutBox),rI(this.target,this.targetDelta)):mn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const v=this.getClosestProjectingParent();v&&!!v.resumingFrom==!!this.resumingFrom&&!v.options.layoutScroll&&v.target&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Xe(),this.relativeTargetOrigin=Xe(),vl(this.relativeTargetOrigin,this.target,v.target),mn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Ja&&Bi.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Gm(this.parent.latestValues)||nI(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===vt.timestamp&&(u=!1),u)return;const{layout:h,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||f))return;mn(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,v=this.treeScale.y;rj(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Xe());const{target:b}=a;if(!b){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(ox(this.prevProjectionDelta.x,this.projectionDelta.x),ox(this.prevProjectionDelta.y,this.projectionDelta.y)),yl(this.projectionDelta,this.layoutCorrected,b,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==v||!px(this.projectionDelta.x,this.prevProjectionDelta.x)||!px(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b)),Ja&&Bi.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=fo(),this.projectionDelta=fo(),this.projectionDeltaWithTransform=fo()}setAnimationOrigin(o,a=!1){const l=this.snapshot,u=l?l.latestValues:{},h={...this.latestValues},f=fo();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=Xe(),v=l?l.source:void 0,b=this.layout?this.layout.source:void 0,T=v!==b,A=this.getStack(),_=!A||A.members.length<=1,y=!!(T&&!_&&this.options.crossfade===!0&&!this.path.some(qj));this.animationProgress=0;let w;this.mixTargetDelta=P=>{const V=P/1e3;vx(f.x,o.x,V),vx(f.y,o.y,V),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(vl(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),$j(this.relativeTarget,this.relativeTargetOrigin,p,V),w&&bj(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=Xe()),mn(w,this.relativeTarget)),T&&(this.animationValues=h,gj(h,u,this.latestValues,V,y,_)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=V},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(gi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ie.update(()=>{Ku.hasAnimatedSinceResize=!0,this.currentAnimation=Cj(0,mx,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(mx),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:h}=o;if(!(!a||!l||!u)){if(this!==o&&this.layout&&u&&pI(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||Xe();const f=dn(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+f;const p=dn(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+p}mn(a,l),mo(a,h),yl(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new Ej),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const u={};l.z&&yp("z",o,u,this.animationValues);for(let h=0;h<gp.length;h++)yp(`rotate${gp[h]}`,o,u,this.animationValues),yp(`skew${gp[h]}`,o,u,this.animationValues);o.render();for(const h in u)o.setStaticValue(h,u[h]),this.animationValues&&(this.animationValues[h]=u[h]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Pj;const u={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=Gu(o==null?void 0:o.pointerEvents)||"",u.transform=h?h(this.latestValues,""):"none",u;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const T={};return this.options.layoutId&&(T.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,T.pointerEvents=Gu(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Ui(this.latestValues)&&(T.transform=h?h({},""):"none",this.hasProjected=!1),T}const p=f.animationValues||f.latestValues;this.applyTransformsToTarget(),u.transform=Tj(this.projectionDeltaWithTransform,this.treeScale,p),h&&(u.transform=h(p,u.transform));const{x:v,y:b}=this.projectionDelta;u.transformOrigin=`${v.origin*100}% ${b.origin*100}% 0`,f.animationValues?u.opacity=f===this?(l=(a=p.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:u.opacity=f===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const T in Od){if(p[T]===void 0)continue;const{correct:A,applyTo:_}=Od[T],y=u.transform==="none"?p[T]:A(p[T],f);if(_){const w=_.length;for(let P=0;P<w;P++)u[_[P]]=y}else u[T]=y}return this.options.layoutId&&(u.pointerEvents=f===this?Gu(o==null?void 0:o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(gx),this.root.sharedNodes.clear()}}}function Nj(t){t.updateLayout()}function Dj(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=n.source!==t.layout.source;s==="size"?gn(f=>{const p=o?n.measuredBox[f]:n.layoutBox[f],v=dn(p);p.min=r[f].min,p.max=p.min+v}):pI(s,n.layoutBox,r)&&gn(f=>{const p=o?n.measuredBox[f]:n.layoutBox[f],v=dn(r[f]);p.max=p.min+v,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+v)});const a=fo();yl(a,r,n.layoutBox);const l=fo();o?yl(l,t.applyTransform(i,!0),n.measuredBox):yl(l,r,n.layoutBox);const u=!uI(a);let h=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:p,layout:v}=f;if(p&&v){const b=Xe();vl(b,n.layoutBox,p.layoutBox);const T=Xe();vl(T,r,v.layoutBox),dI(b,T)||(h=!0),f.options.layoutRoot&&(t.relativeTarget=T,t.relativeTargetOrigin=b,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeTargetChanged:h})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function Vj(t){Ja&&Bi.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function jj(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Oj(t){t.clearSnapshot()}function gx(t){t.clearMeasurements()}function Lj(t){t.isLayoutDirty=!1}function Mj(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function yx(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Fj(t){t.resolveTargetDelta()}function Uj(t){t.calcProjection()}function Bj(t){t.resetSkewAndRotation()}function zj(t){t.removeLeadSnapshot()}function vx(t,e,n){t.translate=Ue(e.translate,0,n),t.scale=Ue(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function _x(t,e,n,r){t.min=Ue(e.min,n.min,r),t.max=Ue(e.max,n.max,r)}function $j(t,e,n,r){_x(t.x,e.x,n.x,r),_x(t.y,e.y,n.y,r)}function qj(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Kj={duration:.45,ease:[.4,0,.1,1]},wx=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),xx=wx("applewebkit/")&&!wx("chrome/")?Math.round:Dt;function bx(t){t.min=xx(t.min),t.max=xx(t.max)}function Gj(t){bx(t.x),bx(t.y)}function pI(t,e,n){return t==="position"||t==="preserve-aspect"&&!WV(fx(e),fx(n),.2)}function Wj(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const Hj=fI({attachResizeListener:(t,e)=>ar(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),vp={current:void 0},mI=fI({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!vp.current){const t=new Hj({});t.mount(window),t.setOptions({layoutScroll:!0}),vp.current=t}return vp.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Qj={pan:{Feature:cj},drag:{Feature:lj,ProjectionNode:mI,MeasureLayout:aI}};function Ex(t,e){const n=e?"pointerenter":"pointerleave",r=e?"onHoverStart":"onHoverEnd",i=(s,o)=>{if(s.pointerType==="touch"||JS())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e);const l=a[r];l&&Ie.postRender(()=>l(s,o))};return vr(t.current,n,i,{passive:!t.getProps()[r]})}class Yj extends Ii{mount(){this.unmount=yr(Ex(this.node,!0),Ex(this.node,!1))}unmount(){}}class Xj extends Ii{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=yr(ar(this.node.current,"focus",()=>this.onFocus()),ar(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const gI=(t,e)=>e?t===e?!0:gI(t,e.parentElement):!1;function _p(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,Nh(n))}class Jj extends Ii{constructor(){super(...arguments),this.removeStartListeners=Dt,this.removeEndListeners=Dt,this.removeAccessibleListeners=Dt,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),s=vr(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:h,globalTapTarget:f}=this.node.getProps(),p=!f&&!gI(this.node.current,a.target)?h:u;p&&Ie.update(()=>p(a,l))},{passive:!(r.onTap||r.onPointerUp)}),o=vr(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=yr(s,o),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||_p("up",(l,u)=>{const{onTap:h}=this.node.getProps();h&&Ie.postRender(()=>h(l,u))})};this.removeEndListeners(),this.removeEndListeners=ar(this.node.current,"keyup",o),_p("down",(a,l)=>{this.startPress(a,l)})},n=ar(this.node.current,"keydown",e),r=()=>{this.isPressing&&_p("cancel",(s,o)=>this.cancelPress(s,o))},i=ar(this.node.current,"blur",r);this.removeAccessibleListeners=yr(n,i)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Ie.postRender(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!JS()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Ie.postRender(()=>r(e,n))}mount(){const e=this.node.getProps(),n=vr(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=ar(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=yr(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Hm=new WeakMap,wp=new WeakMap,Zj=t=>{const e=Hm.get(t.target);e&&e(t)},eO=t=>{t.forEach(Zj)};function tO({root:t,...e}){const n=t||document;wp.has(n)||wp.set(n,{});const r=wp.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(eO,{root:t,...e})),r[i]}function nO(t,e,n){const r=tO(e);return Hm.set(t,n),r.observe(t),()=>{Hm.delete(t),r.unobserve(t)}}const rO={some:0,all:1};class iO extends Ii{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:rO[i]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:h,onViewportLeave:f}=this.node.getProps(),p=u?h:f;p&&p(l)};return nO(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(sO(e,n))&&this.startObserver()}unmount(){}}function sO({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const oO={inView:{Feature:iO},tap:{Feature:Jj},focus:{Feature:Xj},hover:{Feature:Yj}},aO={layout:{ProjectionNode:mI,MeasureLayout:aI}},Jy=R.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),Vh=R.createContext({}),Zy=typeof window<"u",yI=Zy?R.useLayoutEffect:R.useEffect,vI=R.createContext({strict:!1});function lO(t,e,n,r,i){var s,o;const{visualElement:a}=R.useContext(Vh),l=R.useContext(vI),u=R.useContext(Dh),h=R.useContext(Jy).reducedMotion,f=R.useRef();r=r||l.renderer,!f.current&&r&&(f.current=r(t,{visualState:e,parent:a,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:h}));const p=f.current,v=R.useContext(oI);p&&!p.projection&&i&&(p.type==="html"||p.type==="svg")&&cO(f.current,n,i,v);const b=R.useRef(!1);R.useInsertionEffect(()=>{p&&b.current&&p.update(n,u)});const T=n[$S],A=R.useRef(!!T&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,T))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,T)));return yI(()=>{p&&(b.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),Xy.render(p.render),A.current&&p.animationState&&p.animationState.animateChanges())}),R.useEffect(()=>{p&&(!A.current&&p.animationState&&p.animationState.animateChanges(),A.current&&(queueMicrotask(()=>{var _;(_=window.MotionHandoffMarkAsComplete)===null||_===void 0||_.call(window,T)}),A.current=!1))}),p}function cO(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:u}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:_I(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&ho(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:u})}function _I(t){if(t)return t.options.allowProjection!==!1?t.projection:_I(t.parent)}function uO(t,e,n){return R.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):ho(n)&&(n.current=r))},[e])}function jh(t){return Ch(t.animate)||Py.some(e=>Gl(t[e]))}function wI(t){return!!(jh(t)||t.variants)}function dO(t,e){if(jh(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Gl(n)?n:void 0,animate:Gl(r)?r:void 0}}return t.inherit!==!1?e:{}}function hO(t){const{initial:e,animate:n}=dO(t,R.useContext(Vh));return R.useMemo(()=>({initial:e,animate:n}),[Tx(e),Tx(n)])}function Tx(t){return Array.isArray(t)?t.join(" "):t}const Sx={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Lo={};for(const t in Sx)Lo[t]={isEnabled:e=>Sx[t].some(n=>!!e[n])};function fO(t){for(const e in t)Lo[e]={...Lo[e],...t[e]}}const pO=Symbol.for("motionComponentSymbol");function mO({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){t&&fO(t);function s(a,l){let u;const h={...R.useContext(Jy),...a,layoutId:gO(a)},{isStatic:f}=h,p=hO(a),v=r(a,f);if(!f&&Zy){yO();const b=vO(h);u=b.MeasureLayout,p.visualElement=lO(i,v,h,e,b.ProjectionNode)}return d.jsxs(Vh.Provider,{value:p,children:[u&&p.visualElement?d.jsx(u,{visualElement:p.visualElement,...h}):null,n(i,a,uO(v,p.visualElement,l),v,f,p.visualElement)]})}const o=R.forwardRef(s);return o[pO]=i,o}function gO({layoutId:t}){const e=R.useContext(Yy).id;return e&&t!==void 0?e+"-"+t:t}function yO(t,e){R.useContext(vI).strict}function vO(t){const{drag:e,layout:n}=Lo;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const _O=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ev(t){return typeof t!="string"||t.includes("-")?!1:!!(_O.indexOf(t)>-1||/[A-Z]/u.test(t))}function xI(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const bI=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function EI(t,e,n,r){xI(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(bI.has(i)?i:Qy(i),e.attrs[i])}function TI(t,{layout:e,layoutId:n}){return Cs.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Od[t]||t==="opacity")}function tv(t,e,n){var r;const{style:i}=t,s={};for(const o in i)(Rt(i[o])||e.style&&Rt(e.style[o])||TI(o,t)||((r=n==null?void 0:n.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[o]=i[o]);return s}function SI(t,e,n){const r=tv(t,e,n);for(const i in t)if(Rt(t[i])||Rt(e[i])){const s=yc.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}function nv(t){const e=R.useRef(null);return e.current===null&&(e.current=t()),e.current}function wO({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,i,s){const o={latestValues:xO(r,i,s,t),renderState:e()};return n&&(o.mount=a=>n(r,a,o)),o}const II=t=>(e,n)=>{const r=R.useContext(Vh),i=R.useContext(Dh),s=()=>wO(t,e,r,i);return n?s():nv(s)};function xO(t,e,n,r){const i={},s=r(t,{});for(const p in s)i[p]=Gu(s[p]);let{initial:o,animate:a}=t;const l=jh(t),u=wI(t);e&&u&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const f=h?a:o;if(f&&typeof f!="boolean"&&!Ch(f)){const p=Array.isArray(f)?f:[f];for(let v=0;v<p.length;v++){const b=ky(t,p[v]);if(b){const{transitionEnd:T,transition:A,..._}=b;for(const y in _){let w=_[y];if(Array.isArray(w)){const P=h?w.length-1:0;w=w[P]}w!==null&&(i[y]=w)}for(const y in T)i[y]=T[y]}}}return i}const rv=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),AI=()=>({...rv(),attrs:{}}),kI=(t,e)=>e&&typeof t=="number"?e.transform(t):t,bO={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},EO=yc.length;function TO(t,e,n){let r="",i=!0;for(let s=0;s<EO;s++){const o=yc[s],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const u=kI(a,My[o]);if(!l){i=!1;const h=bO[o]||o;r+=`${h}(${u}) `}n&&(e[o]=u)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function iv(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const l in e){const u=e[l];if(Cs.has(l)){o=!0;continue}else if(vS(l)){i[l]=u;continue}else{const h=kI(u,My[l]);l.startsWith("origin")?(a=!0,s[l]=h):r[l]=h}}if(e.transform||(o||n?r.transform=TO(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:u="50%",originZ:h=0}=s;r.transformOrigin=`${l} ${u} ${h}`}}function Ix(t,e,n){return typeof t=="string"?t:ae.transform(e+n*t)}function SO(t,e,n){const r=Ix(e,t.x,t.width),i=Ix(n,t.y,t.height);return`${r} ${i}`}const IO={offset:"stroke-dashoffset",array:"stroke-dasharray"},AO={offset:"strokeDashoffset",array:"strokeDasharray"};function kO(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?IO:AO;t[s.offset]=ae.transform(-r);const o=ae.transform(e),a=ae.transform(n);t[s.array]=`${o} ${a}`}function sv(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...u},h,f){if(iv(t,u,f),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:p,style:v,dimensions:b}=t;p.transform&&(b&&(v.transform=p.transform),delete p.transform),b&&(i!==void 0||s!==void 0||v.transform)&&(v.transformOrigin=SO(b,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(p.x=e),n!==void 0&&(p.y=n),r!==void 0&&(p.scale=r),o!==void 0&&kO(p,o,a,l,!1)}const ov=t=>typeof t=="string"&&t.toLowerCase()==="svg",CO={useVisualState:II({scrapeMotionValuesFromProps:SI,createRenderState:AI,onMount:(t,e,{renderState:n,latestValues:r})=>{Ie.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),Ie.render(()=>{sv(n,r,ov(e.tagName),t.transformTemplate),EI(e,n)})}})},PO={useVisualState:II({scrapeMotionValuesFromProps:tv,createRenderState:rv})};function CI(t,e,n){for(const r in e)!Rt(e[r])&&!TI(r,n)&&(t[r]=e[r])}function RO({transformTemplate:t},e){return R.useMemo(()=>{const n=rv();return iv(n,e,t),Object.assign({},n.vars,n.style)},[e])}function NO(t,e){const n=t.style||{},r={};return CI(r,n,t),Object.assign(r,RO(t,e)),r}function DO(t,e){const n={},r=NO(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const VO=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ld(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||VO.has(t)}let PI=t=>!Ld(t);function jO(t){t&&(PI=e=>e.startsWith("on")?!Ld(e):t(e))}try{jO(require("@emotion/is-prop-valid").default)}catch{}function OO(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(PI(i)||n===!0&&Ld(i)||!e&&!Ld(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function LO(t,e,n,r){const i=R.useMemo(()=>{const s=AI();return sv(s,e,ov(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};CI(s,t.style,t),i.style={...s,...i.style}}return i}function MO(t=!1){return(n,r,i,{latestValues:s},o)=>{const l=(ev(n)?LO:DO)(r,s,o,n),u=OO(r,typeof n=="string",t),h=n!==R.Fragment?{...u,...l,ref:i}:{},{children:f}=r,p=R.useMemo(()=>Rt(f)?f.get():f,[f]);return R.createElement(n,{...h,children:p})}}function FO(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...ev(r)?CO:PO,preloadedFeatures:t,useRender:MO(i),createVisualElement:e,Component:r};return mO(o)}}const Qm={current:null},RI={current:!1};function UO(){if(RI.current=!0,!!Zy)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Qm.current=t.matches;t.addListener(e),e()}else Qm.current=!1}function BO(t,e,n){for(const r in e){const i=e[r],s=n[r];if(Rt(i))t.addValue(r,i);else if(Rt(s))t.addValue(r,Ql(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,Ql(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const Ax=new WeakMap,zO=[...xS,kt,yi],$O=t=>zO.find(wS(t)),kx=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class qO{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=jy,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=Gn.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,Ie.render(this.render,!1,!0))};const{latestValues:l,renderState:u}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=jh(n),this.isVariantNode=wI(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in f){const v=f[p];l[p]!==void 0&&Rt(v)&&v.set(l[p],!1)}}mount(e){this.current=e,Ax.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),RI.current||UO(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Qm.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Ax.delete(this.current),this.projection&&this.projection.unmount(),gi(this.notifyUpdate),gi(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Cs.has(e),i=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Ie.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Lo){const n=Lo[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Xe()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<kx.length;r++){const i=kx[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=BO(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Ql(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(gS(i)||mS(i))?i=parseFloat(i):!$O(i)&&yi.test(n)&&(i=CS(e,n)),this.setBaseTarget(e,Rt(i)?i.get():i)),Rt(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const o=ky(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(i=o[e])}if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Rt(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Hy),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class NI extends qO{constructor(){super(...arguments),this.KeyframeResolver=PS}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}}function KO(t){return window.getComputedStyle(t)}class GO extends NI{constructor(){super(...arguments),this.type="html",this.renderInstance=xI}readValueFromInstance(e,n){if(Cs.has(n)){const r=Fy(n);return r&&r.default||0}else{const r=KO(e),i=(vS(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return iI(e,n)}build(e,n,r){iv(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return tv(e,n,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Rt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class WO extends NI{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Xe}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Cs.has(n)){const r=Fy(n);return r&&r.default||0}return n=bI.has(n)?n:Qy(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return SI(e,n,r)}build(e,n,r){sv(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){EI(e,n,r,i)}mount(e){this.isSVGTag=ov(e.tagName),super.mount(e)}}const HO=(t,e)=>ev(t)?new WO(e):new GO(e,{allowProjection:t!==R.Fragment}),QO=FO({...MV,...oO,...Qj,...aO},HO),ce=O2(QO);class YO extends R.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function XO({children:t,isPresent:e}){const n=R.useId(),r=R.useRef(null),i=R.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=R.useContext(Jy);return R.useInsertionEffect(()=>{const{width:o,height:a,top:l,left:u}=i.current;if(e||!r.current||!o||!a)return;r.current.dataset.motionPopId=n;const h=document.createElement("style");return s&&(h.nonce=s),document.head.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${u}px !important;
          }
        `),()=>{document.head.removeChild(h)}},[e]),d.jsx(YO,{isPresent:e,childRef:r,sizeRef:i,children:R.cloneElement(t,{ref:r})})}const JO=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o})=>{const a=nv(ZO),l=R.useId(),u=R.useCallback(f=>{a.set(f,!0);for(const p of a.values())if(!p)return;r&&r()},[a,r]),h=R.useMemo(()=>({id:l,initial:e,isPresent:n,custom:i,onExitComplete:u,register:f=>(a.set(f,!1),()=>a.delete(f))}),s?[Math.random(),u]:[n,u]);return R.useMemo(()=>{a.forEach((f,p)=>a.set(p,!1))},[n]),R.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=d.jsx(XO,{isPresent:n,children:t})),d.jsx(Dh.Provider,{value:h,children:t})};function ZO(){return new Map}const yu=t=>t.key||"";function Cx(t){const e=[];return R.Children.forEach(t,n=>{R.isValidElement(n)&&e.push(n)}),e}const en=({children:t,exitBeforeEnter:e,custom:n,initial:r=!0,onExitComplete:i,presenceAffectsLayout:s=!0,mode:o="sync"})=>{const a=R.useMemo(()=>Cx(t),[t]),l=a.map(yu),u=R.useRef(!0),h=R.useRef(a),f=nv(()=>new Map),[p,v]=R.useState(a),[b,T]=R.useState(a);yI(()=>{u.current=!1,h.current=a;for(let y=0;y<b.length;y++){const w=yu(b[y]);l.includes(w)?f.delete(w):f.get(w)!==!0&&f.set(w,!1)}},[b,l.length,l.join("-")]);const A=[];if(a!==p){let y=[...a];for(let w=0;w<b.length;w++){const P=b[w],V=yu(P);l.includes(V)||(y.splice(w,0,P),A.push(P))}o==="wait"&&A.length&&(y=A),T(Cx(y)),v(a);return}const{forceRender:_}=R.useContext(Yy);return d.jsx(d.Fragment,{children:b.map(y=>{const w=yu(y),P=a===b||l.includes(w),V=()=>{if(f.has(w))f.set(w,!0);else return;let O=!0;f.forEach(I=>{I||(O=!1)}),O&&(_==null||_(),T(h.current),i&&i())};return d.jsx(JO,{isPresent:P,initial:!u.current||r?void 0:!1,custom:P?void 0:n,presenceAffectsLayout:s,mode:o,onExitComplete:P?void 0:V,children:y},w)})})},lr=({onClick:t,children:e,variant:n="light",glowColor:r="none",isInteractive:i=!1,isSelected:s=!1,className:o="",...a})=>{const l="rounded-lg backdrop-blur-md transition-all",u={light:"bg-white/5",dark:"bg-space-dark/80",darker:"bg-space-darker/90"},h={none:"",blue:"shadow-neon-blue",red:"shadow-neon-red",yellow:"shadow-neon-yellow"},f=i?"cursor-pointer hover:bg-white/10":"",p=s?"bg-white/10 border-blue-400":"border-white/10";return d.jsx(ce.div,{onClick:t,...a,className:`
        ${l}
        ${u[n]}
        ${h[r]}
        ${f}
        ${p}
        ${o}
      `,children:e})};function eL({isOpen:t,onClose:e}){return d.jsx(en,{children:t&&d.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center",children:d.jsxs(ce.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"relative w-full max-w-lg mx-4 bg-space-darker rounded-lg border border-white/10 overflow-hidden",children:[d.jsxs("div",{className:"relative p-6 border-b border-white/10 bg-gradient-to-r from-blue-500/10 to-purple-500/10",children:[d.jsx("div",{className:"absolute inset-0 bg-grid-pattern opacity-10"}),d.jsxs("div",{className:"relative flex justify-between items-center",children:[d.jsx("h2",{className:"text-xl font-orbitron text-white",children:"Welcome to SWGOH TW Counter"}),d.jsx("button",{onClick:e,className:"p-2 text-white/60 hover:text-white hover:bg-white/5 rounded-lg",children:d.jsx(je,{className:"w-5 h-5"})})]})]}),d.jsxs("div",{className:"p-6 space-y-6",children:[d.jsxs("div",{className:"flex items-start gap-4",children:[d.jsx(I2,{className:"w-6 h-6 text-red-400 flex-shrink-0 mt-1"}),d.jsx("p",{className:"text-white/80",children:"This website is a passion project, built and maintained without any profit motive. Our mission is to help SWGOH players optimize their Territory Wars strategy."})]}),d.jsxs("div",{className:"flex items-start gap-4",children:[d.jsx(eS,{className:"w-6 h-6 text-blue-400 flex-shrink-0 mt-1"}),d.jsx("p",{className:"text-white/80",children:"While the site is free to use, there are ongoing costs for domain hosting and database maintenance. Your support helps keep this resource available to the community."})]}),d.jsxs("div",{className:"flex items-start gap-4",children:[d.jsx(rS,{className:"w-6 h-6 text-purple-400 flex-shrink-0 mt-1"}),d.jsxs("div",{children:[d.jsx("p",{className:"text-white/80 mb-2",children:"Questions, suggestions, or feedback? I'd love to hear from you! Contact me at:"}),d.jsx("a",{href:"mailto:jbrannelid@gmail.com",className:"text-blue-400 hover:text-blue-300 transition-colors",children:"jbrannelid@gmail.com"})]})]}),d.jsx("div",{className:"mt-8 flex flex-col sm:flex-row gap-4 justify-center",children:d.jsxs("a",{href:"https://www.buymeacoffee.com/jbrannelid",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 px-6 py-3 rounded-lg bg-[#FFDD00] text-black hover:bg-[#FFDD00]/90 transition-all",children:[d.jsx(Z1,{className:"w-5 h-5"}),"Support the Project"]})})]}),d.jsxs("div",{className:"p-4 bg-white/5 flex items-center justify-center gap-2",children:[d.jsx(S2,{className:"w-4 h-4 text-white/40"}),d.jsx("span",{className:"text-sm text-white/40",children:"Made with love for the SWGOH community"})]})]})})})}const tL=({isAdmin:t,onLogout:e,onAdminClick:n})=>{const[r,i]=R.useState(!1);return d.jsxs("div",{children:[d.jsx(lr,{variant:"darker",className:"sticky top-0 z-50 py-4",children:d.jsx("div",{className:"container mx-auto px-4",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(N2,{className:"w-6 h-6 text-yellow-400"}),d.jsx("h1",{className:"text-xl font-orbitron text-white"})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs("a",{href:"https://www.buymeacoffee.com/jbrannelid",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-[#FFDD00] hover:bg-[#FFDD00]/90 text-black transition-all",children:[d.jsx(Z1,{className:"w-5 h-5"}),"Buy Me a Coffee"]}),d.jsxs("button",{onClick:()=>i(!0),className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-purple-500/20 hover:bg-purple-500/30 text-purple-400 transition-all",children:[d.jsx(rS,{className:"w-5 h-5"}),"Contact"]}),t?d.jsxs("button",{onClick:e,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-red-500/20 hover:bg-red-500/30 text-red-400 transition-all",children:[d.jsx(nS,{className:"w-5 h-5"}),"Logout"]}):d.jsxs("button",{onClick:n,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-blue-500/20 hover:bg-blue-500/30 text-blue-400 transition-all",children:[d.jsx(pc,{className:"w-5 h-5"}),"Admin"]})]})]})})}),d.jsx(eL,{isOpen:r,onClose:()=>i(!1)})]})},nL=({activeView:t,onViewChange:e,onOptionsClick:n,filters:r,children:i})=>{const s=!!(r.alignment||r.showTWOmicronOnly||r.showHardCounters||r.excludeGL);return d.jsx(lr,{variant:"darker",className:"sticky top-0 z-30 py-4",children:d.jsx("div",{className:"container mx-auto px-4",children:d.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[d.jsx("div",{className:"relative flex-1",children:i}),d.jsxs("div",{className:"flex gap-2",children:[d.jsxs(lr,{variant:"light",glowColor:t==="squads"?"blue":"none",isInteractive:!0,isSelected:t==="squads",onClick:()=>e("squads"),className:"flex items-center gap-2 px-6 py-2.5",whileHover:{scale:1.02},whileTap:{scale:.98},children:[d.jsx(kh,{className:"w-5 h-5"}),d.jsx("span",{className:"font-medium",children:"Squads"})]}),d.jsxs(lr,{variant:"light",glowColor:t==="fleets"?"blue":"none",isInteractive:!0,isSelected:t==="fleets",onClick:()=>e("fleets"),className:"flex items-center gap-2 px-6 py-2.5",whileHover:{scale:1.02},whileTap:{scale:.98},children:[d.jsx(mc,{className:"w-5 h-5"}),d.jsx("span",{className:"font-medium",children:"Fleets"})]}),d.jsxs(lr,{variant:"light",glowColor:s?"blue":"none",isInteractive:!0,isSelected:s,onClick:n,className:"flex items-center gap-2 px-6 py-2.5",whileHover:{scale:1.02},whileTap:{scale:.98},children:[d.jsx(pc,{className:`w-5 h-5 ${s?"text-blue-400":""}`}),d.jsx("span",{className:"font-medium",children:"Filters"}),s&&d.jsx(ce.div,{className:"w-2 h-2 rounded-full bg-blue-400",initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500,damping:30}})]})]})]})})})};var Px={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DI=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},rL=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},VI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,h=s>>2,f=(s&3)<<4|a>>4;let p=(a&15)<<2|u>>6,v=u&63;l||(v=64,o||(p=64)),r.push(n[h],n[f],n[p],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(DI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):rL(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||f==null)throw new iL;const p=s<<2|a>>4;if(r.push(p),u!==64){const v=a<<4&240|u>>2;if(r.push(v),f!==64){const b=u<<6&192|f;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class iL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const sL=function(t){const e=DI(t);return VI.encodeByteArray(e,!0)},Md=function(t){return sL(t).replace(/\./g,"")},jI=function(t){try{return VI.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aL=()=>oL().__FIREBASE_DEFAULTS__,lL=()=>{if(typeof process>"u"||typeof Px>"u")return;const t=Px.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},cL=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&jI(t[1]);return e&&JSON.parse(e)},Oh=()=>{try{return aL()||lL()||cL()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},OI=t=>{var e,n;return(n=(e=Oh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},LI=t=>{const e=OI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},MI=()=>{var t;return(t=Oh())===null||t===void 0?void 0:t.config},FI=t=>{var e;return(e=Oh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Md(JSON.stringify(n)),Md(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function dL(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(lt())}function hL(){var t;const e=(t=Oh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function fL(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function pL(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function mL(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function gL(){const t=lt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function BI(){return!hL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function zI(){try{return typeof indexedDB=="object"}catch{return!1}}function yL(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vL="FirebaseError";class Jn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=vL,Object.setPrototypeOf(this,Jn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wc.prototype.create)}}class wc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?_L(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Jn(i,a,r)}}function _L(t,e){return t.replace(wL,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const wL=/\{\$([^}]+)}/g;function xL(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Fd(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Rx(s)&&Rx(o)){if(!Fd(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Rx(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Za(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function el(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function bL(t,e){const n=new EL(t,e);return n.subscribe.bind(n)}class EL{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");TL(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=xp),i.error===void 0&&(i.error=xp),i.complete===void 0&&(i.complete=xp);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function TL(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function xp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ye(t){return t&&t._delegate?t._delegate:t}class vi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SL{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new uL;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(AL(e))try{this.getOrInitializeService({instanceIdentifier:zi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=zi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=zi){return this.instances.has(e)}getOptions(e=zi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:IL(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=zi){return this.component?this.component.multipleInstances?e:zi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function IL(t){return t===zi?void 0:t}function AL(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new SL(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ge;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ge||(ge={}));const CL={debug:ge.DEBUG,verbose:ge.VERBOSE,info:ge.INFO,warn:ge.WARN,error:ge.ERROR,silent:ge.SILENT},PL=ge.INFO,RL={[ge.DEBUG]:"log",[ge.VERBOSE]:"log",[ge.INFO]:"info",[ge.WARN]:"warn",[ge.ERROR]:"error"},NL=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=RL[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class av{constructor(e){this.name=e,this._logLevel=PL,this._logHandler=NL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?CL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ge.DEBUG,...e),this._logHandler(this,ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ge.VERBOSE,...e),this._logHandler(this,ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ge.INFO,...e),this._logHandler(this,ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ge.WARN,...e),this._logHandler(this,ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ge.ERROR,...e),this._logHandler(this,ge.ERROR,...e)}}const DL=(t,e)=>e.some(n=>t instanceof n);let Nx,Dx;function VL(){return Nx||(Nx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function jL(){return Dx||(Dx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const $I=new WeakMap,Ym=new WeakMap,qI=new WeakMap,bp=new WeakMap,lv=new WeakMap;function OL(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(ci(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&$I.set(n,t)}).catch(()=>{}),lv.set(e,t),e}function LL(t){if(Ym.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Ym.set(t,e)}let Xm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ym.get(t);if(e==="objectStoreNames")return t.objectStoreNames||qI.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ci(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function ML(t){Xm=t(Xm)}function FL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ep(this),e,...n);return qI.set(r,e.sort?e.sort():[e]),ci(r)}:jL().includes(t)?function(...e){return t.apply(Ep(this),e),ci($I.get(this))}:function(...e){return ci(t.apply(Ep(this),e))}}function UL(t){return typeof t=="function"?FL(t):(t instanceof IDBTransaction&&LL(t),DL(t,VL())?new Proxy(t,Xm):t)}function ci(t){if(t instanceof IDBRequest)return OL(t);if(bp.has(t))return bp.get(t);const e=UL(t);return e!==t&&(bp.set(t,e),lv.set(e,t)),e}const Ep=t=>lv.get(t);function BL(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=ci(o);return r&&o.addEventListener("upgradeneeded",l=>{r(ci(o.result),l.oldVersion,l.newVersion,ci(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const zL=["get","getKey","getAll","getAllKeys","count"],$L=["put","add","delete","clear"],Tp=new Map;function Vx(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Tp.get(e))return Tp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=$L.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||zL.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return Tp.set(e,s),s}ML(t=>({...t,get:(e,n,r)=>Vx(e,n)||t.get(e,n,r),has:(e,n)=>!!Vx(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qL{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(KL(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function KL(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Jm="@firebase/app",jx="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tr=new av("@firebase/app"),GL="@firebase/app-compat",WL="@firebase/analytics-compat",HL="@firebase/analytics",QL="@firebase/app-check-compat",YL="@firebase/app-check",XL="@firebase/auth",JL="@firebase/auth-compat",ZL="@firebase/database",eM="@firebase/data-connect",tM="@firebase/database-compat",nM="@firebase/functions",rM="@firebase/functions-compat",iM="@firebase/installations",sM="@firebase/installations-compat",oM="@firebase/messaging",aM="@firebase/messaging-compat",lM="@firebase/performance",cM="@firebase/performance-compat",uM="@firebase/remote-config",dM="@firebase/remote-config-compat",hM="@firebase/storage",fM="@firebase/storage-compat",pM="@firebase/firestore",mM="@firebase/vertexai-preview",gM="@firebase/firestore-compat",yM="firebase",vM="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zm="[DEFAULT]",_M={[Jm]:"fire-core",[GL]:"fire-core-compat",[HL]:"fire-analytics",[WL]:"fire-analytics-compat",[YL]:"fire-app-check",[QL]:"fire-app-check-compat",[XL]:"fire-auth",[JL]:"fire-auth-compat",[ZL]:"fire-rtdb",[eM]:"fire-data-connect",[tM]:"fire-rtdb-compat",[nM]:"fire-fn",[rM]:"fire-fn-compat",[iM]:"fire-iid",[sM]:"fire-iid-compat",[oM]:"fire-fcm",[aM]:"fire-fcm-compat",[lM]:"fire-perf",[cM]:"fire-perf-compat",[uM]:"fire-rc",[dM]:"fire-rc-compat",[hM]:"fire-gcs",[fM]:"fire-gcs-compat",[pM]:"fire-fst",[gM]:"fire-fst-compat",[mM]:"fire-vertex","fire-js":"fire-js",[yM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yl=new Map,wM=new Map,eg=new Map;function Ox(t,e){try{t.container.addComponent(e)}catch(n){Tr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function fs(t){const e=t.name;if(eg.has(e))return Tr.debug(`There were multiple attempts to register component ${e}.`),!1;eg.set(e,t);for(const n of Yl.values())Ox(n,t);for(const n of wM.values())Ox(n,t);return!0}function Lh(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function cr(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ui=new wc("app","Firebase",xM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bM{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new vi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ui.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps=vM;function KI(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Zm,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw ui.create("bad-app-name",{appName:String(i)});if(n||(n=MI()),!n)throw ui.create("no-options");const s=Yl.get(i);if(s){if(Fd(n,s.options)&&Fd(r,s.config))return s;throw ui.create("duplicate-app",{appName:i})}const o=new kL(i);for(const l of eg.values())o.addComponent(l);const a=new bM(n,r,o);return Yl.set(i,a),a}function cv(t=Zm){const e=Yl.get(t);if(!e&&t===Zm&&MI())return KI();if(!e)throw ui.create("no-app",{appName:t});return e}function Lx(){return Array.from(Yl.values())}function Wn(t,e,n){var r;let i=(r=_M[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Tr.warn(a.join(" "));return}fs(new vi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EM="firebase-heartbeat-database",TM=1,Xl="firebase-heartbeat-store";let Sp=null;function GI(){return Sp||(Sp=BL(EM,TM,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Xl)}catch(n){console.warn(n)}}}}).catch(t=>{throw ui.create("idb-open",{originalErrorMessage:t.message})})),Sp}async function SM(t){try{const n=(await GI()).transaction(Xl),r=await n.objectStore(Xl).get(WI(t));return await n.done,r}catch(e){if(e instanceof Jn)Tr.warn(e.message);else{const n=ui.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Tr.warn(n.message)}}}async function Mx(t,e){try{const r=(await GI()).transaction(Xl,"readwrite");await r.objectStore(Xl).put(e,WI(t)),await r.done}catch(n){if(n instanceof Jn)Tr.warn(n.message);else{const r=ui.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Tr.warn(r.message)}}}function WI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IM=1024,AM=30*24*60*60*1e3;class kM{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new PM(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Fx();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=AM}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Tr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Fx(),{heartbeatsToSend:r,unsentEntries:i}=CM(this._heartbeatsCache.heartbeats),s=Md(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Tr.warn(n),""}}}function Fx(){return new Date().toISOString().substring(0,10)}function CM(t,e=IM){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Ux(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Ux(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class PM{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return zI()?yL().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await SM(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Mx(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Mx(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Ux(t){return Md(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RM(t){fs(new vi("platform-logger",e=>new qL(e),"PRIVATE")),fs(new vi("heartbeat",e=>new kM(e),"PRIVATE")),Wn(Jm,jx,t),Wn(Jm,jx,"esm2017"),Wn("fire-js","")}RM("");var NM="firebase",DM="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wn(NM,DM,"app");function uv(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function HI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const VM=HI,QI=new wc("auth","Firebase",HI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ud=new av("@firebase/auth");function jM(t,...e){Ud.logLevel<=ge.WARN&&Ud.warn(`Auth (${Ps}): ${t}`,...e)}function Wu(t,...e){Ud.logLevel<=ge.ERROR&&Ud.error(`Auth (${Ps}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jn(t,...e){throw dv(t,...e)}function Hn(t,...e){return dv(t,...e)}function YI(t,e,n){const r=Object.assign(Object.assign({},VM()),{[e]:n});return new wc("auth","Firebase",r).create(e,{appName:t.name})}function di(t){return YI(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function dv(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return QI.create(t,...e)}function le(t,e,...n){if(!t)throw dv(e,...n)}function ur(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Wu(e),new Error(e)}function Sr(t,e){t||ur(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function OM(){return Bx()==="http:"||Bx()==="https:"}function Bx(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(OM()||pL()||"connection"in navigator)?navigator.onLine:!0}function MM(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Sr(n>e,"Short delay should be less than long delay!"),this.isMobile=dL()||mL()}get(){return LM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hv(t,e){Sr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ur("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ur("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ur("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UM=new bc(3e4,6e4);function Rs(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ai(t,e,n,r,i={}){return JI(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=xc(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:l},s);return fL()||(u.referrerPolicy="no-referrer"),XI.fetch()(ZI(t,t.config.apiHost,n,a),u)})}async function JI(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},FM),e);try{const i=new zM(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw vu(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw vu(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw vu(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw vu(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw YI(t,h,u);jn(t,h)}}catch(i){if(i instanceof Jn)throw i;jn(t,"network-request-failed",{message:String(i)})}}async function Mh(t,e,n,r,i={}){const s=await Ai(t,e,n,r,i);return"mfaPendingCredential"in s&&jn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function ZI(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?hv(t.config,i):`${t.config.apiScheme}://${i}`}function BM(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class zM{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Hn(this.auth,"network-request-failed")),UM.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function vu(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Hn(t,e,r);return i.customData._tokenResponse=n,i}function zx(t){return t!==void 0&&t.enterprise!==void 0}class $M{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return BM(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function qM(t,e){return Ai(t,"GET","/v2/recaptchaConfig",Rs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KM(t,e){return Ai(t,"POST","/v1/accounts:delete",e)}async function eA(t,e){return Ai(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _l(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function GM(t,e=!1){const n=Ye(t),r=await n.getIdToken(e),i=fv(r);le(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:_l(Ip(i.auth_time)),issuedAtTime:_l(Ip(i.iat)),expirationTime:_l(Ip(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Ip(t){return Number(t)*1e3}function fv(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Wu("JWT malformed, contained fewer than 3 sections"),null;try{const i=jI(n);return i?JSON.parse(i):(Wu("Failed to decode base64 JWT payload"),null)}catch(i){return Wu("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function $x(t){const e=fv(t);return le(e,"internal-error"),le(typeof e.exp<"u","internal-error"),le(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jl(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Jn&&WM(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function WM({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HM{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=_l(this.lastLoginAt),this.creationTime=_l(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bd(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Jl(t,eA(n,{idToken:r}));le(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?tA(s.providerUserInfo):[],a=YM(t.providerData,o),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?u:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new ng(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,f)}async function QM(t){const e=Ye(t);await Bd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function YM(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function tA(t){return t.map(e=>{var{providerId:n}=e,r=uv(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XM(t,e){const n=await JI(t,{},async()=>{const r=xc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=ZI(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",XI.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function JM(t,e){return Ai(t,"POST","/v2/accounts:revokeToken",Rs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){le(e.idToken,"internal-error"),le(typeof e.idToken<"u","internal-error"),le(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):$x(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){le(e.length!==0,"internal-error");const n=$x(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(le(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await XM(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Eo;return r&&(le(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(le(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(le(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Eo,this.toJSON())}_performRefresh(){return ur("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jr(t,e){le(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class dr{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=uv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new HM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new ng(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Jl(this,this.stsTokenManager.getToken(this.auth,e));return le(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return GM(this,e)}reload(){return QM(this)}_assign(e){this!==e&&(le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new dr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Bd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(cr(this.auth.app))return Promise.reject(di(this.auth));const e=await this.getIdToken();return await Jl(this,KM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,u,h;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(i=n.email)!==null&&i!==void 0?i:void 0,v=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,b=(o=n.photoURL)!==null&&o!==void 0?o:void 0,T=(a=n.tenantId)!==null&&a!==void 0?a:void 0,A=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,_=(u=n.createdAt)!==null&&u!==void 0?u:void 0,y=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:w,emailVerified:P,isAnonymous:V,providerData:O,stsTokenManager:I}=n;le(w&&I,e,"internal-error");const x=Eo.fromJSON(this.name,I);le(typeof w=="string",e,"internal-error"),jr(f,e.name),jr(p,e.name),le(typeof P=="boolean",e,"internal-error"),le(typeof V=="boolean",e,"internal-error"),jr(v,e.name),jr(b,e.name),jr(T,e.name),jr(A,e.name),jr(_,e.name),jr(y,e.name);const k=new dr({uid:w,auth:e,email:p,emailVerified:P,displayName:f,isAnonymous:V,photoURL:b,phoneNumber:v,tenantId:T,stsTokenManager:x,createdAt:_,lastLoginAt:y});return O&&Array.isArray(O)&&(k.providerData=O.map(C=>Object.assign({},C))),A&&(k._redirectEventId=A),k}static async _fromIdTokenResponse(e,n,r=!1){const i=new Eo;i.updateFromServerResponse(n);const s=new dr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Bd(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];le(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?tA(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Eo;a.updateFromIdToken(r);const l=new dr({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new ng(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx=new Map;function hr(t){Sr(t instanceof Function,"Expected a class definition");let e=qx.get(t);return e?(Sr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,qx.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}nA.type="NONE";const Kx=nA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hu(t,e,n){return`firebase:${t}:${e}:${n}`}class To{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Hu(this.userKey,i.apiKey,s),this.fullPersistenceKey=Hu("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?dr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new To(hr(Kx),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||hr(Kx);const o=Hu(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const h=await u._get(o);if(h){const f=dr._fromJSON(e,h);u!==s&&(a=f),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new To(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new To(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gx(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(oA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(rA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(lA(e))return"Blackberry";if(cA(e))return"Webos";if(iA(e))return"Safari";if((e.includes("chrome/")||sA(e))&&!e.includes("edge/"))return"Chrome";if(aA(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function rA(t=lt()){return/firefox\//i.test(t)}function iA(t=lt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function sA(t=lt()){return/crios\//i.test(t)}function oA(t=lt()){return/iemobile/i.test(t)}function aA(t=lt()){return/android/i.test(t)}function lA(t=lt()){return/blackberry/i.test(t)}function cA(t=lt()){return/webos/i.test(t)}function pv(t=lt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function ZM(t=lt()){var e;return pv(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function e4(){return gL()&&document.documentMode===10}function uA(t=lt()){return pv(t)||aA(t)||cA(t)||lA(t)||/windows phone/i.test(t)||oA(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dA(t,e=[]){let n;switch(t){case"Browser":n=Gx(lt());break;case"Worker":n=`${Gx(lt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ps}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n4(t,e={}){return Ai(t,"GET","/v2/passwordPolicy",Rs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r4=6;class i4{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:r4,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Wx(this),this.idTokenSubscription=new Wx(this),this.beforeStateQueue=new t4(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=QI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=hr(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await To.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await eA(this,{idToken:e}),r=await dr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(cr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Bd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=MM()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(cr(this.app))return Promise.reject(di(this));const n=e?Ye(e):null;return n&&le(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return cr(this.app)?Promise.reject(di(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return cr(this.app)?Promise.reject(di(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(hr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await n4(this),n=new i4(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new wc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await JM(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&hr(e)||this._popupRedirectResolver;le(n,this,"argument-error"),this.redirectPersistenceManager=await To.create(this,[hr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(le(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=dA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&jM(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ra(t){return Ye(t)}class Wx{constructor(e){this.auth=e,this.observer=null,this.addObserver=bL(n=>this.observer=n)}get next(){return le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function o4(t){Fh=t}function hA(t){return Fh.loadJS(t)}function a4(){return Fh.recaptchaEnterpriseScript}function l4(){return Fh.gapiScript}function c4(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const u4="recaptcha-enterprise",d4="NO_RECAPTCHA";class h4{constructor(e){this.type=u4,this.auth=ra(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{qM(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new $M(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;zx(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(d4)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&zx(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=a4();l.length!==0&&(l+=a),hA(l).then(()=>{i(a,s,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function Hx(t,e,n,r=!1){const i=new h4(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Qx(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await Hx(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Hx(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f4(t,e){const n=Lh(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Fd(s,e??{}))return i;jn(i,"already-initialized")}return n.initialize({options:e})}function p4(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(hr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function m4(t,e,n){const r=ra(t);le(r._canInitEmulator,r,"emulator-config-failed"),le(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=fA(e),{host:o,port:a}=g4(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),y4()}function fA(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function g4(t){const e=fA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Yx(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Yx(o)}}}function Yx(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function y4(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ur("not implemented")}_getIdTokenResponse(e){return ur("not implemented")}_linkToIdToken(e,n){return ur("not implemented")}_getReauthenticationResolver(e){return ur("not implemented")}}async function v4(t,e){return Ai(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _4(t,e){return Mh(t,"POST","/v1/accounts:signInWithPassword",Rs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w4(t,e){return Mh(t,"POST","/v1/accounts:signInWithEmailLink",Rs(t,e))}async function x4(t,e){return Mh(t,"POST","/v1/accounts:signInWithEmailLink",Rs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl extends mv{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Zl(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Zl(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Qx(e,n,"signInWithPassword",_4);case"emailLink":return w4(e,{email:this._email,oobCode:this._password});default:jn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Qx(e,r,"signUpPassword",v4);case"emailLink":return x4(e,{idToken:n,email:this._email,oobCode:this._password});default:jn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function So(t,e){return Mh(t,"POST","/v1/accounts:signInWithIdp",Rs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b4="http://localhost";class ps extends mv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ps(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):jn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=uv(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new ps(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return So(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,So(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,So(e,n)}buildRequest(){const e={requestUri:b4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=xc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E4(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function T4(t){const e=Za(el(t)).link,n=e?Za(el(e)).deep_link_id:null,r=Za(el(t)).deep_link_id;return(r?Za(el(r)).link:null)||r||n||e||t}class gv{constructor(e){var n,r,i,s,o,a;const l=Za(el(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(r=l.oobCode)!==null&&r!==void 0?r:null,f=E4((i=l.mode)!==null&&i!==void 0?i:null);le(u&&h&&f,"argument-error"),this.apiKey=u,this.operation=f,this.code=h,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=T4(e);try{return new gv(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(){this.providerId=ia.PROVIDER_ID}static credential(e,n){return Zl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=gv.parseLink(n);return le(r,"argument-error"),Zl._fromEmailAndCode(e,r.code,r.tenantId)}}ia.PROVIDER_ID="password";ia.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ia.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec extends pA{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr extends Ec{constructor(){super("facebook.com")}static credential(e){return ps._fromParams({providerId:Gr.PROVIDER_ID,signInMethod:Gr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gr.credentialFromTaggedObject(e)}static credentialFromError(e){return Gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Gr.credential(e.oauthAccessToken)}catch{return null}}}Gr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Gr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr extends Ec{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ps._fromParams({providerId:Wr.PROVIDER_ID,signInMethod:Wr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Wr.credentialFromTaggedObject(e)}static credentialFromError(e){return Wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Wr.credential(n,r)}catch{return null}}}Wr.GOOGLE_SIGN_IN_METHOD="google.com";Wr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr extends Ec{constructor(){super("github.com")}static credential(e){return ps._fromParams({providerId:Hr.PROVIDER_ID,signInMethod:Hr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hr.credentialFromTaggedObject(e)}static credentialFromError(e){return Hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hr.credential(e.oauthAccessToken)}catch{return null}}}Hr.GITHUB_SIGN_IN_METHOD="github.com";Hr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr extends Ec{constructor(){super("twitter.com")}static credential(e,n){return ps._fromParams({providerId:Qr.PROVIDER_ID,signInMethod:Qr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Qr.credentialFromTaggedObject(e)}static credentialFromError(e){return Qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Qr.credential(n,r)}catch{return null}}}Qr.TWITTER_SIGN_IN_METHOD="twitter.com";Qr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await dr._fromIdTokenResponse(e,r,i),o=Xx(r);return new Mo({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Xx(r);return new Mo({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Xx(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd extends Jn{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,zd.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new zd(e,n,r,i)}}function mA(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?zd._fromErrorAndOperation(t,s,e,r):s})}async function S4(t,e,n=!1){const r=await Jl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Mo._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I4(t,e,n=!1){const{auth:r}=t;if(cr(r.app))return Promise.reject(di(r));const i="reauthenticate";try{const s=await Jl(t,mA(r,i,e,t),n);le(s.idToken,r,"internal-error");const o=fv(s.idToken);le(o,r,"internal-error");const{sub:a}=o;return le(t.uid===a,r,"user-mismatch"),Mo._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&jn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gA(t,e,n=!1){if(cr(t.app))return Promise.reject(di(t));const r="signIn",i=await mA(t,r,e),s=await Mo._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function A4(t,e){return gA(ra(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k4(t){const e=ra(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function C4(t,e,n){return cr(t.app)?Promise.reject(di(t)):A4(Ye(t),ia.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&k4(t),r})}function P4(t,e,n,r){return Ye(t).onIdTokenChanged(e,n,r)}function R4(t,e,n){return Ye(t).beforeAuthStateChanged(e,n)}function yA(t,e,n,r){return Ye(t).onAuthStateChanged(e,n,r)}function Jx(t){return Ye(t).signOut()}const $d="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem($d,"1"),this.storage.removeItem($d),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N4=1e3,D4=10;class _A extends vA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=uA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);e4()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,D4):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},N4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}_A.type="LOCAL";const V4=_A;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA extends vA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}wA.type="SESSION";const xA=wA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j4(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Uh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await j4(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Uh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yv(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=yv("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const p=f;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qn(){return window}function L4(t){Qn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bA(){return typeof Qn().WorkerGlobalScope<"u"&&typeof Qn().importScripts=="function"}async function M4(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function F4(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function U4(){return bA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA="firebaseLocalStorageDb",B4=1,qd="firebaseLocalStorage",TA="fbase_key";class Tc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Bh(t,e){return t.transaction([qd],e?"readwrite":"readonly").objectStore(qd)}function z4(){const t=indexedDB.deleteDatabase(EA);return new Tc(t).toPromise()}function rg(){const t=indexedDB.open(EA,B4);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(qd,{keyPath:TA})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(qd)?e(r):(r.close(),await z4(),e(await rg()))})})}async function Zx(t,e,n){const r=Bh(t,!0).put({[TA]:e,value:n});return new Tc(r).toPromise()}async function $4(t,e){const n=Bh(t,!1).get(e),r=await new Tc(n).toPromise();return r===void 0?null:r.value}function eb(t,e){const n=Bh(t,!0).delete(e);return new Tc(n).toPromise()}const q4=800,K4=3;class SA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await rg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>K4)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return bA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Uh._getInstance(U4()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await M4(),!this.activeServiceWorker)return;this.sender=new O4(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||F4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await rg();return await Zx(e,$d,"1"),await eb(e,$d),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Zx(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>$4(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>eb(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Bh(i,!1).getAll();return new Tc(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),q4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}SA.type="LOCAL";const G4=SA;new bc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W4(t,e){return e?hr(e):(le(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv extends mv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return So(e,this._buildIdpRequest())}_linkToIdToken(e,n){return So(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return So(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function H4(t){return gA(t.auth,new vv(t),t.bypassAuthState)}function Q4(t){const{auth:e,user:n}=t;return le(n,e,"internal-error"),I4(n,new vv(t),t.bypassAuthState)}async function Y4(t){const{auth:e,user:n}=t;return le(n,e,"internal-error"),S4(n,new vv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return H4;case"linkViaPopup":case"linkViaRedirect":return Y4;case"reauthViaPopup":case"reauthViaRedirect":return Q4;default:jn(this.auth,"internal-error")}}resolve(e){Sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X4=new bc(2e3,1e4);class go extends IA{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,go.currentPopupAction&&go.currentPopupAction.cancel(),go.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return le(e,this.auth,"internal-error"),e}async onExecution(){Sr(this.filter.length===1,"Popup operations only handle one event");const e=yv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Hn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Hn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,go.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Hn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,X4.get())};e()}}go.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J4="pendingRedirect",Qu=new Map;class Z4 extends IA{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Qu.get(this.auth._key());if(!e){try{const r=await eF(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Qu.set(this.auth._key(),e)}return this.bypassAuthState||Qu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function eF(t,e){const n=rF(e),r=nF(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function tF(t,e){Qu.set(t._key(),e)}function nF(t){return hr(t._redirectPersistence)}function rF(t){return Hu(J4,t.config.apiKey,t.name)}async function iF(t,e,n=!1){if(cr(t.app))return Promise.reject(di(t));const r=ra(t),i=W4(r,e),o=await new Z4(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sF=10*60*1e3;class oF{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!aF(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!AA(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Hn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=sF&&this.cachedEventUids.clear(),this.cachedEventUids.has(tb(e))}saveEventToCache(e){this.cachedEventUids.add(tb(e)),this.lastProcessedEventTime=Date.now()}}function tb(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function AA({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function aF(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return AA(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lF(t,e={}){return Ai(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cF=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,uF=/^https?/;async function dF(t){if(t.config.emulator)return;const{authorizedDomains:e}=await lF(t);for(const n of e)try{if(hF(n))return}catch{}jn(t,"unauthorized-domain")}function hF(t){const e=tg(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!uF.test(n))return!1;if(cF.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fF=new bc(3e4,6e4);function nb(){const t=Qn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function pF(t){return new Promise((e,n)=>{var r,i,s;function o(){nb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{nb(),n(Hn(t,"network-request-failed"))},timeout:fF.get()})}if(!((i=(r=Qn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Qn().gapi)===null||s===void 0)&&s.load)o();else{const a=c4("iframefcb");return Qn()[a]=()=>{gapi.load?o():n(Hn(t,"network-request-failed"))},hA(`${l4()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Yu=null,e})}let Yu=null;function mF(t){return Yu=Yu||pF(t),Yu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gF=new bc(5e3,15e3),yF="__/auth/iframe",vF="emulator/auth/iframe",_F={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},wF=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function xF(t){const e=t.config;le(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?hv(e,vF):`https://${t.config.authDomain}/${yF}`,r={apiKey:e.apiKey,appName:t.name,v:Ps},i=wF.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${xc(r).slice(1)}`}async function bF(t){const e=await mF(t),n=Qn().gapi;return le(n,t,"internal-error"),e.open({where:document.body,url:xF(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_F,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Hn(t,"network-request-failed"),a=Qn().setTimeout(()=>{s(o)},gF.get());function l(){Qn().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EF={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},TF=500,SF=600,IF="_blank",AF="http://localhost";class rb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function kF(t,e,n,r=TF,i=SF){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},EF),{width:r.toString(),height:i.toString(),top:s,left:o}),u=lt().toLowerCase();n&&(a=sA(u)?IF:n),rA(u)&&(e=e||AF,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[v,b])=>`${p}${v}=${b},`,"");if(ZM(u)&&a!=="_self")return CF(e||"",a),new rb(null);const f=window.open(e||"",a,h);le(f,t,"popup-blocked");try{f.focus()}catch{}return new rb(f)}function CF(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PF="__/auth/handler",RF="emulator/auth/handler",NF=encodeURIComponent("fac");async function ib(t,e,n,r,i,s){le(t.config.authDomain,t,"auth-domain-config-required"),le(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ps,eventId:i};if(e instanceof pA){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",xL(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof Ec){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),u=l?`#${NF}=${encodeURIComponent(l)}`:"";return`${DF(t)}?${xc(a).slice(1)}${u}`}function DF({config:t}){return t.emulator?hv(t,RF):`https://${t.authDomain}/${PF}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ap="webStorageSupport";class VF{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=xA,this._completeRedirectFn=iF,this._overrideRedirectResult=tF}async _openPopup(e,n,r,i){var s;Sr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await ib(e,n,r,tg(),i);return kF(e,o,yv())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await ib(e,n,r,tg(),i);return L4(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Sr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await bF(e),r=new oF(e);return n.register("authEvent",i=>(le(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ap,{type:Ap},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Ap];o!==void 0&&n(!!o),jn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=dF(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return uA()||iA()||pv()}}const jF=VF;var sb="@firebase/auth",ob="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OF{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LF(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function MF(t){fs(new vi("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;le(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:dA(t)},u=new s4(r,i,s,l);return p4(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),fs(new vi("auth-internal",e=>{const n=ra(e.getProvider("auth").getImmediate());return(r=>new OF(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Wn(sb,ob,LF(t)),Wn(sb,ob,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FF=5*60,UF=FI("authIdTokenMaxAge")||FF;let ab=null;const BF=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>UF)return;const i=n==null?void 0:n.token;ab!==i&&(ab=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function zF(t=cv()){const e=Lh(t,"auth");if(e.isInitialized())return e.getImmediate();const n=f4(t,{popupRedirectResolver:jF,persistence:[G4,V4,xA]}),r=FI("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=BF(s.toString());R4(n,o,()=>o(n.currentUser)),P4(n,a=>o(a))}}const i=OI("auth");return i&&m4(n,`http://${i}`),n}function $F(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}o4({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Hn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",$F().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});MF("Browser");var lb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ss,kA;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,x){function k(){}k.prototype=x.prototype,I.D=x.prototype,I.prototype=new k,I.prototype.constructor=I,I.C=function(C,D,N){for(var E=Array(arguments.length-2),F=2;F<arguments.length;F++)E[F-2]=arguments[F];return x.prototype[D].apply(C,E)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,x,k){k||(k=0);var C=Array(16);if(typeof x=="string")for(var D=0;16>D;++D)C[D]=x.charCodeAt(k++)|x.charCodeAt(k++)<<8|x.charCodeAt(k++)<<16|x.charCodeAt(k++)<<24;else for(D=0;16>D;++D)C[D]=x[k++]|x[k++]<<8|x[k++]<<16|x[k++]<<24;x=I.g[0],k=I.g[1],D=I.g[2];var N=I.g[3],E=x+(N^k&(D^N))+C[0]+3614090360&4294967295;x=k+(E<<7&4294967295|E>>>25),E=N+(D^x&(k^D))+C[1]+3905402710&4294967295,N=x+(E<<12&4294967295|E>>>20),E=D+(k^N&(x^k))+C[2]+606105819&4294967295,D=N+(E<<17&4294967295|E>>>15),E=k+(x^D&(N^x))+C[3]+3250441966&4294967295,k=D+(E<<22&4294967295|E>>>10),E=x+(N^k&(D^N))+C[4]+4118548399&4294967295,x=k+(E<<7&4294967295|E>>>25),E=N+(D^x&(k^D))+C[5]+1200080426&4294967295,N=x+(E<<12&4294967295|E>>>20),E=D+(k^N&(x^k))+C[6]+2821735955&4294967295,D=N+(E<<17&4294967295|E>>>15),E=k+(x^D&(N^x))+C[7]+4249261313&4294967295,k=D+(E<<22&4294967295|E>>>10),E=x+(N^k&(D^N))+C[8]+1770035416&4294967295,x=k+(E<<7&4294967295|E>>>25),E=N+(D^x&(k^D))+C[9]+2336552879&4294967295,N=x+(E<<12&4294967295|E>>>20),E=D+(k^N&(x^k))+C[10]+4294925233&4294967295,D=N+(E<<17&4294967295|E>>>15),E=k+(x^D&(N^x))+C[11]+2304563134&4294967295,k=D+(E<<22&4294967295|E>>>10),E=x+(N^k&(D^N))+C[12]+1804603682&4294967295,x=k+(E<<7&4294967295|E>>>25),E=N+(D^x&(k^D))+C[13]+4254626195&4294967295,N=x+(E<<12&4294967295|E>>>20),E=D+(k^N&(x^k))+C[14]+2792965006&4294967295,D=N+(E<<17&4294967295|E>>>15),E=k+(x^D&(N^x))+C[15]+1236535329&4294967295,k=D+(E<<22&4294967295|E>>>10),E=x+(D^N&(k^D))+C[1]+4129170786&4294967295,x=k+(E<<5&4294967295|E>>>27),E=N+(k^D&(x^k))+C[6]+3225465664&4294967295,N=x+(E<<9&4294967295|E>>>23),E=D+(x^k&(N^x))+C[11]+643717713&4294967295,D=N+(E<<14&4294967295|E>>>18),E=k+(N^x&(D^N))+C[0]+3921069994&4294967295,k=D+(E<<20&4294967295|E>>>12),E=x+(D^N&(k^D))+C[5]+3593408605&4294967295,x=k+(E<<5&4294967295|E>>>27),E=N+(k^D&(x^k))+C[10]+38016083&4294967295,N=x+(E<<9&4294967295|E>>>23),E=D+(x^k&(N^x))+C[15]+3634488961&4294967295,D=N+(E<<14&4294967295|E>>>18),E=k+(N^x&(D^N))+C[4]+3889429448&4294967295,k=D+(E<<20&4294967295|E>>>12),E=x+(D^N&(k^D))+C[9]+568446438&4294967295,x=k+(E<<5&4294967295|E>>>27),E=N+(k^D&(x^k))+C[14]+3275163606&4294967295,N=x+(E<<9&4294967295|E>>>23),E=D+(x^k&(N^x))+C[3]+4107603335&4294967295,D=N+(E<<14&4294967295|E>>>18),E=k+(N^x&(D^N))+C[8]+1163531501&4294967295,k=D+(E<<20&4294967295|E>>>12),E=x+(D^N&(k^D))+C[13]+2850285829&4294967295,x=k+(E<<5&4294967295|E>>>27),E=N+(k^D&(x^k))+C[2]+4243563512&4294967295,N=x+(E<<9&4294967295|E>>>23),E=D+(x^k&(N^x))+C[7]+1735328473&4294967295,D=N+(E<<14&4294967295|E>>>18),E=k+(N^x&(D^N))+C[12]+2368359562&4294967295,k=D+(E<<20&4294967295|E>>>12),E=x+(k^D^N)+C[5]+4294588738&4294967295,x=k+(E<<4&4294967295|E>>>28),E=N+(x^k^D)+C[8]+2272392833&4294967295,N=x+(E<<11&4294967295|E>>>21),E=D+(N^x^k)+C[11]+1839030562&4294967295,D=N+(E<<16&4294967295|E>>>16),E=k+(D^N^x)+C[14]+4259657740&4294967295,k=D+(E<<23&4294967295|E>>>9),E=x+(k^D^N)+C[1]+2763975236&4294967295,x=k+(E<<4&4294967295|E>>>28),E=N+(x^k^D)+C[4]+1272893353&4294967295,N=x+(E<<11&4294967295|E>>>21),E=D+(N^x^k)+C[7]+4139469664&4294967295,D=N+(E<<16&4294967295|E>>>16),E=k+(D^N^x)+C[10]+3200236656&4294967295,k=D+(E<<23&4294967295|E>>>9),E=x+(k^D^N)+C[13]+681279174&4294967295,x=k+(E<<4&4294967295|E>>>28),E=N+(x^k^D)+C[0]+3936430074&4294967295,N=x+(E<<11&4294967295|E>>>21),E=D+(N^x^k)+C[3]+3572445317&4294967295,D=N+(E<<16&4294967295|E>>>16),E=k+(D^N^x)+C[6]+76029189&4294967295,k=D+(E<<23&4294967295|E>>>9),E=x+(k^D^N)+C[9]+3654602809&4294967295,x=k+(E<<4&4294967295|E>>>28),E=N+(x^k^D)+C[12]+3873151461&4294967295,N=x+(E<<11&4294967295|E>>>21),E=D+(N^x^k)+C[15]+530742520&4294967295,D=N+(E<<16&4294967295|E>>>16),E=k+(D^N^x)+C[2]+3299628645&4294967295,k=D+(E<<23&4294967295|E>>>9),E=x+(D^(k|~N))+C[0]+4096336452&4294967295,x=k+(E<<6&4294967295|E>>>26),E=N+(k^(x|~D))+C[7]+1126891415&4294967295,N=x+(E<<10&4294967295|E>>>22),E=D+(x^(N|~k))+C[14]+2878612391&4294967295,D=N+(E<<15&4294967295|E>>>17),E=k+(N^(D|~x))+C[5]+4237533241&4294967295,k=D+(E<<21&4294967295|E>>>11),E=x+(D^(k|~N))+C[12]+1700485571&4294967295,x=k+(E<<6&4294967295|E>>>26),E=N+(k^(x|~D))+C[3]+2399980690&4294967295,N=x+(E<<10&4294967295|E>>>22),E=D+(x^(N|~k))+C[10]+4293915773&4294967295,D=N+(E<<15&4294967295|E>>>17),E=k+(N^(D|~x))+C[1]+2240044497&4294967295,k=D+(E<<21&4294967295|E>>>11),E=x+(D^(k|~N))+C[8]+1873313359&4294967295,x=k+(E<<6&4294967295|E>>>26),E=N+(k^(x|~D))+C[15]+4264355552&4294967295,N=x+(E<<10&4294967295|E>>>22),E=D+(x^(N|~k))+C[6]+2734768916&4294967295,D=N+(E<<15&4294967295|E>>>17),E=k+(N^(D|~x))+C[13]+1309151649&4294967295,k=D+(E<<21&4294967295|E>>>11),E=x+(D^(k|~N))+C[4]+4149444226&4294967295,x=k+(E<<6&4294967295|E>>>26),E=N+(k^(x|~D))+C[11]+3174756917&4294967295,N=x+(E<<10&4294967295|E>>>22),E=D+(x^(N|~k))+C[2]+718787259&4294967295,D=N+(E<<15&4294967295|E>>>17),E=k+(N^(D|~x))+C[9]+3951481745&4294967295,I.g[0]=I.g[0]+x&4294967295,I.g[1]=I.g[1]+(D+(E<<21&4294967295|E>>>11))&4294967295,I.g[2]=I.g[2]+D&4294967295,I.g[3]=I.g[3]+N&4294967295}r.prototype.u=function(I,x){x===void 0&&(x=I.length);for(var k=x-this.blockSize,C=this.B,D=this.h,N=0;N<x;){if(D==0)for(;N<=k;)i(this,I,N),N+=this.blockSize;if(typeof I=="string"){for(;N<x;)if(C[D++]=I.charCodeAt(N++),D==this.blockSize){i(this,C),D=0;break}}else for(;N<x;)if(C[D++]=I[N++],D==this.blockSize){i(this,C),D=0;break}}this.h=D,this.o+=x},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var x=1;x<I.length-8;++x)I[x]=0;var k=8*this.o;for(x=I.length-8;x<I.length;++x)I[x]=k&255,k/=256;for(this.u(I),I=Array(16),x=k=0;4>x;++x)for(var C=0;32>C;C+=8)I[k++]=this.g[x]>>>C&255;return I};function s(I,x){var k=a;return Object.prototype.hasOwnProperty.call(k,I)?k[I]:k[I]=x(I)}function o(I,x){this.h=x;for(var k=[],C=!0,D=I.length-1;0<=D;D--){var N=I[D]|0;C&&N==x||(k[D]=N,C=!1)}this.g=k}var a={};function l(I){return-128<=I&&128>I?s(I,function(x){return new o([x|0],0>x?-1:0)}):new o([I|0],0>I?-1:0)}function u(I){if(isNaN(I)||!isFinite(I))return f;if(0>I)return A(u(-I));for(var x=[],k=1,C=0;I>=k;C++)x[C]=I/k|0,k*=4294967296;return new o(x,0)}function h(I,x){if(I.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(I.charAt(0)=="-")return A(h(I.substring(1),x));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=u(Math.pow(x,8)),C=f,D=0;D<I.length;D+=8){var N=Math.min(8,I.length-D),E=parseInt(I.substring(D,D+N),x);8>N?(N=u(Math.pow(x,N)),C=C.j(N).add(u(E))):(C=C.j(k),C=C.add(u(E)))}return C}var f=l(0),p=l(1),v=l(16777216);t=o.prototype,t.m=function(){if(T(this))return-A(this).m();for(var I=0,x=1,k=0;k<this.g.length;k++){var C=this.i(k);I+=(0<=C?C:4294967296+C)*x,x*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(b(this))return"0";if(T(this))return"-"+A(this).toString(I);for(var x=u(Math.pow(I,6)),k=this,C="";;){var D=P(k,x).g;k=_(k,D.j(x));var N=((0<k.g.length?k.g[0]:k.h)>>>0).toString(I);if(k=D,b(k))return N+C;for(;6>N.length;)N="0"+N;C=N+C}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function b(I){if(I.h!=0)return!1;for(var x=0;x<I.g.length;x++)if(I.g[x]!=0)return!1;return!0}function T(I){return I.h==-1}t.l=function(I){return I=_(this,I),T(I)?-1:b(I)?0:1};function A(I){for(var x=I.g.length,k=[],C=0;C<x;C++)k[C]=~I.g[C];return new o(k,~I.h).add(p)}t.abs=function(){return T(this)?A(this):this},t.add=function(I){for(var x=Math.max(this.g.length,I.g.length),k=[],C=0,D=0;D<=x;D++){var N=C+(this.i(D)&65535)+(I.i(D)&65535),E=(N>>>16)+(this.i(D)>>>16)+(I.i(D)>>>16);C=E>>>16,N&=65535,E&=65535,k[D]=E<<16|N}return new o(k,k[k.length-1]&-2147483648?-1:0)};function _(I,x){return I.add(A(x))}t.j=function(I){if(b(this)||b(I))return f;if(T(this))return T(I)?A(this).j(A(I)):A(A(this).j(I));if(T(I))return A(this.j(A(I)));if(0>this.l(v)&&0>I.l(v))return u(this.m()*I.m());for(var x=this.g.length+I.g.length,k=[],C=0;C<2*x;C++)k[C]=0;for(C=0;C<this.g.length;C++)for(var D=0;D<I.g.length;D++){var N=this.i(C)>>>16,E=this.i(C)&65535,F=I.i(D)>>>16,q=I.i(D)&65535;k[2*C+2*D]+=E*q,y(k,2*C+2*D),k[2*C+2*D+1]+=N*q,y(k,2*C+2*D+1),k[2*C+2*D+1]+=E*F,y(k,2*C+2*D+1),k[2*C+2*D+2]+=N*F,y(k,2*C+2*D+2)}for(C=0;C<x;C++)k[C]=k[2*C+1]<<16|k[2*C];for(C=x;C<2*x;C++)k[C]=0;return new o(k,0)};function y(I,x){for(;(I[x]&65535)!=I[x];)I[x+1]+=I[x]>>>16,I[x]&=65535,x++}function w(I,x){this.g=I,this.h=x}function P(I,x){if(b(x))throw Error("division by zero");if(b(I))return new w(f,f);if(T(I))return x=P(A(I),x),new w(A(x.g),A(x.h));if(T(x))return x=P(I,A(x)),new w(A(x.g),x.h);if(30<I.g.length){if(T(I)||T(x))throw Error("slowDivide_ only works with positive integers.");for(var k=p,C=x;0>=C.l(I);)k=V(k),C=V(C);var D=O(k,1),N=O(C,1);for(C=O(C,2),k=O(k,2);!b(C);){var E=N.add(C);0>=E.l(I)&&(D=D.add(k),N=E),C=O(C,1),k=O(k,1)}return x=_(I,D.j(x)),new w(D,x)}for(D=f;0<=I.l(x);){for(k=Math.max(1,Math.floor(I.m()/x.m())),C=Math.ceil(Math.log(k)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),N=u(k),E=N.j(x);T(E)||0<E.l(I);)k-=C,N=u(k),E=N.j(x);b(N)&&(N=p),D=D.add(N),I=_(I,E)}return new w(D,I)}t.A=function(I){return P(this,I).h},t.and=function(I){for(var x=Math.max(this.g.length,I.g.length),k=[],C=0;C<x;C++)k[C]=this.i(C)&I.i(C);return new o(k,this.h&I.h)},t.or=function(I){for(var x=Math.max(this.g.length,I.g.length),k=[],C=0;C<x;C++)k[C]=this.i(C)|I.i(C);return new o(k,this.h|I.h)},t.xor=function(I){for(var x=Math.max(this.g.length,I.g.length),k=[],C=0;C<x;C++)k[C]=this.i(C)^I.i(C);return new o(k,this.h^I.h)};function V(I){for(var x=I.g.length+1,k=[],C=0;C<x;C++)k[C]=I.i(C)<<1|I.i(C-1)>>>31;return new o(k,I.h)}function O(I,x){var k=x>>5;x%=32;for(var C=I.g.length-k,D=[],N=0;N<C;N++)D[N]=0<x?I.i(N+k)>>>x|I.i(N+k+1)<<32-x:I.i(N+k);return new o(D,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,kA=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,ss=o}).apply(typeof lb<"u"?lb:typeof self<"u"?self:typeof window<"u"?window:{});var _u=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var CA,tl,PA,Xu,ig,RA,NA,DA;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,m,g){return c==Array.prototype||c==Object.prototype||(c[m]=g.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof _u=="object"&&_u];for(var m=0;m<c.length;++m){var g=c[m];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function i(c,m){if(m)e:{var g=r;c=c.split(".");for(var S=0;S<c.length-1;S++){var L=c[S];if(!(L in g))break e;g=g[L]}c=c[c.length-1],S=g[c],m=m(S),m!=S&&m!=null&&e(g,c,{configurable:!0,writable:!0,value:m})}}function s(c,m){c instanceof String&&(c+="");var g=0,S=!1,L={next:function(){if(!S&&g<c.length){var U=g++;return{value:m(U,c[U]),done:!1}}return S=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}i("Array.prototype.values",function(c){return c||function(){return s(this,function(m,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(c){var m=typeof c;return m=m!="object"?m:c?Array.isArray(c)?"array":m:"null",m=="array"||m=="object"&&typeof c.length=="number"}function u(c){var m=typeof c;return m=="object"&&c!=null||m=="function"}function h(c,m,g){return c.call.apply(c.bind,arguments)}function f(c,m,g){if(!c)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,S),c.apply(m,L)}}return function(){return c.apply(m,arguments)}}function p(c,m,g){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,p.apply(null,arguments)}function v(c,m){var g=Array.prototype.slice.call(arguments,1);return function(){var S=g.slice();return S.push.apply(S,arguments),c.apply(this,S)}}function b(c,m){function g(){}g.prototype=m.prototype,c.aa=m.prototype,c.prototype=new g,c.prototype.constructor=c,c.Qb=function(S,L,U){for(var X=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)X[ke-2]=arguments[ke];return m.prototype[L].apply(S,X)}}function T(c){const m=c.length;if(0<m){const g=Array(m);for(let S=0;S<m;S++)g[S]=c[S];return g}return[]}function A(c,m){for(let g=1;g<arguments.length;g++){const S=arguments[g];if(l(S)){const L=c.length||0,U=S.length||0;c.length=L+U;for(let X=0;X<U;X++)c[L+X]=S[X]}else c.push(S)}}class _{constructor(m,g){this.i=m,this.j=g,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function y(c){return/^[\s\xa0]*$/.test(c)}function w(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function P(c){return P[" "](c),c}P[" "]=function(){};var V=w().indexOf("Gecko")!=-1&&!(w().toLowerCase().indexOf("webkit")!=-1&&w().indexOf("Edge")==-1)&&!(w().indexOf("Trident")!=-1||w().indexOf("MSIE")!=-1)&&w().indexOf("Edge")==-1;function O(c,m,g){for(const S in c)m.call(g,c[S],S,c)}function I(c,m){for(const g in c)m.call(void 0,c[g],g,c)}function x(c){const m={};for(const g in c)m[g]=c[g];return m}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(c,m){let g,S;for(let L=1;L<arguments.length;L++){S=arguments[L];for(g in S)c[g]=S[g];for(let U=0;U<k.length;U++)g=k[U],Object.prototype.hasOwnProperty.call(S,g)&&(c[g]=S[g])}}function D(c){var m=1;c=c.split(":");const g=[];for(;0<m&&c.length;)g.push(c.shift()),m--;return c.length&&g.push(c.join(":")),g}function N(c){a.setTimeout(()=>{throw c},0)}function E(){var c=j;let m=null;return c.g&&(m=c.g,c.g=c.g.next,c.g||(c.h=null),m.next=null),m}class F{constructor(){this.h=this.g=null}add(m,g){const S=q.get();S.set(m,g),this.h?this.h.next=S:this.g=S,this.h=S}}var q=new _(()=>new ie,c=>c.reset());class ie{constructor(){this.next=this.g=this.h=null}set(m,g){this.h=m,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let Q,B=!1,j=new F,K=()=>{const c=a.Promise.resolve(void 0);Q=()=>{c.then(Z)}};var Z=()=>{for(var c;c=E();){try{c.h.call(c.g)}catch(g){N(g)}var m=q;m.j(c),100>m.h&&(m.h++,c.next=m.g,m.g=c)}B=!1};function $(){this.s=this.s,this.C=this.C}$.prototype.s=!1,$.prototype.ma=function(){this.s||(this.s=!0,this.N())},$.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function W(c,m){this.type=c,this.g=this.target=m,this.defaultPrevented=!1}W.prototype.h=function(){this.defaultPrevented=!0};var te=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,m=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const g=()=>{};a.addEventListener("test",g,m),a.removeEventListener("test",g,m)}catch{}return c}();function de(c,m){if(W.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var g=this.type=c.type,S=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=m,m=c.relatedTarget){if(V){e:{try{P(m.nodeName);var L=!0;break e}catch{}L=!1}L||(m=null)}}else g=="mouseover"?m=c.fromElement:g=="mouseout"&&(m=c.toElement);this.relatedTarget=m,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:tt[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&de.aa.h.call(this)}}b(de,W);var tt={2:"touch",3:"pen",4:"mouse"};de.prototype.h=function(){de.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var st="closure_listenable_"+(1e6*Math.random()|0),Zn=0;function Dc(c,m,g,S,L){this.listener=c,this.proxy=null,this.src=m,this.type=g,this.capture=!!S,this.ha=L,this.key=++Zn,this.da=this.fa=!1}function js(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function fe(c){this.src=c,this.g={},this.h=0}fe.prototype.add=function(c,m,g,S,L){var U=c.toString();c=this.g[U],c||(c=this.g[U]=[],this.h++);var X=jt(c,m,S,L);return-1<X?(m=c[X],g||(m.fa=!1)):(m=new Dc(m,this.src,U,!!S,L),m.fa=g,c.push(m)),m};function Re(c,m){var g=m.type;if(g in c.g){var S=c.g[g],L=Array.prototype.indexOf.call(S,m,void 0),U;(U=0<=L)&&Array.prototype.splice.call(S,L,1),U&&(js(m),c.g[g].length==0&&(delete c.g[g],c.h--))}}function jt(c,m,g,S){for(var L=0;L<c.length;++L){var U=c[L];if(!U.da&&U.listener==m&&U.capture==!!g&&U.ha==S)return L}return-1}var On="closure_lm_"+(1e6*Math.random()|0),Pr={};function pa(c,m,g,S,L){if(Array.isArray(m)){for(var U=0;U<m.length;U++)pa(c,m[U],g,S,L);return null}return g=h0(g),c&&c[st]?c.K(m,g,u(S)?!!S.capture:!!S,L):mf(c,m,g,!1,S,L)}function mf(c,m,g,S,L,U){if(!m)throw Error("Invalid event type");var X=u(L)?!!L.capture:!!L,ke=vf(c);if(ke||(c[On]=ke=new fe(c)),g=ke.add(m,g,S,X,U),g.proxy)return g;if(S=gf(),g.proxy=S,S.src=c,S.listener=g,c.addEventListener)te||(L=X),L===void 0&&(L=!1),c.addEventListener(m.toString(),S,L);else if(c.attachEvent)c.attachEvent(d0(m.toString()),S);else if(c.addListener&&c.removeListener)c.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return g}function gf(){function c(g){return m.call(c.src,c.listener,g)}const m=mP;return c}function Vc(c,m,g,S,L){if(Array.isArray(m))for(var U=0;U<m.length;U++)Vc(c,m[U],g,S,L);else S=u(S)?!!S.capture:!!S,g=h0(g),c&&c[st]?(c=c.i,m=String(m).toString(),m in c.g&&(U=c.g[m],g=jt(U,g,S,L),-1<g&&(js(U[g]),Array.prototype.splice.call(U,g,1),U.length==0&&(delete c.g[m],c.h--)))):c&&(c=vf(c))&&(m=c.g[m.toString()],c=-1,m&&(c=jt(m,g,S,L)),(g=-1<c?m[c]:null)&&yf(g))}function yf(c){if(typeof c!="number"&&c&&!c.da){var m=c.src;if(m&&m[st])Re(m.i,c);else{var g=c.type,S=c.proxy;m.removeEventListener?m.removeEventListener(g,S,c.capture):m.detachEvent?m.detachEvent(d0(g),S):m.addListener&&m.removeListener&&m.removeListener(S),(g=vf(m))?(Re(g,c),g.h==0&&(g.src=null,m[On]=null)):js(c)}}}function d0(c){return c in Pr?Pr[c]:Pr[c]="on"+c}function mP(c,m){if(c.da)c=!0;else{m=new de(m,this);var g=c.listener,S=c.ha||c.src;c.fa&&yf(c),c=g.call(S,m)}return c}function vf(c){return c=c[On],c instanceof fe?c:null}var _f="__closure_events_fn_"+(1e9*Math.random()>>>0);function h0(c){return typeof c=="function"?c:(c[_f]||(c[_f]=function(m){return c.handleEvent(m)}),c[_f])}function bt(){$.call(this),this.i=new fe(this),this.M=this,this.F=null}b(bt,$),bt.prototype[st]=!0,bt.prototype.removeEventListener=function(c,m,g,S){Vc(this,c,m,g,S)};function Ot(c,m){var g,S=c.F;if(S)for(g=[];S;S=S.F)g.push(S);if(c=c.M,S=m.type||m,typeof m=="string")m=new W(m,c);else if(m instanceof W)m.target=m.target||c;else{var L=m;m=new W(S,c),C(m,L)}if(L=!0,g)for(var U=g.length-1;0<=U;U--){var X=m.g=g[U];L=jc(X,S,!0,m)&&L}if(X=m.g=c,L=jc(X,S,!0,m)&&L,L=jc(X,S,!1,m)&&L,g)for(U=0;U<g.length;U++)X=m.g=g[U],L=jc(X,S,!1,m)&&L}bt.prototype.N=function(){if(bt.aa.N.call(this),this.i){var c=this.i,m;for(m in c.g){for(var g=c.g[m],S=0;S<g.length;S++)js(g[S]);delete c.g[m],c.h--}}this.F=null},bt.prototype.K=function(c,m,g,S){return this.i.add(String(c),m,!1,g,S)},bt.prototype.L=function(c,m,g,S){return this.i.add(String(c),m,!0,g,S)};function jc(c,m,g,S){if(m=c.i.g[String(m)],!m)return!0;m=m.concat();for(var L=!0,U=0;U<m.length;++U){var X=m[U];if(X&&!X.da&&X.capture==g){var ke=X.listener,gt=X.ha||X.src;X.fa&&Re(c.i,X),L=ke.call(gt,S)!==!1&&L}}return L&&!S.defaultPrevented}function f0(c,m,g){if(typeof c=="function")g&&(c=p(c,g));else if(c&&typeof c.handleEvent=="function")c=p(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:a.setTimeout(c,m||0)}function p0(c){c.g=f0(()=>{c.g=null,c.i&&(c.i=!1,p0(c))},c.l);const m=c.h;c.h=null,c.m.apply(null,m)}class gP extends ${constructor(m,g){super(),this.m=m,this.l=g,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:p0(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ma(c){$.call(this),this.h=c,this.g={}}b(ma,$);var m0=[];function g0(c){O(c.g,function(m,g){this.g.hasOwnProperty(g)&&yf(m)},c),c.g={}}ma.prototype.N=function(){ma.aa.N.call(this),g0(this)},ma.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var wf=a.JSON.stringify,yP=a.JSON.parse,vP=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function xf(){}xf.prototype.h=null;function y0(c){return c.h||(c.h=c.i())}function v0(){}var ga={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function bf(){W.call(this,"d")}b(bf,W);function Ef(){W.call(this,"c")}b(Ef,W);var Ni={},_0=null;function Oc(){return _0=_0||new bt}Ni.La="serverreachability";function w0(c){W.call(this,Ni.La,c)}b(w0,W);function ya(c){const m=Oc();Ot(m,new w0(m))}Ni.STAT_EVENT="statevent";function x0(c,m){W.call(this,Ni.STAT_EVENT,c),this.stat=m}b(x0,W);function Lt(c){const m=Oc();Ot(m,new x0(m,c))}Ni.Ma="timingevent";function b0(c,m){W.call(this,Ni.Ma,c),this.size=m}b(b0,W);function va(c,m){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},m)}function _a(){this.g=!0}_a.prototype.xa=function(){this.g=!1};function _P(c,m,g,S,L,U){c.info(function(){if(c.g)if(U)for(var X="",ke=U.split("&"),gt=0;gt<ke.length;gt++){var be=ke[gt].split("=");if(1<be.length){var Et=be[0];be=be[1];var Tt=Et.split("_");X=2<=Tt.length&&Tt[1]=="type"?X+(Et+"="+be+"&"):X+(Et+"=redacted&")}}else X=null;else X=U;return"XMLHTTP REQ ("+S+") [attempt "+L+"]: "+m+`
`+g+`
`+X})}function wP(c,m,g,S,L,U,X){c.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+L+"]: "+m+`
`+g+`
`+U+" "+X})}function Os(c,m,g,S){c.info(function(){return"XMLHTTP TEXT ("+m+"): "+bP(c,g)+(S?" "+S:"")})}function xP(c,m){c.info(function(){return"TIMEOUT: "+m})}_a.prototype.info=function(){};function bP(c,m){if(!c.g)return m;if(!m)return null;try{var g=JSON.parse(m);if(g){for(c=0;c<g.length;c++)if(Array.isArray(g[c])){var S=g[c];if(!(2>S.length)){var L=S[1];if(Array.isArray(L)&&!(1>L.length)){var U=L[0];if(U!="noop"&&U!="stop"&&U!="close")for(var X=1;X<L.length;X++)L[X]=""}}}}return wf(g)}catch{return m}}var Lc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},E0={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Tf;function Mc(){}b(Mc,xf),Mc.prototype.g=function(){return new XMLHttpRequest},Mc.prototype.i=function(){return{}},Tf=new Mc;function Rr(c,m,g,S){this.j=c,this.i=m,this.l=g,this.R=S||1,this.U=new ma(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new T0}function T0(){this.i=null,this.g="",this.h=!1}var S0={},Sf={};function If(c,m,g){c.L=1,c.v=zc(er(m)),c.m=g,c.P=!0,I0(c,null)}function I0(c,m){c.F=Date.now(),Fc(c),c.A=er(c.v);var g=c.A,S=c.R;Array.isArray(S)||(S=[String(S)]),U0(g.i,"t",S),c.C=0,g=c.j.J,c.h=new T0,c.g=i_(c.j,g?m:null,!c.m),0<c.O&&(c.M=new gP(p(c.Y,c,c.g),c.O)),m=c.U,g=c.g,S=c.ca;var L="readystatechange";Array.isArray(L)||(L&&(m0[0]=L.toString()),L=m0);for(var U=0;U<L.length;U++){var X=pa(g,L[U],S||m.handleEvent,!1,m.h||m);if(!X)break;m.g[X.key]=X}m=c.H?x(c.H):{},c.m?(c.u||(c.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,m)):(c.u="GET",c.g.ea(c.A,c.u,null,m)),ya(),_P(c.i,c.u,c.A,c.l,c.R,c.m)}Rr.prototype.ca=function(c){c=c.target;const m=this.M;m&&tr(c)==3?m.j():this.Y(c)},Rr.prototype.Y=function(c){try{if(c==this.g)e:{const Tt=tr(this.g);var m=this.g.Ba();const Fs=this.g.Z();if(!(3>Tt)&&(Tt!=3||this.g&&(this.h.h||this.g.oa()||W0(this.g)))){this.J||Tt!=4||m==7||(m==8||0>=Fs?ya(3):ya(2)),Af(this);var g=this.g.Z();this.X=g;t:if(A0(this)){var S=W0(this.g);c="";var L=S.length,U=tr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Di(this),wa(this);var X="";break t}this.h.i=new a.TextDecoder}for(m=0;m<L;m++)this.h.h=!0,c+=this.h.i.decode(S[m],{stream:!(U&&m==L-1)});S.length=0,this.h.g+=c,this.C=0,X=this.h.g}else X=this.g.oa();if(this.o=g==200,wP(this.i,this.u,this.A,this.l,this.R,Tt,g),this.o){if(this.T&&!this.K){t:{if(this.g){var ke,gt=this.g;if((ke=gt.g?gt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(ke)){var be=ke;break t}}be=null}if(g=be)Os(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,kf(this,g);else{this.o=!1,this.s=3,Lt(12),Di(this),wa(this);break e}}if(this.P){g=!0;let An;for(;!this.J&&this.C<X.length;)if(An=EP(this,X),An==Sf){Tt==4&&(this.s=4,Lt(14),g=!1),Os(this.i,this.l,null,"[Incomplete Response]");break}else if(An==S0){this.s=4,Lt(15),Os(this.i,this.l,X,"[Invalid Chunk]"),g=!1;break}else Os(this.i,this.l,An,null),kf(this,An);if(A0(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Tt!=4||X.length!=0||this.h.h||(this.s=1,Lt(16),g=!1),this.o=this.o&&g,!g)Os(this.i,this.l,X,"[Invalid Chunked Response]"),Di(this),wa(this);else if(0<X.length&&!this.W){this.W=!0;var Et=this.j;Et.g==this&&Et.ba&&!Et.M&&(Et.j.info("Great, no buffering proxy detected. Bytes received: "+X.length),Vf(Et),Et.M=!0,Lt(11))}}else Os(this.i,this.l,X,null),kf(this,X);Tt==4&&Di(this),this.o&&!this.J&&(Tt==4?e_(this.j,this):(this.o=!1,Fc(this)))}else UP(this.g),g==400&&0<X.indexOf("Unknown SID")?(this.s=3,Lt(12)):(this.s=0,Lt(13)),Di(this),wa(this)}}}catch{}finally{}};function A0(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function EP(c,m){var g=c.C,S=m.indexOf(`
`,g);return S==-1?Sf:(g=Number(m.substring(g,S)),isNaN(g)?S0:(S+=1,S+g>m.length?Sf:(m=m.slice(S,S+g),c.C=S+g,m)))}Rr.prototype.cancel=function(){this.J=!0,Di(this)};function Fc(c){c.S=Date.now()+c.I,k0(c,c.I)}function k0(c,m){if(c.B!=null)throw Error("WatchDog timer not null");c.B=va(p(c.ba,c),m)}function Af(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Rr.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(xP(this.i,this.A),this.L!=2&&(ya(),Lt(17)),Di(this),this.s=2,wa(this)):k0(this,this.S-c)};function wa(c){c.j.G==0||c.J||e_(c.j,c)}function Di(c){Af(c);var m=c.M;m&&typeof m.ma=="function"&&m.ma(),c.M=null,g0(c.U),c.g&&(m=c.g,c.g=null,m.abort(),m.ma())}function kf(c,m){try{var g=c.j;if(g.G!=0&&(g.g==c||Cf(g.h,c))){if(!c.K&&Cf(g.h,c)&&g.G==3){try{var S=g.Da.g.parse(m)}catch{S=null}if(Array.isArray(S)&&S.length==3){var L=S;if(L[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<c.F)Hc(g),Gc(g);else break e;Df(g),Lt(18)}}else g.za=L[1],0<g.za-g.T&&37500>L[2]&&g.F&&g.v==0&&!g.C&&(g.C=va(p(g.Za,g),6e3));if(1>=R0(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else ji(g,11)}else if((c.K||g.g==c)&&Hc(g),!y(m))for(L=g.Da.g.parse(m),m=0;m<L.length;m++){let be=L[m];if(g.T=be[0],be=be[1],g.G==2)if(be[0]=="c"){g.K=be[1],g.ia=be[2];const Et=be[3];Et!=null&&(g.la=Et,g.j.info("VER="+g.la));const Tt=be[4];Tt!=null&&(g.Aa=Tt,g.j.info("SVER="+g.Aa));const Fs=be[5];Fs!=null&&typeof Fs=="number"&&0<Fs&&(S=1.5*Fs,g.L=S,g.j.info("backChannelRequestTimeoutMs_="+S)),S=g;const An=c.g;if(An){const Yc=An.g?An.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Yc){var U=S.h;U.g||Yc.indexOf("spdy")==-1&&Yc.indexOf("quic")==-1&&Yc.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(Pf(U,U.h),U.h=null))}if(S.D){const jf=An.g?An.g.getResponseHeader("X-HTTP-Session-Id"):null;jf&&(S.ya=jf,Ne(S.I,S.D,jf))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-c.F,g.j.info("Handshake RTT: "+g.R+"ms")),S=g;var X=c;if(S.qa=r_(S,S.J?S.ia:null,S.W),X.K){N0(S.h,X);var ke=X,gt=S.L;gt&&(ke.I=gt),ke.B&&(Af(ke),Fc(ke)),S.g=X}else J0(S);0<g.i.length&&Wc(g)}else be[0]!="stop"&&be[0]!="close"||ji(g,7);else g.G==3&&(be[0]=="stop"||be[0]=="close"?be[0]=="stop"?ji(g,7):Nf(g):be[0]!="noop"&&g.l&&g.l.ta(be),g.v=0)}}ya(4)}catch{}}var TP=class{constructor(c,m){this.g=c,this.map=m}};function C0(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function P0(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function R0(c){return c.h?1:c.g?c.g.size:0}function Cf(c,m){return c.h?c.h==m:c.g?c.g.has(m):!1}function Pf(c,m){c.g?c.g.add(m):c.h=m}function N0(c,m){c.h&&c.h==m?c.h=null:c.g&&c.g.has(m)&&c.g.delete(m)}C0.prototype.cancel=function(){if(this.i=D0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function D0(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let m=c.i;for(const g of c.g.values())m=m.concat(g.D);return m}return T(c.i)}function SP(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var m=[],g=c.length,S=0;S<g;S++)m.push(c[S]);return m}m=[],g=0;for(S in c)m[g++]=c[S];return m}function IP(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var m=[];c=c.length;for(var g=0;g<c;g++)m.push(g);return m}m=[],g=0;for(const S in c)m[g++]=S;return m}}}function V0(c,m){if(c.forEach&&typeof c.forEach=="function")c.forEach(m,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,m,void 0);else for(var g=IP(c),S=SP(c),L=S.length,U=0;U<L;U++)m.call(void 0,S[U],g&&g[U],c)}var j0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function AP(c,m){if(c){c=c.split("&");for(var g=0;g<c.length;g++){var S=c[g].indexOf("="),L=null;if(0<=S){var U=c[g].substring(0,S);L=c[g].substring(S+1)}else U=c[g];m(U,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Vi(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Vi){this.h=c.h,Uc(this,c.j),this.o=c.o,this.g=c.g,Bc(this,c.s),this.l=c.l;var m=c.i,g=new Ea;g.i=m.i,m.g&&(g.g=new Map(m.g),g.h=m.h),O0(this,g),this.m=c.m}else c&&(m=String(c).match(j0))?(this.h=!1,Uc(this,m[1]||"",!0),this.o=xa(m[2]||""),this.g=xa(m[3]||"",!0),Bc(this,m[4]),this.l=xa(m[5]||"",!0),O0(this,m[6]||"",!0),this.m=xa(m[7]||"")):(this.h=!1,this.i=new Ea(null,this.h))}Vi.prototype.toString=function(){var c=[],m=this.j;m&&c.push(ba(m,L0,!0),":");var g=this.g;return(g||m=="file")&&(c.push("//"),(m=this.o)&&c.push(ba(m,L0,!0),"@"),c.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&c.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&c.push("/"),c.push(ba(g,g.charAt(0)=="/"?PP:CP,!0))),(g=this.i.toString())&&c.push("?",g),(g=this.m)&&c.push("#",ba(g,NP)),c.join("")};function er(c){return new Vi(c)}function Uc(c,m,g){c.j=g?xa(m,!0):m,c.j&&(c.j=c.j.replace(/:$/,""))}function Bc(c,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);c.s=m}else c.s=null}function O0(c,m,g){m instanceof Ea?(c.i=m,DP(c.i,c.h)):(g||(m=ba(m,RP)),c.i=new Ea(m,c.h))}function Ne(c,m,g){c.i.set(m,g)}function zc(c){return Ne(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function xa(c,m){return c?m?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ba(c,m,g){return typeof c=="string"?(c=encodeURI(c).replace(m,kP),g&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function kP(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var L0=/[#\/\?@]/g,CP=/[#\?:]/g,PP=/[#\?]/g,RP=/[#\?@]/g,NP=/#/g;function Ea(c,m){this.h=this.g=null,this.i=c||null,this.j=!!m}function Nr(c){c.g||(c.g=new Map,c.h=0,c.i&&AP(c.i,function(m,g){c.add(decodeURIComponent(m.replace(/\+/g," ")),g)}))}t=Ea.prototype,t.add=function(c,m){Nr(this),this.i=null,c=Ls(this,c);var g=this.g.get(c);return g||this.g.set(c,g=[]),g.push(m),this.h+=1,this};function M0(c,m){Nr(c),m=Ls(c,m),c.g.has(m)&&(c.i=null,c.h-=c.g.get(m).length,c.g.delete(m))}function F0(c,m){return Nr(c),m=Ls(c,m),c.g.has(m)}t.forEach=function(c,m){Nr(this),this.g.forEach(function(g,S){g.forEach(function(L){c.call(m,L,S,this)},this)},this)},t.na=function(){Nr(this);const c=Array.from(this.g.values()),m=Array.from(this.g.keys()),g=[];for(let S=0;S<m.length;S++){const L=c[S];for(let U=0;U<L.length;U++)g.push(m[S])}return g},t.V=function(c){Nr(this);let m=[];if(typeof c=="string")F0(this,c)&&(m=m.concat(this.g.get(Ls(this,c))));else{c=Array.from(this.g.values());for(let g=0;g<c.length;g++)m=m.concat(c[g])}return m},t.set=function(c,m){return Nr(this),this.i=null,c=Ls(this,c),F0(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[m]),this.h+=1,this},t.get=function(c,m){return c?(c=this.V(c),0<c.length?String(c[0]):m):m};function U0(c,m,g){M0(c,m),0<g.length&&(c.i=null,c.g.set(Ls(c,m),T(g)),c.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],m=Array.from(this.g.keys());for(var g=0;g<m.length;g++){var S=m[g];const U=encodeURIComponent(String(S)),X=this.V(S);for(S=0;S<X.length;S++){var L=U;X[S]!==""&&(L+="="+encodeURIComponent(String(X[S]))),c.push(L)}}return this.i=c.join("&")};function Ls(c,m){return m=String(m),c.j&&(m=m.toLowerCase()),m}function DP(c,m){m&&!c.j&&(Nr(c),c.i=null,c.g.forEach(function(g,S){var L=S.toLowerCase();S!=L&&(M0(this,S),U0(this,L,g))},c)),c.j=m}function VP(c,m){const g=new _a;if(a.Image){const S=new Image;S.onload=v(Dr,g,"TestLoadImage: loaded",!0,m,S),S.onerror=v(Dr,g,"TestLoadImage: error",!1,m,S),S.onabort=v(Dr,g,"TestLoadImage: abort",!1,m,S),S.ontimeout=v(Dr,g,"TestLoadImage: timeout",!1,m,S),a.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=c}else m(!1)}function jP(c,m){const g=new _a,S=new AbortController,L=setTimeout(()=>{S.abort(),Dr(g,"TestPingServer: timeout",!1,m)},1e4);fetch(c,{signal:S.signal}).then(U=>{clearTimeout(L),U.ok?Dr(g,"TestPingServer: ok",!0,m):Dr(g,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(L),Dr(g,"TestPingServer: error",!1,m)})}function Dr(c,m,g,S,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),S(g)}catch{}}function OP(){this.g=new vP}function LP(c,m,g){const S=g||"";try{V0(c,function(L,U){let X=L;u(L)&&(X=wf(L)),m.push(S+U+"="+encodeURIComponent(X))})}catch(L){throw m.push(S+"type="+encodeURIComponent("_badmap")),L}}function $c(c){this.l=c.Ub||null,this.j=c.eb||!1}b($c,xf),$c.prototype.g=function(){return new qc(this.l,this.j)},$c.prototype.i=function(c){return function(){return c}}({});function qc(c,m){bt.call(this),this.D=c,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(qc,bt),t=qc.prototype,t.open=function(c,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=m,this.readyState=1,Sa(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(m.body=c),(this.D||a).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ta(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Sa(this)),this.g&&(this.readyState=3,Sa(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;B0(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function B0(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var m=c.value?c.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!c.done}))&&(this.response=this.responseText+=m)}c.done?Ta(this):Sa(this),this.readyState==3&&B0(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Ta(this))},t.Qa=function(c){this.g&&(this.response=c,Ta(this))},t.ga=function(){this.g&&Ta(this)};function Ta(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Sa(c)}t.setRequestHeader=function(c,m){this.u.append(c,m)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],m=this.h.entries();for(var g=m.next();!g.done;)g=g.value,c.push(g[0]+": "+g[1]),g=m.next();return c.join(`\r
`)};function Sa(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(qc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function z0(c){let m="";return O(c,function(g,S){m+=S,m+=":",m+=g,m+=`\r
`}),m}function Rf(c,m,g){e:{for(S in g){var S=!1;break e}S=!0}S||(g=z0(g),typeof c=="string"?g!=null&&encodeURIComponent(String(g)):Ne(c,m,g))}function Ke(c){bt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(Ke,bt);var MP=/^https?$/i,FP=["POST","PUT"];t=Ke.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,m,g,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);m=m?m.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Tf.g(),this.v=this.o?y0(this.o):y0(Tf),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(m,String(c),!0),this.B=!1}catch(U){$0(this,U);return}if(c=g||"",g=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var L in S)g.set(L,S[L]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const U of S.keys())g.set(U,S.get(U));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(g.keys()).find(U=>U.toLowerCase()=="content-type"),L=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(FP,m,void 0))||S||L||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,X]of g)this.g.setRequestHeader(U,X);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{G0(this),this.u=!0,this.g.send(c),this.u=!1}catch(U){$0(this,U)}};function $0(c,m){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=m,c.m=5,q0(c),Kc(c)}function q0(c){c.A||(c.A=!0,Ot(c,"complete"),Ot(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Ot(this,"complete"),Ot(this,"abort"),Kc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Kc(this,!0)),Ke.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?K0(this):this.bb())},t.bb=function(){K0(this)};function K0(c){if(c.h&&typeof o<"u"&&(!c.v[1]||tr(c)!=4||c.Z()!=2)){if(c.u&&tr(c)==4)f0(c.Ea,0,c);else if(Ot(c,"readystatechange"),tr(c)==4){c.h=!1;try{const X=c.Z();e:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var g;if(!(g=m)){var S;if(S=X===0){var L=String(c.D).match(j0)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),S=!MP.test(L?L.toLowerCase():"")}g=S}if(g)Ot(c,"complete"),Ot(c,"success");else{c.m=6;try{var U=2<tr(c)?c.g.statusText:""}catch{U=""}c.l=U+" ["+c.Z()+"]",q0(c)}}finally{Kc(c)}}}}function Kc(c,m){if(c.g){G0(c);const g=c.g,S=c.v[0]?()=>{}:null;c.g=null,c.v=null,m||Ot(c,"ready");try{g.onreadystatechange=S}catch{}}}function G0(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function tr(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<tr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var m=this.g.responseText;return c&&m.indexOf(c)==0&&(m=m.substring(c.length)),yP(m)}};function W0(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function UP(c){const m={};c=(c.g&&2<=tr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<c.length;S++){if(y(c[S]))continue;var g=D(c[S]);const L=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const U=m[L]||[];m[L]=U,U.push(g)}I(m,function(S){return S.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ia(c,m,g){return g&&g.internalChannelParams&&g.internalChannelParams[c]||m}function H0(c){this.Aa=0,this.i=[],this.j=new _a,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ia("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ia("baseRetryDelayMs",5e3,c),this.cb=Ia("retryDelaySeedMs",1e4,c),this.Wa=Ia("forwardChannelMaxRetries",2,c),this.wa=Ia("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new C0(c&&c.concurrentRequestLimit),this.Da=new OP,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=H0.prototype,t.la=8,t.G=1,t.connect=function(c,m,g,S){Lt(0),this.W=c,this.H=m||{},g&&S!==void 0&&(this.H.OSID=g,this.H.OAID=S),this.F=this.X,this.I=r_(this,null,this.W),Wc(this)};function Nf(c){if(Q0(c),c.G==3){var m=c.U++,g=er(c.I);if(Ne(g,"SID",c.K),Ne(g,"RID",m),Ne(g,"TYPE","terminate"),Aa(c,g),m=new Rr(c,c.j,m),m.L=2,m.v=zc(er(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(m.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=m.v,g=!0),g||(m.g=i_(m.j,null),m.g.ea(m.v)),m.F=Date.now(),Fc(m)}n_(c)}function Gc(c){c.g&&(Vf(c),c.g.cancel(),c.g=null)}function Q0(c){Gc(c),c.u&&(a.clearTimeout(c.u),c.u=null),Hc(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Wc(c){if(!P0(c.h)&&!c.s){c.s=!0;var m=c.Ga;Q||K(),B||(Q(),B=!0),j.add(m,c),c.B=0}}function BP(c,m){return R0(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=m.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=va(p(c.Ga,c,m),t_(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const L=new Rr(this,this.j,c);let U=this.o;if(this.S&&(U?(U=x(U),C(U,this.S)):U=this.S),this.m!==null||this.O||(L.H=U,U=null),this.P)e:{for(var m=0,g=0;g<this.i.length;g++){t:{var S=this.i[g];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(m+=S,4096<m){m=g;break e}if(m===4096||g===this.i.length-1){m=g+1;break e}}m=1e3}else m=1e3;m=X0(this,L,m),g=er(this.I),Ne(g,"RID",c),Ne(g,"CVER",22),this.D&&Ne(g,"X-HTTP-Session-Id",this.D),Aa(this,g),U&&(this.O?m="headers="+encodeURIComponent(String(z0(U)))+"&"+m:this.m&&Rf(g,this.m,U)),Pf(this.h,L),this.Ua&&Ne(g,"TYPE","init"),this.P?(Ne(g,"$req",m),Ne(g,"SID","null"),L.T=!0,If(L,g,null)):If(L,g,m),this.G=2}}else this.G==3&&(c?Y0(this,c):this.i.length==0||P0(this.h)||Y0(this))};function Y0(c,m){var g;m?g=m.l:g=c.U++;const S=er(c.I);Ne(S,"SID",c.K),Ne(S,"RID",g),Ne(S,"AID",c.T),Aa(c,S),c.m&&c.o&&Rf(S,c.m,c.o),g=new Rr(c,c.j,g,c.B+1),c.m===null&&(g.H=c.o),m&&(c.i=m.D.concat(c.i)),m=X0(c,g,1e3),g.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Pf(c.h,g),If(g,S,m)}function Aa(c,m){c.H&&O(c.H,function(g,S){Ne(m,S,g)}),c.l&&V0({},function(g,S){Ne(m,S,g)})}function X0(c,m,g){g=Math.min(c.i.length,g);var S=c.l?p(c.l.Na,c.l,c):null;e:{var L=c.i;let U=-1;for(;;){const X=["count="+g];U==-1?0<g?(U=L[0].g,X.push("ofs="+U)):U=0:X.push("ofs="+U);let ke=!0;for(let gt=0;gt<g;gt++){let be=L[gt].g;const Et=L[gt].map;if(be-=U,0>be)U=Math.max(0,L[gt].g-100),ke=!1;else try{LP(Et,X,"req"+be+"_")}catch{S&&S(Et)}}if(ke){S=X.join("&");break e}}}return c=c.i.splice(0,g),m.D=c,S}function J0(c){if(!c.g&&!c.u){c.Y=1;var m=c.Fa;Q||K(),B||(Q(),B=!0),j.add(m,c),c.v=0}}function Df(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=va(p(c.Fa,c),t_(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,Z0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=va(p(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Lt(10),Gc(this),Z0(this))};function Vf(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function Z0(c){c.g=new Rr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var m=er(c.qa);Ne(m,"RID","rpc"),Ne(m,"SID",c.K),Ne(m,"AID",c.T),Ne(m,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ne(m,"TO",c.ja),Ne(m,"TYPE","xmlhttp"),Aa(c,m),c.m&&c.o&&Rf(m,c.m,c.o),c.L&&(c.g.I=c.L);var g=c.g;c=c.ia,g.L=1,g.v=zc(er(m)),g.m=null,g.P=!0,I0(g,c)}t.Za=function(){this.C!=null&&(this.C=null,Gc(this),Df(this),Lt(19))};function Hc(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function e_(c,m){var g=null;if(c.g==m){Hc(c),Vf(c),c.g=null;var S=2}else if(Cf(c.h,m))g=m.D,N0(c.h,m),S=1;else return;if(c.G!=0){if(m.o)if(S==1){g=m.m?m.m.length:0,m=Date.now()-m.F;var L=c.B;S=Oc(),Ot(S,new b0(S,g)),Wc(c)}else J0(c);else if(L=m.s,L==3||L==0&&0<m.X||!(S==1&&BP(c,m)||S==2&&Df(c)))switch(g&&0<g.length&&(m=c.h,m.i=m.i.concat(g)),L){case 1:ji(c,5);break;case 4:ji(c,10);break;case 3:ji(c,6);break;default:ji(c,2)}}}function t_(c,m){let g=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(g*=2),g*m}function ji(c,m){if(c.j.info("Error code "+m),m==2){var g=p(c.fb,c),S=c.Xa;const L=!S;S=new Vi(S||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Uc(S,"https"),zc(S),L?VP(S.toString(),g):jP(S.toString(),g)}else Lt(2);c.G=0,c.l&&c.l.sa(m),n_(c),Q0(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Lt(2)):(this.j.info("Failed to ping google.com"),Lt(1))};function n_(c){if(c.G=0,c.ka=[],c.l){const m=D0(c.h);(m.length!=0||c.i.length!=0)&&(A(c.ka,m),A(c.ka,c.i),c.h.i.length=0,T(c.i),c.i.length=0),c.l.ra()}}function r_(c,m,g){var S=g instanceof Vi?er(g):new Vi(g);if(S.g!="")m&&(S.g=m+"."+S.g),Bc(S,S.s);else{var L=a.location;S=L.protocol,m=m?m+"."+L.hostname:L.hostname,L=+L.port;var U=new Vi(null);S&&Uc(U,S),m&&(U.g=m),L&&Bc(U,L),g&&(U.l=g),S=U}return g=c.D,m=c.ya,g&&m&&Ne(S,g,m),Ne(S,"VER",c.la),Aa(c,S),S}function i_(c,m,g){if(m&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=c.Ca&&!c.pa?new Ke(new $c({eb:g})):new Ke(c.pa),m.Ha(c.J),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function s_(){}t=s_.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Qc(){}Qc.prototype.g=function(c,m){return new tn(c,m)};function tn(c,m){bt.call(this),this.g=new H0(m),this.l=c,this.h=m&&m.messageUrlParams||null,c=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(c?c["X-WebChannel-Content-Type"]=m.messageContentType:c={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(c?c["X-WebChannel-Client-Profile"]=m.va:c={"X-WebChannel-Client-Profile":m.va}),this.g.S=c,(c=m&&m.Sb)&&!y(c)&&(this.g.m=c),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!y(m)&&(this.g.D=m,c=this.h,c!==null&&m in c&&(c=this.h,m in c&&delete c[m])),this.j=new Ms(this)}b(tn,bt),tn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},tn.prototype.close=function(){Nf(this.g)},tn.prototype.o=function(c){var m=this.g;if(typeof c=="string"){var g={};g.__data__=c,c=g}else this.u&&(g={},g.__data__=wf(c),c=g);m.i.push(new TP(m.Ya++,c)),m.G==3&&Wc(m)},tn.prototype.N=function(){this.g.l=null,delete this.j,Nf(this.g),delete this.g,tn.aa.N.call(this)};function o_(c){bf.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var m=c.__sm__;if(m){e:{for(const g in m){c=g;break e}c=void 0}(this.i=c)&&(c=this.i,m=m!==null&&c in m?m[c]:void 0),this.data=m}else this.data=c}b(o_,bf);function a_(){Ef.call(this),this.status=1}b(a_,Ef);function Ms(c){this.g=c}b(Ms,s_),Ms.prototype.ua=function(){Ot(this.g,"a")},Ms.prototype.ta=function(c){Ot(this.g,new o_(c))},Ms.prototype.sa=function(c){Ot(this.g,new a_)},Ms.prototype.ra=function(){Ot(this.g,"b")},Qc.prototype.createWebChannel=Qc.prototype.g,tn.prototype.send=tn.prototype.o,tn.prototype.open=tn.prototype.m,tn.prototype.close=tn.prototype.close,DA=function(){return new Qc},NA=function(){return Oc()},RA=Ni,ig={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Lc.NO_ERROR=0,Lc.TIMEOUT=8,Lc.HTTP_ERROR=6,Xu=Lc,E0.COMPLETE="complete",PA=E0,v0.EventType=ga,ga.OPEN="a",ga.CLOSE="b",ga.ERROR="c",ga.MESSAGE="d",bt.prototype.listen=bt.prototype.K,tl=v0,Ke.prototype.listenOnce=Ke.prototype.L,Ke.prototype.getLastError=Ke.prototype.Ka,Ke.prototype.getLastErrorCode=Ke.prototype.Ba,Ke.prototype.getStatus=Ke.prototype.Z,Ke.prototype.getResponseJson=Ke.prototype.Oa,Ke.prototype.getResponseText=Ke.prototype.oa,Ke.prototype.send=Ke.prototype.ea,Ke.prototype.setWithCredentials=Ke.prototype.Ha,CA=Ke}).apply(typeof _u<"u"?_u:typeof self<"u"?self:typeof window<"u"?window:{});const cb="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ht.UNAUTHENTICATED=new ht(null),ht.GOOGLE_CREDENTIALS=new ht("google-credentials-uid"),ht.FIRST_PARTY=new ht("first-party-uid"),ht.MOCK_USER=new ht("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sa="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ms=new av("@firebase/firestore");function Gs(){return ms.logLevel}function G(t,...e){if(ms.logLevel<=ge.DEBUG){const n=e.map(_v);ms.debug(`Firestore (${sa}): ${t}`,...n)}}function Ze(t,...e){if(ms.logLevel<=ge.ERROR){const n=e.map(_v);ms.error(`Firestore (${sa}): ${t}`,...n)}}function gs(t,...e){if(ms.logLevel<=ge.WARN){const n=e.map(_v);ms.warn(`Firestore (${sa}): ${t}`,...n)}}function _v(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(t="Unexpected state"){const e=`FIRESTORE (${sa}) INTERNAL ASSERTION FAILED: `+t;throw Ze(e),new Error(e)}function se(t,e){t||ne()}function re(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Y extends Jn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qF{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ht.UNAUTHENTICATED))}shutdown(){}}class KF{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class GF{constructor(e){this.t=e,this.currentUser=ht.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){se(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Yn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Yn,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{G("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(G("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Yn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(G("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(se(typeof r.accessToken=="string"),new VA(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return se(e===null||typeof e=="string"),new ht(e)}}class WF{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=ht.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class HF{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new WF(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ht.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class QF{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class YF{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){se(this.o===void 0);const r=s=>{s.error!=null&&G("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,G("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{G("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):G("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(se(typeof n.token=="string"),this.R=n.token,new QF(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XF(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=XF(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function ue(t,e){return t<e?-1:t>e?1:0}function Fo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function OA(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Y(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Y(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Y(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Y(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return $e.fromMillis(Date.now())}static fromDate(e){return $e.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new $e(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ue(this.nanoseconds,e.nanoseconds):ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new oe(e)}static min(){return new oe(new $e(0,0))}static max(){return new oe(new $e(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(e,n,r){n===void 0?n=0:n>e.length&&ne(),r===void 0?r=e.length-n:r>e.length-n&&ne(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ec.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ec?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ee extends ec{construct(e,n,r){return new Ee(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Y(z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ee(n)}static emptyPath(){return new Ee([])}}const JF=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Be extends ec{construct(e,n,r){return new Be(e,n,r)}static isValidIdentifier(e){return JF.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Be.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Be(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Y(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new Y(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Y(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Y(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Be(n)}static emptyPath(){return new Be([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.path=e}static fromPath(e){return new J(Ee.fromString(e))}static fromName(e){return new J(Ee.fromString(e).popFirst(5))}static empty(){return new J(Ee.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ee.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ee.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new J(new Ee(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function sg(t){return t.fields.find(e=>e.kind===2)}function $i(t){return t.fields.filter(e=>e.kind!==2)}Kd.UNKNOWN_ID=-1;class Ju{constructor(e,n){this.fieldPath=e,this.kind=n}}class tc{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new tc(0,hn.min())}}function LA(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=oe.fromTimestamp(r===1e9?new $e(n+1,0):new $e(n,r));return new hn(i,J.empty(),e)}function MA(t){return new hn(t.readTime,t.key,-1)}class hn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new hn(oe.min(),J.empty(),-1)}static max(){return new hn(oe.max(),J.empty(),-1)}}function wv(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=J.comparator(t.documentKey,e.documentKey),n!==0?n:ue(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class UA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ki(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==FA)throw t;G("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ne(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new M((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof M?n:M.resolve(n)}catch(n){return M.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):M.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):M.reject(n)}static resolve(e){return new M((n,r)=>{n(e)})}static reject(e){return new M((n,r)=>{r(e)})}static waitFor(e){return new M((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=M.resolve(!1);for(const r of e)n=n.next(i=>i?M.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new M((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(h=>{o[u]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new M((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Yn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new wl(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=xv(r.target.error);this.V.reject(new wl(e,i))}}static open(e,n,r,i){try{return new zh(n,e.transaction(i,r))}catch(s){throw new wl(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(G("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new e5(n)}}class hi{constructor(e,n,r){this.name=e,this.version=n,this.p=r,hi.S(lt())===12.2&&Ze("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return G("SimpleDb","Removing database:",e),qi(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!zI())return!1;if(hi.v())return!0;const e=lt(),n=hi.S(e),r=0<n&&n<10,i=BA(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(G("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new wl(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new Y(z.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new Y(z.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new wl(e,o))},i.onupgradeneeded=s=>{G("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.p.O(o,i.transaction,s.oldVersion,this.version).next(()=>{G("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.M(e);const a=zh.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(u=>(a.g(),u)).catch(u=>(a.abort(u),M.reject(u))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,u=l.name!=="FirebaseError"&&o<3;if(G("SimpleDb","Transaction failed with error:",l.message,"Retrying:",u),this.close(),!u)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function BA(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class ZF{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return qi(this.B.delete())}}class wl extends Y{constructor(e,n){super(z.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Ci(t){return t.name==="IndexedDbTransactionError"}class e5{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(G("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(G("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),qi(r)}add(e){return G("SimpleDb","ADD",this.store.name,e,e),qi(this.store.add(e))}get(e){return qi(this.store.get(e)).next(n=>(n===void 0&&(n=null),G("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return G("SimpleDb","DELETE",this.store.name,e),qi(this.store.delete(e))}count(){return G("SimpleDb","COUNT",this.store.name),qi(this.store.count())}U(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new M((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(a,l)=>{o.push(l)}).next(()=>o)}}G(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new M((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,n){G("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.W(i,n)}Y(e){const n=this.cursor({});return new M((r,i)=>{n.onerror=s=>{const o=xv(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,n){const r=[];return new M((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new ZF(a),u=n(a.primaryKey,a.value,l);if(u instanceof M){const h=u.catch(f=>(l.done(),M.reject(f)));r.push(h)}l.isDone?i():l.K===null?a.continue():a.continue(l.K)}}).next(()=>M.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function qi(t){return new M((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=xv(r.target.error);n(i)}})}let ub=!1;function xv(t){const e=hi.S(lt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new Y("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ub||(ub=!0,setTimeout(()=>{throw r},0)),r}}return t}class t5{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){G("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{G("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(n){Ci(n)?G("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):await ki(n)}await this.X(6e4)})}}class n5{constructor(e,n){this.localStore=e,this.persistence=n}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))}te(e,n){const r=new Set;let i=n,s=!0;return M.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return G("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(G("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}re(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=MA(s);wv(o,r)>0&&(r=o)}),new hn(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Ht.oe=-1;function $h(t){return t==null}function nc(t){return t===0&&1/t==-1/0}function zA(t){return typeof t=="number"&&Number.isInteger(t)&&!nc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=db(e)),e=r5(t.get(n),e);return db(e)}function r5(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function db(t){return t+""}function Bn(t){const e=t.length;if(se(e>=2),e===2)return se(t.charAt(0)===""&&t.charAt(1)===""),Ee.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("",s);switch((o<0||o>n)&&ne(),t.charAt(o+1)){case"":const a=t.substring(s,o);let l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:ne()}s=o+2}return new Ee(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hb=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zu(t,e){return[t,Bt(e)]}function $A(t,e,n){return[t,Bt(e),n]}const i5={},s5=["prefixPath","collectionGroup","readTime","documentId"],o5=["prefixPath","collectionGroup","documentId"],a5=["collectionGroup","readTime","prefixPath","documentId"],l5=["canonicalId","targetId"],c5=["targetId","path"],u5=["path","targetId"],d5=["collectionId","parent"],h5=["indexId","uid"],f5=["uid","sequenceNumber"],p5=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],m5=["indexId","uid","orderedDocumentKey"],g5=["userId","collectionPath","documentId"],y5=["userId","collectionPath","largestBatchId"],v5=["userId","collectionGroup","largestBatchId"],qA=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],_5=[...qA,"documentOverlays"],KA=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],GA=KA,bv=[...GA,"indexConfiguration","indexState","indexEntries"],w5=bv,x5=[...bv,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og extends UA{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}}function ct(t,e){const n=re(t);return hi.F(n._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fb(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ns(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function WA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{constructor(e,n){this.comparator=e,this.root=n||_t.EMPTY}insert(e,n){return new Pe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,_t.BLACK,null,null))}remove(e){return new Pe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_t.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wu(this.root,e,this.comparator,!1)}getReverseIterator(){return new wu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wu(this.root,e,this.comparator,!0)}}class wu{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class _t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??_t.RED,this.left=i??_t.EMPTY,this.right=s??_t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new _t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return _t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return _t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,_t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,_t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ne();const e=this.left.check();if(e!==this.right.check())throw ne();return e+(this.isRed()?0:1)}}_t.EMPTY=null,_t.RED=!0,_t.BLACK=!1;_t.EMPTY=new class{constructor(){this.size=0}get key(){throw ne()}get value(){throw ne()}get color(){throw ne()}get left(){throw ne()}get right(){throw ne()}copy(e,n,r,i,s){return this}insert(e,n,r){return new _t(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e){this.comparator=e,this.data=new Pe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new pb(this.data.getIterator())}getIteratorFrom(e){return new pb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ae)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ae(this.comparator);return n.data=e,n}}class pb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Bs(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.fields=e,e.sort(Be.comparator)}static empty(){return new Qt([])}unionWith(e){let n=new Ae(Be.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Qt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Fo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new HA("Invalid base64 string: "+s):s}}(e);return new et(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new et(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}et.EMPTY_BYTE_STRING=new et("");const b5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ir(t){if(se(!!t),typeof t=="string"){let e=0;const n=b5.exec(t);if(se(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Le(t.seconds),nanos:Le(t.nanos)}}function Le(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function _i(t){return typeof t=="string"?et.fromBase64String(t):et.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ev(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Tv(t){const e=t.mapValue.fields.__previous_value__;return Ev(e)?Tv(e):e}function rc(t){const e=Ir(t.mapValue.fields.__local_write_time__.timestampValue);return new $e(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E5{constructor(e,n,r,i,s,o,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class ys{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ys("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ys&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ed={nullValue:"NULL_VALUE"};function vs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ev(t)?4:QA(t)?9007199254740991:qh(t)?10:11:ne()}function Xn(t,e){if(t===e)return!0;const n=vs(t);if(n!==vs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return rc(t).isEqual(rc(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Ir(i.timestampValue),a=Ir(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return _i(i.bytesValue).isEqual(_i(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Le(i.geoPointValue.latitude)===Le(s.geoPointValue.latitude)&&Le(i.geoPointValue.longitude)===Le(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Le(i.integerValue)===Le(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Le(i.doubleValue),a=Le(s.doubleValue);return o===a?nc(o)===nc(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Fo(t.arrayValue.values||[],e.arrayValue.values||[],Xn);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(fb(o)!==fb(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Xn(o[l],a[l])))return!1;return!0}(t,e);default:return ne()}}function ic(t,e){return(t.values||[]).find(n=>Xn(n,e))!==void 0}function wi(t,e){if(t===e)return 0;const n=vs(t),r=vs(e);if(n!==r)return ue(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ue(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Le(s.integerValue||s.doubleValue),l=Le(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return mb(t.timestampValue,e.timestampValue);case 4:return mb(rc(t),rc(e));case 5:return ue(t.stringValue,e.stringValue);case 6:return function(s,o){const a=_i(s),l=_i(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const h=ue(a[u],l[u]);if(h!==0)return h}return ue(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=ue(Le(s.latitude),Le(o.latitude));return a!==0?a:ue(Le(s.longitude),Le(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return gb(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,u,h;const f=s.fields||{},p=o.fields||{},v=(a=f.value)===null||a===void 0?void 0:a.arrayValue,b=(l=p.value)===null||l===void 0?void 0:l.arrayValue,T=ue(((u=v==null?void 0:v.values)===null||u===void 0?void 0:u.length)||0,((h=b==null?void 0:b.values)===null||h===void 0?void 0:h.length)||0);return T!==0?T:gb(v,b)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Zr.mapValue&&o===Zr.mapValue)return 0;if(s===Zr.mapValue)return 1;if(o===Zr.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let f=0;f<l.length&&f<h.length;++f){const p=ue(l[f],h[f]);if(p!==0)return p;const v=wi(a[l[f]],u[h[f]]);if(v!==0)return v}return ue(l.length,h.length)}(t.mapValue,e.mapValue);default:throw ne()}}function mb(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ue(t,e);const n=Ir(t),r=Ir(e),i=ue(n.seconds,r.seconds);return i!==0?i:ue(n.nanos,r.nanos)}function gb(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=wi(n[i],r[i]);if(s)return s}return ue(n.length,r.length)}function Uo(t){return ag(t)}function ag(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ir(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return _i(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return J.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=ag(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${ag(n.fields[o])}`;return i+"}"}(t.mapValue):ne()}function sc(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function lg(t){return!!t&&"integerValue"in t}function oc(t){return!!t&&"arrayValue"in t}function yb(t){return!!t&&"nullValue"in t}function vb(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function td(t){return!!t&&"mapValue"in t}function qh(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function xl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ns(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=xl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=xl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function QA(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const YA={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function T5(t){return"nullValue"in t?ed:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?sc(ys.empty(),J.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?qh(t)?YA:{mapValue:{}}:ne()}function S5(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?sc(ys.empty(),J.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?YA:"mapValue"in t?qh(t)?{mapValue:{}}:Zr:ne()}function _b(t,e){const n=wi(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function wb(t,e){const n=wi(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.value=e}static empty(){return new Pt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!td(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=xl(n)}setAll(e){let n=Be.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=xl(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());td(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Xn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];td(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ns(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Pt(xl(this.value))}}function XA(t){const e=[];return Ns(t.fields,(n,r)=>{const i=new Be([n]);if(td(r)){const s=XA(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Qt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Qe(e,0,oe.min(),oe.min(),oe.min(),Pt.empty(),0)}static newFoundDocument(e,n,r,i){return new Qe(e,1,n,oe.min(),r,i,0)}static newNoDocument(e,n){return new Qe(e,2,n,oe.min(),oe.min(),Pt.empty(),0)}static newUnknownDocument(e,n){return new Qe(e,3,n,oe.min(),oe.min(),Pt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Qe&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Qe(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e,n){this.position=e,this.inclusive=n}}function xb(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=J.comparator(J.fromName(o.referenceValue),n.key):r=wi(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function bb(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Xn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(e,n="asc"){this.field=e,this.dir=n}}function I5(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{}class ye extends JA{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new A5(e,n,r):n==="array-contains"?new P5(e,r):n==="in"?new ik(e,r):n==="not-in"?new R5(e,r):n==="array-contains-any"?new N5(e,r):new ye(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new k5(e,r):new C5(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(wi(n,this.value)):n!==null&&vs(this.value)===vs(n)&&this.matchesComparison(wi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ne()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Te extends JA{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Te(e,n)}matches(e){return zo(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function zo(t){return t.op==="and"}function cg(t){return t.op==="or"}function Sv(t){return ZA(t)&&zo(t)}function ZA(t){for(const e of t.filters)if(e instanceof Te)return!1;return!0}function ug(t){if(t instanceof ye)return t.field.canonicalString()+t.op.toString()+Uo(t.value);if(Sv(t))return t.filters.map(e=>ug(e)).join(",");{const e=t.filters.map(n=>ug(n)).join(",");return`${t.op}(${e})`}}function ek(t,e){return t instanceof ye?function(r,i){return i instanceof ye&&r.op===i.op&&r.field.isEqual(i.field)&&Xn(r.value,i.value)}(t,e):t instanceof Te?function(r,i){return i instanceof Te&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&ek(o,i.filters[a]),!0):!1}(t,e):void ne()}function tk(t,e){const n=t.filters.concat(e);return Te.create(n,t.op)}function nk(t){return t instanceof ye?function(n){return`${n.field.canonicalString()} ${n.op} ${Uo(n.value)}`}(t):t instanceof Te?function(n){return n.op.toString()+" {"+n.getFilters().map(nk).join(" ,")+"}"}(t):"Filter"}class A5 extends ye{constructor(e,n,r){super(e,n,r),this.key=J.fromName(r.referenceValue)}matches(e){const n=J.comparator(e.key,this.key);return this.matchesComparison(n)}}class k5 extends ye{constructor(e,n){super(e,"in",n),this.keys=rk("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class C5 extends ye{constructor(e,n){super(e,"not-in",n),this.keys=rk("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function rk(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>J.fromName(r.referenceValue))}class P5 extends ye{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return oc(n)&&ic(n.arrayValue,this.value)}}class ik extends ye{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ic(this.value.arrayValue,n)}}class R5 extends ye{constructor(e,n){super(e,"not-in",n)}matches(e){if(ic(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ic(this.value.arrayValue,n)}}class N5 extends ye{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!oc(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ic(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D5{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function dg(t,e=null,n=[],r=[],i=null,s=null,o=null){return new D5(t,e,n,r,i,s,o)}function _s(t){const e=re(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>ug(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),$h(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Uo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Uo(r)).join(",")),e.ue=n}return e.ue}function Sc(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!I5(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!ek(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!bb(t.startAt,e.startAt)&&bb(t.endAt,e.endAt)}function Wd(t){return J.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Hd(t,e){return t.filters.filter(n=>n instanceof ye&&n.field.isEqual(e))}function Eb(t,e,n){let r=ed,i=!0;for(const s of Hd(t,e)){let o=ed,a=!0;switch(s.op){case"<":case"<=":o=T5(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=ed}_b({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];_b({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function Tb(t,e,n){let r=Zr,i=!0;for(const s of Hd(t,e)){let o=Zr,a=!0;switch(s.op){case">=":case">":o=S5(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Zr}wb({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];wb({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function sk(t,e,n,r,i,s,o,a){return new Ic(t,e,n,r,i,s,o,a)}function Kh(t){return new Ic(t)}function Sb(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function ok(t){return t.collectionGroup!==null}function bl(t){const e=re(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ae(Be.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Gd(s,r))}),n.has(Be.keyField().canonicalString())||e.ce.push(new Gd(Be.keyField(),r))}return e.ce}function cn(t){const e=re(t);return e.le||(e.le=V5(e,bl(t))),e.le}function V5(t,e){if(t.limitType==="F")return dg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Gd(i.field,s)});const n=t.endAt?new Bo(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Bo(t.startAt.position,t.startAt.inclusive):null;return dg(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function hg(t,e){const n=t.filters.concat([e]);return new Ic(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function fg(t,e,n){return new Ic(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Gh(t,e){return Sc(cn(t),cn(e))&&t.limitType===e.limitType}function ak(t){return`${_s(cn(t))}|lt:${t.limitType}`}function Ws(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>nk(i)).join(", ")}]`),$h(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Uo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Uo(i)).join(",")),`Target(${r})`}(cn(t))}; limitType=${t.limitType})`}function Ac(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):J.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of bl(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=xb(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,bl(r),i)||r.endAt&&!function(o,a,l){const u=xb(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,bl(r),i))}(t,e)}function lk(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function ck(t){return(e,n)=>{let r=!1;for(const i of bl(t)){const s=j5(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function j5(t,e,n){const r=t.field.isKeyField()?J.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?wi(l,u):ne()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ne()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ns(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return WA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O5=new Pe(J.comparator);function on(){return O5}const uk=new Pe(J.comparator);function nl(...t){let e=uk;for(const n of t)e=e.insert(n.key,n);return e}function dk(t){let e=uk;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function zn(){return El()}function hk(){return El()}function El(){return new Pi(t=>t.toString(),(t,e)=>t.isEqual(e))}const L5=new Pe(J.comparator),M5=new Ae(J.comparator);function pe(...t){let e=M5;for(const n of t)e=e.add(n);return e}const F5=new Ae(ue);function Iv(){return F5}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Av(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nc(e)?"-0":e}}function fk(t){return{integerValue:""+t}}function U5(t,e){return zA(e)?fk(e):Av(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(){this._=void 0}}function B5(t,e,n){return t instanceof $o?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Ev(s)&&(s=Tv(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof qo?mk(t,e):t instanceof Ko?gk(t,e):function(i,s){const o=pk(i,s),a=Ib(o)+Ib(i.Pe);return lg(o)&&lg(i.Pe)?fk(a):Av(i.serializer,a)}(t,e)}function z5(t,e,n){return t instanceof qo?mk(t,e):t instanceof Ko?gk(t,e):n}function pk(t,e){return t instanceof ac?function(r){return lg(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class $o extends Wh{}class qo extends Wh{constructor(e){super(),this.elements=e}}function mk(t,e){const n=yk(e);for(const r of t.elements)n.some(i=>Xn(i,r))||n.push(r);return{arrayValue:{values:n}}}class Ko extends Wh{constructor(e){super(),this.elements=e}}function gk(t,e){let n=yk(e);for(const r of t.elements)n=n.filter(i=>!Xn(i,r));return{arrayValue:{values:n}}}class ac extends Wh{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Ib(t){return Le(t.integerValue||t.doubleValue)}function yk(t){return oc(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(e,n){this.field=e,this.transform=n}}function $5(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof qo&&i instanceof qo||r instanceof Ko&&i instanceof Ko?Fo(r.elements,i.elements,Xn):r instanceof ac&&i instanceof ac?Xn(r.Pe,i.Pe):r instanceof $o&&i instanceof $o}(t.transform,e.transform)}class q5{constructor(e,n){this.version=e,this.transformResults=n}}class Nt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Nt}static exists(e){return new Nt(void 0,e)}static updateTime(e){return new Nt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function nd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Hh{}function _k(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Qh(t.key,Nt.none()):new oa(t.key,t.data,Nt.none());{const n=t.data,r=Pt.empty();let i=new Ae(Be.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Cr(t.key,r,new Qt(i.toArray()),Nt.none())}}function K5(t,e,n){t instanceof oa?function(i,s,o){const a=i.value.clone(),l=kb(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Cr?function(i,s,o){if(!nd(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=kb(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(wk(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Tl(t,e,n,r){return t instanceof oa?function(s,o,a,l){if(!nd(s.precondition,o))return a;const u=s.value.clone(),h=Cb(s.fieldTransforms,l,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Cr?function(s,o,a,l){if(!nd(s.precondition,o))return a;const u=Cb(s.fieldTransforms,l,o),h=o.data;return h.setAll(wk(s)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(s,o,a){return nd(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function G5(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=pk(r.transform,i||null);s!=null&&(n===null&&(n=Pt.empty()),n.set(r.field,s))}return n||null}function Ab(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Fo(r,i,(s,o)=>$5(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class oa extends Hh{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Cr extends Hh{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function wk(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function kb(t,e,n){const r=new Map;se(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,z5(o,a,n[i]))}return r}function Cb(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,B5(s,o,e))}return r}class Qh extends Hh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class xk extends Hh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&K5(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Tl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Tl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=hk();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=_k(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(oe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),pe())}isEqual(e){return this.batchId===e.batchId&&Fo(this.mutations,e.mutations,(n,r)=>Ab(n,r))&&Fo(this.baseMutations,e.baseMutations,(n,r)=>Ab(n,r))}}class Cv{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){se(e.mutations.length===r.length);let i=function(){return L5}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Cv(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W5{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nt,_e;function H5(t){switch(t){default:return ne();case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0}}function bk(t){if(t===void 0)return Ze("GRPC error has no .code"),z.UNKNOWN;switch(t){case nt.OK:return z.OK;case nt.CANCELLED:return z.CANCELLED;case nt.UNKNOWN:return z.UNKNOWN;case nt.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case nt.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case nt.INTERNAL:return z.INTERNAL;case nt.UNAVAILABLE:return z.UNAVAILABLE;case nt.UNAUTHENTICATED:return z.UNAUTHENTICATED;case nt.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case nt.NOT_FOUND:return z.NOT_FOUND;case nt.ALREADY_EXISTS:return z.ALREADY_EXISTS;case nt.PERMISSION_DENIED:return z.PERMISSION_DENIED;case nt.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case nt.ABORTED:return z.ABORTED;case nt.OUT_OF_RANGE:return z.OUT_OF_RANGE;case nt.UNIMPLEMENTED:return z.UNIMPLEMENTED;case nt.DATA_LOSS:return z.DATA_LOSS;default:return ne()}}(_e=nt||(nt={}))[_e.OK=0]="OK",_e[_e.CANCELLED=1]="CANCELLED",_e[_e.UNKNOWN=2]="UNKNOWN",_e[_e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_e[_e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_e[_e.NOT_FOUND=5]="NOT_FOUND",_e[_e.ALREADY_EXISTS=6]="ALREADY_EXISTS",_e[_e.PERMISSION_DENIED=7]="PERMISSION_DENIED",_e[_e.UNAUTHENTICATED=16]="UNAUTHENTICATED",_e[_e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_e[_e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_e[_e.ABORTED=10]="ABORTED",_e[_e.OUT_OF_RANGE=11]="OUT_OF_RANGE",_e[_e.UNIMPLEMENTED=12]="UNIMPLEMENTED",_e[_e.INTERNAL=13]="INTERNAL",_e[_e.UNAVAILABLE=14]="UNAVAILABLE",_e[_e.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q5(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y5=new ss([4294967295,4294967295],0);function Pb(t){const e=Q5().encode(t),n=new kA;return n.update(e),new Uint8Array(n.digest())}function Rb(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ss([n,r],0),new ss([i,s],0)]}class Rv{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new rl(`Invalid padding: ${n}`);if(r<0)throw new rl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new rl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new rl(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ss.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(ss.fromNumber(r)));return i.compare(Y5)===1&&(i=new ss([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Pb(e),[r,i]=Rb(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Rv(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=Pb(e),[r,i]=Rb(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class rl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Cc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new kc(oe.min(),i,new Pe(ue),on(),pe())}}class Cc{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Cc(r,n,pe(),pe(),pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class Ek{constructor(e,n){this.targetId=e,this.me=n}}class Tk{constructor(e,n,r=et.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Nb{constructor(){this.fe=0,this.ge=Vb(),this.pe=et.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=pe(),n=pe(),r=pe();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ne()}}),new Cc(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Vb()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,se(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class X5{constructor(e){this.Le=e,this.Be=new Map,this.ke=on(),this.qe=Db(),this.Qe=new Pe(ue)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ne()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(Wd(s))if(r===0){const o=new J(s.path);this.Ue(n,o,Qe.newNoDocument(o,oe.min()))}else se(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=_i(r).toUint8Array()}catch(l){if(l instanceof HA)return gs("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Rv(o,i,s)}catch(l){return gs(l instanceof rl?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&Wd(a.target)){const l=new J(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Qe.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=pe();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new kc(e,n,this.Qe,this.ke,r);return this.ke=on(),this.qe=Db(),this.Qe=new Pe(ue),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Nb,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Ae(ue),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||G("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Nb),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Db(){return new Pe(J.comparator)}function Vb(){return new Pe(J.comparator)}const J5={asc:"ASCENDING",desc:"DESCENDING"},Z5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},eU={and:"AND",or:"OR"};class tU{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function pg(t,e){return t.useProto3Json||$h(e)?e:{value:e}}function Go(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Sk(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function nU(t,e){return Go(t,e.toTimestamp())}function zt(t){return se(!!t),oe.fromTimestamp(function(n){const r=Ir(n);return new $e(r.seconds,r.nanos)}(t))}function Nv(t,e){return mg(t,e).canonicalString()}function mg(t,e){const n=function(i){return new Ee(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Ik(t){const e=Ee.fromString(t);return se(jk(e)),e}function Qd(t,e){return Nv(t.databaseId,e.path)}function os(t,e){const n=Ik(e);if(n.get(1)!==t.databaseId.projectId)throw new Y(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Y(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new J(Ck(n))}function Ak(t,e){return Nv(t.databaseId,e)}function kk(t){const e=Ik(t);return e.length===4?Ee.emptyPath():Ck(e)}function gg(t){return new Ee(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Ck(t){return se(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function jb(t,e,n){return{name:Qd(t,e),fields:n.value.mapValue.fields}}function rU(t,e,n){const r=os(t,e.name),i=zt(e.updateTime),s=e.createTime?zt(e.createTime):oe.min(),o=new Pt({mapValue:{fields:e.fields}}),a=Qe.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function iU(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ne()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,h){return u.useProto3Json?(se(h===void 0||typeof h=="string"),et.fromBase64String(h||"")):(se(h===void 0||h instanceof Buffer||h instanceof Uint8Array),et.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const h=u.code===void 0?z.UNKNOWN:bk(u.code);return new Y(h,u.message||"")}(o);n=new Tk(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=os(t,r.document.name),s=zt(r.document.updateTime),o=r.document.createTime?zt(r.document.createTime):oe.min(),a=new Pt({mapValue:{fields:r.document.fields}}),l=Qe.newFoundDocument(i,s,o,a),u=r.targetIds||[],h=r.removedTargetIds||[];n=new rd(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=os(t,r.document),s=r.readTime?zt(r.readTime):oe.min(),o=Qe.newNoDocument(i,s),a=r.removedTargetIds||[];n=new rd([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=os(t,r.document),s=r.removedTargetIds||[];n=new rd([],s,i,null)}else{if(!("filter"in e))return ne();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new W5(i,s),a=r.targetId;n=new Ek(a,o)}}return n}function Yd(t,e){let n;if(e instanceof oa)n={update:jb(t,e.key,e.value)};else if(e instanceof Qh)n={delete:Qd(t,e.key)};else if(e instanceof Cr)n={update:jb(t,e.key,e.data),updateMask:uU(e.fieldMask)};else{if(!(e instanceof xk))return ne();n={verify:Qd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof $o)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof qo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ko)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ac)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ne()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:nU(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ne()}(t,e.precondition)),n}function yg(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?Nt.updateTime(zt(s.updateTime)):s.exists!==void 0?Nt.exists(s.exists):Nt.none()}(e.currentDocument):Nt.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let l=null;if("setToServerValue"in a)se(a.setToServerValue==="REQUEST_TIME"),l=new $o;else if("appendMissingElements"in a){const h=a.appendMissingElements.values||[];l=new qo(h)}else if("removeAllFromArray"in a){const h=a.removeAllFromArray.values||[];l=new Ko(h)}else"increment"in a?l=new ac(o,a.increment):ne();const u=Be.fromServerFormat(a.fieldPath);return new vk(u,l)}(t,i)):[];if(e.update){e.update.name;const i=os(t,e.update.name),s=new Pt({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const u=l.fieldPaths||[];return new Qt(u.map(h=>Be.fromServerFormat(h)))}(e.updateMask);return new Cr(i,s,o,n,r)}return new oa(i,s,n,r)}if(e.delete){const i=os(t,e.delete);return new Qh(i,n)}if(e.verify){const i=os(t,e.verify);return new xk(i,n)}return ne()}function sU(t,e){return t&&t.length>0?(se(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?zt(i.updateTime):zt(s);return o.isEqual(oe.min())&&(o=zt(s)),new q5(o,i.transformResults||[])}(n,e))):[]}function Pk(t,e){return{documents:[Ak(t,e.path)]}}function Rk(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Ak(t,i);const s=function(u){if(u.length!==0)return Vk(Te.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(h=>function(p){return{field:Hs(p.field),direction:aU(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=pg(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:i}}function Nk(t){let e=kk(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){se(r===1);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(f){const p=Dk(f);return p instanceof Te&&Sv(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(b){return new Gd(Qs(b.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(f){let p;return p=typeof f=="object"?f.value:f,$h(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(f){const p=!!f.before,v=f.values||[];return new Bo(v,p)}(n.startAt));let u=null;return n.endAt&&(u=function(f){const p=!f.before,v=f.values||[];return new Bo(v,p)}(n.endAt)),sk(e,i,o,s,a,"F",l,u)}function oU(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ne()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Dk(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Qs(n.unaryFilter.field);return ye.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Qs(n.unaryFilter.field);return ye.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Qs(n.unaryFilter.field);return ye.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Qs(n.unaryFilter.field);return ye.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ne()}}(t):t.fieldFilter!==void 0?function(n){return ye.create(Qs(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ne()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Te.create(n.compositeFilter.filters.map(r=>Dk(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ne()}}(n.compositeFilter.op))}(t):ne()}function aU(t){return J5[t]}function lU(t){return Z5[t]}function cU(t){return eU[t]}function Hs(t){return{fieldPath:t.canonicalString()}}function Qs(t){return Be.fromServerFormat(t.fieldPath)}function Vk(t){return t instanceof ye?function(n){if(n.op==="=="){if(vb(n.value))return{unaryFilter:{field:Hs(n.field),op:"IS_NAN"}};if(yb(n.value))return{unaryFilter:{field:Hs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(vb(n.value))return{unaryFilter:{field:Hs(n.field),op:"IS_NOT_NAN"}};if(yb(n.value))return{unaryFilter:{field:Hs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hs(n.field),op:lU(n.op),value:n.value}}}(t):t instanceof Te?function(n){const r=n.getFilters().map(i=>Vk(i));return r.length===1?r[0]:{compositeFilter:{op:cU(n.op),filters:r}}}(t):ne()}function uU(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function jk(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e,n,r,i,s=oe.min(),o=oe.min(),a=et.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new fr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new fr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new fr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new fr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(e){this.ct=e}}function dU(t,e){let n;if(e.document)n=rU(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=J.fromSegments(e.noDocument.path),i=xs(e.noDocument.readTime);n=Qe.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return ne();{const r=J.fromSegments(e.unknownDocument.path),i=xs(e.unknownDocument.version);n=Qe.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new $e(i[0],i[1]);return oe.fromTimestamp(s)}(e.readTime)),n}function Ob(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Xd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:Qd(s,o.key),fields:o.data.value.mapValue.fields,updateTime:Go(s,o.version.toTimestamp()),createTime:Go(s,o.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:ws(e.version)};else{if(!e.isUnknownDocument())return ne();r.unknownDocument={path:n.path.toArray(),version:ws(e.version)}}return r}function Xd(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function ws(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function xs(t){const e=new $e(t.seconds,t.nanoseconds);return oe.fromTimestamp(e)}function Ki(t,e){const n=(e.baseMutations||[]).map(s=>yg(t.ct,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>yg(t.ct,s)),i=$e.fromMillis(e.localWriteTimeMs);return new kv(e.batchId,i,n,r)}function il(t){const e=xs(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?xs(t.lastLimboFreeSnapshotVersion):oe.min();let r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){return se(s.documents.length===1),cn(Kh(kk(s.documents[0])))}(t.query):function(s){return cn(Nk(s))}(t.query),new fr(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,et.fromBase64String(t.resumeToken))}function Lk(t,e){const n=ws(e.snapshotVersion),r=ws(e.lastLimboFreeSnapshotVersion);let i;i=Wd(e.target)?Pk(t.ct,e.target):Rk(t.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:_s(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Mk(t){const e=Nk({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?fg(e,e.limit,"L"):e}function kp(t,e){return new Pv(e.largestBatchId,yg(t.ct,e.overlayMutation))}function Lb(t,e){const n=e.path.lastSegment();return[t,Bt(e.path.popLast()),n]}function Mb(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:ws(r.readTime),documentKey:Bt(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hU{getBundleMetadata(e,n){return Fb(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:xs(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return Fb(e).put(function(i){return{bundleId:i.id,createTime:ws(zt(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return Ub(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:Mk(s.bundledQuery),readTime:xs(s.readTime)}}(r)})}saveNamedQuery(e,n){return Ub(e).put(function(i){return{name:i.name,readTime:ws(zt(i.readTime)),bundledQuery:i.bundledQuery}}(n))}}function Fb(t){return ct(t,"bundles")}function Ub(t){return ct(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){const r=n.uid||"";return new Yh(e,r)}getOverlay(e,n){return La(e).get(Lb(this.userId,n)).next(r=>r?kp(this.serializer,r):null)}getOverlays(e,n){const r=zn();return M.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new Pv(n,o);i.push(this.ht(e,a))}),M.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(Bt(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(La(e).j("collectionPathOverlayIndex",a))}),M.waitFor(s)}getOverlaysForCollection(e,n,r){const i=zn(),s=Bt(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return La(e).U("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const u=kp(this.serializer,l);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=zn();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return La(e).J({index:"collectionGroupOverlayIndex",range:a},(l,u,h)=>{const f=kp(this.serializer,u);s.size()<i||f.largestBatchId===o?(s.set(f.getKey(),f),o=f.largestBatchId):h.done()}).next(()=>s)}ht(e,n){return La(e).put(function(i,s,o){const[a,l,u]=Lb(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Yd(i.ct,o.mutation)}}(this.serializer,this.userId,n))}}function La(t){return ct(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fU{Pt(e){return ct(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?et.fromUint8Array(r):et.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.Pt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(Le(e.integerValue));else if("doubleValue"in e){const r=Le(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),nc(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=Ir(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(_i(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?QA(e)?this.dt(n,Number.MAX_SAFE_INTEGER):qh(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):ne()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){const r=e.fields||{};this.dt(n,55);for(const i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}wt(e,n){var r,i;const s=e.fields||{};this.dt(n,53);const o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(n,15),n.At(Le(a)),this.Vt(o,n),this.Tt(s[o],n)}bt(e,n){const r=e.values||[];this.dt(n,50);for(const i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),J.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}}Gi.vt=new Gi;function pU(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function Bb(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=pU(255&r[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}class mU{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ot(r.value),r=n.next();this.Nt()}Lt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=n.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const i=n.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const n=this.qt(e),r=Bb(n);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}Kt(e){const n=this.qt(e),r=Bb(n);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ft(e){const n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(n)}Ot(e){const n=255&e;n===0?(this.Gt(0),this.Gt(255)):n===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class gU{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class yU{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Ma{constructor(){this.jt=new mU,this.Ht=new gU(this.jt),this.Jt=new yU(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Zt(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Wi(this.indexId,this.documentKey,this.arrayValue,r)}}function Or(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=zb(t.arrayValue,e.arrayValue),n!==0?n:(n=zb(t.directionalValue,e.directionalValue),n!==0?n:J.comparator(t.documentKey,e.documentKey)))}function zb(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{constructor(e){this.Xt=new Ae((n,r)=>Be.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const n of e.filters){const r=n;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(se(e.collectionGroup===this.collectionId),this.nn)return!1;const n=sg(e);if(n!==void 0&&!this.sn(n))return!1;const r=$i(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){const a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[s];if(!this.on(a,l)||!this._n(this.en[o++],l))return!1}++s}for(;s<r.length;++s){const a=r[s];if(o>=this.en.length||!this._n(this.en[o++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Ae(Be.comparator);const n=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Ju(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Ju(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Ju(r.field,r.dir==="asc"?0:1)));return new Kd(Kd.UNKNOWN_ID,this.collectionId,n,tc.empty())}sn(e){for(const n of this.tn)if(this.on(n,e))return!0;return!1}on(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}_n(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fk(t){var e,n;if(se(t instanceof ye||t instanceof Te),t instanceof ye){if(t instanceof ik){const i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>ye.create(t.field,"==",s)))||[];return Te.create(i,"or")}return t}const r=t.filters.map(i=>Fk(i));return Te.create(r,t.op)}function vU(t){if(t.getFilters().length===0)return[];const e=wg(Fk(t));return se(Uk(e)),vg(e)||_g(e)?[e]:e.getFilters()}function vg(t){return t instanceof ye}function _g(t){return t instanceof Te&&Sv(t)}function Uk(t){return vg(t)||_g(t)||function(n){if(n instanceof Te&&cg(n)){for(const r of n.getFilters())if(!vg(r)&&!_g(r))return!1;return!0}return!1}(t)}function wg(t){if(se(t instanceof ye||t instanceof Te),t instanceof ye)return t;if(t.filters.length===1)return wg(t.filters[0]);const e=t.filters.map(r=>wg(r));let n=Te.create(e,t.op);return n=Jd(n),Uk(n)?n:(se(n instanceof Te),se(zo(n)),se(n.filters.length>1),n.filters.reduce((r,i)=>Dv(r,i)))}function Dv(t,e){let n;return se(t instanceof ye||t instanceof Te),se(e instanceof ye||e instanceof Te),n=t instanceof ye?e instanceof ye?function(i,s){return Te.create([i,s],"and")}(t,e):qb(t,e):e instanceof ye?qb(e,t):function(i,s){if(se(i.filters.length>0&&s.filters.length>0),zo(i)&&zo(s))return tk(i,s.getFilters());const o=cg(i)?i:s,a=cg(i)?s:i,l=o.filters.map(u=>Dv(u,a));return Te.create(l,"or")}(t,e),Jd(n)}function qb(t,e){if(zo(e))return tk(e,t.getFilters());{const n=e.filters.map(r=>Dv(t,r));return Te.create(n,"or")}}function Jd(t){if(se(t instanceof ye||t instanceof Te),t instanceof ye)return t;const e=t.getFilters();if(e.length===1)return Jd(e[0]);if(ZA(t))return t;const n=e.map(i=>Jd(i)),r=[];return n.forEach(i=>{i instanceof ye?r.push(i):i instanceof Te&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Te.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _U{constructor(){this.un=new Vv}addToCollectionParentIndex(e,n){return this.un.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(hn.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(hn.min())}updateCollectionGroup(e,n,r){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}}class Vv{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ae(Ee.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ae(Ee.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xu=new Uint8Array(0);class wU{constructor(e,n){this.databaseId=n,this.cn=new Vv,this.ln=new Pi(r=>_s(r),(r,i)=>Sc(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.cn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.cn.add(n)});const s={collectionId:r,parent:Bt(i)};return Kb(e).put(s)}return M.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[OA(n),""],!1,!0);return Kb(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(Bn(o.parent))}return r})}addFieldIndex(e,n){const r=Fa(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=$s(e);return s.next(a=>{o.put(Mb(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=Fa(e),i=$s(e),s=zs(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Fa(e),r=zs(e),i=$s(e);return n.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,n){return M.forEach(this.hn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new $b(r).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=zs(e);let i=!0;const s=new Map;return M.forEach(this.hn(n),o=>this.Pn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=pe();const a=[];return M.forEach(s,(l,u)=>{G("IndexedDbIndexManager",`Using index ${function(w){return`id=${w.indexId}|cg=${w.collectionGroup}|f=${w.fields.map(P=>`${P.fieldPath}:${P.kind}`).join(",")}`}(l)} to execute ${_s(n)}`);const h=function(w,P){const V=sg(P);if(V===void 0)return null;for(const O of Hd(w,V.fieldPath))switch(O.op){case"array-contains-any":return O.value.arrayValue.values||[];case"array-contains":return[O.value]}return null}(u,l),f=function(w,P){const V=new Map;for(const O of $i(P))for(const I of Hd(w,O.fieldPath))switch(I.op){case"==":case"in":V.set(O.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return V.set(O.fieldPath.canonicalString(),I.value),Array.from(V.values())}return null}(u,l),p=function(w,P){const V=[];let O=!0;for(const I of $i(P)){const x=I.kind===0?Eb(w,I.fieldPath,w.startAt):Tb(w,I.fieldPath,w.startAt);V.push(x.value),O&&(O=x.inclusive)}return new Bo(V,O)}(u,l),v=function(w,P){const V=[];let O=!0;for(const I of $i(P)){const x=I.kind===0?Tb(w,I.fieldPath,w.endAt):Eb(w,I.fieldPath,w.endAt);V.push(x.value),O&&(O=x.inclusive)}return new Bo(V,O)}(u,l),b=this.In(l,u,p),T=this.In(l,u,v),A=this.Tn(l,u,f),_=this.En(l.indexId,h,b,p.inclusive,T,v.inclusive,A);return M.forEach(_,y=>r.G(y,n.limit).next(w=>{w.forEach(P=>{const V=J.fromSegments(P.documentKey);o.has(V)||(o=o.add(V),a.push(V))})}))}).next(()=>a)}return M.resolve(null)})}hn(e){let n=this.ln.get(e);return n||(e.filters.length===0?n=[e]:n=vU(Te.create(e.filters,"and")).map(r=>dg(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,n),n)}En(e,n,r,i,s,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,s.length),u=l/(n!=null?n.length:1),h=[];for(let f=0;f<l;++f){const p=n?this.dn(n[f/u]):xu,v=this.An(e,p,r[f%u],i),b=this.Rn(e,p,s[f%u],o),T=a.map(A=>this.An(e,p,A,!0));h.push(...this.createRange(v,b,T))}return h}An(e,n,r,i){const s=new Wi(e,J.empty(),n,r);return i?s:s.Zt()}Rn(e,n,r,i){const s=new Wi(e,J.empty(),n,r);return i?s.Zt():s}Pn(e,n){const r=new $b(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.hn(n);return M.forEach(i,s=>this.Pn(e,s).next(o=>{o?r!==0&&o.fields.length<function(l){let u=new Ae(Be.comparator),h=!1;for(const f of l.filters)for(const p of f.getFlattenedFilters())p.field.isKeyField()||(p.op==="array-contains"||p.op==="array-contains-any"?h=!0:u=u.add(p.field));for(const f of l.orderBy)f.field.isKeyField()||(u=u.add(f.field));return u.size+(h?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&i.length>1&&r===2?1:r)}Vn(e,n){const r=new Ma;for(const i of $i(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Yt(i.kind);Gi.vt.It(s,o)}return r.zt()}dn(e){const n=new Ma;return Gi.vt.It(e,n.Yt(0)),n.zt()}mn(e,n){const r=new Ma;return Gi.vt.It(sc(this.databaseId,n),r.Yt(function(s){const o=$i(s);return o.length===0?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,n,r){if(r===null)return[];let i=[];i.push(new Ma);let s=0;for(const o of $i(e)){const a=r[s++];for(const l of i)if(this.fn(n,o.fieldPath)&&oc(a))i=this.gn(i,o,a);else{const u=l.Yt(o.kind);Gi.vt.It(a,u)}}return this.pn(i)}In(e,n,r){return this.Tn(e,n,r.position)}pn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].zt();return n}gn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new Ma;l.seed(a.zt()),Gi.vt.It(o,l.Yt(n.kind)),s.push(l)}return s}fn(e,n){return!!e.filters.find(r=>r instanceof ye&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=Fa(e),i=$s(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(s=>{const o=[];return M.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(h,f){const p=f?new tc(f.sequenceNumber,new hn(xs(f.readTime),new J(Bn(f.documentKey)),f.largestBatchId)):tc.empty(),v=h.fields.map(([b,T])=>new Ju(Be.fromServerFormat(b),T));return new Kd(h.indexId,h.collectionGroup,v,p)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:ue(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=Fa(e),s=$s(e);return this.yn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>M.forEach(a,l=>s.put(Mb(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return M.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?M.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),M.forEach(a,l=>this.wn(e,i,l).next(u=>{const h=this.Sn(s,l);return u.isEqual(h)?M.resolve():this.bn(e,s,l,u,h)}))))})}Dn(e,n,r,i){return zs(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,n.key),documentKey:n.key.path.toArray()})}vn(e,n,r,i){return zs(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,n.key),n.key.path.toArray()])}wn(e,n,r){const i=zs(e);let s=new Ae(Or);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,n)])},(o,a)=>{s=s.add(new Wi(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}Sn(e,n){let r=new Ae(Or);const i=this.Vn(n,e);if(i==null)return r;const s=sg(n);if(s!=null){const o=e.data.field(s.fieldPath);if(oc(o))for(const a of o.arrayValue.values||[])r=r.add(new Wi(n.indexId,e.key,this.dn(a),i))}else r=r.add(new Wi(n.indexId,e.key,xu,i));return r}bn(e,n,r,i,s){G("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(l,u,h,f,p){const v=l.getIterator(),b=u.getIterator();let T=Bs(v),A=Bs(b);for(;T||A;){let _=!1,y=!1;if(T&&A){const w=h(T,A);w<0?y=!0:w>0&&(_=!0)}else T!=null?y=!0:_=!0;_?(f(A),A=Bs(b)):y?(p(T),T=Bs(v)):(T=Bs(v),A=Bs(b))}}(i,s,Or,a=>{o.push(this.Dn(e,n,r,a))},a=>{o.push(this.vn(e,n,r,a))}),M.waitFor(o)}yn(e){let n=1;return $s(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Or(o,a)).filter((o,a,l)=>!a||Or(o,l[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=Or(o,e),l=Or(o,n);if(a===0)i[0]=e.Zt();else if(a>0&&l<0)i.push(o),i.push(o.Zt());else if(l>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Cn(i[o],i[o+1]))return[];const a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,xu,[]],l=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,xu,[]];s.push(IDBKeyRange.bound(a,l))}return s}Cn(e,n){return Or(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(Gb)}getMinOffset(e,n){return M.mapArray(this.hn(n),r=>this.Pn(e,r).next(i=>i||ne())).next(Gb)}}function Kb(t){return ct(t,"collectionParents")}function zs(t){return ct(t,"indexEntries")}function Fa(t){return ct(t,"indexConfiguration")}function $s(t){return ct(t,"indexState")}function Gb(t){se(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;wv(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new hn(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Kt{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Kt(e,Kt.DEFAULT_COLLECTION_PERCENTILE,Kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bk(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.J({range:o},(h,f,p)=>(a++,p.delete()));s.push(l.next(()=>{se(a===1)}));const u=[];for(const h of n.mutations){const f=$A(e,h.key.path,n.batchId);s.push(i.delete(f)),u.push(h.key)}return M.waitFor(s).next(()=>u)}function Zd(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ne();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Kt.DEFAULT_COLLECTION_PERCENTILE=10,Kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Kt.DEFAULT=new Kt(41943040,Kt.DEFAULT_COLLECTION_PERCENTILE,Kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Kt.DISABLED=new Kt(-1,0,0);class Xh{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,n,r,i){se(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new Xh(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Lr(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=Ys(e),o=Lr(e);return o.add({}).next(a=>{se(typeof a=="number");const l=new kv(a,n,r,i),u=function(v,b,T){const A=T.baseMutations.map(y=>Yd(v.ct,y)),_=T.mutations.map(y=>Yd(v.ct,y));return{userId:b,batchId:T.batchId,localWriteTimeMs:T.localWriteTime.toMillis(),baseMutations:A,mutations:_}}(this.serializer,this.userId,l),h=[];let f=new Ae((p,v)=>ue(p.canonicalString(),v.canonicalString()));for(const p of i){const v=$A(this.userId,p.key.path,a);f=f.add(p.key.path.popLast()),h.push(o.put(u)),h.push(s.put(v,i5))}return f.forEach(p=>{h.push(this.indexManager.addToCollectionParentIndex(e,p))}),e.addOnCommittedListener(()=>{this.Fn[a]=l.keys()}),M.waitFor(h).next(()=>l)})}lookupMutationBatch(e,n){return Lr(e).get(n).next(r=>r?(se(r.userId===this.userId),Ki(this.serializer,r)):null)}Mn(e,n){return this.Fn[n]?M.resolve(this.Fn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Fn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Lr(e).J({index:"userMutationsIndex",range:i},(o,a,l)=>{a.userId===this.userId&&(se(a.batchId>=r),s=Ki(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Lr(e).J({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Lr(e).U("userMutationsIndex",n).next(r=>r.map(i=>Ki(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Zu(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return Ys(e).J({range:i},(o,a,l)=>{const[u,h,f]=o,p=Bn(h);if(u===this.userId&&n.path.isEqual(p))return Lr(e).get(f).next(v=>{if(!v)throw ne();se(v.userId===this.userId),s.push(Ki(this.serializer,v))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ae(ue);const i=[];return n.forEach(s=>{const o=Zu(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=Ys(e).J({range:a},(u,h,f)=>{const[p,v,b]=u,T=Bn(v);p===this.userId&&s.path.isEqual(T)?r=r.add(b):f.done()});i.push(l)}),M.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=Zu(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Ae(ue);return Ys(e).J({range:o},(l,u,h)=>{const[f,p,v]=l,b=Bn(p);f===this.userId&&r.isPrefixOf(b)?b.length===i&&(a=a.add(v)):h.done()}).next(()=>this.xn(e,a))}xn(e,n){const r=[],i=[];return n.forEach(s=>{i.push(Lr(e).get(s).next(o=>{if(o===null)throw ne();se(o.userId===this.userId),r.push(Ki(this.serializer,o))}))}),M.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return Bk(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.On(n.batchId)}),M.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return M.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return Ys(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=Bn(s[1]);i.push(l)}else a.done()}).next(()=>{se(i.length===0)})})}containsKey(e,n){return zk(e,this.userId,n)}Nn(e){return $k(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function zk(t,e,n){const r=Zu(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Ys(t).J({range:s,H:!0},(a,l,u)=>{const[h,f,p]=a;h===e&&f===i&&(o=!0),u.done()}).next(()=>o)}function Lr(t){return ct(t,"mutations")}function Ys(t){return ct(t,"documentMutations")}function $k(t){return ct(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new bs(0)}static kn(){return new bs(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xU{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.qn(e).next(n=>{const r=new bs(n.highestTargetId);return n.highestTargetId=r.next(),this.Qn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(n=>oe.fromTimestamp(new $e(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Qn(e,i)))}addTargetData(e,n){return this.Kn(e,n).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(n,r),this.Qn(e,r))))}updateTargetData(e,n){return this.Kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>qs(e).delete(n.targetId)).next(()=>this.qn(e)).next(r=>(se(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return qs(e).J((o,a)=>{const l=il(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>M.waitFor(s)).next(()=>i)}forEachTarget(e,n){return qs(e).J((r,i)=>{const s=il(i);n(s)})}qn(e){return Hb(e).get("targetGlobalKey").next(n=>(se(n!==null),n))}Qn(e,n){return Hb(e).put("targetGlobalKey",n)}Kn(e,n){return qs(e).put(Lk(this.serializer,n))}$n(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=_s(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return qs(e).J({range:i,index:"queryTargetsIndex"},(o,a,l)=>{const u=il(a);Sc(n,u.target)&&(s=u,l.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=Yr(e);return n.forEach(o=>{const a=Bt(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),M.waitFor(i)}removeMatchingKeys(e,n,r){const i=Yr(e);return M.forEach(n,s=>{const o=Bt(s.path);return M.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=Yr(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Yr(e);let s=pe();return i.J({range:r,H:!0},(o,a,l)=>{const u=Bn(o[1]),h=new J(u);s=s.add(h)}).next(()=>s)}containsKey(e,n){const r=Bt(n.path),i=IDBKeyRange.bound([r],[OA(r)],!1,!0);let s=0;return Yr(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],l,u)=>{o!==0&&(s++,u.done())}).next(()=>s>0)}ot(e,n){return qs(e).get(n).next(r=>r?il(r):null)}}function qs(t){return ct(t,"targets")}function Hb(t){return ct(t,"targetGlobal")}function Yr(t){return ct(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qb([t,e],[n,r]){const i=ue(t,n);return i===0?ue(e,r):i}class bU{constructor(e){this.Un=e,this.buffer=new Ae(Qb),this.Wn=0}Gn(){return++this.Wn}zn(e){const n=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Qb(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class EU{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){G("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ci(n)?G("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await ki(n)}await this.Hn(3e5)})}}class TU{constructor(e,n){this.Jn=e,this.params=n}calculateTargetCount(e,n){return this.Jn.Yn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return M.resolve(Ht.oe);const r=new bU(n);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(G("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(Wb)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(G("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Wb):this.Xn(e,n))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,n){let r,i,s,o,a,l,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(G("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,o=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,n))).next(f=>(s=f,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(u=Date.now(),Gs()<=ge.DEBUG&&G("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${f} documents in `+(u-l)+`ms
Total Duration: ${u-h}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:f})))}}function SU(t,e){return new TU(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IU{constructor(e,n){this.db=e,this.garbageCollector=SU(this,n)}Yn(e){const n=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}er(e){let n=0;return this.Zn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Zn(e,n){return this.tr(e,(r,i)=>n(i))}addReference(e,n,r){return bu(e,r)}removeReference(e,n,r){return bu(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return bu(e,n)}nr(e,n){return function(i,s){let o=!1;return $k(i).Y(a=>zk(i,a,s).next(l=>(l&&(o=!0),M.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.tr(e,(o,a)=>{if(a<=n){const l=this.nr(e,o).next(u=>{if(!u)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,oe.min()),Yr(e).delete(function(f){return[0,Bt(f.path)]}(o))))});i.push(l)}}).next(()=>M.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return bu(e,n)}tr(e,n){const r=Yr(e);let i,s=Ht.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:u})=>{o===0?(s!==Ht.oe&&n(new J(Bn(i)),s),s=u,i=l):s=Ht.oe}).next(()=>{s!==Ht.oe&&n(new J(Bn(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function bu(t,e){return Yr(t).put(function(r,i){return{targetId:0,path:Bt(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(){this.changes=new Pi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Qe.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?M.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AU{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Li(e).put(r)}removeEntry(e,n,r){return Li(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Xd(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.rr(e,r)))}getEntry(e,n){let r=Qe.newInvalidDocument(n);return Li(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Ua(n))},(i,s)=>{r=this.ir(n,s)}).next(()=>r)}sr(e,n){let r={size:0,document:Qe.newInvalidDocument(n)};return Li(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Ua(n))},(i,s)=>{r={document:this.ir(n,s),size:Zd(s)}}).next(()=>r)}getEntries(e,n){let r=on();return this._r(e,n,(i,s)=>{const o=this.ir(i,s);r=r.insert(i,o)}).next(()=>r)}ar(e,n){let r=on(),i=new Pe(J.comparator);return this._r(e,n,(s,o)=>{const a=this.ir(s,o);r=r.insert(s,a),i=i.insert(s,Zd(o))}).next(()=>({documents:r,ur:i}))}_r(e,n,r){if(n.isEmpty())return M.resolve();let i=new Ae(Jb);n.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(Ua(i.first()),Ua(i.last())),o=i.getIterator();let a=o.getNext();return Li(e).J({index:"documentKeyIndex",range:s},(l,u,h)=>{const f=J.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&Jb(a,f)<0;)r(a,null),a=o.getNext();a&&a.isEqual(f)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?h.$(Ua(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),Xd(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Li(e).U(IDBKeyRange.bound(a,l,!0)).next(u=>{s==null||s.incrementDocumentReadCount(u.length);let h=on();for(const f of u){const p=this.ir(J.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);p.isFoundDocument()&&(Ac(n,p)||i.has(p.key))&&(h=h.insert(p.key,p))}return h})}getAllFromCollectionGroup(e,n,r,i){let s=on();const o=Xb(n,r),a=Xb(n,hn.max());return Li(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,u,h)=>{const f=this.ir(J.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(f.key,f),s.size===i&&h.done()}).next(()=>s)}newChangeBuffer(e){return new kU(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return Yb(e).get("remoteDocumentGlobalKey").next(n=>(se(!!n),n))}rr(e,n){return Yb(e).put("remoteDocumentGlobalKey",n)}ir(e,n){if(n){const r=dU(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(oe.min())))return r}return Qe.newInvalidDocument(e)}}function Kk(t){return new AU(t)}class kU extends qk{constructor(e,n){super(),this.cr=e,this.trackRemovals=n,this.lr=new Pi(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new Ae((s,o)=>ue(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.lr.get(s);if(n.push(this.cr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=Ob(this.cr.serializer,o);i=i.add(s.path.popLast());const u=Zd(l);r+=u-a.size,n.push(this.cr.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=Ob(this.cr.serializer,o.convertToNoDocument(oe.min()));n.push(this.cr.addEntry(e,s,l))}}),i.forEach(s=>{n.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.cr.updateMetadata(e,r)),M.waitFor(n)}getFromCache(e,n){return this.cr.sr(e,n).next(r=>(this.lr.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.cr.ar(e,n).next(({documents:r,ur:i})=>(i.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function Yb(t){return ct(t,"remoteDocumentGlobal")}function Li(t){return ct(t,"remoteDocumentsV14")}function Ua(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Xb(t,e){const n=e.documentKey.path.toArray();return[t,Xd(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Jb(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=ue(n[s],r[s]),i)return i;return i=ue(n.length,r.length),i||(i=ue(n[n.length-2],r[r.length-2]),i||ue(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CU{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Tl(r.mutation,i,Qt.empty(),$e.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,pe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=pe()){const i=zn();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=nl();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=zn();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,pe()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=on();const o=El(),a=function(){return El()}();return n.forEach((l,u)=>{const h=r.get(u.key);i.has(u.key)&&(h===void 0||h.mutation instanceof Cr)?s=s.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),Tl(h.mutation,u,h.mutation.getFieldMask(),$e.now())):o.set(u.key,Qt.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>{var f;return a.set(u,new CU(h,(f=o.get(u))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=El();let i=new Pe((o,a)=>o-a),s=pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let h=r.get(l)||Qt.empty();h=a.applyToLocalView(u,h),r.set(l,h);const f=(i.get(a.batchId)||pe()).add(l);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,h=l.value,f=hk();h.forEach(p=>{if(!s.has(p)){const v=_k(n.get(p),r.get(p));v!==null&&f.set(p,v),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return M.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return J.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):ok(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):M.resolve(zn());let a=-1,l=s;return o.next(u=>M.forEach(u,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(h)?M.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,pe())).next(h=>({batchId:a,changes:dk(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new J(n)).next(r=>{let i=nl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=nl();return this.indexManager.getCollectionParents(e,s).next(a=>M.forEach(a,l=>{const u=function(f,p){return new Ic(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(h=>{h.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,Qe.newInvalidDocument(h)))});let a=nl();return o.forEach((l,u)=>{const h=s.get(l);h!==void 0&&Tl(h.mutation,u,Qt.empty(),$e.now()),Ac(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PU{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return M.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:zt(i.createTime)}}(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:Mk(i.bundledQuery),readTime:zt(i.readTime)}}(n)),M.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RU{constructor(){this.overlays=new Pe(J.comparator),this.Ir=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){const r=zn();return M.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),M.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),M.resolve()}getOverlaysForCollection(e,n,r){const i=zn(),s=n.length+1,o=new J(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return M.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Pe((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=s.get(u.largestBatchId);h===null&&(h=zn(),s=s.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=zn(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=i)););return M.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Pv(n,r));let s=this.Ir.get(n);s===void 0&&(s=pe(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NU{constructor(){this.sessionToken=et.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,M.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(){this.Tr=new Ae(ut.Er),this.dr=new Ae(ut.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new ut(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new ut(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new J(new Ee([])),r=new ut(n,e),i=new ut(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new J(new Ee([])),r=new ut(n,e),i=new ut(n,e+1);let s=pe();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new ut(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ut{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return J.comparator(e.key,n.key)||ue(e.wr,n.wr)}static Ar(e,n){return ue(e.wr,n.wr)||J.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DU{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Ae(ut.Er)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new kv(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new ut(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return M.resolve(o)}lookupMutationBatch(e,n){return M.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return M.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ut(n,0),i=new ut(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),M.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ae(ue);return n.forEach(i=>{const s=new ut(i,0),o=new ut(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),M.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;J.isDocumentKey(s)||(s=s.child(""));const o=new ut(new J(s),0);let a=new Ae(ue);return this.br.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.wr)),!0)},o),M.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){se(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return M.forEach(n.mutations,i=>{const s=new ut(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new ut(n,0),i=this.br.firstAfterOrEqual(r);return M.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VU{constructor(e){this.Mr=e,this.docs=function(){return new Pe(J.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():Qe.newInvalidDocument(n))}getEntries(e,n){let r=on();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Qe.newInvalidDocument(i))}),M.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=on();const o=n.path,a=new J(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||wv(MA(h),r)<=0||(i.has(h.key)||Ac(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return M.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ne()}Or(e,n){return M.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new jU(this)}getSize(e){return M.resolve(this.size)}}class jU extends qk{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),M.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OU{constructor(e){this.persistence=e,this.Nr=new Pi(n=>_s(n),Sc),this.lastRemoteSnapshotVersion=oe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new jv,this.targetCount=0,this.kr=bs.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),M.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new bs(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.Kn(n),M.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),M.waitFor(s).next(()=>i)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return M.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),M.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),M.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),M.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return M.resolve(r)}containsKey(e,n){return M.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Ht(0),this.Kr=!1,this.Kr=!0,this.$r=new NU,this.referenceDelegate=e(this),this.Ur=new OU(this),this.indexManager=new _U,this.remoteDocumentCache=function(i){return new VU(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Ok(n),this.Gr=new PU(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new RU,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new DU(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){G("MemoryPersistence","Starting transaction:",e);const i=new LU(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return M.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class LU extends UA{constructor(e){super(),this.currentSequenceNumber=e}}class Jh{constructor(e){this.persistence=e,this.Jr=new jv,this.Yr=null}static Zr(e){return new Jh(e)}get Xr(){if(this.Yr)return this.Yr;throw ne()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),M.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),M.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.Xr,r=>{const i=J.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,oe.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return M.or([()=>M.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MU{constructor(e){this.serializer=e}O(e,n,r,i){const s=new zh("createOrUpgrade",n);r<1&&i>=1&&(function(l){l.createObjectStore("owner")}(e),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",hb,{unique:!0}),l.createObjectStore("documentMutations")}(e),Zb(e),function(l){l.createObjectStore("remoteDocuments")}(e));let o=M.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),Zb(e)),o=o.next(()=>function(l){const u=l.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:oe.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",h)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(l,u){return u.store("mutations").U().next(h=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",hb,{unique:!0});const f=u.store("mutations"),p=h.map(v=>f.put(v));return M.waitFor(p)})}(e,s))),o=o.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.ni(s))),r<6&&i>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&i>=7&&(o=o.next(()=>this.ii(s))),r<8&&i>=8&&(o=o.next(()=>this.si(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.oi(s))),r<11&&i>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(l){const u=l.createObjectStore("documentOverlays",{keyPath:g5});u.createIndex("collectionPathOverlayIndex",y5,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",v5,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(l){const u=l.createObjectStore("remoteDocumentsV14",{keyPath:s5});u.createIndex("documentKeyIndex",o5),u.createIndex("collectionGroupIndex",a5)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ai(e,s))),r<15&&i>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:h5}).createIndex("sequenceNumberIndex",f5,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:p5}).createIndex("documentKeyIndex",m5,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),r<17&&i>=17&&(o=o.next(()=>{(function(l){l.createObjectStore("globals",{keyPath:"name"})})(e)})),o}ri(e){let n=0;return e.store("remoteDocuments").J((r,i)=>{n+=Zd(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(i=>M.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>M.forEach(a,l=>{se(l.userId===s.userId);const u=Ki(this.serializer,l);return Bk(e,s.userId,u).next(()=>{})}))}))}ii(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const l=new Ee(o),u=function(f){return[0,Bt(f)]}(l);s.push(n.get(u).next(h=>h?M.resolve():(f=>n.put({targetId:0,path:Bt(f),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>M.waitFor(s))})}si(e,n){e.createObjectStore("collectionParents",{keyPath:d5});const r=n.store("collectionParents"),i=new Vv,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:Bt(l)})}};return n.store("remoteDocuments").J({H:!0},(o,a)=>{const l=new Ee(o);return s(l.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([o,a,l],u)=>{const h=Bn(a);return s(h.popLast())}))}oi(e){const n=e.store("targets");return n.J((r,i)=>{const s=il(i),o=Lk(this.serializer,s);return n.put(o)})}_i(e,n){const r=n.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=n.store("remoteDocumentsV14"),l=function(f){return f.document?new J(Ee.fromString(f.document.name).popFirst(5)):f.noDocument?J.fromSegments(f.noDocument.path):f.unknownDocument?J.fromSegments(f.unknownDocument.path):ne()}(o).path.toArray(),u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(u))}).next(()=>M.waitFor(i))}ai(e,n){const r=n.store("mutations"),i=Kk(this.serializer),s=new Wk(Jh.Zr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(l=>{var u;let h=(u=a.get(l.userId))!==null&&u!==void 0?u:pe();Ki(this.serializer,l).keys().forEach(f=>h=h.add(f)),a.set(l.userId,h)}),M.forEach(a,(l,u)=>{const h=new ht(u),f=Yh.lt(this.serializer,h),p=s.getIndexManager(h),v=Xh.lt(h,this.serializer,p,s.referenceDelegate);return new Gk(i,v,f,p).recalculateAndSaveOverlaysForDocumentKeys(new og(n,Ht.oe),l).next()})})}}function Zb(t){t.createObjectStore("targetDocuments",{keyPath:c5}).createIndex("documentTargetsIndex",u5,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",l5,{unique:!0}),t.createObjectStore("targetGlobal")}const Cp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Ov{constructor(e,n,r,i,s,o,a,l,u,h,f=17){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ui=s,this.window=o,this.document=a,this.ci=u,this.li=h,this.hi=f,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=p=>Promise.resolve(),!Ov.D())throw new Y(z.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new IU(this,i),this.Ai=n+"main",this.serializer=new Ok(l),this.Ri=new hi(this.Ai,this.hi,new MU(this.serializer)),this.$r=new fU,this.Ur=new xU(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Kk(this.serializer),this.Gr=new hU,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,h===!1&&Ze("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Y(z.FAILED_PRECONDITION,Cp);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Ht(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Eu(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(n=>{n||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(n=>this.isPrimary&&!n?this.bi(e).next(()=>!1):!!n&&this.Di(e).next(()=>!0))).catch(e=>{if(Ci(e))return G("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return G("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Ba(e).get("owner").next(n=>M.resolve(this.vi(n)))}Ci(e){return Eu(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=ct(n,"clientMetadata");return r.U().next(i=>{const s=this.xi(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return M.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Vi)for(const n of e)this.Vi.removeItem(this.Oi(n.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?M.resolve(!0):Ba(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)){if(this.vi(n)&&this.networkEnabled)return!0;if(!this.vi(n)){if(!n.allowTabSynchronization)throw new Y(z.FAILED_PRECONDITION,Cp);return!1}}return!(!this.networkEnabled||!this.inForeground)||Eu(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&G("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new og(e,Ht.oe);return this.bi(n).next(()=>this.Ci(n))}),this.Ri.close(),this.qi()}xi(e,n){return e.filter(r=>this.Mi(r.updateTimeMs,n)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Eu(e).U().next(n=>this.xi(n,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,n){return Xh.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new wU(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Yh.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,n,r){G("IndexedDbPersistence","Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=function(l){return l===17?x5:l===16?w5:l===15?bv:l===14?GA:l===13?KA:l===12?_5:l===11?qA:void ne()}(this.hi);let o;return this.Ri.runTransaction(e,i,s,a=>(o=new og(a,this.Qr?this.Qr.next():Ht.oe),n==="readwrite-primary"?this.wi(o).next(l=>!!l||this.Si(o)).next(l=>{if(!l)throw Ze(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new Y(z.FAILED_PRECONDITION,FA);return r(o)}).next(l=>this.Di(o).next(()=>l)):this.Ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return Ba(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)&&!this.vi(n)&&!(this.li||this.allowTabSynchronization&&n.allowTabSynchronization))throw new Y(z.FAILED_PRECONDITION,Cp)})}Di(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ba(e).put("owner",n)}static D(){return hi.D()}bi(e){const n=Ba(e);return n.get("owner").next(r=>this.vi(r)?(G("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):M.resolve())}Mi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Ze(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const n=/(?:Version|Mobile)\/1[456]/;BI()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var n;try{const r=((n=this.Vi)===null||n===void 0?void 0:n.getItem(this.Oi(e)))!==null;return G("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ze("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Ze("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ba(t){return ct(t,"owner")}function Eu(t){return ct(t,"clientMetadata")}function Hk(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=pe(),i=pe();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Lv(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FU{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return BI()?8:BA(lt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new FU;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Gs()<=ge.DEBUG&&G("QueryEngine","SDK will not create cache indexes for query:",Ws(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),M.resolve()):(Gs()<=ge.DEBUG&&G("QueryEngine","Query:",Ws(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Gs()<=ge.DEBUG&&G("QueryEngine","The SDK decides to create cache indexes for query:",Ws(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,cn(n))):M.resolve())}Yi(e,n){if(Sb(n))return M.resolve(null);let r=cn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=fg(n,null,"F"),r=cn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=pe(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.ts(n,a);return this.ns(n,u,o,l.readTime)?this.Yi(e,fg(n,null,"F")):this.rs(e,u,n,l)}))})))}Zi(e,n,r,i){return Sb(n)||i.isEqual(oe.min())?M.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?M.resolve(null):(Gs()<=ge.DEBUG&&G("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ws(n)),this.rs(e,o,n,LA(i,-1)).next(a=>a))})}ts(e,n){let r=new Ae(ck(e));return n.forEach((i,s)=>{Ac(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Gs()<=ge.DEBUG&&G("QueryEngine","Using full collection scan to execute query:",Ws(n)),this.Ji.getDocumentsMatchingQuery(e,n,hn.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UU{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Pe(ue),this._s=new Pi(s=>_s(s),Sc),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Gk(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function Yk(t,e,n,r){return new UU(t,e,n,r)}async function Xk(t,e){const n=re(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=pe();for(const u of i){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of s){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:a}))})})}function BU(t,e){const n=re(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,u,h){const f=u.batch,p=f.keys();let v=M.resolve();return p.forEach(b=>{v=v.next(()=>h.getEntry(l,b)).next(T=>{const A=u.docVersions.get(b);se(A!==null),T.version.compareTo(A)<0&&(f.applyToRemoteDocument(T,u),T.isValidDocument()&&(T.setReadTime(u.commitVersion),h.addEntry(T)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=pe();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function Jk(t){const e=re(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function zU(t,e){const n=re(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((h,f)=>{const p=i.get(f);if(!p)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,f).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,f)));let v=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?v=v.withResumeToken(et.EMPTY_BYTE_STRING,oe.min()).withLastLimboFreeSnapshotVersion(oe.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),i=i.insert(f,v),function(T,A,_){return T.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=3e8?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(p,v,h)&&a.push(n.Ur.updateTargetData(s,v))});let l=on(),u=pe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push($U(s,o,e.documentUpdates).next(h=>{l=h.Ps,u=h.Is})),!r.isEqual(oe.min())){const h=n.Ur.getLastRemoteSnapshotVersion(s).next(f=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return M.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.os=i,s))}function $U(t,e,n){let r=pe(),i=pe();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=on();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(oe.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):G("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function qU(t,e){const n=re(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function eh(t,e){const n=re(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,M.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new fr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Wo(t,e,n){const r=re(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Ci(o))throw o;G("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function xg(t,e,n){const r=re(t);let i=oe.min(),s=pe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,h){const f=re(l),p=f._s.get(h);return p!==void 0?M.resolve(f.os.get(p)):f.Ur.getTargetData(u,h)}(r,o,cn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:oe.min(),n?s:pe())).next(a=>(tC(r,lk(e),a),{documents:a,Ts:s})))}function Zk(t,e){const n=re(t),r=re(n.Ur),i=n.os.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function eC(t,e){const n=re(t),r=n.us.get(e)||oe.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.cs.getAllFromCollectionGroup(i,e,LA(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(tC(n,e,i),i))}function tC(t,e,n){let r=t.us.get(e)||oe.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}function eE(t,e){return`firestore_clients_${t}_${e}`}function tE(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Pp(t,e){return`firestore_targets_${t}_${e}`}class th{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Rs(e,n,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new Y(i.error.code,i.error.message))),o?new th(e,n,i.state,s):(Ze("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Sl{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Rs(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new Y(r.error.code,r.error.message))),s?new Sl(e,r.state,i):(Ze("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class nh{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Rs(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=Iv();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=zA(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new nh(e,s):(Ze("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class Mv{constructor(e,n){this.clientId=e,this.onlineState=n}static Rs(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new Mv(n.clientId,n.onlineState):(Ze("SharedClientState",`Failed to parse online state: ${e}`),null)}}class bg{constructor(){this.activeTargetIds=Iv()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Rp{constructor(e,n,r,i,s){this.window=e,this.ui=n,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Pe(ue),this.started=!1,this.bs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=eE(this.persistenceKey,this.ps),this.vs=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new bg),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this.Os=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const r of e){if(r===this.ps)continue;const i=this.getItem(eE(this.persistenceKey,r));if(i){const s=nh.Rs(r,i);s&&(this.Ss=this.Ss.insert(s.clientId,s))}}this.Ns();const n=this.storage.getItem(this.xs);if(n){const r=this.Ls(n);r&&this.Bs(r)}for(const r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let n=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,n,r){this.qs(e,n,r),this.Qs(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(Pp(this.persistenceKey,e));if(i){const s=Sl.Rs(e,i);s&&(r=s.state)}}return n&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Pp(this.persistenceKey,e))}updateQueryState(e,n,r){this.$s(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return G("SharedClientState","READ",e,n),n}setItem(e,n){G("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){G("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const n=e;if(n.storageArea===this.storage){if(G("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ds)return void Ze("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.Cs.test(n.key)){if(n.newValue==null){const r=this.Gs(n.key);return this.zs(r,null)}{const r=this.js(n.key,n.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(n.key)){if(n.newValue!==null){const r=this.Hs(n.key,n.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(n.key)){if(n.newValue!==null){const r=this.Ys(n.key,n.newValue);if(r)return this.Zs(r)}}else if(n.key===this.xs){if(n.newValue!==null){const r=this.Ls(n.newValue);if(r)return this.Bs(r)}}else if(n.key===this.vs){const r=function(s){let o=Ht.oe;if(s!=null)try{const a=JSON.parse(s);se(typeof a=="number"),o=a}catch(a){Ze("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==Ht.oe&&this.sequenceNumberHandler(r)}else if(n.key===this.Os){const r=this.Xs(n.newValue);await Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(n)})}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,n,r){const i=new th(this.currentUser,e,n,r),s=tE(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Vs())}Qs(e){const n=tE(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Us(e){const n={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(n))}$s(e,n,r){const i=Pp(this.persistenceKey,e),s=new Sl(e,n,r);this.setItem(i,s.Vs())}Ws(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Os,n)}Gs(e){const n=this.Cs.exec(e);return n?n[1]:null}js(e,n){const r=this.Gs(e);return nh.Rs(r,n)}Hs(e,n){const r=this.Fs.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return th.Rs(new ht(s),i,n)}Ys(e,n){const r=this.Ms.exec(e),i=Number(r[1]);return Sl.Rs(i,n)}Ls(e){return Mv.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);G("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,n){const r=n?this.Ss.insert(e,n):this.Ss.remove(e),i=this.ks(this.Ss),s=this.ks(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.io(o,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let n=Iv();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class nC{constructor(){this.so=new bg,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new bg,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KU{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){G("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){G("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tu=null;function Np(){return Tu===null?Tu=function(){return 268435456+Math.round(2147483648*Math.random())}():Tu++,"0x"+Tu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WU{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const At="WebChannelConnection";class HU extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=Np(),l=this.xo(n,r.toUriEncodedString());G("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,o),this.No(n,l,u,i).then(h=>(G("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw gs("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",i),h})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+sa}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=GU[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=Np();return new Promise((o,a)=>{const l=new CA;l.setWithCredentials(!0),l.listenOnce(PA.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Xu.NO_ERROR:const h=l.getResponseJson();G(At,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Xu.TIMEOUT:G(At,`RPC '${e}' ${s} timed out`),a(new Y(z.DEADLINE_EXCEEDED,"Request time out"));break;case Xu.HTTP_ERROR:const f=l.getStatus();if(G(At,`RPC '${e}' ${s} failed with status:`,f,"response text:",l.getResponseText()),f>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const v=p==null?void 0:p.error;if(v&&v.status&&v.message){const b=function(A){const _=A.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(_)>=0?_:z.UNKNOWN}(v.status);a(new Y(b,v.message))}else a(new Y(z.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Y(z.UNAVAILABLE,"Connection failed."));break;default:ne()}}finally{G(At,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);G(At,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",u,r,15)})}Bo(e,n,r){const i=Np(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=DA(),a=NA(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=s.join("");G(At,`Creating RPC '${e}' stream ${i}: ${h}`,l);const f=o.createWebChannel(h,l);let p=!1,v=!1;const b=new WU({Io:A=>{v?G(At,`Not sending because RPC '${e}' stream ${i} is closed:`,A):(p||(G(At,`Opening RPC '${e}' stream ${i} transport.`),f.open(),p=!0),G(At,`RPC '${e}' stream ${i} sending:`,A),f.send(A))},To:()=>f.close()}),T=(A,_,y)=>{A.listen(_,w=>{try{y(w)}catch(P){setTimeout(()=>{throw P},0)}})};return T(f,tl.EventType.OPEN,()=>{v||(G(At,`RPC '${e}' stream ${i} transport opened.`),b.yo())}),T(f,tl.EventType.CLOSE,()=>{v||(v=!0,G(At,`RPC '${e}' stream ${i} transport closed`),b.So())}),T(f,tl.EventType.ERROR,A=>{v||(v=!0,gs(At,`RPC '${e}' stream ${i} transport errored:`,A),b.So(new Y(z.UNAVAILABLE,"The operation could not be completed")))}),T(f,tl.EventType.MESSAGE,A=>{var _;if(!v){const y=A.data[0];se(!!y);const w=y,P=w.error||((_=w[0])===null||_===void 0?void 0:_.error);if(P){G(At,`RPC '${e}' stream ${i} received error:`,P);const V=P.status;let O=function(k){const C=nt[k];if(C!==void 0)return bk(C)}(V),I=P.message;O===void 0&&(O=z.INTERNAL,I="Unknown error status: "+V+" with message "+P.message),v=!0,b.So(new Y(O,I)),f.close()}else G(At,`RPC '${e}' stream ${i} received:`,y),b.bo(y)}}),T(a,RA.STAT_EVENT,A=>{A.stat===ig.PROXY?G(At,`RPC '${e}' stream ${i} detected buffering proxy`):A.stat===ig.NOPROXY&&G(At,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rC(){return typeof window<"u"?window:null}function id(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zh(t){return new tU(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&G("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(e,n,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new iC(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(Ze(n.toString()),Ze("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new Y(z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return G("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(G("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class QU extends sC{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=iU(this.serializer,e),r=function(s){if(!("targetChange"in s))return oe.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?oe.min():o.readTime?zt(o.readTime):oe.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=gg(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=Wd(l)?{documents:Pk(s,l)}:{query:Rk(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Sk(s,o.resumeToken);const u=pg(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(oe.min())>0){a.readTime=Go(s,o.snapshotVersion.toTimestamp());const u=pg(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=oU(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=gg(this.serializer),n.removeTarget=e,this.a_(n)}}class YU extends sC{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return se(!!e.streamToken),this.lastStreamToken=e.streamToken,se(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){se(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=sU(e.writeResults,e.commitTime),r=zt(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=gg(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Yd(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XU extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Y(z.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,mg(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Y(z.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,mg(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Y(z.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class JU{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ze(n),this.D_=!1):G("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZU{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{Ds(this)&&(G("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=re(l);u.L_.add(4),await Pc(u),u.q_.set("Unknown"),u.L_.delete(4),await ef(u)}(this))})}),this.q_=new JU(r,i)}}async function ef(t){if(Ds(t))for(const e of t.B_)await e(!0)}async function Pc(t){for(const e of t.B_)await e(!1)}function tf(t,e){const n=re(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Bv(n)?Uv(n):la(n).r_()&&Fv(n,e))}function Ho(t,e){const n=re(t),r=la(n);n.N_.delete(e),r.r_()&&oC(n,e),n.N_.size===0&&(r.r_()?r.o_():Ds(n)&&n.q_.set("Unknown"))}function Fv(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(oe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}la(t).A_(e)}function oC(t,e){t.Q_.xe(e),la(t).R_(e)}function Uv(t){t.Q_=new X5({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),la(t).start(),t.q_.v_()}function Bv(t){return Ds(t)&&!la(t).n_()&&t.N_.size>0}function Ds(t){return re(t).L_.size===0}function aC(t){t.Q_=void 0}async function e3(t){t.q_.set("Online")}async function t3(t){t.N_.forEach((e,n)=>{Fv(t,e)})}async function n3(t,e){aC(t),Bv(t)?(t.q_.M_(e),Uv(t)):t.q_.set("Unknown")}async function r3(t,e,n){if(t.q_.set("Online"),e instanceof Tk&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){G("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await rh(t,r)}else if(e instanceof rd?t.Q_.Ke(e):e instanceof Ek?t.Q_.He(e):t.Q_.We(e),!n.isEqual(oe.min()))try{const r=await Jk(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.N_.get(u);h&&s.N_.set(u,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const h=s.N_.get(l);if(!h)return;s.N_.set(l,h.withResumeToken(et.EMPTY_BYTE_STRING,h.snapshotVersion)),oC(s,l);const f=new fr(h.target,l,u,h.sequenceNumber);Fv(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){G("RemoteStore","Failed to raise snapshot:",r),await rh(t,r)}}async function rh(t,e,n){if(!Ci(e))throw e;t.L_.add(1),await Pc(t),t.q_.set("Offline"),n||(n=()=>Jk(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{G("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await ef(t)})}function lC(t,e){return e().catch(n=>rh(t,n,e))}async function aa(t){const e=re(t),n=xi(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;i3(e);)try{const i=await qU(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,s3(e,i)}catch(i){await rh(e,i)}cC(e)&&uC(e)}function i3(t){return Ds(t)&&t.O_.length<10}function s3(t,e){t.O_.push(e);const n=xi(t);n.r_()&&n.V_&&n.m_(e.mutations)}function cC(t){return Ds(t)&&!xi(t).n_()&&t.O_.length>0}function uC(t){xi(t).start()}async function o3(t){xi(t).p_()}async function a3(t){const e=xi(t);for(const n of t.O_)e.m_(n.mutations)}async function l3(t,e,n){const r=t.O_.shift(),i=Cv.from(r,e,n);await lC(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await aa(t)}async function c3(t,e){e&&xi(t).V_&&await async function(r,i){if(function(o){return H5(o)&&o!==z.ABORTED}(i.code)){const s=r.O_.shift();xi(r).s_(),await lC(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await aa(r)}}(t,e),cC(t)&&uC(t)}async function rE(t,e){const n=re(t);n.asyncQueue.verifyOperationInProgress(),G("RemoteStore","RemoteStore received new credentials");const r=Ds(n);n.L_.add(3),await Pc(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await ef(n)}async function Eg(t,e){const n=re(t);e?(n.L_.delete(2),await ef(n)):e||(n.L_.add(2),await Pc(n),n.q_.set("Unknown"))}function la(t){return t.K_||(t.K_=function(n,r,i){const s=re(n);return s.w_(),new QU(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:e3.bind(null,t),Ro:t3.bind(null,t),mo:n3.bind(null,t),d_:r3.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Bv(t)?Uv(t):t.q_.set("Unknown")):(await t.K_.stop(),aC(t))})),t.K_}function xi(t){return t.U_||(t.U_=function(n,r,i){const s=re(n);return s.w_(),new YU(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:o3.bind(null,t),mo:c3.bind(null,t),f_:a3.bind(null,t),g_:l3.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await aa(t)):(await t.U_.stop(),t.O_.length>0&&(G("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Yn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new zv(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $v(t,e){if(Ze("AsyncQueue",`${e}: ${t}`),Ci(t))return new Y(z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e){this.comparator=e?(n,r)=>e(n,r)||J.comparator(n.key,r.key):(n,r)=>J.comparator(n.key,r.key),this.keyedMap=nl(),this.sortedSet=new Pe(this.comparator)}static emptySet(e){return new Io(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Io)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Io;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{constructor(){this.W_=new Pe(J.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ne():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Qo{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Qo(e,n,Io.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u3{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class d3{constructor(){this.queries=sE(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=re(n),s=i.queries;i.queries=sE(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new Y(z.ABORTED,"Firestore shutting down"))}}function sE(){return new Pi(t=>ak(t),Gh)}async function dC(t,e){const n=re(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new u3,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=$v(o,`Initialization of query '${Ws(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&qv(n)}async function hC(t,e){const n=re(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function h3(t,e){const n=re(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&qv(n)}function f3(t,e,n){const r=re(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function qv(t){t.Y_.forEach(e=>{e.next()})}var Tg,oE;(oE=Tg||(Tg={})).ea="default",oE.Cache="cache";class fC{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Qo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Qo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Tg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(e){this.key=e}}class mC{constructor(e){this.key=e}}class p3{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=pe(),this.mutatedKeys=pe(),this.Aa=ck(e),this.Ra=new Io(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new iE,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,f)=>{const p=i.get(h),v=Ac(this.query,f)?f:null,b=!!p&&this.mutatedKeys.has(p.key),T=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let A=!1;p&&v?p.data.isEqual(v.data)?b!==T&&(r.track({type:3,doc:v}),A=!0):this.ga(p,v)||(r.track({type:2,doc:v}),A=!0,(l&&this.Aa(v,l)>0||u&&this.Aa(v,u)<0)&&(a=!0)):!p&&v?(r.track({type:0,doc:v}),A=!0):p&&!v&&(r.track({type:1,doc:p}),A=!0,(l||u)&&(a=!0)),A&&(v?(o=o.add(v),s=T?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,f)=>function(v,b){const T=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ne()}};return T(v)-T(b)}(h.type,f.type)||this.Aa(h.doc,f.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,u=l!==this.Ea;return this.Ea=l,o.length!==0||u?{snapshot:new Qo(this.query,e.Ra,s,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new iE,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=pe(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new mC(r))}),this.da.forEach(r=>{e.has(r)||n.push(new pC(r))}),n}ba(e){this.Ta=e.Ts,this.da=pe();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Qo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class m3{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class g3{constructor(e){this.key=e,this.va=!1}}class y3{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Pi(a=>ak(a),Gh),this.Ma=new Map,this.xa=new Set,this.Oa=new Pe(J.comparator),this.Na=new Map,this.La=new jv,this.Ba={},this.ka=new Map,this.qa=bs.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function v3(t,e,n=!0){const r=nf(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await gC(r,e,n,!0),i}async function _3(t,e){const n=nf(t);await gC(n,e,!0,!1)}async function gC(t,e,n,r){const i=await eh(t.localStore,cn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await Kv(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&tf(t.remoteStore,i),a}async function Kv(t,e,n,r,i){t.Ka=(f,p,v)=>async function(T,A,_,y){let w=A.view.ma(_);w.ns&&(w=await xg(T.localStore,A.query,!1).then(({documents:I})=>A.view.ma(I,w)));const P=y&&y.targetChanges.get(A.targetId),V=y&&y.targetMismatches.get(A.targetId)!=null,O=A.view.applyChanges(w,T.isPrimaryClient,P,V);return Sg(T,A.targetId,O.wa),O.snapshot}(t,f,p,v);const s=await xg(t.localStore,e,!0),o=new p3(e,s.Ts),a=o.ma(s.documents),l=Cc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);Sg(t,n,u.wa);const h=new m3(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),u.snapshot}async function w3(t,e,n){const r=re(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Gh(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Wo(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Ho(r.remoteStore,i.targetId),Yo(r,i.targetId)}).catch(ki)):(Yo(r,i.targetId),await Wo(r.localStore,i.targetId,!0))}async function x3(t,e){const n=re(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ho(n.remoteStore,r.targetId))}async function b3(t,e,n){const r=Qv(t);try{const i=await function(o,a){const l=re(o),u=$e.now(),h=a.reduce((v,b)=>v.add(b.key),pe());let f,p;return l.persistence.runTransaction("Locally write mutations","readwrite",v=>{let b=on(),T=pe();return l.cs.getEntries(v,h).next(A=>{b=A,b.forEach((_,y)=>{y.isValidDocument()||(T=T.add(_))})}).next(()=>l.localDocuments.getOverlayedDocuments(v,b)).next(A=>{f=A;const _=[];for(const y of a){const w=G5(y,f.get(y.key).overlayedDocument);w!=null&&_.push(new Cr(y.key,w,XA(w.value.mapValue),Nt.exists(!0)))}return l.mutationQueue.addMutationBatch(v,u,_,a)}).next(A=>{p=A;const _=A.applyToLocalDocumentSet(f,T);return l.documentOverlayCache.saveOverlays(v,A.batchId,_)})}).then(()=>({batchId:p.batchId,changes:dk(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.Ba[o.currentUser.toKey()];u||(u=new Pe(ue)),u=u.insert(a,l),o.Ba[o.currentUser.toKey()]=u}(r,i.batchId,n),await Ri(r,i.changes),await aa(r.remoteStore)}catch(i){const s=$v(i,"Failed to persist write");n.reject(s)}}async function yC(t,e){const n=re(t);try{const r=await zU(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(se(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?se(o.va):i.removedDocuments.size>0&&(se(o.va),o.va=!1))}),await Ri(n,r,e)}catch(r){await ki(r)}}function aE(t,e,n){const r=re(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=re(o);l.onlineState=a;let u=!1;l.queries.forEach((h,f)=>{for(const p of f.j_)p.Z_(a)&&(u=!0)}),u&&qv(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function E3(t,e,n){const r=re(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new Pe(J.comparator);o=o.insert(s,Qe.newNoDocument(s,oe.min()));const a=pe().add(s),l=new kc(oe.min(),new Map,new Pe(ue),o,a);await yC(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),Hv(r)}else await Wo(r.localStore,e,!1).then(()=>Yo(r,e,n)).catch(ki)}async function T3(t,e){const n=re(t),r=e.batch.batchId;try{const i=await BU(n.localStore,e);Wv(n,r,null),Gv(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ri(n,i)}catch(i){await ki(i)}}async function S3(t,e,n){const r=re(t);try{const i=await function(o,a){const l=re(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next(f=>(se(f!==null),h=f.keys(),l.mutationQueue.removeMutationBatch(u,f))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>l.localDocuments.getDocuments(u,h))})}(r.localStore,e);Wv(r,e,n),Gv(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ri(r,i)}catch(i){await ki(i)}}function Gv(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function Wv(t,e,n){const r=re(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Yo(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||vC(t,r)})}function vC(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Ho(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Hv(t))}function Sg(t,e,n){for(const r of n)r instanceof pC?(t.La.addReference(r.key,e),I3(t,r)):r instanceof mC?(G("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||vC(t,r.key)):ne()}function I3(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(G("SyncEngine","New document in limbo: "+n),t.xa.add(r),Hv(t))}function Hv(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new J(Ee.fromString(e)),r=t.qa.next();t.Na.set(r,new g3(n)),t.Oa=t.Oa.insert(n,r),tf(t.remoteStore,new fr(cn(Kh(n.path)),r,"TargetPurposeLimboResolution",Ht.oe))}}async function Ri(t,e,n){const r=re(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(u=>{var h;if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(u){i.push(u);const f=Lv.Wi(l.targetId,u);s.push(f)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,u){const h=re(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>M.forEach(u,p=>M.forEach(p.$i,v=>h.persistence.referenceDelegate.addReference(f,p.targetId,v)).next(()=>M.forEach(p.Ui,v=>h.persistence.referenceDelegate.removeReference(f,p.targetId,v)))))}catch(f){if(!Ci(f))throw f;G("LocalStore","Failed to update sequence numbers: "+f)}for(const f of u){const p=f.targetId;if(!f.fromCache){const v=h.os.get(p),b=v.snapshotVersion,T=v.withLastLimboFreeSnapshotVersion(b);h.os=h.os.insert(p,T)}}}(r.localStore,s))}async function A3(t,e){const n=re(t);if(!n.currentUser.isEqual(e)){G("SyncEngine","User change. New user:",e.toKey());const r=await Xk(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new Y(z.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ri(n,r.hs)}}function k3(t,e){const n=re(t),r=n.Na.get(e);if(r&&r.va)return pe().add(r.key);{let i=pe();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}async function C3(t,e){const n=re(t),r=await xg(n.localStore,e.query,!0),i=e.view.ba(r);return n.isPrimaryClient&&Sg(n,e.targetId,i.wa),i}async function P3(t,e){const n=re(t);return eC(n.localStore,e).then(r=>Ri(n,r))}async function R3(t,e,n,r){const i=re(t),s=await function(a,l){const u=re(a),h=re(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",f=>h.Mn(f,l).next(p=>p?u.localDocuments.getDocuments(f,p):M.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?await aa(i.remoteStore):n==="acknowledged"||n==="rejected"?(Wv(i,e,r||null),Gv(i,e),function(a,l){re(re(a).mutationQueue).On(l)}(i.localStore,e)):ne(),await Ri(i,s)):G("SyncEngine","Cannot apply mutation batch with id: "+e)}async function N3(t,e){const n=re(t);if(nf(n),Qv(n),e===!0&&n.Qa!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await lE(n,r.toArray());n.Qa=!0,await Eg(n.remoteStore,!0);for(const s of i)tf(n.remoteStore,s)}else if(e===!1&&n.Qa!==!1){const r=[];let i=Promise.resolve();n.Ma.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Yo(n,o),Wo(n.localStore,o,!0))),Ho(n.remoteStore,o)}),await i,await lE(n,r),function(o){const a=re(o);a.Na.forEach((l,u)=>{Ho(a.remoteStore,u)}),a.La.pr(),a.Na=new Map,a.Oa=new Pe(J.comparator)}(n),n.Qa=!1,await Eg(n.remoteStore,!1)}}async function lE(t,e,n){const r=re(t),i=[],s=[];for(const o of e){let a;const l=r.Ma.get(o);if(l&&l.length!==0){a=await eh(r.localStore,cn(l[0]));for(const u of l){const h=r.Fa.get(u),f=await C3(r,h);f.snapshot&&s.push(f.snapshot)}}else{const u=await Zk(r.localStore,o);a=await eh(r.localStore,u),await Kv(r,_C(u),o,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(s),i}function _C(t){return sk(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function D3(t){return function(n){return re(re(n).persistence).Qi()}(re(t).localStore)}async function V3(t,e,n,r){const i=re(t);if(i.Qa)return void G("SyncEngine","Ignoring unexpected query state notification.");const s=i.Ma.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await eC(i.localStore,lk(s[0])),a=kc.createSynthesizedRemoteEventForCurrentChange(e,n==="current",et.EMPTY_BYTE_STRING);await Ri(i,o,a);break}case"rejected":await Wo(i.localStore,e,!0),Yo(i,e,r);break;default:ne()}}async function j3(t,e,n){const r=nf(t);if(r.Qa){for(const i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){G("SyncEngine","Adding an already active target "+i);continue}const s=await Zk(r.localStore,i),o=await eh(r.localStore,s);await Kv(r,_C(s),o.targetId,!1,o.resumeToken),tf(r.remoteStore,o)}for(const i of n)r.Ma.has(i)&&await Wo(r.localStore,i,!1).then(()=>{Ho(r.remoteStore,i),Yo(r,i)}).catch(ki)}}function nf(t){const e=re(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=yC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=k3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=E3.bind(null,e),e.Ca.d_=h3.bind(null,e.eventManager),e.Ca.$a=f3.bind(null,e.eventManager),e}function Qv(t){const e=re(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=T3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=S3.bind(null,e),e}class lc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Zh(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return Yk(this.persistence,new Qk,e.initialUser,this.serializer)}Ga(e){return new Wk(Jh.Zr,this.serializer)}Wa(e){return new nC}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}lc.provider={build:()=>new lc};class O3 extends lc{constructor(e,n,r){super(),this.Ja=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await Qv(this.Ja.syncEngine),await aa(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return Yk(this.persistence,new Qk,e.initialUser,this.serializer)}ja(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new EU(r,e.asyncQueue,n)}Ha(e,n){const r=new n5(n,this.persistence);return new t5(e.asyncQueue,r)}Ga(e){const n=Hk(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Kt.withCacheSize(this.cacheSizeBytes):Kt.DEFAULT;return new Ov(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,rC(),id(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new nC}}class L3 extends O3{constructor(e,n){super(e,n,!1),this.Ja=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Ja.syncEngine;this.sharedClientState instanceof Rp&&(this.sharedClientState.syncEngine={no:R3.bind(null,n),ro:V3.bind(null,n),io:j3.bind(null,n),Qi:D3.bind(null,n),eo:P3.bind(null,n)},await this.sharedClientState.start()),await this.persistence.yi(async r=>{await N3(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Wa(e){const n=rC();if(!Rp.D(n))throw new Y(z.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Hk(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Rp(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class ih{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>aE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=A3.bind(null,this.syncEngine),await Eg(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new d3}()}createDatastore(e){const n=Zh(e.databaseInfo.databaseId),r=function(s){return new HU(s)}(e.databaseInfo);return function(s,o,a,l){return new XU(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new ZU(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>aE(this.syncEngine,n,0),function(){return nE.D()?new nE:new KU}())}createSyncEngine(e,n){return function(i,s,o,a,l,u,h){const f=new y3(i,s,o,a,l,u);return h&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=re(i);G("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Pc(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}ih.provider={build:()=>new ih};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ze("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M3{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ht.UNAUTHENTICATED,this.clientId=jA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{G("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(G("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Yn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=$v(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Dp(t,e){t.asyncQueue.verifyOperationInProgress(),G("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Xk(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function cE(t,e){t.asyncQueue.verifyOperationInProgress();const n=await F3(t);G("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>rE(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>rE(e.remoteStore,i)),t._onlineComponents=e}async function F3(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){G("FirestoreClient","Using user provided OfflineComponentProvider");try{await Dp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===z.FAILED_PRECONDITION||i.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;gs("Error using user provided cache. Falling back to memory cache: "+n),await Dp(t,new lc)}}else G("FirestoreClient","Using default OfflineComponentProvider"),await Dp(t,new lc);return t._offlineComponents}async function xC(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(G("FirestoreClient","Using user provided OnlineComponentProvider"),await cE(t,t._uninitializedComponentsProvider._online)):(G("FirestoreClient","Using default OnlineComponentProvider"),await cE(t,new ih))),t._onlineComponents}function U3(t){return xC(t).then(e=>e.syncEngine)}async function bC(t){const e=await xC(t),n=e.eventManager;return n.onListen=v3.bind(null,e.syncEngine),n.onUnlisten=w3.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=_3.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=x3.bind(null,e.syncEngine),n}function B3(t,e,n={}){const r=new Yn;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const h=new wC({next:p=>{h.Za(),o.enqueueAndForget(()=>hC(s,f));const v=p.docs.has(a);!v&&p.fromCache?u.reject(new Y(z.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&p.fromCache&&l&&l.source==="server"?u.reject(new Y(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new fC(Kh(a.path),h,{includeMetadataChanges:!0,_a:!0});return dC(s,f)}(await bC(t),t.asyncQueue,e,n,r)),r.promise}function z3(t,e,n={}){const r=new Yn;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const h=new wC({next:p=>{h.Za(),o.enqueueAndForget(()=>hC(s,f)),p.fromCache&&l.source==="server"?u.reject(new Y(z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new fC(a,h,{includeMetadataChanges:!0,_a:!0});return dC(s,f)}(await bC(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EC(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TC(t,e,n){if(!n)throw new Y(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function $3(t,e,n,r){if(e===!0&&r===!0)throw new Y(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function dE(t){if(!J.isDocumentKey(t))throw new Y(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function hE(t){if(J.isDocumentKey(t))throw new Y(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function rf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ne()}function Ar(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Y(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=rf(t);throw new Y(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Y(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Y(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}$3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=EC((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Y(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Y(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Y(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class sf{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fE({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Y(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Y(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fE(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new qF;switch(r.type){case"firstParty":return new HF(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Y(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=uE.get(n);r&&(G("ComponentProvider","Removing Datastore"),uE.delete(n),r.terminate())}(this),Promise.resolve()}}function q3(t,e,n,r={}){var i;const s=(t=Ar(t,sf))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&gs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=ht.MOCK_USER;else{a=UI(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new Y(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new ht(u)}t._authCredentials=new KF(new VA(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ca(this.firestore,e,this._query)}}class Zt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Zt(this.firestore,e,this._key)}}class fi extends ca{constructor(e,n,r){super(e,n,Kh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Zt(this.firestore,null,new J(e))}withConverter(e){return new fi(this.firestore,e,this._path)}}function Br(t,e,...n){if(t=Ye(t),TC("collection","path",e),t instanceof sf){const r=Ee.fromString(e,...n);return hE(r),new fi(t,null,r)}{if(!(t instanceof Zt||t instanceof fi))throw new Y(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ee.fromString(e,...n));return hE(r),new fi(t.firestore,null,r)}}function yn(t,e,...n){if(t=Ye(t),arguments.length===1&&(e=jA.newId()),TC("doc","path",e),t instanceof sf){const r=Ee.fromString(e,...n);return dE(r),new Zt(t,null,new J(r))}{if(!(t instanceof Zt||t instanceof fi))throw new Y(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ee.fromString(e,...n));return dE(r),new Zt(t.firestore,t instanceof fi?t.converter:null,new J(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new iC(this,"async_queue_retry"),this.Vu=()=>{const r=id();r&&G("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=id();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=id();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Yn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ci(e))throw e;G("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Ze("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=zv.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&ne()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class ua extends sf{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new pE,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new pE(e),this._firestoreClient=void 0,await e}}}function mE(t,e){const n=typeof t=="object"?t:cv(),r=typeof t=="string"?t:"(default)",i=Lh(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=LI("firestore");s&&q3(i,...s)}return i}function of(t){if(t._terminated)throw new Y(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||SC(t),t._firestoreClient}function SC(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,u,h){return new E5(a,l,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,EC(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new M3(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}async function K3(t){gs("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();G3(t,ih.provider,{build:n=>new L3(n,e.cacheSizeBytes)})}function G3(t,e,n){if((t=Ar(t,ua))._firestoreClient||t._terminated)throw new Y(z.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new Y(z.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},SC(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Xo(et.fromBase64String(e))}catch(n){throw new Y(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Xo(et.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Y(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Be(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Y(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Y(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ue(this._lat,e._lat)||ue(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W3=/^__.*__$/;class H3{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Cr(e,this.data,this.fieldMask,n,this.fieldTransforms):new oa(e,this.data,n,this.fieldTransforms)}}class IC{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Cr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function AC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ne()}}class Jv{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Jv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return sh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(AC(this.Cu)&&W3.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Q3{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Zh(e)}Qu(e,n,r,i=!1){return new Jv({Cu:e,methodName:n,qu:r,path:Be.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Zv(t){const e=t._freezeSettings(),n=Zh(t._databaseId);return new Q3(t._databaseId,!!e.ignoreUndefinedProperties,n)}function kC(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);t0("Data must be an object, but it was:",o,r);const a=CC(r,o);let l,u;if(s.merge)l=new Qt(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const f of s.mergeFields){const p=Ig(e,f,n);if(!o.contains(p))throw new Y(z.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);RC(h,p)||h.push(p)}l=new Qt(h),u=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,u=o.fieldTransforms;return new H3(new Pt(a),l,u)}class cf extends lf{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof cf}}class e0 extends lf{_toFieldTransform(e){return new vk(e.path,new $o)}isEqual(e){return e instanceof e0}}function Y3(t,e,n,r){const i=t.Qu(1,e,n);t0("Data must be an object, but it was:",i,r);const s=[],o=Pt.empty();Ns(r,(l,u)=>{const h=n0(e,l,n);u=Ye(u);const f=i.Nu(h);if(u instanceof cf)s.push(h);else{const p=Rc(u,f);p!=null&&(s.push(h),o.set(h,p))}});const a=new Qt(s);return new IC(o,a,i.fieldTransforms)}function X3(t,e,n,r,i,s){const o=t.Qu(1,e,n),a=[Ig(e,r,n)],l=[i];if(s.length%2!=0)throw new Y(z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(Ig(e,s[p])),l.push(s[p+1]);const u=[],h=Pt.empty();for(let p=a.length-1;p>=0;--p)if(!RC(u,a[p])){const v=a[p];let b=l[p];b=Ye(b);const T=o.Nu(v);if(b instanceof cf)u.push(v);else{const A=Rc(b,T);A!=null&&(u.push(v),h.set(v,A))}}const f=new Qt(u);return new IC(h,f,o.fieldTransforms)}function J3(t,e,n,r=!1){return Rc(n,t.Qu(r?4:3,e))}function Rc(t,e){if(PC(t=Ye(t)))return t0("Unsupported field value:",e,t),CC(t,e);if(t instanceof lf)return function(r,i){if(!AC(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Rc(a,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Ye(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return U5(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=$e.fromDate(r);return{timestampValue:Go(i.serializer,s)}}if(r instanceof $e){const s=new $e(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Go(i.serializer,s)}}if(r instanceof Yv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Xo)return{bytesValue:Sk(i.serializer,r._byteString)};if(r instanceof Zt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Nv(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Xv)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return Av(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${rf(r)}`)}(t,e)}function CC(t,e){const n={};return WA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ns(t,(r,i)=>{const s=Rc(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function PC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof $e||t instanceof Yv||t instanceof Xo||t instanceof Zt||t instanceof lf||t instanceof Xv)}function t0(t,e,n){if(!PC(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=rf(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Ig(t,e,n){if((e=Ye(e))instanceof af)return e._internalPath;if(typeof e=="string")return n0(t,e);throw sh("Field path arguments must be of type string or ",t,!1,void 0,n)}const Z3=new RegExp("[~\\*/\\[\\]]");function n0(t,e,n){if(e.search(Z3)>=0)throw sh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new af(...e.split("."))._internalPath}catch{throw sh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function sh(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Y(z.INVALID_ARGUMENT,a+t+l)}function RC(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Zt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new eB(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(r0("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class eB extends NC{data(){return super.data()}}function r0(t,e){return typeof e=="string"?n0(t,e):e instanceof af?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tB(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Y(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class i0{}class nB extends i0{}function gE(t,e,...n){let r=[];e instanceof i0&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof s0).length,a=s.filter(l=>l instanceof uf).length;if(o>1||o>0&&a>0)throw new Y(z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class uf extends nB{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new uf(e,n,r)}_apply(e){const n=this._parse(e);return DC(e._query,n),new ca(e.firestore,e.converter,hg(e._query,n))}_parse(e){const n=Zv(e.firestore);return function(s,o,a,l,u,h,f){let p;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new Y(z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){_E(f,h);const v=[];for(const b of f)v.push(vE(l,s,b));p={arrayValue:{values:v}}}else p=vE(l,s,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||_E(f,h),p=J3(a,o,f,h==="in"||h==="not-in");return ye.create(u,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function yE(t,e,n){const r=e,i=r0("where",t);return uf._create(i,r,n)}class s0 extends i0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new s0(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Te.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)DC(o,l),o=hg(o,l)}(e._query,n),new ca(e.firestore,e.converter,hg(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function vE(t,e,n){if(typeof(n=Ye(n))=="string"){if(n==="")throw new Y(z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ok(e)&&n.indexOf("/")!==-1)throw new Y(z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ee.fromString(n));if(!J.isDocumentKey(r))throw new Y(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return sc(t,new J(r))}if(n instanceof Zt)return sc(t,n._key);throw new Y(z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${rf(n)}.`)}function _E(t,e){if(!Array.isArray(t)||t.length===0)throw new Y(z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function DC(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Y(z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Y(z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class rB{convertValue(e,n="none"){switch(vs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Le(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(_i(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ne()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ns(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Le(o.doubleValue));return new Xv(s)}convertGeoPoint(e){return new Yv(Le(e.latitude),Le(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Tv(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(rc(e));default:return null}}convertTimestamp(e){const n=Ir(e);return new $e(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ee.fromString(e);se(jk(r));const i=new ys(r.get(1),r.get(3)),s=new J(r.popFirst(5));return i.isEqual(n)||Ze(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VC(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class jC extends NC{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new sd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(r0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class sd extends jC{data(e={}){return super.data(e)}}class iB{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new sl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new sd(this._firestore,this._userDataWriter,r.key,r,new sl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Y(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new sd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new sl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new sd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new sl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:sB(a.type),doc:l,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function sB(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ne()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function es(t){t=Ar(t,Zt);const e=Ar(t.firestore,ua);return B3(of(e),t._key).then(n=>oB(e,t,n))}class OC extends rB{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Zt(this.firestore,null,n)}}function Xs(t){t=Ar(t,ca);const e=Ar(t.firestore,ua),n=of(e),r=new OC(e);return tB(t._query),z3(n,t._query).then(i=>new iB(e,r,t,i))}function ts(t,e,n){t=Ar(t,Zt);const r=Ar(t.firestore,ua),i=VC(t.converter,e,n);return LC(r,[kC(Zv(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Nt.none())])}function LC(t,e){return function(r,i){const s=new Yn;return r.asyncQueue.enqueueAndForget(async()=>b3(await U3(r),i,s)),s.promise}(of(t),e)}function oB(t,e,n){const r=n.docs.get(e._key),i=new OC(t);return new jC(t,i,e._key,r,new sl(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aB{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Zv(e)}set(e,n,r){this._verifyNotCommitted();const i=Vp(e,this._firestore),s=VC(i.converter,n,r),o=kC(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Nt.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=Vp(e,this._firestore);let o;return o=typeof(n=Ye(n))=="string"||n instanceof af?X3(this._dataReader,"WriteBatch.update",s._key,n,r,i):Y3(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Nt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Vp(e,this._firestore);return this._mutations=this._mutations.concat(new Qh(n._key,Nt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Y(z.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Vp(t,e){if((t=Ye(t)).firestore!==e)throw new Y(z.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function za(){return new e0("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function od(t){return of(t=Ar(t,ua)),new aB(t,e=>LC(t,e))}(function(e,n=!0){(function(i){sa=i})(Ps),fs(new vi("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new ua(new GF(r.getProvider("auth-internal")),new YF(r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Y(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ys(u.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Wn(cb,"4.7.3",e),Wn(cb,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC="firebasestorage.googleapis.com",FC="storageBucket",lB=2*60*1e3,cB=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt extends Jn{constructor(e,n,r=0){super(jp(e),`Firebase Storage: ${n} (${jp(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,mt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return jp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var pt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(pt||(pt={}));function jp(t){return"storage/"+t}function UC(){const t="An unknown error occurred, please check the error payload for server response.";return new mt(pt.UNKNOWN,t)}function uB(t){return new mt(pt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function dB(t){return new mt(pt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function hB(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new mt(pt.UNAUTHENTICATED,t)}function fB(){return new mt(pt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function pB(t){return new mt(pt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function mB(){return new mt(pt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function gB(){return new mt(pt.CANCELED,"User canceled the upload/download.")}function yB(t){return new mt(pt.INVALID_URL,"Invalid URL '"+t+"'.")}function vB(t){return new mt(pt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function _B(){return new mt(pt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+FC+"' property when initializing the app?")}function wB(){return new mt(pt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Ag(t){return new mt(pt.INVALID_ARGUMENT,t)}function BC(){return new mt(pt.APP_DELETED,"The Firebase app was deleted.")}function xB(t){return new mt(pt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function $a(t){throw new mt(pt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=an.makeFromUrl(e,n)}catch{return new an(e,"")}if(r.path==="")return r;throw vB(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(P){P.path.charAt(P.path.length-1)==="/"&&(P.path_=P.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function u(P){P.path_=decodeURIComponent(P.path)}const h="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",v=new RegExp(`^https?://${f}/${h}/b/${i}/o${p}`,"i"),b={bucket:1,path:3},T=n===MC?"(?:storage.googleapis.com|storage.cloud.google.com)":n,A="([^?#]*)",_=new RegExp(`^https?://${T}/${i}/${A}`,"i"),w=[{regex:a,indices:l,postModify:s},{regex:v,indices:b,postModify:u},{regex:_,indices:{bucket:1,path:2},postModify:u}];for(let P=0;P<w.length;P++){const V=w[P],O=V.regex.exec(e);if(O){const I=O[V.indices.bucket];let x=O[V.indices.path];x||(x=""),r=new an(I,x),V.postModify(r);break}}if(r==null)throw yB(e);return r}}class bB{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EB(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let u=!1;function h(...A){u||(u=!0,e.apply(null,A))}function f(A){i=setTimeout(()=>{i=null,t(v,l())},A)}function p(){s&&clearTimeout(s)}function v(A,..._){if(u){p();return}if(A){p(),h.call(null,A,..._);return}if(l()||o){p(),h.call(null,A,..._);return}r<64&&(r*=2);let w;a===1?(a=2,w=0):w=(r+Math.random())*1e3,f(w)}let b=!1;function T(A){b||(b=!0,p(),!u&&(i!==null?(A||(a=2),clearTimeout(i),f(0)):A||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,T(!0)},n),T}function TB(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SB(t){return t!==void 0}function IB(t){return typeof t=="object"&&!Array.isArray(t)}function zC(t){return typeof t=="string"||t instanceof String}function wE(t,e,n,r){if(r<e)throw Ag(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Ag(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $C(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function qC(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var as;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(as||(as={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AB(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kB{constructor(e,n,r,i,s,o,a,l,u,h,f,p=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=f,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,b)=>{this.resolve_=v,this.reject_=b,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Su(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===as.NO_ERROR,l=s.getStatus();if(!a||AB(l,this.additionalRetryCodes_)&&this.retry){const h=s.getErrorCode()===as.ABORT;r(!1,new Su(!1,null,h));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new Su(u,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());SB(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=UC();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?BC():gB();o(l)}else{const l=mB();o(l)}};this.canceled_?n(!1,new Su(!1,null,!0)):this.backoffId_=EB(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&TB(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Su{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function CB(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function PB(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function RB(t,e){e&&(t["X-Firebase-GMPID"]=e)}function NB(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function DB(t,e,n,r,i,s,o=!0){const a=qC(t.urlParams),l=t.url+a,u=Object.assign({},t.headers);return RB(u,e),CB(u,n),PB(u,s),NB(u,r),new kB(l,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KC(t){let e;try{e=JSON.parse(t)}catch{return null}return IB(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VB(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function jB(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function GC(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OB(t,e){return e}class Mt{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||OB}}let Iu=null;function LB(t){return!zC(t)||t.length<2?t:GC(t)}function MB(){if(Iu)return Iu;const t=[];t.push(new Mt("bucket")),t.push(new Mt("generation")),t.push(new Mt("metageneration")),t.push(new Mt("name","fullPath",!0));function e(s,o){return LB(o)}const n=new Mt("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Mt("size");return i.xform=r,t.push(i),t.push(new Mt("timeCreated")),t.push(new Mt("updated")),t.push(new Mt("md5Hash",null,!0)),t.push(new Mt("cacheControl",null,!0)),t.push(new Mt("contentDisposition",null,!0)),t.push(new Mt("contentEncoding",null,!0)),t.push(new Mt("contentLanguage",null,!0)),t.push(new Mt("contentType",null,!0)),t.push(new Mt("metadata","customMetadata",!0)),Iu=t,Iu}function FB(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new an(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function UB(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return FB(r,t),r}function BB(t,e,n){const r=KC(e);return r===null?null:UB(t,r,n)}function zB(t,e,n,r){const i=KC(e);if(i===null||!zC(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(u=>{const h=t.bucket,f=t.fullPath,p="/b/"+o(h)+"/o/"+o(f),v=$C(p,n,r),b=qC({alt:"media",token:u});return v+b})[0]}class $B{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qB(t){if(!t)throw UC()}function KB(t,e){function n(r,i){const s=BB(t,i,e);return qB(s!==null),zB(s,i,t.host,t._protocol)}return n}function GB(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=fB():i=hB():n.getStatus()===402?i=dB(t.bucket):n.getStatus()===403?i=pB(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function WB(t){const e=GB(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=uB(t.path)),s.serverResponse=i.serverResponse,s}return n}function HB(t,e,n){const r=e.fullServerUrl(),i=$C(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new $B(i,s,KB(t,n),o);return a.errorHandler=WB(e),a}class QB{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=as.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=as.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=as.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw $a("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw $a("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw $a("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw $a("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw $a("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class YB extends QB{initXhr(){this.xhr_.responseType="text"}}function XB(){return new YB}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e,n){this._service=e,n instanceof an?this._location=n:this._location=an.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Es(e,n)}get root(){const e=new an(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return GC(this._location.path)}get storage(){return this._service}get parent(){const e=VB(this._location.path);if(e===null)return null;const n=new an(this._location.bucket,e);return new Es(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw xB(e)}}function JB(t){t._throwIfRoot("getDownloadURL");const e=HB(t.storage,t._location,MB());return t.storage.makeRequestWithTokens(e,XB).then(n=>{if(n===null)throw wB();return n})}function ZB(t,e){const n=jB(t._location.path,e),r=new an(t._location.bucket,n);return new Es(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e6(t){return/^[A-Za-z]+:\/\//.test(t)}function t6(t,e){return new Es(t,e)}function WC(t,e){if(t instanceof o0){const n=t;if(n._bucket==null)throw _B();const r=new Es(n,n._bucket);return e!=null?WC(r,e):r}else return e!==void 0?ZB(t,e):t}function n6(t,e){if(e&&e6(e)){if(t instanceof o0)return t6(t,e);throw Ag("To use ref(service, url), the first argument must be a Storage instance.")}else return WC(t,e)}function xE(t,e){const n=e==null?void 0:e[FC];return n==null?null:an.makeFromBucketSpec(n,t)}function r6(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:UI(i,t.app.options.projectId))}class o0{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=MC,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=lB,this._maxUploadRetryTime=cB,this._requests=new Set,i!=null?this._bucket=an.makeFromBucketSpec(i,this._host):this._bucket=xE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=an.makeFromBucketSpec(this._url,e):this._bucket=xE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){wE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){wE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Es(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new bB(BC());{const o=DB(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const bE="@firebase/storage",EE="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC="storage";function i6(t){return t=Ye(t),JB(t)}function s6(t,e){return t=Ye(t),n6(t,e)}function o6(t=cv(),e){t=Ye(t);const r=Lh(t,HC).getImmediate({identifier:e}),i=LI("storage");return i&&a6(r,...i),r}function a6(t,e,n,r={}){r6(t,e,n,r)}function l6(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new o0(n,r,i,e,Ps)}function c6(){fs(new vi(HC,l6,"PUBLIC").setMultipleInstances(!0)),Wn(bE,EE,""),Wn(bE,EE,"esm2017")}c6();const Vs={apiKey:"AIzaSyB5RqeXVGSF0nB-3Y7hsiChamqdf7XMRv8",authDomain:"swgoh-tw-guide.firebaseapp.com",projectId:"swgoh-tw-guide",storageBucket:"swgoh-tw-guide.firebasestorage.app",messagingSenderId:"25054528199",appId:"1:25054528199:web:9154ba45e0d0b79f1ab4e2"};if(!Vs.apiKey)throw new Error("Firebase API Key is missing");if(!Vs.authDomain)throw new Error("Firebase Auth Domain is missing");if(!Vs.projectId)throw new Error("Firebase Project ID is missing");if(!Vs.storageBucket)throw new Error("Firebase Storage Bucket is missing");if(!Vs.messagingSenderId)throw new Error("Firebase Messaging Sender ID is missing");if(!Vs.appId)throw new Error("Firebase App ID is missing");const Qi=class Qi{constructor(){nn(this,"app");nn(this,"_auth");nn(this,"_db");nn(this,"_storage");nn(this,"initialized",!1);Lx().length===0?this.app=KI(Vs):this.app=Lx()[0],this._auth=zF(this.app),this._db=mE(this.app),this._storage=o6(this.app),this.setupPersistence(),this.setupAuthStateMonitoring(),this.initialized=!0}static getInstance(){return Qi.instance||(Qi.instance=new Qi),Qi.instance}async setupPersistence(){try{this._db=mE(this.app),await K3(this._db),console.log("Offline persistence enabled")}catch(e){if(e instanceof Error&&"code"in e)switch(e.code){case"failed-precondition":console.warn("Multiple tabs open, offline persistence can only be enabled in one tab at a time.");break;case"unimplemented":console.warn("The current browser does not support offline persistence.");break;default:console.error("Error enabling offline persistence:",e)}else console.error("Unknown error enabling offline persistence:",e)}}setupAuthStateMonitoring(){yA(this._auth,e=>{e?console.log("User is signed in:",e.uid):console.log("User is signed out")},e=>{console.error("Auth state change error:",e)})}connectToEmulators(){}get auth(){return this._auth}get db(){return this._db}get storage(){return this._storage}get isInitialized(){return this.initialized}async waitForInitialization(){if(!this.initialized)return new Promise(e=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),e())},100)})}};nn(Qi,"instance");let kg=Qi;const df=kg.getInstance(),ol=df.auth,Ge=df.db,u6=df.storage,d6=()=>df.waitForInitialization(),h6={triple_zero:"triplezero",fifty_rt:"50rt",arc_trooper:"trooperclone_arc",aayla_secura:"aaylasecura",admiral_ackbar:"ackbaradmiral",admiral_piett:"piett",admiral_raddus:"admiralraddus",admiral_trench:"admiraltrench",ahsoka_fulcrum:"ahsokaadult",ahsoka_snips:"ahsoka",amilyn_holdo:"holdo",asajj_ventress:"ventress",aurra_sing:"aurrasing",b1_battle_droid:"b1",b2_super_battle_droid:"b2",bb_8:"bb8",battle_droid_1:"bt1",barriss_offee:"barriss_light",bastila_shan:"bastilashan",bastila_fallen:"bastilashan_dark",baylan_skoll:"baylanskoll",baze_malbus:"bazemalbus",ben_solo:"bensolo",biggs:"rebelpilot_biggs",bistan:"bistan",bo_katan_mandalore:"mandalorbokatan",bo_katan_kryze:"bokatan",boba_fett:"bobafett",boba_fett_scion:"bobafettold",bodhi_rook:"bodhi",boss_nass:"bossnass",bossk:"bossk",boushh_leia:"boushh",c3po:"c3po",cc_2224_cody:"trooperclone_cody",ct_21_0408_echo:"trooperclone_echo",ct_5555_fives:"trooperclone_fives",ct_7567_rex:"trooperclone_rex",cad_bane:"cadbane",cal_kestis:"calkestis",canderous_ordo:"canderous",captain_drogan:"captaindrogan",captain_enoch:"captainenoch",captain_han_solo:"hoth_han",captain_phasma:"phasma",captain_rex:"captainrex",captain_tarpals:"captaintarpals",cara_dune:"caradune",carth_onasi:"carth",cassian_andor:"cassian",cera_junda:"cerejunda",chewbacca_ot:"chewbacca_ot",chief_chirpa:"ewok_chirpa",chief_nebit:"jawa_nebit",chirrut_imwe:"chirrut",chopper:"chopper",clone_sergeant:"trooperclonegreen",clone_chewbacca:"chewbacca",colonel_stark:"colonel_stark",commander_ahsoka:"commanderahsokatano",lukebespin:"lukebespin",coruscant_police:"coruscantpolice",count_dooku:"dooku",old_daka:"daka",dark_trooper:"darktrooper",dark_trooper_moff:"moffgideons3",darth_bane:"darthbane",darth_malak:"darthmalak",darth_malgus:"darthmalgus",darth_maul:"maul",darth_nihilus:"nihilus",darth_revan:"sithrevan",darth_sidious:"sidious",darth_sion:"sion",darth_talon:"darthtalon",darth_traya:"traya",darth_vader:"vader",dash_rendar:"dashrendar",dathcha:"jawa_dathcha",death_trooper_peridea:"deathtrooperperidea",death_trooper:"trooperdeath",dengar:"dengar",director_krennic:"krennic",doctor_aphra:"doctoraphra",droideka:"droideka",echo:"bb_echo",eeth_koth:"eethkoth",eighth_brother:"eighthbrother",embo:"embo",emperor_palpatine:"palpatineemperor",enfy_nest:"enfys",ewok_elder:"ewok_chief",ewok_scout:"ewok_scout",ezra_bridger:"ezra_s3",ezra_exile:"ezraexile",fennec_shand:"fennec",fifth_brother:"fifthbrother",finn:"finnjakku",fo_executioner:"firstorder_executioner",fo_officer:"firstorderofficer",fo_sf_tie_pilot:"firstorder_pilot",fo_stormtrooper:"firstordertrooper",fo_tie_pilot:"firstordertiepilot",gamorrean_guard:"gamorreanguard",gar_saxon:"gar_saxon",garazeb_zeb:"zeb_s3",general_grievous:"grievous",general_hux:"generalhux",general_kenobi:"obiwangeneral",general_skywalker:"generalanakin",general_veers:"veers",geonosian_brood_alpha:"geonosian_broodalpha",geonosian_soldier:"geonosian_soldier",geonosian_spy:"geonosian_spy",grand_admiral_thrawn:"thrawn",grand_inquisitor:"grandinquisitor",grand_master_yoda:"yodagrandmaster",grand_moff_tarkin:"tarkinadmiral",great_mothers:"greatmothers",greef_karga:"greefkarga",greedo:"greedo",gungan_bombardier:"gunganboomadier",gungan_phalanx:"gunganphalanx",hk_47:"hk47",han:"han",hera_syndulla:"hera_s3",hermit_yoda:"yodahermit",hondo_ohnaka:"hondoohnaka",hoth_rebel_scout:"rebelhothscout",hoth_rebel_soldier:"rebelhoth",hunter:"bb_hunter",ig_100_magnaguard:"magnaguard",ig_11:"ig11_nurse",ig_12_grogu:"ig12",ig_86:"ig86",ig_88:"ig88",iden_versio:"idenversioempire",ima_gun_di:"imagundi",imperial_probe_droid:"probedroid",imperial_super_commando:"imperial_super_commando",jabba_the_hutt:"jabbathehutt",jango_fett:"jangofett",jar_jar_binks:"jarjarbinks",jawa:"jawa_jawa",jawa_engineer:"jawa_engineer",jawa_scavenger:"jawa_scavenger",jedi_consular:"jedi_consular_03",jedi_knight_anakin:"anakinjedi",jedi_knight_guardian:"jedi_guardian_01",jedi_knight_cal_kestis:"jediknightcal",jedi_knight_luke:"luke_jediknight",jedi_knight_revan:"jedirevan",jedi_master_kenobi:"globiwan",jedi_master_luke:"luke_jml",jolee_bindo:"joleebindo",juhani:"juhani",jyn_erso:"jyn",k_2so:"k2so",kanan_jarrus:"kanan_s3",kelleran_beq:"kelleranbeq",ki_adi_mundi:"kiadimundi",kit_fisto:"kitfisto",krrsantan:"krrsantan",kuiil:"kuiil",kyle_katarn:"kylekatarn",kylo_ren:"kyloren",kylo_ren_unmasked:"kylo_unmasked",l3_37:"l337",lando_calrissian:"landobespin",leia_organa:"leiaendor",lobot:"lobot",logray:"ewok_logray",lord_vader:"lordvader",luke_farmboy:"luke_ep4",luminara_unduli:"luminara",luthen_rael:"luthenrael",mace_windu:"macewindu",magmatrooper:"trooperstorm_magma",mara_jade:"marajade",marrok:"marrok",master_qui_gon:"masterquigon",maul:"maul_cyborg",merrin:"merrin",mission_vao:"mission",mob_enforcer:"mob_enforcer",moff_gideon:"moffgideon",mon_mothma:"monmothma",morgan_elsbeth:"morganelsbeth",mother_talzin:"nightsisters_talzin",night_trooper:"nighttrooper_a",nightsister_acolyte:"nightsister_acolyte",nightsister_initiate:"nightsister_initiate",nightsister_spirit:"nightsisters_wraith",nightsister_zombie:"nightsisters_zombie",ninth_sister:"ninthsister",nute_gunray:"nutegunray",obi_wan_old_ben:"obiwanep4",omega:"badbatchomega",padawan_obiwan:"padawanobiwan",padawan_sabine:"padawansabine",padme_amidala:"padme_geonosis",pao:"pao",paploo:"ewok_paploo",paz_vizsla:"pazvizsla",plo_koon:"plokoon",poe_dameron:"poe",poggle_the_lesser:"geonosian_poggle",princess_kneesaa:"princesskneesaa",princess_leia:"leia_princess",qira:"qira",queen_amidala:"queenamidala",qui_gon_jinn:"quigon",r2_d2:"r2d2",range_trooper:"trooperranger",rebel_officer_leia:"leiahoth",resistance_hero_finn:"finn",resistance_hero_poe:"poe_tros",resistance_pilot:"resistancepilot",resistance_trooper:"resistancetrooper",rey_gl:"reyjakku",rey_jedi_training:"rey_tlj",rey_scavenger:"rey_tros",rose_tico:"rose",royal_guard:"royalguard",sabine_wren:"sabine_s3",sana_starros:"sanastarros",savage_opress:"savageopress",saw_gerrera:"sawgerrera",scarif_rebel_pathfinder:"rebel_scarif",scout_trooper:"trooperscout",second_sister:"secondsister",seventh_sister:"seventhsister",shaak_ti:"shaakti",shin_hati:"shinhati",shoretrooper:"troopershore",sith_assassin:"sithassassin",sith_empire_trooper:"sithtrooper",sith_eternal_emperor:"espalpatine_pre",sith_marauder:"sithmarauder",sith_trooper:"firstorder_sithtrooper",skiff_guard_lando:"undercoverlando",snowtrooper:"troopersnow",stap:"stap",starkiller:"starkiller",stormtrooper:"trooperstorm",stormtrooper_han:"trooperstorm_han",sun_fac:"geonosian_sunfac",supreme_leader_kylo:"kyloren_tros",t3_m4:"t3m4",talia:"talia",tarfful:"tarfful",taron_malicos:"taronmalicos",tech:"bb_tech",teebo:"ewok_teebo",the_armorer:"armorer",the_mandalorian:"mandalorian",the_mandalorian_beskar:"mandobeskar",third_sister:"thirdsister",chewbacca_c3po:"chewbacca_c3po",tusken_chieftain:"tuskenchieftain",tusken_raider:"tuskenraider",tusken_shaman:"tuskenshaman",tusken_warrior:"tuskenhuntress",urorrurrr:"urorrurrr",ugnaught:"ugnaught",vandor_chewbacca:"chewbacca_vandor",veteran_smuggler_han:"tfa_han",visas_marr:"visas",wampa:"wampa",wat_tambor:"wattambor",wedge_antilles:"rebelpilot_wedge",wicket:"ewok_wicket",wrecker:"bb_wrecker",young_han_solo:"han_young",young_lando:"younglando",zaalbar:"zaalbar",zam_wesell:"zamwesell",zorii_bliss:"zoriibliss"},f6={chimaera:"chimaera",endurance:"venator",executor:"executor",executrix:"stardestroyer",finalizer:"finalizer",home_one:"moncalamarilibertycruiser",profundity:"profundity",leviathan:"leviathan",negotiator:"negotiator",malevolence:"malevolence",furyclassinterceptor:"furyclassinterceptor",ahsoka_tanos_jedi_starfighter:"jedi_fighter_ahsoka",anakins_eta2:"jedi_fighter_anakin",b28:"b28extinctionclassbomber",btl_b_y_wing:"ywing_btlb",biggs_darklighter_x_wing:"xwing_red3",bistan_u_wing:"uwing",cassians_u_wing:"uwing_hero",clone_sergeants_arc_170:"arc170",comeuppance:"comeuppance",ebon_hawk:"ebonhawk",emperors_shuttle:"imperialshuttle",first_order_sf_tie_fighter:"fosf_tie_fighter",first_order_tie_fighter:"firstorder_tiefighter",fury_class_interceptor:"furyclassinterceptor",fives_umbaran_starfighter:"umbaran_star_fighter",gauntlet_starfighter:"gauntlet",geonosian_soldier_starfighter:"geonosis_fighter_soldier",geonosian_spy_starfighter:"geonosis_fighter_spy",ghost:"ghost",hans_millennium_falcon:"mfalcon",hounds_tooth:"houndstooth",hyena_bomber:"hyenabomber",ig2000:"ig2000",imperial_tie_bomber:"tiebomber",imperial_tie_fighter:"tiefighter",jedi_consulars_starfighter:"jedi_fighter",kylo_ren_command_shuttle:"upsilon_shuttle_kylo",lando_millennium_falcon:"mil_fal_pristine",mg_100_starfortress:"mg100",marauder:"marauder",mark_v1_interceptor:"sithsupremacyclass",outrider:"outrider",phantom:"phantom2",plo_koons_jedi_starfighter:"jedi_fighter_bladeofdorin",razor_crest:"razorcrest",rexs_arc_170:"arc170_02",scimitar:"sithinfiltrator",sithsupremacyclass:"sithsupremacyclass",slave_1:"slave1",sun_facs_geonosian_starfighter:"geonosis_fighter_sunfac",tie_advanced_x1:"tieadvanced",tie_interceptor:"tie_interceptor_prototype",umbaran_starfighter:"umbaran_star_fighter",vulture_droid:"vulturedroid",xanadu_blood:"xanadublood",rebel_y_wing:"ywing"},Au=(t,...e)=>{console.debug(`[ImageMapping] ${t}`,...e)},Ts=t=>t?t.toLowerCase().replace(/[']/g,"").replace(/[^a-z0-9_\s-]/g,"").trim().replace(/[\s-]+/g,"_"):"";function p6(t,e){if(!t)return Au("No ID provided for image"),"";const n=Ts(t);Au(`Normalized ID: ${n} from ${t}`);const r=e.includes("ship")?f6:h6,i=r[n];return i||(Au(`No mapping found for ID: ${t}, normalized: ${n}, type: ${e}`),Au("Available mappings:",Object.keys(r)),n)}const m6="/assets",Op="/placeholder.png",ku=new Map,Cu=new Map,g6={xs:{width:32,height:32,containerClass:"w-8 h-8"},sm:{width:40,height:40,containerClass:"w-10 h-10"},md:{width:48,height:48,containerClass:"w-12 h-12"},lg:{width:64,height:64,containerClass:"w-16 h-16"},xl:{width:80,height:80,containerClass:"w-20 h-20"}},Lp=(t,...e)=>{},TE=t=>{const{width:e,height:n}=g6[t];return`data:image/svg+xml;charset=utf-8,<svg xmlns='http://www.w3.org/2000/svg' width='${e}' height='${n}' viewBox='0 0 ${e} ${n}'><rect width='100%' height='100%' fill='%231a1e27'/></svg>`},Cg=async(t,e)=>{if(!t)return Op;const n=`${t}-${e}`;if(ku.has(n))return ku.get(n);if(Cu.has(n))return Cu.get(n);const r=(async()=>{try{const i=p6(t,e);if(!i)return Lp(`No mapping found for ${t} (${e})`),Op;const o=`${e.includes("ship")?"ships":"characters"}/${i}.webp`;try{const a=s6(u6,o),l=await i6(a);return ku.set(n,l),Lp(`Successfully loaded Firebase image for ${t}`),l}catch{const l=`${m6}/${o}`;return ku.set(n,l),Lp(`Using local path: ${l}`),l}}catch(i){return console.error(`Failed to load image for ${t}:`,i),Op}finally{Cu.delete(n)}})();return Cu.set(n,r),r};function QC(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=QC(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function YC(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=QC(t))&&(r&&(r+=" "),r+=e);return r}const a0="-",y6=t=>{const e=_6(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(a0);return a[0]===""&&a.length!==1&&a.shift(),XC(a,e)||v6(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},XC=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?XC(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(a0);return(o=e.validators.find(({validator:a})=>a(s)))==null?void 0:o.classGroupId},SE=/^\[(.+)\]$/,v6=t=>{if(SE.test(t)){const e=SE.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},_6=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return x6(Object.entries(t.classGroups),n).forEach(([s,o])=>{Pg(o,r,s,e)}),r},Pg=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:IE(e,i);s.classGroupId=n;return}if(typeof i=="function"){if(w6(i)){Pg(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,o])=>{Pg(o,IE(e,s),n,r)})})},IE=(t,e)=>{let n=t;return e.split(a0).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},w6=t=>t.isThemeGetter,x6=(t,e)=>e?t.map(([n,r])=>{const i=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,a])=>[e+o,a])):s);return[n,i]}):t,b6=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(s,o)=>{n.set(s,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(s){let o=n.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){n.has(s)?n.set(s,o):i(s,o)}}},JC="!",E6=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,i=e[0],s=e.length,o=a=>{const l=[];let u=0,h=0,f;for(let A=0;A<a.length;A++){let _=a[A];if(u===0){if(_===i&&(r||a.slice(A,A+s)===e)){l.push(a.slice(h,A)),h=A+s;continue}if(_==="/"){f=A;continue}}_==="["?u++:_==="]"&&u--}const p=l.length===0?a:a.substring(h),v=p.startsWith(JC),b=v?p.substring(1):p,T=f&&f>h?f-h:void 0;return{modifiers:l,hasImportantModifier:v,baseClassName:b,maybePostfixModifierPosition:T}};return n?a=>n({className:a,parseClassName:o}):o},T6=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},S6=t=>({cache:b6(t.cacheSize),parseClassName:E6(t),...y6(t)}),I6=/\s+/,A6=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,s=[],o=t.trim().split(I6);let a="";for(let l=o.length-1;l>=0;l-=1){const u=o[l],{modifiers:h,hasImportantModifier:f,baseClassName:p,maybePostfixModifierPosition:v}=n(u);let b=!!v,T=r(b?p.substring(0,v):p);if(!T){if(!b){a=u+(a.length>0?" "+a:a);continue}if(T=r(p),!T){a=u+(a.length>0?" "+a:a);continue}b=!1}const A=T6(h).join(":"),_=f?A+JC:A,y=_+T;if(s.includes(y))continue;s.push(y);const w=i(T,b);for(let P=0;P<w.length;++P){const V=w[P];s.push(_+V)}a=u+(a.length>0?" "+a:a)}return a};function k6(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=ZC(e))&&(r&&(r+=" "),r+=n);return r}const ZC=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=ZC(t[r]))&&(n&&(n+=" "),n+=e);return n};function C6(t,...e){let n,r,i,s=o;function o(l){const u=e.reduce((h,f)=>f(h),t());return n=S6(u),r=n.cache.get,i=n.cache.set,s=a,a(l)}function a(l){const u=r(l);if(u)return u;const h=A6(l,n);return i(l,h),h}return function(){return s(k6.apply(null,arguments))}}const De=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},eP=/^\[(?:([a-z-]+):)?(.+)\]$/i,P6=/^\d+\/\d+$/,R6=new Set(["px","full","screen"]),N6=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,D6=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,V6=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,j6=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,O6=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,nr=t=>Ao(t)||R6.has(t)||P6.test(t),Mr=t=>da(t,"length",q6),Ao=t=>!!t&&!Number.isNaN(Number(t)),Mp=t=>da(t,"number",Ao),qa=t=>!!t&&Number.isInteger(Number(t)),L6=t=>t.endsWith("%")&&Ao(t.slice(0,-1)),he=t=>eP.test(t),Fr=t=>N6.test(t),M6=new Set(["length","size","percentage"]),F6=t=>da(t,M6,tP),U6=t=>da(t,"position",tP),B6=new Set(["image","url"]),z6=t=>da(t,B6,G6),$6=t=>da(t,"",K6),Ka=()=>!0,da=(t,e,n)=>{const r=eP.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},q6=t=>D6.test(t)&&!V6.test(t),tP=()=>!1,K6=t=>j6.test(t),G6=t=>O6.test(t),W6=()=>{const t=De("colors"),e=De("spacing"),n=De("blur"),r=De("brightness"),i=De("borderColor"),s=De("borderRadius"),o=De("borderSpacing"),a=De("borderWidth"),l=De("contrast"),u=De("grayscale"),h=De("hueRotate"),f=De("invert"),p=De("gap"),v=De("gradientColorStops"),b=De("gradientColorStopPositions"),T=De("inset"),A=De("margin"),_=De("opacity"),y=De("padding"),w=De("saturate"),P=De("scale"),V=De("sepia"),O=De("skew"),I=De("space"),x=De("translate"),k=()=>["auto","contain","none"],C=()=>["auto","hidden","clip","visible","scroll"],D=()=>["auto",he,e],N=()=>[he,e],E=()=>["",nr,Mr],F=()=>["auto",Ao,he],q=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ie=()=>["solid","dashed","dotted","double","none"],Q=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],B=()=>["start","end","center","between","around","evenly","stretch"],j=()=>["","0",he],K=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Z=()=>[Ao,he];return{cacheSize:500,separator:":",theme:{colors:[Ka],spacing:[nr,Mr],blur:["none","",Fr,he],brightness:Z(),borderColor:[t],borderRadius:["none","","full",Fr,he],borderSpacing:N(),borderWidth:E(),contrast:Z(),grayscale:j(),hueRotate:Z(),invert:j(),gap:N(),gradientColorStops:[t],gradientColorStopPositions:[L6,Mr],inset:D(),margin:D(),opacity:Z(),padding:N(),saturate:Z(),scale:Z(),sepia:j(),skew:Z(),space:N(),translate:N()},classGroups:{aspect:[{aspect:["auto","square","video",he]}],container:["container"],columns:[{columns:[Fr]}],"break-after":[{"break-after":K()}],"break-before":[{"break-before":K()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...q(),he]}],overflow:[{overflow:C()}],"overflow-x":[{"overflow-x":C()}],"overflow-y":[{"overflow-y":C()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[T]}],"inset-x":[{"inset-x":[T]}],"inset-y":[{"inset-y":[T]}],start:[{start:[T]}],end:[{end:[T]}],top:[{top:[T]}],right:[{right:[T]}],bottom:[{bottom:[T]}],left:[{left:[T]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",qa,he]}],basis:[{basis:D()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",he]}],grow:[{grow:j()}],shrink:[{shrink:j()}],order:[{order:["first","last","none",qa,he]}],"grid-cols":[{"grid-cols":[Ka]}],"col-start-end":[{col:["auto",{span:["full",qa,he]},he]}],"col-start":[{"col-start":F()}],"col-end":[{"col-end":F()}],"grid-rows":[{"grid-rows":[Ka]}],"row-start-end":[{row:["auto",{span:[qa,he]},he]}],"row-start":[{"row-start":F()}],"row-end":[{"row-end":F()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",he]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",he]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...B()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...B(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...B(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[A]}],mx:[{mx:[A]}],my:[{my:[A]}],ms:[{ms:[A]}],me:[{me:[A]}],mt:[{mt:[A]}],mr:[{mr:[A]}],mb:[{mb:[A]}],ml:[{ml:[A]}],"space-x":[{"space-x":[I]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[I]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",he,e]}],"min-w":[{"min-w":[he,e,"min","max","fit"]}],"max-w":[{"max-w":[he,e,"none","full","min","max","fit","prose",{screen:[Fr]},Fr]}],h:[{h:[he,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[he,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[he,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[he,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Fr,Mr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Mp]}],"font-family":[{font:[Ka]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",he]}],"line-clamp":[{"line-clamp":["none",Ao,Mp]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",nr,he]}],"list-image":[{"list-image":["none",he]}],"list-style-type":[{list:["none","disc","decimal",he]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[_]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[_]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ie(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",nr,Mr]}],"underline-offset":[{"underline-offset":["auto",nr,he]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:N()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",he]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",he]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[_]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...q(),U6]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",F6]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},z6]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[b]}],"gradient-via-pos":[{via:[b]}],"gradient-to-pos":[{to:[b]}],"gradient-from":[{from:[v]}],"gradient-via":[{via:[v]}],"gradient-to":[{to:[v]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[_]}],"border-style":[{border:[...ie(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[_]}],"divide-style":[{divide:ie()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...ie()]}],"outline-offset":[{"outline-offset":[nr,he]}],"outline-w":[{outline:[nr,Mr]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:E()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[_]}],"ring-offset-w":[{"ring-offset":[nr,Mr]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Fr,$6]}],"shadow-color":[{shadow:[Ka]}],opacity:[{opacity:[_]}],"mix-blend":[{"mix-blend":[...Q(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Q()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Fr,he]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[f]}],saturate:[{saturate:[w]}],sepia:[{sepia:[V]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[_]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[V]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",he]}],duration:[{duration:Z()}],ease:[{ease:["linear","in","out","in-out",he]}],delay:[{delay:Z()}],animate:[{animate:["none","spin","ping","pulse","bounce",he]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[P]}],"scale-x":[{"scale-x":[P]}],"scale-y":[{"scale-y":[P]}],rotate:[{rotate:[qa,he]}],"translate-x":[{"translate-x":[x]}],"translate-y":[{"translate-y":[x]}],"skew-x":[{"skew-x":[O]}],"skew-y":[{"skew-y":[O]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",he]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",he]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":N()}],"scroll-mx":[{"scroll-mx":N()}],"scroll-my":[{"scroll-my":N()}],"scroll-ms":[{"scroll-ms":N()}],"scroll-me":[{"scroll-me":N()}],"scroll-mt":[{"scroll-mt":N()}],"scroll-mr":[{"scroll-mr":N()}],"scroll-mb":[{"scroll-mb":N()}],"scroll-ml":[{"scroll-ml":N()}],"scroll-p":[{"scroll-p":N()}],"scroll-px":[{"scroll-px":N()}],"scroll-py":[{"scroll-py":N()}],"scroll-ps":[{"scroll-ps":N()}],"scroll-pe":[{"scroll-pe":N()}],"scroll-pt":[{"scroll-pt":N()}],"scroll-pr":[{"scroll-pr":N()}],"scroll-pb":[{"scroll-pb":N()}],"scroll-pl":[{"scroll-pl":N()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",he]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[nr,Mr,Mp]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},H6=C6(W6);function Jo(...t){return H6(YC(t))}const Pu={},Q6={sm:"w-8 h-8",md:"w-12 h-12",lg:"w-16 h-16"},we=R.memo(({id:t,name:e,type:n,size:r="md",className:i="",withTooltip:s=!0,isLeader:o=!1,isCapital:a=!1,onLoad:l})=>{const[u,h]=R.useState(()=>Pu[t]||TE(r)),[f,p]=R.useState(!0),[v,b]=R.useState(!1),T=R.useMemo(()=>Q6[r],[r]);return R.useEffect(()=>{let A=!0;return(async()=>{if(Pu[t]){h(Pu[t]),p(!1);return}try{const y=await Cg(t,n);A&&(Pu[t]=y,h(y),b(!1))}catch(y){A&&(console.error(`Error loading image for ${t}:`,y),b(!0))}finally{A&&p(!1)}})(),()=>{A=!1}},[t,n]),d.jsxs("div",{className:Jo("relative","transition-all duration-300 ease-out",T,i),children:[d.jsx("img",{src:u,alt:e,className:Jo("w-full h-full","object-cover rounded-full","transition-opacity duration-300",f?"opacity-0":"opacity-100",v?"grayscale opacity-50":""),onLoad:l,onError:()=>{b(!0),h(TE(r))}}),(o||a)&&d.jsx("div",{className:`absolute -top-1 -right-1 w-4 h-4 bg-blue-500 rounded-full \r
                   flex items-center justify-center text-white text-xs font-bold\r
                   shadow-md`,children:o?"L":"C"}),s&&d.jsx("div",{className:`absolute -bottom-6 left-1/2 transform -translate-x-1/2 \r
                     bg-black/90 px-2 py-1 rounded text-xs text-white whitespace-nowrap \r
                     opacity-0 group-hover:opacity-100 transition-opacity z-10`,children:e})]})});we.displayName="UnitImage";const nP=({videoUrl:t})=>{const e=n=>{n.stopPropagation(),window.open(t,"_blank")};return d.jsxs("button",{onClick:e,className:`flex items-center gap-2 px-2 py-1 rounded-full bg-red-500/20 text-red-400 \r
                 hover:bg-red-500/30 transition-colors text-sm`,children:[d.jsx(iS,{className:"w-4 h-4"}),"  ",d.jsx("span",{children:"Watch Guide"})]})},Y6=R.createContext(null),Fp={didCatch:!1,error:null};let rP=class extends R.Component{constructor(e){super(e),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=Fp}static getDerivedStateFromError(e){return{didCatch:!0,error:e}}resetErrorBoundary(){const{error:e}=this.state;if(e!==null){for(var n,r,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];(n=(r=this.props).onReset)===null||n===void 0||n.call(r,{args:s,reason:"imperative-api"}),this.setState(Fp)}}componentDidCatch(e,n){var r,i;(r=(i=this.props).onError)===null||r===void 0||r.call(i,e,n)}componentDidUpdate(e,n){const{didCatch:r}=this.state,{resetKeys:i}=this.props;if(r&&n.error!==null&&X6(e.resetKeys,i)){var s,o;(s=(o=this.props).onReset)===null||s===void 0||s.call(o,{next:i,prev:e.resetKeys,reason:"keys"}),this.setState(Fp)}}render(){const{children:e,fallbackRender:n,FallbackComponent:r,fallback:i}=this.props,{didCatch:s,error:o}=this.state;let a=e;if(s){const l={error:o,resetErrorBoundary:this.resetErrorBoundary};if(typeof n=="function")a=n(l);else if(r)a=R.createElement(r,l);else if(i!==void 0)a=i;else throw o}return R.createElement(Y6.Provider,{value:{didCatch:s,error:o,resetErrorBoundary:this.resetErrorBoundary}},a)}};function X6(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return t.length!==e.length||t.some((n,r)=>!Object.is(n,e[r]))}const iP=R.memo(({squad:t,isSelected:e,onSelect:n,counters:r,isAdmin:i,onDeleteCounter:s,onViewDetails:o,isFiltered:a=!1})=>(console.log("Rendering SquadCard:",{name:t.name,characters:t.characters,leader:t.leader,counters:r.length}),d.jsx(rP,{fallback:d.jsx(lr,{variant:"dark",className:"p-4",children:d.jsx("div",{className:"text-red-400",children:"Error loading squad card"})}),children:d.jsx("div",{onClick:()=>n(),children:d.jsx(lr,{variant:"dark",glowColor:t.alignment==="light"?"blue":"red",isSelected:e,className:`transition-all duration-300 ease-out hover:scale-[1.01] ${a?"opacity-100":"opacity-50"}`,children:d.jsxs("div",{className:"p-4",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsxs("h3",{className:"text-xl font-orbitron text-white flex items-center gap-2",children:[d.jsx(kh,{className:"w-5 h-5 text-blue-400"}),t.name]}),d.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[d.jsx("span",{className:`px-2 py-1 rounded-full text-xs
                    ${t.alignment==="light"?"bg-blue-500/20 text-blue-400":"bg-red-500/20 text-red-400"}`,children:t.alignment==="light"?"Light Side":"Dark Side"}),t.twOmicronRequired&&d.jsx("span",{className:"px-2 py-1 rounded-full text-xs bg-purple-500/20 text-purple-400",children:"TW Omicron"})]})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[o&&d.jsx("button",{onClick:l=>{l.stopPropagation(),o()},className:"p-2 text-blue-400 hover:bg-blue-400/10 rounded-lg",children:d.jsx(tS,{className:"w-4 h-4"})}),d.jsx("button",{className:"p-2 text-white/60 hover:text-white hover:bg-white/5 rounded-lg",children:e?d.jsx(J1,{className:"w-4 h-4"}):d.jsx(X1,{className:"w-4 h-4"})})]})]}),d.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-4",children:[t.leader&&d.jsx("div",{className:"relative group",children:d.jsx(we,{id:t.leader.id,name:t.leader.name,type:"squad-leader",size:"md",className:"rounded-full border-2 border-blue-400",withTooltip:!0,isLeader:!0})}),t.characters.map(l=>d.jsx("div",{className:"relative group",children:d.jsx(we,{id:l.id,name:l.name,type:"squad-member",size:"md",className:"rounded-full border-2 border-white/20",withTooltip:!0})},l.id))]}),d.jsx(en,{children:e&&r.length>0&&d.jsxs(ce.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"mt-6 space-y-4 overflow-hidden",children:[d.jsx("h4",{className:"text-lg font-medium text-white",children:"Counters"}),r.map(l=>{var u;return d.jsxs("div",{className:"p-4 bg-white/5 rounded-lg space-y-4",children:[d.jsxs("div",{className:"flex justify-between items-start",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:`px-2 py-1 rounded-full text-xs
                            ${l.counterType==="hard"?"bg-green-500/20 text-green-400":l.counterType==="soft"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:l.counterType.charAt(0).toUpperCase()+l.counterType.slice(1)}),l.twOmicronRequired&&d.jsx("span",{className:"px-2 py-1 rounded-full text-xs bg-purple-500/20 text-purple-400",children:"TW Omni"}),l.video_url&&d.jsx(nP,{videoUrl:l.video_url})]}),i&&s&&d.jsx("button",{onClick:()=>s(l.id),className:"p-2 text-red-400 hover:bg-red-400/10 rounded-lg",children:d.jsx(gc,{className:"w-4 h-4"})})]}),d.jsx("p",{className:"mt-2 text-white/70",children:l.description}),((u=l.requirements)==null?void 0:u.length)>0&&d.jsx("div",{className:"mt-3",children:d.jsxs("div",{className:"p-3 bg-blue-500/10 rounded-lg border border-blue-500/20",children:[d.jsx("h4",{className:"text-sm font-medium text-blue-400 mb-1",children:"Mod Requirements"}),l.requirements.filter(h=>h.type==="mods").map((h,f)=>d.jsx("div",{className:"text-sm text-white/70",children:h.description},f))]})}),"characters"in l.counterSquad&&d.jsxs("div",{className:"flex items-center gap-2",children:[l.counterSquad.leader&&d.jsx(we,{id:l.counterSquad.leader.id,name:l.counterSquad.leader.name,type:"squad-leader",size:"sm",className:"border-2 border-blue-400"}),l.counterSquad.characters.map(h=>d.jsx(we,{id:h.id,name:h.name,type:"squad-member",size:"sm",className:"border-2 border-white/20"},h.id))]})]},l.id)})]})})]})})})})));iP.displayName="SquadCard";class Nc extends oR.Component{constructor(n){super(n);nn(this,"handleReset",()=>{this.setState({hasError:!1,error:null})});this.state={hasError:!1,error:null}}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){console.error("ErrorBoundary caught an error:",n,r)}render(){var n;return this.state.hasError?this.props.fallback?this.props.fallback:d.jsx("div",{className:"min-h-[200px] flex items-center justify-center",children:d.jsx("div",{className:"p-6 bg-red-500/10 rounded-lg border border-red-500/20 max-w-md w-full",children:d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx(ks,{className:"w-5 h-5 text-red-400 flex-shrink-0 mt-0.5"}),d.jsxs("div",{className:"flex-1",children:[d.jsx("h3",{className:"text-lg font-medium text-red-400 mb-2",children:"Something went wrong"}),d.jsx("p",{className:"text-sm text-red-400/80 mb-4",children:((n=this.state.error)==null?void 0:n.message)||"An unexpected error occurred"}),d.jsxs("button",{onClick:this.handleReset,className:`flex items-center gap-2 px-4 py-2 rounded-lg \r
                           bg-red-500/20 text-red-400 hover:bg-red-500/30 \r
                           transition-colors`,children:[d.jsx(Si,{className:"w-4 h-4"}),"Try Again"]})]})]})})}):this.props.children}}const J6=({squads:t,filteredSquads:e,selectedSquadId:n,onSelectSquad:r,getCounters:i,isAdmin:s,onDeleteCounter:o,onViewDetails:a})=>{const l=h=>{r(n===h?null:h)},u=R.useMemo(()=>e.map(h=>d.jsx(ce.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:d.jsx(iP,{squad:h,isSelected:n===h.id,onSelect:()=>l(h.id),counters:i(h.id),isFiltered:!0,isAdmin:s,onDeleteCounter:o,onViewDetails:a})},h.id)),[e,n,i,s,o,a]);return!t||t.length===0?d.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-white/60",children:[d.jsx(kh,{className:"w-12 h-12 mb-4 animate-float"}),d.jsx("p",{className:"text-lg",children:"No squads found"})]}):d.jsx(Nc,{fallback:d.jsx("div",{className:"flex flex-col items-center justify-center p-8",children:d.jsxs("div",{className:"p-6 bg-red-500/10 rounded-lg border border-red-500/20 max-w-md w-full",children:[d.jsx("h3",{className:"text-lg font-medium text-red-400 mb-2",children:"Failed to load squads"}),d.jsx("p",{className:"text-sm text-red-400/80 mb-4",children:"Please try refreshing the page"}),d.jsxs("button",{onClick:()=>window.location.reload(),className:`flex items-center gap-2 px-4 py-2 rounded-lg \r
                       bg-red-500/20 text-red-400 hover:bg-red-500/30`,children:[d.jsx(Si,{className:"w-4 h-4"}),"Refresh"]})]})}),children:d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.jsx(en,{mode:"popLayout",children:u})})})},sP=R.memo(({fleet:t,isSelected:e,onSelect:n,counters:r,isAdmin:i,onDeleteCounter:s,onViewDetails:o,isFiltered:a=!1,onAddCounter:l})=>{console.log("Rendering FleetCard:",{name:t.name,startingLineup:t.startingLineup,capitalShip:t.capitalShip,counters:r.length});const u=r.filter(h=>{var b;const f=h.targetSquad.id===t.id,p=h.counterSquad.id===t.id,v="capitalShip"in h.targetSquad&&((b=h.targetSquad.capitalShip)==null?void 0:b.id)===t.id;return f||p||v});return d.jsx(rP,{fallback:d.jsx(lr,{variant:"dark",className:"p-4",children:d.jsx("div",{className:"text-red-400",children:"Error loading fleet card"})}),children:d.jsx(lr,{variant:"dark",glowColor:t.alignment==="light"?"blue":"red",isInteractive:!0,isSelected:e,onClick:()=>{n()},className:`transition-all duration-300 ease-out hover:scale-[1.01] ${a?"opacity-100":"opacity-50"}`,children:d.jsxs("div",{className:"p-4",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsxs("h3",{className:"text-xl font-orbitron text-white flex items-center gap-2",children:[d.jsx(mc,{className:"w-5 h-5 text-blue-400"}),t.name]}),d.jsx("div",{className:"flex items-center gap-2 mt-2",children:d.jsx("span",{className:`px-2 py-1 rounded-full text-xs
                  ${t.alignment==="light"?"bg-blue-500/20 text-blue-400":"bg-red-500/20 text-red-400"}`,children:t.alignment==="light"?"Light Side":"Dark Side"})})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[o&&d.jsx("button",{onClick:h=>{h.stopPropagation(),o()},className:"p-2 text-blue-400 hover:bg-blue-400/10 rounded-lg",children:d.jsx(tS,{className:"w-4 h-4"})}),d.jsx("button",{onClick:h=>{h.preventDefault(),h.stopPropagation(),n()},className:"p-2 text-white/60 hover:text-white hover:bg-white/5 rounded-lg",children:e?d.jsx(J1,{className:"w-4 h-4"}):d.jsx(X1,{className:"w-4 h-4"})})]})]}),d.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-4",children:[t.capitalShip&&d.jsx(we,{id:t.capitalShip.id,name:t.capitalShip.name,type:"capital-ship",size:"md",className:"rounded-full border-2 border-blue-400",withTooltip:!0,isCapital:!0}),t.startingLineup.map(h=>d.jsx(we,{id:h.id,name:h.name,type:"ship",size:"md",className:"rounded-full border-2 border-white/20",withTooltip:!0},h.id)),t.reinforcements.map(h=>d.jsx("div",{className:"relative group opacity-75",children:d.jsx("div",{className:"relative",children:d.jsx(we,{id:h.id,name:h.name,type:"ship",size:"md",className:"rounded-full border-2 border-white/20",withTooltip:!0})})},h.id))]}),t.callOrder&&d.jsxs("div",{className:"mt-4 p-3 bg-blue-500/10 rounded-lg border border-blue-500/20",children:[d.jsx("h4",{className:"text-sm font-medium text-blue-400 mb-1",children:"Call Order"}),d.jsx("p",{className:"text-sm text-white/70",children:t.callOrder})]}),d.jsx(en,{children:e&&u.length>0&&d.jsxs(ce.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"mt-6 space-y-4 overflow-hidden",children:[d.jsx("h4",{className:"text-lg font-medium text-white",children:"Counters"}),u.map(h=>d.jsxs("div",{className:"p-4 bg-white/5 rounded-lg space-y-4",children:[d.jsxs("div",{className:"flex justify-between items-start",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:`px-2 py-1 rounded-full text-xs
                          ${h.counterType==="hard"?"bg-green-500/20 text-green-400":h.counterType==="soft"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:h.counterType.charAt(0).toUpperCase()+h.counterType.slice(1)}),h.video_url&&d.jsx(nP,{videoUrl:h.video_url})]}),i&&s&&d.jsx("button",{onClick:()=>s(h.id),className:"p-2 text-red-400 hover:bg-red-400/10 rounded-lg",children:d.jsx(gc,{className:"w-4 h-4"})})]}),d.jsx("p",{className:"text-white/70",children:h.description}),"capitalShip"in h.counterSquad&&d.jsx("div",{className:"mt-4",children:d.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[h.counterSquad.capitalShip&&d.jsxs("div",{className:"relative",children:[d.jsx(we,{id:h.counterSquad.capitalShip.id,name:h.counterSquad.capitalShip.name,type:"capital-ship",size:"sm",className:"border-2 border-blue-400"}),d.jsx("div",{className:`absolute -top-1 -right-1 w-5 h-5 bg-blue-500 rounded-full \r
                       flex items-center justify-center text-white text-xs`,children:"C"})]}),h.counterSquad.startingLineup.map(f=>d.jsx(we,{id:f.id,name:f.name,type:"ship",size:"sm",className:"border-2 border-white/20"},f.id)),h.counterSquad.reinforcements.map(f=>d.jsxs("div",{className:"relative",children:[d.jsx(we,{id:f.id,name:f.name,type:"ship",size:"sm",className:"border-2 border-white/20 opacity-75"}),d.jsx("div",{className:`absolute -top-1 -right-1 w-5 h-5 bg-blue-500 rounded-full \r
                       flex items-center justify-center text-white text-xs`,children:"R"})]},f.id))]})}),h.strategy.length>0&&d.jsxs("div",{className:"space-y-2",children:[d.jsx("h4",{className:"text-sm font-medium text-white/80",children:"Strategy:"}),d.jsx("div",{className:"space-y-3",children:h.strategy.map((f,p)=>d.jsxs("div",{className:"flex gap-3",children:[d.jsx("span",{className:`flex-shrink-0 w-6 h-6 rounded-full bg-blue-500/20 text-blue-400 \r
                                            flex items-center justify-center text-sm`,children:p+1}),d.jsx("p",{className:"text-sm text-white/70",children:f.description})]},f.key))})]})]},h.id))]})}),i&&l&&d.jsx("button",{onClick:h=>{h.stopPropagation(),l(t)},className:"p-2 text-green-400 hover:bg-green-400/10 rounded-lg",children:d.jsx(li,{className:"w-4 h-4"})})]})})})});sP.displayName="FleetCard";const Z6=({fleets:t,filteredFleets:e,selectedFleetId:n,onSelectFleet:r,getCounters:i,isAdmin:s,onDeleteCounter:o,onViewDetails:a})=>{const l=u=>{r(n===u?null:u)};return!t||t.length===0?d.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-white/60",children:[d.jsx(mc,{className:"w-12 h-12 mb-4 animate-float"}),d.jsx("p",{className:"text-lg",children:"No fleets found"})]}):d.jsx(Nc,{fallback:d.jsx("div",{className:"flex flex-col items-center justify-center p-8",children:d.jsxs("div",{className:"p-6 bg-red-500/10 rounded-lg border border-red-500/20 max-w-md w-full",children:[d.jsx("h3",{className:"text-lg font-medium text-red-400 mb-2",children:"Failed to load fleets"}),d.jsx("p",{className:"text-sm text-red-400/80 mb-4",children:"Please try refreshing the page"}),d.jsxs("button",{onClick:()=>window.location.reload(),className:`flex items-center gap-2 px-4 py-2 rounded-lg \r
                       bg-red-500/20 text-red-400 hover:bg-red-500/30`,children:[d.jsx(Si,{className:"w-4 h-4"}),"Refresh"]})]})}),children:d.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:d.jsx(en,{mode:"popLayout",children:e.map(u=>d.jsx(ce.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:d.jsx(sP,{fleet:u,isSelected:n===u.id,onSelect:()=>l(u.id),counters:i(u.id),isFiltered:!0,isAdmin:s,onDeleteCounter:o,onViewDetails:a})},u.id))})})})};/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var oP=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],oh=oP.join(","),aP=typeof Element>"u",Ss=aP?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,ah=!aP&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},lh=function t(e,n){var r;n===void 0&&(n=!0);var i=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),s=i===""||i==="true",o=s||n&&e&&t(e.parentNode);return o},ez=function(e){var n,r=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"contenteditable");return r===""||r==="true"},lP=function(e,n,r){if(lh(e))return[];var i=Array.prototype.slice.apply(e.querySelectorAll(oh));return n&&Ss.call(e,oh)&&i.unshift(e),i=i.filter(r),i},cP=function t(e,n,r){for(var i=[],s=Array.from(e);s.length;){var o=s.shift();if(!lh(o,!1))if(o.tagName==="SLOT"){var a=o.assignedElements(),l=a.length?a:o.children,u=t(l,!0,r);r.flatten?i.push.apply(i,u):i.push({scopeParent:o,candidates:u})}else{var h=Ss.call(o,oh);h&&r.filter(o)&&(n||!e.includes(o))&&i.push(o);var f=o.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(o),p=!lh(f,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(o));if(f&&p){var v=t(f===!0?o.children:f.children,!0,r);r.flatten?i.push.apply(i,v):i.push({scopeParent:o,candidates:v})}else s.unshift.apply(s,o.children)}}return i},uP=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},Hi=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||ez(e))&&!uP(e)?0:e.tabIndex},tz=function(e,n){var r=Hi(e);return r<0&&n&&!uP(e)?0:r},nz=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},dP=function(e){return e.tagName==="INPUT"},rz=function(e){return dP(e)&&e.type==="hidden"},iz=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return n},sz=function(e,n){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===n)return e[r]},oz=function(e){if(!e.name)return!0;var n=e.form||ah(e),r=function(a){return n.querySelectorAll('input[type="radio"][name="'+a+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=r(window.CSS.escape(e.name));else try{i=r(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var s=sz(i,e.form);return!s||s===e},az=function(e){return dP(e)&&e.type==="radio"},lz=function(e){return az(e)&&!oz(e)},cz=function(e){var n,r=e&&ah(e),i=(n=r)===null||n===void 0?void 0:n.host,s=!1;if(r&&r!==e){var o,a,l;for(s=!!((o=i)!==null&&o!==void 0&&(a=o.ownerDocument)!==null&&a!==void 0&&a.contains(i)||e!=null&&(l=e.ownerDocument)!==null&&l!==void 0&&l.contains(e));!s&&i;){var u,h,f;r=ah(i),i=(u=r)===null||u===void 0?void 0:u.host,s=!!((h=i)!==null&&h!==void 0&&(f=h.ownerDocument)!==null&&f!==void 0&&f.contains(i))}}return s},AE=function(e){var n=e.getBoundingClientRect(),r=n.width,i=n.height;return r===0&&i===0},uz=function(e,n){var r=n.displayCheck,i=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var s=Ss.call(e,"details>summary:first-of-type"),o=s?e.parentElement:e;if(Ss.call(o,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof i=="function"){for(var a=e;e;){var l=e.parentElement,u=ah(e);if(l&&!l.shadowRoot&&i(l)===!0)return AE(e);e.assignedSlot?e=e.assignedSlot:!l&&u!==e.ownerDocument?e=u.host:e=l}e=a}if(cz(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return AE(e);return!1},dz=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var i=n.children.item(r);if(i.tagName==="LEGEND")return Ss.call(n,"fieldset[disabled] *")?!0:!i.contains(e)}return!0}n=n.parentElement}return!1},ch=function(e,n){return!(n.disabled||lh(n)||rz(n)||uz(n,e)||iz(n)||dz(n))},Rg=function(e,n){return!(lz(n)||Hi(n)<0||!ch(e,n))},hz=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},fz=function t(e){var n=[],r=[];return e.forEach(function(i,s){var o=!!i.scopeParent,a=o?i.scopeParent:i,l=tz(a,o),u=o?t(i.candidates):a;l===0?o?n.push.apply(n,u):n.push(a):r.push({documentOrder:s,tabIndex:l,item:i,isScope:o,content:u})}),r.sort(nz).reduce(function(i,s){return s.isScope?i.push.apply(i,s.content):i.push(s.content),i},[]).concat(n)},pz=function(e,n){n=n||{};var r;return n.getShadowRoot?r=cP([e],n.includeContainer,{filter:Rg.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:hz}):r=lP(e,n.includeContainer,Rg.bind(null,n)),fz(r)},mz=function(e,n){n=n||{};var r;return n.getShadowRoot?r=cP([e],n.includeContainer,{filter:ch.bind(null,n),flatten:!0,getShadowRoot:n.getShadowRoot}):r=lP(e,n.includeContainer,ch.bind(null,n)),r},Ks=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return Ss.call(e,oh)===!1?!1:Rg(n,e)},gz=oP.concat("iframe").join(","),Up=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return Ss.call(e,gz)===!1?!1:ch(n,e)};/*!
* focus-trap 7.6.2
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function Ng(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function yz(t){if(Array.isArray(t))return Ng(t)}function vz(t,e,n){return(e=Ez(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _z(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function wz(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function CE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kE(Object(n),!0).forEach(function(r){vz(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xz(t){return yz(t)||_z(t)||Tz(t)||wz()}function bz(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ez(t){var e=bz(t,"string");return typeof e=="symbol"?e:e+""}function Tz(t,e){if(t){if(typeof t=="string")return Ng(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ng(t,e):void 0}}var PE={activateTrap:function(e,n){if(e.length>0){var r=e[e.length-1];r!==n&&r.pause()}var i=e.indexOf(n);i===-1||e.splice(i,1),e.push(n)},deactivateTrap:function(e,n){var r=e.indexOf(n);r!==-1&&e.splice(r,1),e.length>0&&e[e.length-1].unpause()}},Sz=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},Iz=function(e){return(e==null?void 0:e.key)==="Escape"||(e==null?void 0:e.key)==="Esc"||(e==null?void 0:e.keyCode)===27},Il=function(e){return(e==null?void 0:e.key)==="Tab"||(e==null?void 0:e.keyCode)===9},Az=function(e){return Il(e)&&!e.shiftKey},kz=function(e){return Il(e)&&e.shiftKey},RE=function(e){return setTimeout(e,0)},Ga=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return typeof e=="function"?e.apply(void 0,r):e},Ru=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},Cz=[],Pz=function(e,n){var r=(n==null?void 0:n.document)||document,i=(n==null?void 0:n.trapStack)||Cz,s=CE({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:Az,isKeyBackward:kz},n),o={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},a,l=function(E,F,q){return E&&E[F]!==void 0?E[F]:s[q||F]},u=function(E,F){var q=typeof(F==null?void 0:F.composedPath)=="function"?F.composedPath():void 0;return o.containerGroups.findIndex(function(ie){var Q=ie.container,B=ie.tabbableNodes;return Q.contains(E)||(q==null?void 0:q.includes(Q))||B.find(function(j){return j===E})})},h=function(E){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},q=F.hasFallback,ie=q===void 0?!1:q,Q=F.params,B=Q===void 0?[]:Q,j=s[E];if(typeof j=="function"&&(j=j.apply(void 0,xz(B))),j===!0&&(j=void 0),!j){if(j===void 0||j===!1)return j;throw new Error("`".concat(E,"` was specified but was not a node, or did not return a node"))}var K=j;if(typeof j=="string"){try{K=r.querySelector(j)}catch(Z){throw new Error("`".concat(E,'` appears to be an invalid selector; error="').concat(Z.message,'"'))}if(!K&&!ie)throw new Error("`".concat(E,"` as selector refers to no known node"))}return K},f=function(){var E=h("initialFocus",{hasFallback:!0});if(E===!1)return!1;if(E===void 0||E&&!Up(E,s.tabbableOptions))if(u(r.activeElement)>=0)E=r.activeElement;else{var F=o.tabbableGroups[0],q=F&&F.firstTabbableNode;E=q||h("fallbackFocus")}else E===null&&(E=h("fallbackFocus"));if(!E)throw new Error("Your focus-trap needs to have at least one focusable element");return E},p=function(){if(o.containerGroups=o.containers.map(function(E){var F=pz(E,s.tabbableOptions),q=mz(E,s.tabbableOptions),ie=F.length>0?F[0]:void 0,Q=F.length>0?F[F.length-1]:void 0,B=q.find(function(Z){return Ks(Z)}),j=q.slice().reverse().find(function(Z){return Ks(Z)}),K=!!F.find(function(Z){return Hi(Z)>0});return{container:E,tabbableNodes:F,focusableNodes:q,posTabIndexesFound:K,firstTabbableNode:ie,lastTabbableNode:Q,firstDomTabbableNode:B,lastDomTabbableNode:j,nextTabbableNode:function($){var W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,te=F.indexOf($);return te<0?W?q.slice(q.indexOf($)+1).find(function(de){return Ks(de)}):q.slice(0,q.indexOf($)).reverse().find(function(de){return Ks(de)}):F[te+(W?1:-1)]}}}),o.tabbableGroups=o.containerGroups.filter(function(E){return E.tabbableNodes.length>0}),o.tabbableGroups.length<=0&&!h("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(o.containerGroups.find(function(E){return E.posTabIndexesFound})&&o.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},v=function(E){var F=E.activeElement;if(F)return F.shadowRoot&&F.shadowRoot.activeElement!==null?v(F.shadowRoot):F},b=function(E){if(E!==!1&&E!==v(document)){if(!E||!E.focus){b(f());return}E.focus({preventScroll:!!s.preventScroll}),o.mostRecentlyFocusedNode=E,Sz(E)&&E.select()}},T=function(E){var F=h("setReturnFocus",{params:[E]});return F||(F===!1?!1:E)},A=function(E){var F=E.target,q=E.event,ie=E.isBackward,Q=ie===void 0?!1:ie;F=F||Ru(q),p();var B=null;if(o.tabbableGroups.length>0){var j=u(F,q),K=j>=0?o.containerGroups[j]:void 0;if(j<0)Q?B=o.tabbableGroups[o.tabbableGroups.length-1].lastTabbableNode:B=o.tabbableGroups[0].firstTabbableNode;else if(Q){var Z=o.tabbableGroups.findIndex(function(st){var Zn=st.firstTabbableNode;return F===Zn});if(Z<0&&(K.container===F||Up(F,s.tabbableOptions)&&!Ks(F,s.tabbableOptions)&&!K.nextTabbableNode(F,!1))&&(Z=j),Z>=0){var $=Z===0?o.tabbableGroups.length-1:Z-1,W=o.tabbableGroups[$];B=Hi(F)>=0?W.lastTabbableNode:W.lastDomTabbableNode}else Il(q)||(B=K.nextTabbableNode(F,!1))}else{var te=o.tabbableGroups.findIndex(function(st){var Zn=st.lastTabbableNode;return F===Zn});if(te<0&&(K.container===F||Up(F,s.tabbableOptions)&&!Ks(F,s.tabbableOptions)&&!K.nextTabbableNode(F))&&(te=j),te>=0){var de=te===o.tabbableGroups.length-1?0:te+1,tt=o.tabbableGroups[de];B=Hi(F)>=0?tt.firstTabbableNode:tt.firstDomTabbableNode}else Il(q)||(B=K.nextTabbableNode(F))}}else B=h("fallbackFocus");return B},_=function(E){var F=Ru(E);if(!(u(F,E)>=0)){if(Ga(s.clickOutsideDeactivates,E)){a.deactivate({returnFocus:s.returnFocusOnDeactivate});return}Ga(s.allowOutsideClick,E)||E.preventDefault()}},y=function(E){var F=Ru(E),q=u(F,E)>=0;if(q||F instanceof Document)q&&(o.mostRecentlyFocusedNode=F);else{E.stopImmediatePropagation();var ie,Q=!0;if(o.mostRecentlyFocusedNode)if(Hi(o.mostRecentlyFocusedNode)>0){var B=u(o.mostRecentlyFocusedNode),j=o.containerGroups[B].tabbableNodes;if(j.length>0){var K=j.findIndex(function(Z){return Z===o.mostRecentlyFocusedNode});K>=0&&(s.isKeyForward(o.recentNavEvent)?K+1<j.length&&(ie=j[K+1],Q=!1):K-1>=0&&(ie=j[K-1],Q=!1))}}else o.containerGroups.some(function(Z){return Z.tabbableNodes.some(function($){return Hi($)>0})})||(Q=!1);else Q=!1;Q&&(ie=A({target:o.mostRecentlyFocusedNode,isBackward:s.isKeyBackward(o.recentNavEvent)})),b(ie||o.mostRecentlyFocusedNode||f())}o.recentNavEvent=void 0},w=function(E){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;o.recentNavEvent=E;var q=A({event:E,isBackward:F});q&&(Il(E)&&E.preventDefault(),b(q))},P=function(E){(s.isKeyForward(E)||s.isKeyBackward(E))&&w(E,s.isKeyBackward(E))},V=function(E){Iz(E)&&Ga(s.escapeDeactivates,E)!==!1&&(E.preventDefault(),a.deactivate())},O=function(E){var F=Ru(E);u(F,E)>=0||Ga(s.clickOutsideDeactivates,E)||Ga(s.allowOutsideClick,E)||(E.preventDefault(),E.stopImmediatePropagation())},I=function(){if(o.active)return PE.activateTrap(i,a),o.delayInitialFocusTimer=s.delayInitialFocus?RE(function(){b(f())}):b(f()),r.addEventListener("focusin",y,!0),r.addEventListener("mousedown",_,{capture:!0,passive:!1}),r.addEventListener("touchstart",_,{capture:!0,passive:!1}),r.addEventListener("click",O,{capture:!0,passive:!1}),r.addEventListener("keydown",P,{capture:!0,passive:!1}),r.addEventListener("keydown",V),a},x=function(){if(o.active)return r.removeEventListener("focusin",y,!0),r.removeEventListener("mousedown",_,!0),r.removeEventListener("touchstart",_,!0),r.removeEventListener("click",O,!0),r.removeEventListener("keydown",P,!0),r.removeEventListener("keydown",V),a},k=function(E){var F=E.some(function(q){var ie=Array.from(q.removedNodes);return ie.some(function(Q){return Q===o.mostRecentlyFocusedNode})});F&&b(f())},C=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(k):void 0,D=function(){C&&(C.disconnect(),o.active&&!o.paused&&o.containers.map(function(E){C.observe(E,{subtree:!0,childList:!0})}))};return a={get active(){return o.active},get paused(){return o.paused},activate:function(E){if(o.active)return this;var F=l(E,"onActivate"),q=l(E,"onPostActivate"),ie=l(E,"checkCanFocusTrap");ie||p(),o.active=!0,o.paused=!1,o.nodeFocusedBeforeActivation=r.activeElement,F==null||F();var Q=function(){ie&&p(),I(),D(),q==null||q()};return ie?(ie(o.containers.concat()).then(Q,Q),this):(Q(),this)},deactivate:function(E){if(!o.active)return this;var F=CE({onDeactivate:s.onDeactivate,onPostDeactivate:s.onPostDeactivate,checkCanReturnFocus:s.checkCanReturnFocus},E);clearTimeout(o.delayInitialFocusTimer),o.delayInitialFocusTimer=void 0,x(),o.active=!1,o.paused=!1,D(),PE.deactivateTrap(i,a);var q=l(F,"onDeactivate"),ie=l(F,"onPostDeactivate"),Q=l(F,"checkCanReturnFocus"),B=l(F,"returnFocus","returnFocusOnDeactivate");q==null||q();var j=function(){RE(function(){B&&b(T(o.nodeFocusedBeforeActivation)),ie==null||ie()})};return B&&Q?(Q(T(o.nodeFocusedBeforeActivation)).then(j,j),this):(j(),this)},pause:function(E){if(o.paused||!o.active)return this;var F=l(E,"onPause"),q=l(E,"onPostPause");return o.paused=!0,F==null||F(),x(),D(),q==null||q(),this},unpause:function(E){if(!o.paused||!o.active)return this;var F=l(E,"onUnpause"),q=l(E,"onPostUnpause");return o.paused=!1,F==null||F(),p(),I(),D(),q==null||q(),this},updateContainerElements:function(E){var F=[].concat(E).filter(Boolean);return o.containers=F.map(function(q){return typeof q=="string"?r.querySelector(q):q}),o.active&&p(),D(),this}},a.updateContainerElements(e),a};const Rz=({isOpen:t,onClose:e,filters:n,onFilterChange:r})=>{const i=R.useRef(null),s=Object.entries(n).some(([u,h])=>u==="searchTerm"?!1:typeof h=="boolean"?h:h!==null),o=R.useMemo(()=>[{title:"Battle Type",options:[{key:"battleType",value:"team",label:"Squads",icon:d.jsx(V2,{className:"w-4 h-4"})},{key:"battleType",value:"fleet",label:"Fleets",icon:d.jsx(Ay,{className:"w-4 h-4"})}]},{title:"Alignment",options:[{key:"alignment",value:"light",label:"Light Side",icon:d.jsx(D2,{className:"w-4 h-4"})},{key:"alignment",value:"dark",label:"Dark Side",icon:d.jsx(C2,{className:"w-4 h-4"})}]}],[]),a=[{key:"showTWOmicronOnly",label:"TW Omicron Only",description:"Show only teams with Territory Wars Omicron abilities"},{key:"showHardCounters",label:"Hard Counters Only",description:"Show only teams with reliable counter options"},{key:"excludeGL",label:"Exclude Galactic Legends",description:"Hide teams with Galactic Legend characters"}];R.useEffect(()=>{if(t&&i.current){const u=Pz(i.current,{escapeDeactivates:!0,allowOutsideClick:!0});return u.activate(),()=>{u.deactivate()}}},[t]);const l=()=>{r("battleType",null),r("alignment",null),r("showTWOmicronOnly",!1),r("showHardCounters",!1),r("excludeGL",!1)};return d.jsx(ce.div,{initial:{opacity:0},animate:{opacity:t?1:0},exit:{opacity:0},transition:{duration:.2},className:`fixed inset-0 bg-black/50 backdrop-blur-sm z-50 ${!t&&"pointer-events-none"}`,children:d.jsxs(ce.div,{ref:i,initial:{x:"100%",opacity:0},animate:{x:t?0:"100%",opacity:t?1:0},transition:{type:"spring",stiffness:300,damping:30},className:`fixed inset-y-0 right-0 w-full max-w-md bg-gradient-to-br \r
                 from-space-darker/90 to-space-dark/90 backdrop-blur-xl\r
                 border-l border-white/10 shadow-2xl rounded-l-2xl\r
                 overflow-hidden z-50`,children:[d.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-white/10",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(T2,{className:`w-5 h-5 ${s?"text-blue-400":"text-white/60"}`}),d.jsx("h2",{className:"text-xl font-orbitron text-white",children:"Filters"})]}),d.jsx(ce.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:e,className:`p-2 text-white/60 hover:text-white hover:bg-white/5 rounded-lg \r
                     transition-colors`,children:d.jsx(je,{className:"w-5 h-5"})})]}),d.jsx("div",{className:"h-[calc(100vh-80px)] overflow-y-auto custom-scrollbar",children:d.jsxs("div",{className:"p-6 space-y-8",children:[o.map(u=>d.jsxs("div",{className:"space-y-4",children:[d.jsx("h3",{className:"text-sm font-medium text-white/60",children:u.title}),d.jsx("div",{className:"grid grid-cols-2 gap-3",children:u.options.map(h=>d.jsxs(ce.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>r(h.key,n[h.key]===h.value?null:h.value),className:`flex items-center justify-center gap-2 p-3 rounded-lg border 
                              transition-all ${n[h.key]===h.value?"bg-blue-500/20 border-blue-400 text-white shadow-neon-blue":"border-white/10 text-white/60 hover:bg-white/5"}`,children:[h.icon,h.label]},h.value))})]},u.title)),d.jsxs("div",{className:"space-y-4",children:[d.jsx("h3",{className:"text-sm font-medium text-white/60",children:"Additional Options"}),a.map(u=>d.jsxs(ce.label,{whileHover:{scale:1.01},className:`flex items-start gap-3 p-4 rounded-lg border border-white/10 \r
                           hover:bg-white/5 cursor-pointer group`,children:[d.jsx("input",{type:"checkbox",checked:n[u.key],onChange:h=>r(u.key,h.target.checked),className:`mt-1 w-4 h-4 rounded border-white/20 bg-white/5 checked:bg-blue-500 \r
                             checked:border-blue-500 transition-colors`}),d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:"text-white group-hover:text-blue-400 transition-colors",children:u.label}),d.jsx("div",{className:"text-sm text-white/40",children:u.description})]})]},u.key))]})]})}),d.jsx("div",{className:`absolute bottom-0 left-0 right-0 p-6 border-t border-white/10 \r
                      bg-space-darker/90 backdrop-blur-xl`,children:d.jsxs(ce.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:l,disabled:!s,className:`flex items-center justify-center gap-2 w-full p-3 rounded-lg \r
                     bg-white/5 text-white hover:bg-white/10 disabled:opacity-50 \r
                     disabled:cursor-not-allowed transition-colors`,children:[d.jsx(Si,{className:"w-4 h-4"}),"Reset All Filters"]})})]})})},Nz="modulepreload",Dz=function(t,e){return new URL(t,e).href},NE={},Vz=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(n.map(u=>{if(u=Dz(u,r),u in NE)return;NE[u]=!0;const h=u.endsWith(".css"),f=h?'[rel="stylesheet"]':"";if(!!r)for(let b=o.length-1;b>=0;b--){const T=o[b];if(T.href===u&&(!h||T.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${f}`))return;const v=document.createElement("link");if(v.rel=h?"stylesheet":Nz,h||(v.as="script"),v.crossOrigin="",v.href=u,l&&v.setAttribute("nonce",l),document.head.appendChild(v),h)return new Promise((b,T)=>{v.addEventListener("load",b),v.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},DE=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,VE=YC,jz=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return VE(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(u=>{const h=n==null?void 0:n[u],f=s==null?void 0:s[u];if(h===null)return null;const p=DE(h)||DE(f);return i[u][p]}),a=n&&Object.entries(n).reduce((u,h)=>{let[f,p]=h;return p===void 0||(u[f]=p),u},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,h)=>{let{class:f,className:p,...v}=h;return Object.entries(v).every(b=>{let[T,A]=b;return Array.isArray(A)?A.includes({...s,...a}[T]):{...s,...a}[T]===A})?[...u,f,p]:u},[]);return VE(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)},Oz=jz("relative w-full rounded-lg border border-gray-200 p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-gray-950 dark:border-gray-800 dark:[&>svg]:text-gray-50",{variants:{variant:{default:"bg-white text-gray-950 dark:bg-gray-950 dark:text-gray-50",destructive:"border-red-500/50 text-red-500 dark:border-red-500 [&>svg]:text-red-500 dark:border-red-900/50 dark:text-red-900 dark:dark:border-red-900 dark:[&>svg]:text-red-900"}},defaultVariants:{variant:"default"}}),Tn=R.forwardRef(({className:t,variant:e,...n},r)=>d.jsx("div",{ref:r,role:"alert",className:Jo(Oz({variant:e}),t),...n}));Tn.displayName="Alert";const Sn=R.forwardRef(({className:t,...e},n)=>d.jsx("h5",{ref:n,className:Jo("mb-1 font-medium leading-none tracking-tight",t),...e}));Sn.displayName="AlertTitle";const In=R.forwardRef(({className:t,...e},n)=>d.jsx("div",{ref:n,className:Jo("text-sm [&_p]:leading-relaxed",t),...e}));In.displayName="AlertDescription";function l0({type:t,isOpen:e,onClose:n,onSelect:r,availableUnits:i,alignment:s,selectionType:o,title:a="Select Unit",isCounterContext:l}){const[u,h]=R.useState(""),f=R.useMemo(()=>i!=null&&i.length?i.filter(v=>{const b=!u||v.name.toLowerCase().includes(u.toLowerCase());if(t==="ship"){const T=v;if(l||o==="capital")return b&&T.isCapital}return b}):[],[i,u,s,t,o,l]);R.useEffect(()=>{var v;console.log("UnitSelector mounted/updated:",{type:t,alignment:s,availableUnitsCount:i.length,selectionType:o,firstUnitName:(v=i[0])==null?void 0:v.name,filteredCount:f.length})},[t,s,i,o,f]),R.useEffect(()=>{console.log("Available Units:",i)},[i]);const p=R.useCallback(v=>{r(v)},[r]);return d.jsx(en,{children:e&&d.jsx(ce.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[70] flex items-center justify-center",onClick:n,children:d.jsxs(ce.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"w-full max-w-md bg-space-darker rounded-lg border border-white/10",onClick:v=>v.stopPropagation(),children:[d.jsxs("div",{className:"p-4 border-b border-white/10 flex justify-between items-center",children:[d.jsx("h3",{className:"text-lg font-medium text-white",children:a}),d.jsx("button",{onClick:n,className:"p-2 text-white/60 hover:text-white hover:bg-white/5 rounded-lg",children:d.jsx(je,{className:"w-5 h-5"})})]}),d.jsxs("div",{className:"p-4",children:[d.jsxs("div",{className:"relative mb-4",children:[d.jsx(Ah,{className:"absolute left-3 top-2.5 w-4 h-4 text-white/40"}),d.jsx("input",{type:"text",value:u,onChange:v=>h(v.target.value),className:`w-full pl-10 pr-4 py-2 bg-white/5 border border-white/10 rounded-lg \r
                         text-white placeholder-white/40`,placeholder:`Search ${t}s...`,autoFocus:!0})]}),d.jsx("div",{className:"max-h-[60vh] overflow-y-auto",children:d.jsx("div",{className:"space-y-2",children:f.length>0?f.map(v=>d.jsxs(ce.button,{onClick:()=>p(v),className:`w-full flex items-center gap-3 p-2 hover:bg-white/5 rounded-lg \r
                               text-left transition-colors`,whileHover:{x:4},children:[d.jsx(we,{id:v.id,name:v.name,type:t==="character"?o==="leader"?"squad-leader":"squad-member":o==="capital"?"capital-ship":"ship",size:"sm",className:"rounded-full border-2 border-blue-500/50",isLeader:o==="leader",isCapital:o==="capital"}),d.jsxs("div",{children:[d.jsx("div",{className:"text-white",children:v.name}),"role"in v&&d.jsx("div",{className:"text-sm text-white/60",children:v.role}),"isCapital"in v&&v.isCapital&&d.jsx("div",{className:"text-sm text-blue-400",children:"Capital Ship"})]})]},v.id)):d.jsx("div",{className:"text-center text-white/60 py-4",children:u.trim()?`No ${t}s found matching "${u}"`:`No ${t}s available`})})})]})]})})})}const Lz=({videoUrl:t,title:e,autoplay:n=!1})=>{const[r,i]=R.useState(!1),[s,o]=R.useState(n),l=(f=>{const p=f.match(/(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))([^&?\s]+)/);return p?p[1]:null})(t);if(!l)return null;const u=`https://img.youtube.com/vi/${l}/maxresdefault.jpg`,h=()=>{o(!0)};return d.jsx("div",{className:`relative ${r?"fixed inset-0 z-50 bg-black/90":""}`,children:d.jsxs("div",{className:`relative ${r?"w-full h-full flex items-center justify-center p-4":"w-full aspect-video"}`,children:[s?d.jsx("iframe",{src:`https://www.youtube.com/embed/${l}?autoplay=1`,title:e||"Strategy Guide",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:`rounded-lg ${r?"w-full max-w-6xl aspect-video":"w-full h-full"}`}):d.jsxs("div",{className:"relative w-full aspect-video rounded-lg overflow-hidden group",children:[d.jsx("img",{src:u,alt:e||"Video thumbnail",className:"w-full h-full object-cover"}),d.jsx("div",{className:`absolute inset-0 bg-black/40 flex items-center justify-center\r
                         group-hover:bg-black/60 transition-colors`,children:d.jsx("button",{onClick:h,className:`bg-red-600 text-white rounded-full p-4 transform\r
                         transition-transform group-hover:scale-110`,children:d.jsx(P2,{className:"w-8 h-8"})})}),e&&d.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black/80",children:d.jsx("h3",{className:"text-white font-medium",children:e})})]}),d.jsx("button",{onClick:()=>i(!r),className:`absolute top-2 right-2 p-2 rounded-lg bg-black/50 text-white hover:bg-black/70\r
                   transition-colors`,children:r?d.jsx(je,{className:"w-5 h-5"}):d.jsx(k2,{className:"w-5 h-5"})})]})})},Mz=({isOpen:t,onClose:e,targetDefense:n,onSave:r,onDelete:i,availableUnits:s,existingCounter:o,isFleet:a})=>{var ie,Q,B;const[l,u]=R.useState(()=>{if(!o)return[];if(a){const j=o.counterSquad;return[j.capitalShip,...j.startingLineup,...j.reinforcements].filter(K=>K!==null)}else{const j=o.counterSquad;return[j.leader,...j.characters||[]].filter(K=>K!==null)}}),[h,f]=R.useState((o==null?void 0:o.counterType)||"hard"),[p,v]=R.useState((o==null?void 0:o.description)||""),[b,T]=R.useState(null),[A,_]=R.useState(!1),[y,w]=R.useState(!1),[P,V]=R.useState({required:(o==null?void 0:o.twOmicronRequired)||!1,comment:(o==null?void 0:o.twOmicronComment)||""}),[O,I]=R.useState((o==null?void 0:o.video_url)||""),[x,k]=R.useState((o==null?void 0:o.datacronRequired)||null),[C,D]=R.useState(((ie=o==null?void 0:o.requirements)==null?void 0:ie.filter(j=>j.type==="mods").map(j=>{const[K,...Z]=j.description.split(":");return{character:K.trim(),description:Z.join(":").trim()}}))||[]);R.useEffect(()=>{console.log("CounterEditor received props:",{targetDefenseType:n.type,targetDefenseName:n.name,availableUnitsCount:s.length,hasExistingCounter:!!o,isFleet:a})},[n,s,o,a]),R.useEffect(()=>{if(o)if(f(o.counterType),v(o.description),o.counterSquad.type==="squad"){const j=o.counterSquad;u([j.leader,...j.characters].filter(K=>K!==null))}else{const j=o.counterSquad;u([j.capitalShip,...j.startingLineup,...j.reinforcements].filter(K=>K!==null))}},[o]);const N=async()=>{if(!navigator.onLine){T("Cannot save while offline");return}try{if(w(!0),l.length===0){T("Please select counter units");return}let j;const K={id:(o==null?void 0:o.id)||`counter-${Date.now()}`,counterType:h,description:p.trim(),video_url:O||void 0,strategy:(o==null?void 0:o.strategy)||[]};if(a){const Z=l,$=q(Z);if($){T($);return}j={...K,targetSquad:n,counterSquad:{id:`fleet-${Date.now()}`,type:"fleet",name:`Counter for ${n.name}`,alignment:n.alignment,capitalShip:Z[0],startingLineup:Z.slice(1,4),reinforcements:Z.slice(4)},requirements:[]}}else j={...K,targetSquad:n,counterSquad:{id:`squad-${Date.now()}`,type:"squad",name:`Counter for ${n.name}`,alignment:n.alignment,leader:l[0],characters:l.slice(1)},twOmicronRequired:P.required,twOmicronComment:P.comment,datacronRequired:x!=null&&x.level?x:void 0,requirements:C.map(Z=>({type:"mods",description:`${Z.character}: ${Z.description}`,priority:"required"}))};await r(j),e()}catch(j){console.error("Error saving counter:",j),T(j instanceof Error?j.message:"Failed to save counter")}finally{w(!1)}},E=async()=>{if(!(!o||!i)){if(!navigator.onLine){T("Cannot delete while offline");return}try{w(!0),await i(o.id),e()}catch(j){console.error("Error deleting counter:",j),T(j instanceof Error?j.message:"Failed to delete counter")}finally{w(!1)}}},F=j=>j===0?"Capital Ship":j>=1&&j<=3?`Starting Ship ${j}`:`Reinforcement ${j-3}`,q=j=>j.length===0?"At least one ship is required":j[0].isCapital?j.length>7?"Maximum of 7 ships allowed":null:"First ship must be a capital ship";return d.jsx(Nc,{fallback:d.jsxs("div",{className:"p-6 bg-red-500/10 rounded-lg border border-red-500/20",children:[d.jsx("h3",{className:"text-lg font-medium text-red-400 mb-2",children:"Counter Editor Error"}),d.jsx("p",{className:"text-sm text-red-400/80 mb-4",children:"An error occurred while editing the counter."}),d.jsxs("div",{className:"flex gap-3",children:[d.jsx("button",{onClick:e,className:`px-4 py-2 rounded-lg bg-white/10 text-white \r
                       hover:bg-white/20`,children:"Close"}),d.jsxs("button",{onClick:()=>window.location.reload(),className:`flex items-center gap-2 px-4 py-2 rounded-lg \r
                       bg-red-500/20 text-red-400 hover:bg-red-500/30`,children:[d.jsx(Si,{className:"w-4 h-4"}),"Refresh"]})]})]}),children:d.jsxs(ce.div,{initial:{opacity:0},animate:{opacity:t?1:0},exit:{opacity:0},className:`fixed inset-0 z-50 overflow-y-auto ${!t&&"pointer-events-none"}`,children:[d.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:e}),d.jsx("div",{className:"min-h-screen flex items-start justify-center py-8",children:d.jsxs(ce.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"relative w-full max-w-2xl mx-4 bg-space-darker rounded-lg border border-white/10",onClick:j=>j.stopPropagation(),children:[d.jsx("div",{className:"sticky top-0 z-10 bg-space-darker border-b border-white/10 p-4",children:d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("h2",{className:"text-xl font-medium text-white",children:o?"Edit Counter":"Add Counter"}),d.jsx("button",{onClick:e,className:"p-2 text-white/60 hover:text-white",children:d.jsx(je,{className:"w-5 h-5"})})]})}),d.jsx("div",{className:"max-h-[calc(100vh-theme(spacing.32))] overflow-y-auto custom-scrollbar",children:d.jsxs("div",{className:"p-6 space-y-6",children:[b&&d.jsxs(Tn,{variant:"destructive",children:[d.jsx(ks,{className:"w-4 h-4"}),d.jsx(Sn,{children:"Error"}),d.jsx(In,{children:b})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-sm font-medium text-white",children:"Counter Type"}),d.jsx("div",{className:"flex gap-3",children:["hard","soft","risky"].map(j=>d.jsx("button",{onClick:()=>f(j),className:`px-4 py-2 rounded-lg capitalize ${h===j?j==="hard"?"bg-green-500/20 text-green-400":j==="soft"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400":"bg-white/5 text-white/60"}`,children:j},j))})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("label",{className:"text-sm font-medium text-white",children:"Counter Units"}),d.jsx("button",{onClick:()=>_(!0),className:"text-sm text-blue-400 hover:text-blue-300",children:"+ Add Unit"})]}),d.jsx("div",{className:"flex flex-wrap gap-4",children:l.filter(j=>j&&j.id).map((j,K)=>d.jsxs("div",{className:"relative",children:[d.jsx(we,{id:j.id,name:j.name,type:n.type==="squad"?"squad-member":"ship",size:"md",className:`${K===0&&a?"border-2 border-blue-400":""}`}),a&&d.jsx("div",{className:"absolute -bottom-6 left-1/2 transform -translate-x-1/2 bg-black/90 px-2 py-1 rounded text-xs text-white whitespace-nowrap",children:F(K)}),d.jsx("button",{onClick:()=>u(Z=>Z.filter(($,W)=>W!==K)),className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center hover:bg-red-600",children:d.jsx(je,{className:"w-3 h-3 text-white"})})]},j.id))})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-sm font-medium text-white",children:"Description"}),d.jsx("textarea",{value:p,onChange:j=>v(j.target.value),className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white",rows:3,placeholder:"Describe how this counter works..."})]}),!a&&d.jsx(d.Fragment,{children:d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-sm font-medium text-white mb-2",children:"Datacron Requirement (Optional)"}),d.jsxs("div",{className:"flex gap-4",children:[d.jsx("input",{type:"number",min:"1",max:"9",placeholder:"Level",value:(x==null?void 0:x.level)||"",onChange:j=>k({level:parseInt(j.target.value),description:(x==null?void 0:x.description)||""}),className:"w-24 px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white"}),d.jsx("input",{type:"text",placeholder:"Description",value:(x==null?void 0:x.description)||"",onChange:j=>k({level:(x==null?void 0:x.level)||1,description:j.target.value}),className:"flex-1 px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white"})]})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-sm font-medium text-white mb-2",children:"Mod Requirements (Optional)"}),d.jsxs("div",{className:"flex gap-4",children:[d.jsx("input",{type:"text",placeholder:"Character",value:((Q=C[0])==null?void 0:Q.character)||"",onChange:j=>{var K;return D([{character:j.target.value,description:((K=C[0])==null?void 0:K.description)||""}])},className:"w-1/3 px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white"}),d.jsx("input",{type:"text",placeholder:"Description",value:((B=C[0])==null?void 0:B.description)||"",onChange:j=>{var K;return D([{character:((K=C[0])==null?void 0:K.character)||"",description:j.target.value}])},className:"flex-1 px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white"})]})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("input",{type:"checkbox",id:"twOmicron",checked:P.required,onChange:j=>V({...P,required:j.target.checked}),className:"w-4 h-4 rounded border-white/10 bg-white/5 text-blue-500"}),d.jsx("label",{htmlFor:"twOmicron",className:"text-sm text-white",children:"Requires Territory Wars Omicron"})]})]})}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-sm font-medium text-white",children:"Video Guide URL (Optional)"}),d.jsx("input",{type:"url",value:O,onChange:j=>I(j.target.value),placeholder:"YouTube URL...",className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white"}),O&&d.jsx("div",{className:"mt-2",children:d.jsx(Lz,{videoUrl:O})})]}),d.jsxs("div",{className:"flex justify-between gap-3 pt-4",children:[d.jsx("div",{children:o&&i&&d.jsx("button",{onClick:E,disabled:y,className:"px-4 py-2 rounded-lg bg-red-500/20 text-red-400 hover:bg-red-500/30 disabled:opacity-50",children:"Delete Counter"})}),d.jsxs("div",{className:"flex gap-3",children:[d.jsx("button",{onClick:e,disabled:y,className:"px-4 py-2 rounded-lg bg-white/10 text-white hover:bg-white/20 disabled:opacity-50",children:"Cancel"}),d.jsx("button",{onClick:N,disabled:y,className:"px-4 py-2 rounded-lg bg-blue-500 text-white hover:bg-blue-600 disabled:opacity-50",children:y?"Saving...":o?"Update Counter":"Save Counter"})]})]})]})}),A&&d.jsx(l0,{type:n.type==="squad"?"character":"ship",isOpen:A,onClose:()=>_(!1),onSelect:j=>{if(a){const K=j;u(Z=>{const $=Z;return $.length===0?K.isCapital?[K]:(T("First ship must be a capital ship"),$):$.length<=3?[...$,K]:$.length<=6?[...$,K]:$})}else u(K=>[...K,j]);_(!1)},availableUnits:s,alignment:n.alignment,selectionType:"member"})]})})]})})},Fz={validateSquadStructure:t=>!!(t.id&&t.name&&t.alignment&&Array.isArray(t.characters)),validateCharacters:t=>t.every(e=>!!(e.id&&e.name&&e.alignment)),validateLeader:t=>t?!!(t.id&&t.name&&t.alignment):!0,validateCompleteSquad:t=>{var e,n,r;return console.log("Validating squad:",{name:t.name,hasLeader:!!t.leader,leader:t.leader,membersCount:(e=t.characters)==null?void 0:e.length,members:t.characters}),(n=t.name)!=null&&n.trim()?t.leader?(r=t.characters)!=null&&r.length?{isValid:!0,error:null}:{isValid:!1,error:"Squad must have at least one member"}:(console.log("Leader validation failed:",t.leader),{isValid:!1,error:"Squad must have a leader"}):{isValid:!1,error:"Squad name is required"}}};class Al{static async withLock(e,n,r=3e4){return this.locks.get(e)?(console.log(`Operation ${e} is locked, waiting...`),new Promise((i,s)=>{const o=setTimeout(()=>{this.locks.set(e,!1),s(new Error(`Operation ${e} timed out`))},r),a=setInterval(()=>{this.locks.get(e)||(clearInterval(a),clearTimeout(o),this.executeWithLock(e,n).then(i).catch(s))},100)})):this.executeWithLock(e,n)}static async executeWithLock(e,n){try{return console.log(`Acquiring lock for ${e}`),this.locks.set(e,!0),await n()}finally{console.log(`Releasing lock for ${e}`),this.locks.set(e,!1)}}static isLocked(e){return this.locks.get(e)||!1}}nn(Al,"locks",new Map);class uh{static async add(e,n){console.log(`Adding operation to queue: ${e}`),this.queue.push({operation:n,key:e}),this.isProcessing||await this.processQueue()}static async processQueue(){if(!(this.isProcessing||this.queue.length===0)){for(this.isProcessing=!0,console.log("Starting queue processing");this.queue.length>0;){const e=this.queue.shift();if(e)try{await Al.withLock(e.key,e.operation),console.log(`Successfully processed operation: ${e.key}`)}catch(n){console.error(`Error processing operation ${e.key}:`,n)}}this.isProcessing=!1,console.log("Queue processing completed")}}}nn(uh,"queue",[]),nn(uh,"isProcessing",!1);class kl{static schedule(e,n,r=this.defaultDelay){this.timers.has(e)&&clearTimeout(this.timers.get(e));const i=setTimeout(async()=>{try{await uh.add(e,n),this.timers.delete(e)}catch(s){console.error(`Error in debounced operation ${e}:`,s)}},r);this.timers.set(e,i)}}nn(kl,"timers",new Map),nn(kl,"defaultDelay",1e3);class rt{static async checkOnline(){return navigator.onLine}static async handleOperation(e,n){if(!await this.checkOnline())throw new Error("Operation cannot be performed while offline");try{return await e()}catch(i){throw console.error(`${n}:`,i),new Error(n)}}static cleanDataForFirestore(e){if(console.log("cleanDataForFirestore called with:",{type:typeof e,isArray:Array.isArray(e),value:e}),e==null)return null;if(Array.isArray(e))return console.log("Processing array with length:",e.length),e.map(n=>this.cleanDataForFirestore(n));if(typeof e=="object"){console.log("Processing object with keys:",Object.keys(e));const n={};for(const[r,i]of Object.entries(e)){console.log(`Processing key "${r}":`,{type:typeof i,isArray:Array.isArray(i),hasValue:i!=null});const s=this.cleanDataForFirestore(i),o=["characters","leader","startingLineup","reinforcements","capitalShip"].includes(r);(s!==null||o)&&(n[r]=s,console.log(`Saved value for "${r}":`,s))}return n}return e}static async logChange(e){var n,r;try{const i=yn(Br(Ge,"changes")),s={...e,id:i.id,timestamp:za(),changes:{...e.changes,[e.entityType]:{old:((n=e.changes[e.entityType])==null?void 0:n.old)||null,new:((r=e.changes[e.entityType])==null?void 0:r.new)||null}}};await ts(i,s)}catch(i){console.error("Error logging change:",i)}}static async deleteSquad(e){try{const n=od(Ge),r=await this.getCurrentUserId(),i=yn(Ge,"squads",e),s=await es(i);if(!s.exists())throw new Error("Squad not found");n.delete(i);const o=gE(Br(Ge,"counters"),yE("targetSquad.id","==",e));(await Xs(o)).docs.forEach(l=>{n.delete(l.ref)}),await n.commit(),await this.logChange({entityId:e,entityType:"squad",changeType:"delete",userId:r,changes:{squad:{old:s.data(),new:null}}})}catch(n){throw console.error("Error deleting squad:",n),new Error("Failed to delete squad")}}static async addOrUpdateSquad(e){return Al.withLock("squad-sync",async()=>this.handleOperation(async()=>{const n=Fz.validateCompleteSquad(e);if(!n.isValid)throw new Error(n.error||"Invalid squad data");const r=await this.getCurrentUserId(),i=await this.documentExists("squads",e.id),s=za(),o={...e,lastUpdated:s,createdAt:i?void 0:s,updatedBy:r},a=yn(Ge,"squads",e.id);await ts(a,this.cleanDataForFirestore(o))},"Failed to save squad"))}static validateFleetData(e){var i;const n=(i=e.startingLineup)==null?void 0:i.every(s=>s.id&&s.name&&s.alignment),r=!e.capitalShip||e.capitalShip.id&&e.capitalShip.name&&e.capitalShip.alignment;return!!(e.id&&e.name&&e.alignment&&n&&r)}static async addOrUpdateFleet(e){return Al.withLock("fleet-sync",async()=>this.handleOperation(async()=>{if(!this.validateFleetData(e))throw new Error("Invalid fleet data structure");const n=await this.getCurrentUserId(),r=await this.documentExists("fleets",e.id),i=za(),s={...e,lastUpdated:i,createdAt:r?void 0:i,updatedBy:n},o=yn(Ge,"fleets",e.id);await ts(o,this.cleanDataForFirestore(s))},"Failed to save fleet"))}static async deleteFleet(e){try{const n=od(Ge),r=await this.getCurrentUserId(),i=yn(Ge,"fleets",e),s=await es(i);if(!s.exists())throw new Error("Fleet not found");n.delete(i);const o=gE(Br(Ge,"counters"),yE("targetSquad.id","==",e));(await Xs(o)).docs.forEach(l=>{n.delete(l.ref)}),await n.commit(),await this.logChange({entityId:e,entityType:"fleet",changeType:"delete",userId:r,changes:{fleet:{old:s.data(),new:null}}})}catch(n){throw console.error("Error deleting fleet:",n),new Error("Failed to delete fleet")}}static async addOrUpdateCounter(e){return Al.withLock("counter-sync",async()=>this.handleOperation(async()=>{const n=e.id||`counter-${Date.now()}`,r=await this.documentExists("counters",n),i=za(),s=await this.getCurrentUserId(),o={...e,id:n,lastUpdated:i,createdAt:r?void 0:i,updatedBy:s},a=yn(Ge,"counters",n);return await ts(a,this.cleanDataForFirestore(o)),o},"Failed to save counter"))}static async deleteCounter(e){return this.handleOperation(async()=>{console.log("Starting delete operation for counter:",e);const n=yn(Ge,"counters",e),r=await es(n);if(!r.exists()){console.log(`Counter ${e} already deleted or doesn't exist`);return}const i=r.data();console.log("Found counter data:",i);const s=od(Ge);s.delete(n);const o=yn(Br(Ge,"changes")),a=await this.getCurrentUserId();s.set(o,{id:o.id,entityId:e,entityType:"counter",changeType:"delete",userId:a,timestamp:za(),changes:{counter:{old:i,new:null}}}),await s.commit(),console.log("Successfully deleted counter and created change log")},"Failed to delete counter")}static async getSquads(){try{return(await Xs(Br(Ge,"squads"))).docs.map(n=>({id:n.id,...n.data()}))}catch(e){throw console.error("Error getting squads:",e),new Error("Failed to get squads")}}static async getFleets(){try{return(await Xs(Br(Ge,"fleets"))).docs.map(n=>({id:n.id,...n.data()}))}catch(e){throw console.error("Error getting fleets:",e),new Error("Failed to get fleets")}}static async getCounters(){try{return(await Xs(Br(Ge,"counters"))).docs.map(n=>({id:n.id,...n.data()}))}catch(e){throw console.error("Error getting counters:",e),new Error("Failed to get counters")}}static async documentExists(e,n){const r=yn(Ge,e,n);return(await es(r)).exists()}static async syncAllData(){try{const[e,n,r]=await Promise.all([this.getSquads(),this.getFleets(),this.getCounters()]);return{squads:e,fleets:n,counters:r,timestamp:new Date().toISOString()}}catch(e){throw console.error("Error syncing data:",e),new Error("Failed to sync data")}}static async getCurrentUserId(){const e=ol.currentUser;if(!e)throw new Error("No authenticated user");return e.uid}}const Uz={sm:"w-8 h-8",md:"w-12 h-12",lg:"w-16 h-16"},ha=({size:t="md",variant:e="default"})=>{const n={default:"border-blue-400",light:"border-white/40",dark:"border-gray-600"};return d.jsx(ce.div,{className:`border-2 border-t-transparent rounded-full ${Uz[t]} ${n[e]}`,animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}})},hP=R.createContext(null);function Bz({children:t}){const[e,n]=R.useState(!1),[r,i]=R.useState(navigator.onLine),[s,o]=R.useState(!0),[a,l]=R.useState(null),[u,h]=R.useState(0);R.useEffect(()=>{(async()=>{try{o(!0),l(null);try{await d6()}catch{throw new Error("Firebase failed to initialize")}await rt.syncAllData(),n(!0)}catch(v){console.error("Firebase initialization error:",v),l(v instanceof Error?v.message:"Failed to initialize Firebase")}finally{o(!1)}})()},[u]),R.useEffect(()=>{const p=()=>{i(!0)},v=()=>i(!1);return window.addEventListener("online",p),window.addEventListener("offline",v),()=>{window.removeEventListener("online",p),window.removeEventListener("offline",v)}},[]);const f=async()=>{h(p=>p+1)};return s&&!a?d.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-space-darker",children:d.jsxs("div",{className:"text-center",children:[d.jsx(ha,{size:"lg",className:"mb-4"}),d.jsx("p",{className:"text-white/60",children:"Initializing..."})]})}):a?d.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-space-darker",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-red-400 text-xl mb-4",children:a}),d.jsx("button",{onClick:f,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Retry"})]})}):d.jsx(hP.Provider,{value:{isInitialized:e,isOnline:r,isLoading:s,error:a,retry:f},children:d.jsxs("div",{className:"relative",children:[!r&&d.jsx("div",{className:"sticky top-0 bg-yellow-500/90 text-black py-2 px-4 text-center z-50",children:"You are currently offline. Changes will be synced when you reconnect."}),t]})})}function fa(){const t=R.useContext(hP);if(!t)throw new Error("useFirebase must be used within a FirebaseProvider");return t}const Mn={SQUADS:"swgoh-tw-squads",FLEETS:"swgoh-tw-fleets",COUNTERS:"swgoh-tw-counters",VERSION:"1.0.0"};class zz{validateData(e){return Array.isArray(e)&&e.every(n=>typeof n=="object"&&n!==null)}async saveData(e,n){try{if(console.log(`Saving data to ${e}:`,n),!this.validateData(n))throw new Error("Invalid data format");const r={data:n,version:Mn.VERSION,lastUpdated:new Date().toISOString()};localStorage.setItem(e,JSON.stringify(r)),console.log(`Data saved successfully to ${e}`)}catch(r){throw console.error(`Error saving ${e}:`,r),r}}getData(e,n=[]){try{console.log(`Getting data from ${e}`);const r=localStorage.getItem(e);if(!r)return console.log(`No data found in ${e}, using default value`),n;const i=JSON.parse(r);return Array.isArray(i)?(console.log(`Found legacy data format in ${e}`),i):i.data&&Array.isArray(i.data)?(console.log(`Found data in ${e}:`,i.data),i.data):(console.log(`Invalid data format in ${e}, using default value`),n)}catch(r){return console.error(`Error getting ${e}:`,r),n}}async saveSquads(e){kl.schedule("save-squads",async()=>{await this.saveData(Mn.SQUADS,e),await rt.addOrUpdateSquad(e[e.length-1])})}getSquads(){return this.getData(Mn.SQUADS,[])}async saveFleets(e){kl.schedule("save-fleets",async()=>{await this.saveData(Mn.FLEETS,e),await rt.addOrUpdateFleet(e[e.length-1])})}getFleets(){return this.getData(Mn.FLEETS,[])}async saveCounters(e){kl.schedule("save-counters",async()=>{await this.saveData(Mn.COUNTERS,e),e.length>0&&await rt.addOrUpdateCounter(e[e.length-1])})}getCounters(){return this.getData(Mn.COUNTERS,[])}async clearAllData(){await uh.add("clear-all",async()=>{try{console.log("Clearing all data"),localStorage.removeItem(Mn.SQUADS),localStorage.removeItem(Mn.FLEETS),localStorage.removeItem(Mn.COUNTERS),console.log("All data cleared successfully")}catch(e){throw console.error("Error clearing data:",e),e}})}}const $z=new zz,fP=R.createContext(null);function pP({children:t}){const[e,n]=R.useState(navigator.onLine),[r,i]=R.useState(null),[s,o]=R.useState(!1),[a,l]=R.useState(!1),[u,h]=R.useState(!0),[f,p]=R.useState(null);R.useEffect(()=>{const A=yA(ol,async _=>{try{if(_){const w=(await es(yn(Ge,"users",_.uid))).data();o((w==null?void 0:w.isAdmin)||!1),l((w==null?void 0:w.isMasterAdmin)||!1),i(_)}else i(null),o(!1),l(!1)}catch(y){console.error("Error checking admin status:",y),p("Failed to verify admin status")}finally{h(!1)}});return()=>A()},[]),R.useEffect(()=>{const A=()=>n(!0),_=()=>n(!1);return window.addEventListener("online",A),window.addEventListener("offline",_),()=>{window.removeEventListener("online",A),window.removeEventListener("offline",_)}},[]);const T={currentUser:r,isAdmin:s,isMasterAdmin:a,login:async(A,_)=>{if(!e)throw new Error("Cannot login while offline");try{p(null);const y=await C4(ol,A,_),w=yn(Ge,"users",y.user.uid);(await es(w)).exists()?await ts(w,{lastLogin:new Date().toISOString()},{merge:!0}):await ts(w,{email:y.user.email,isAdmin:!1,isMasterAdmin:!1,createdAt:new Date().toISOString(),lastLogin:new Date().toISOString()});const O=(await es(w)).data();if(!(O!=null&&O.isAdmin)&&!(O!=null&&O.isMasterAdmin))throw await Jx(ol),new Error("Unauthorized access - not an admin user")}catch(y){const w=y;console.error("Login error:",w);let P="Failed to login. Please try again.";throw w.code==="auth/user-not-found"||w.code==="auth/wrong-password"?P="Invalid email or password":w.code==="auth/too-many-requests"&&(P="Too many failed attempts. Please try again later."),p(P),new Error(P)}},logout:async()=>{if(!e)throw new Error("Cannot logout while offline");try{await Jx(ol),i(null),o(!1),l(!1),$z.clearAllData()}catch(A){throw console.error("Logout error:",A),p("Failed to logout"),A}},loading:u,error:f};return d.jsx(fP.Provider,{value:T,children:!u&&t})}function c0(){const t=R.useContext(fP);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t}const hf=({value:t,onChange:e,label:n=!0})=>{const[r,i]=R.useState(!1),s=()=>{i(!r)},o=a=>{e(a),i(!1)};return d.jsxs("div",{className:"relative",children:[n&&d.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Alignment"}),d.jsxs("button",{type:"button",onClick:s,className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white text-left flex justify-between items-center",children:[d.jsx("span",{children:t==="light"?"Light Side":"Dark Side"}),d.jsx("svg",{className:`w-4 h-4 transition-transform ${r?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),r&&d.jsxs("div",{className:"absolute left-0 right-0 mt-1 bg-space-darker border border-white/10 rounded-lg shadow-lg z-[60]",children:[d.jsx("button",{type:"button",onClick:()=>o("light"),className:"w-full px-3 py-2 text-white hover:bg-white/5 text-left first:rounded-t-lg",children:"Light Side"}),d.jsx("button",{type:"button",onClick:()=>o("dark"),className:"w-full px-3 py-2 text-white hover:bg-white/5 text-left last:rounded-b-lg",children:"Dark Side"})]})]})},qz=({leader:t,members:e,onAddUnit:n,onRemoveUnit:r,alignment:i,showLeaderSelection:s=!0,availableUnits:o})=>{const[a,l]=R.useState(""),[u,h]=R.useState(!1),f=R.useCallback((b,T,A)=>{b.preventDefault(),b.stopPropagation();const _={id:T.id,name:T.name,role:T.role||"",alignment:T.alignment,isGalacticLegend:T.isGalacticLegend||!1};n(_,A),h(!1)},[n]),p=b=>{b.preventDefault(),b.stopPropagation(),h(!0)},v=R.useMemo(()=>{const b=a.toLowerCase(),T=new Set([t==null?void 0:t.id,...e.map(A=>A.id)]);return o.filter(A=>{const _=!a||A.name.toLowerCase().includes(b),y=!T.has(A.id),w=A.alignment===i;return _&&y&&w})},[a,o,t,e,i]);return d.jsxs("div",{className:"space-y-6",onClick:b=>b.stopPropagation(),children:[d.jsxs("div",{className:"relative",children:[d.jsx(Ah,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-white/40"}),d.jsx("input",{type:"text",value:a,onChange:b=>l(b.target.value),onClick:b=>{b.stopPropagation(),h(!0)},className:`w-full pl-10 pr-4 py-2 bg-white/5 border border-white/10 rounded-lg \r
                   text-white placeholder-white/40`,placeholder:"Search characters..."}),u&&d.jsxs(ce.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:`absolute z-50 w-full mt-2 bg-gray-900 border border-white/10 \r
                     rounded-lg shadow-lg max-h-64 overflow-y-auto`,onClick:b=>b.stopPropagation(),children:[d.jsxs("div",{className:"flex justify-between items-center p-2 border-b border-white/10",children:[d.jsx("span",{className:"text-sm text-white/60",children:"Select Character"}),d.jsx("button",{onClick:b=>{b.stopPropagation(),h(!1)},className:"p-1 hover:bg-white/10 rounded",children:d.jsx(je,{className:"w-4 h-4 text-white/60"})})]}),v.length>0?v.map(b=>d.jsx("div",{className:"p-3 hover:bg-white/5 transition-colors",onClick:T=>T.stopPropagation(),children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(we,{id:b.id,name:b.name,type:!t&&s?"squad-leader":"squad-member",size:"sm",className:"rounded-full border-2 border-white/20"}),d.jsxs("div",{children:[d.jsx("div",{className:"text-white",children:b.name}),d.jsx("div",{className:"text-sm text-white/60",children:b.role})]})]}),d.jsxs("div",{className:"flex gap-2",children:[s&&!t&&d.jsx("button",{onClick:T=>f(T,b,!0),className:"px-3 py-1 text-sm rounded-md bg-blue-500/20 text-blue-400 hover:bg-blue-500/30",children:"Set as Leader"}),e.length<4&&d.jsx("button",{onClick:T=>f(T,b,!1),className:"px-3 py-1 text-sm rounded-md bg-white/10 text-white hover:bg-white/20",children:"Add Member"})]})]})},b.id)):d.jsx("div",{className:"p-3 text-white/60 text-center",children:"No matching characters found"})]})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsxs("h3",{className:"text-sm font-medium text-white/60 mb-2 flex items-center gap-2",children:[d.jsx(Ay,{className:"w-4 h-4"}),"Leader"]}),d.jsx("div",{className:"relative group inline-block",children:t?d.jsxs("div",{className:"relative",children:[d.jsx(we,{id:t.id,name:t.name,type:"squad-leader",size:"md",className:"rounded-full border-2 border-blue-400"}),d.jsx("button",{onClick:b=>{b.stopPropagation(),r(t.id,!0)},className:`absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full \r
                           flex items-center justify-center opacity-0 group-hover:opacity-100 \r
                           transition-opacity`,children:d.jsx(je,{className:"w-3 h-3 text-white"})})]}):d.jsx("button",{onClick:p,className:`w-12 h-12 rounded-full border-2 border-dashed border-blue-400/40 \r
                         flex items-center justify-center hover:border-blue-400/60 \r
                         transition-colors`,children:d.jsx("span",{className:"text-blue-400/60",children:"+"})})})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-sm font-medium text-white/60 mb-2",children:"Squad Members"}),d.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.map(b=>d.jsxs("div",{className:"relative group",children:[d.jsx(we,{id:b.id,name:b.name,type:"squad-member",size:"md",className:"rounded-full border-2 border-white/20"}),d.jsx("button",{onClick:T=>{T.stopPropagation(),r(b.id,!1)},className:`absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full \r
                           flex items-center justify-center opacity-0 group-hover:opacity-100 \r
                           transition-opacity`,children:d.jsx(je,{className:"w-3 h-3 text-white"})})]},b.id)),e.length<4&&d.jsx("button",{onClick:p,className:`w-12 h-12 rounded-full border-2 border-dashed border-white/20 \r
                         flex items-center justify-center hover:border-white/40 \r
                         transition-colors`,children:d.jsx("span",{className:"text-white/40",children:"+"})})]})]})]})]})},Kz=({onSave:t,onCancel:e,availableUnits:n})=>{const[r,i]=R.useState(""),[s,o]=R.useState("light"),[a,l]=R.useState(null),[u,h]=R.useState([]),[f,p]=R.useState(!1),[v,b]=R.useState(""),[T,A]=R.useState(null),_=y=>{if(y.preventDefault(),A(null),!r.trim()){A("Squad name is required");return}if(!a){A("Squad must have a leader");return}if(u.length===0){A("Squad must have at least one member");return}const w={id:Ts(r),name:r.trim(),type:"squad",alignment:s,leader:a,characters:u,description:v.trim()||void 0,twOmicronRequired:f};t(w)};return d.jsxs("form",{onSubmit:_,className:"space-y-6",children:[T&&d.jsxs(Tn,{variant:"destructive",children:[d.jsx(ks,{className:"w-4 h-4"}),d.jsx(Sn,{children:"Error"}),d.jsx(In,{children:T})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Squad Name"}),d.jsx("input",{type:"text",value:r,onChange:y=>i(y.target.value),className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white",placeholder:"Enter squad name"})]}),d.jsx("div",{children:d.jsx(hf,{value:s,onChange:o})})]}),d.jsx(qz,{leader:a,members:u,onAddUnit:(y,w)=>{w?l(y):u.length<4&&h(P=>[...P,y])},onRemoveUnit:(y,w)=>{w?l(null):h(P=>P.filter(V=>V.id!==y))},alignment:s,availableUnits:n}),d.jsxs("div",{className:"flex items-center",children:[d.jsx("input",{type:"checkbox",id:"twOmicron",checked:f,onChange:y=>p(y.target.checked),className:"w-4 h-4 rounded border-white/10 bg-white/5 text-blue-500"}),d.jsx("label",{htmlFor:"twOmicron",className:"ml-2 text-sm text-white",children:"Requires Territory Wars Omicron"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Description (Optional)"}),d.jsx("textarea",{value:v,onChange:y=>b(y.target.value),className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white resize-none",rows:3,placeholder:"Add any notes or description..."})]}),d.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[d.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 rounded-lg bg-white/10 text-white hover:bg-white/20",children:"Cancel"}),d.jsx("button",{type:"submit",className:"px-4 py-2 rounded-lg bg-blue-500 text-white hover:bg-blue-600",children:"Save Squad"})]})]})},Gz=({capitalShip:t,startingLineup:e,reinforcements:n,onAddUnit:r,onRemoveUnit:i,alignment:s,availableUnits:o,isCounterSelector:a=!1})=>{const[l,u]=R.useState(""),[h,f]=R.useState(!1),[p,v]=R.useState("capital"),b=R.useCallback((_,y,w)=>{_.preventDefault(),_.stopPropagation();const P={id:y.id,name:y.name,type:y.type,isCapital:y.isCapital,alignment:y.alignment};r(P,w),f(!1)},[r]),T=(_,y)=>{_.preventDefault(),_.stopPropagation(),v(y),f(!0)},A=R.useMemo(()=>{const _=l.toLowerCase(),y=new Set([t==null?void 0:t.id,...e.map(w=>w.id),...n.map(w=>w.id)]);return o.filter(w=>{const P=!l||w.name.toLowerCase().includes(_),V=!y.has(w.id),O=w.alignment===s;if(a)return P&&V&&O;const I=p==="capital"?w.isCapital:!w.isCapital;return P&&V&&O&&I})},[l,o,t,e,n,s,a,p]);return d.jsxs("div",{className:"space-y-6",onClick:_=>_.stopPropagation(),children:[d.jsxs("div",{className:"relative",children:[d.jsx(Ah,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-white/40"}),d.jsx("input",{type:"text",value:l,onChange:_=>u(_.target.value),onClick:_=>_.stopPropagation(),className:"w-full pl-10 pr-4 py-2 bg-white/5 border border-white/10 rounded-lg text-white placeholder-white/40",placeholder:"Search ships..."}),h&&d.jsxs(ce.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute z-50 w-full mt-2 bg-gray-900 border border-white/10 rounded-lg shadow-lg max-h-64 overflow-y-auto",onClick:_=>_.stopPropagation(),children:[d.jsxs("div",{className:"flex justify-between items-center p-2 border-b border-white/10",children:[d.jsxs("span",{className:"text-sm text-white/60",children:["Select ",p==="capital"?"Capital Ship":"Ship"]}),d.jsx("button",{onClick:_=>{_.stopPropagation(),f(!1)},className:"p-1 hover:bg-white/10 rounded",children:d.jsx(je,{className:"w-4 h-4 text-white/60"})})]}),A.length>0?A.map(_=>d.jsx("div",{className:"p-3 hover:bg-white/5 transition-colors",onClick:y=>y.stopPropagation(),children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(we,{id:_.id,name:_.name,type:_.isCapital?"capital-ship":"ship",size:"sm",className:"rounded-full border-2 border-white/20"}),d.jsxs("div",{children:[d.jsx("div",{className:"text-white",children:_.name}),d.jsx("div",{className:"text-sm text-white/60",children:_.isCapital?"Capital Ship":"Ship"})]})]}),d.jsxs("button",{onClick:y=>b(y,_,p),className:"px-3 py-1 text-sm rounded-md bg-blue-500/20 text-blue-400 hover:bg-blue-500/30",children:["Add ",p==="reinforcement"?"Reinforcement":""]})]})},_.id)):d.jsx("div",{className:"p-3 text-white/60 text-center",children:"No matching ships found"})]})]}),d.jsxs("div",{children:[d.jsxs("h3",{className:"text-sm font-medium text-white/60 mb-2 flex items-center gap-2",children:[d.jsx(w2,{className:"w-4 h-4"}),"Capital Ship"]}),d.jsx("div",{className:"relative group inline-block",children:t?d.jsxs("div",{className:"relative",children:[d.jsx(we,{id:t.id,name:t.name,type:"capital-ship",size:"lg",className:"rounded-full border-2 border-blue-400"}),d.jsx("button",{onClick:_=>{_.stopPropagation(),i(t.id,"capital")},className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:d.jsx(je,{className:"w-3 h-3 text-white"})})]}):d.jsx("button",{onClick:_=>T(_,"capital"),className:"w-16 h-16 rounded-full border-2 border-dashed border-blue-400/40 flex items-center justify-center hover:border-blue-400/60 transition-colors",children:d.jsx("span",{className:"text-blue-400/60",children:"+"})})})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-sm font-medium text-white/60 mb-2",children:"Starting Lineup"}),d.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.map(_=>d.jsxs("div",{className:"relative group",children:[d.jsx(we,{id:_.id,name:_.name,type:"ship",size:"md",className:"rounded-full border-2 border-white/20"}),d.jsx("button",{onClick:y=>{y.stopPropagation(),i(_.id,"starting")},className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:d.jsx(je,{className:"w-3 h-3 text-white"})})]},_.id)),e.length<3&&d.jsx("button",{onClick:_=>T(_,"starting"),className:"w-12 h-12 rounded-full border-2 border-dashed border-white/20 flex items-center justify-center hover:border-white/40 transition-colors",children:d.jsx("span",{className:"text-white/40",children:"+"})})]})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-sm font-medium text-white/60 mb-2",children:"Reinforcements"}),d.jsxs("div",{className:"flex flex-wrap gap-4",children:[n.map((_,y)=>d.jsx("div",{className:"relative group",children:d.jsxs("div",{className:"relative",children:[d.jsx(we,{id:_.id,name:_.name,type:"ship",size:"md",className:"rounded-full border-2 border-white/20"}),d.jsx("div",{className:"absolute -top-1 -left-1 w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center text-white text-xs",children:y+1}),d.jsx("button",{onClick:w=>{w.stopPropagation(),i(_.id,"reinforcement")},className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:d.jsx(je,{className:"w-3 h-3 text-white"})})]})},_.id)),n.length<3&&d.jsx("button",{onClick:_=>T(_,"reinforcement"),className:"w-12 h-12 rounded-full border-2 border-dashed border-white/20 flex items-center justify-center hover:border-white/40 transition-colors",children:d.jsx("span",{className:"text-white/40",children:"+"})})]})]})]})},Wz=({onSave:t,onCancel:e,availableUnits:n})=>{const[r,i]=R.useState(""),[s,o]=R.useState("light"),[a,l]=R.useState(null),[u,h]=R.useState([]),[f,p]=R.useState([]),[v,b]=R.useState(""),[T,A]=R.useState(null),_=y=>{if(y.preventDefault(),A(null),!r.trim()){A("Fleet name is required");return}if(!a){A("Fleet must have a capital ship");return}if(u.length===0){A("Fleet must have at least one ship in starting lineup");return}const w={id:Ts(r),name:r.trim(),type:"fleet",alignment:s,capitalShip:a,startingLineup:u,reinforcements:f,description:v.trim()||void 0};t(w)};return d.jsxs("form",{onSubmit:_,className:"space-y-6",children:[T&&d.jsxs(Tn,{variant:"destructive",children:[d.jsx(ks,{className:"w-4 h-4"}),d.jsx(Sn,{children:"Error"}),d.jsx(In,{children:T})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Fleet Name"}),d.jsx("input",{type:"text",value:r,onChange:y=>i(y.target.value),className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white",placeholder:"Enter fleet name"})]}),d.jsx("div",{children:d.jsx(hf,{value:s,onChange:o})})]}),d.jsx(Gz,{capitalShip:a,startingLineup:u,reinforcements:f,onAddUnit:(y,w)=>{switch(w){case"capital":l(y);break;case"starting":u.length<3&&h(P=>[...P,y]);break;case"reinforcement":f.length<3&&p(P=>[...P,y]);break}},onRemoveUnit:(y,w)=>{switch(w){case"capital":l(null);break;case"starting":h(P=>P.filter(V=>V.id!==y));break;case"reinforcement":p(P=>P.filter(V=>V.id!==y));break}},alignment:s,availableUnits:n}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Description (Optional)"}),d.jsx("textarea",{value:v,onChange:y=>b(y.target.value),className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white resize-none",rows:3,placeholder:"Add any notes or description..."})]}),d.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[d.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 rounded-lg bg-white/10 text-white hover:bg-white/20",children:"Cancel"}),d.jsx("button",{type:"submit",className:"px-4 py-2 rounded-lg bg-blue-500 text-white hover:bg-blue-600",children:"Create Fleet"})]})]})},Hz=({isOpen:t,onClose:e,onSave:n,initialType:r="squad",availableUnits:i})=>{const[s,o]=R.useState(r);if(!t)return null;const a=async l=>{try{await n(l),console.log("Defense saved successfully"),e()}catch(u){console.error("Error saving:",u)}};return d.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center overflow-y-auto",children:d.jsxs(ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"w-full max-w-2xl mx-4 my-8 bg-space-darker rounded-lg border border-white/10",children:[d.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-white/10",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsxs("button",{onClick:()=>o("squad"),className:`flex items-center gap-2 px-4 py-2 rounded-lg ${s==="squad"?"bg-blue-500":"bg-white/5"}`,children:[d.jsx(Ay,{className:"w-4 h-4"}),"Squad"]}),d.jsxs("button",{onClick:()=>o("fleet"),className:`flex items-center gap-2 px-4 py-2 rounded-lg ${s==="fleet"?"bg-blue-500":"bg-white/5"}`,children:[d.jsx(mc,{className:"w-4 h-4"}),"Fleet"]})]}),d.jsx("button",{onClick:e,className:"p-2 text-white/60 hover:text-white hover:bg-white/5 rounded-lg",children:d.jsx(je,{className:"w-5 h-5"})})]}),d.jsx("div",{className:"max-h-[calc(100vh-200px)] overflow-y-auto",children:d.jsx("div",{className:"p-6",children:s==="squad"?d.jsx(Kz,{onSave:a,onCancel:e,availableUnits:i}):d.jsx(Wz,{onSave:a,onCancel:e,availableUnits:i})})})]})})},Qz=({notifications:t,onDismiss:e})=>d.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:d.jsx(en,{children:t.map(n=>d.jsxs(ce.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm
              ${n.type==="success"?"bg-green-500/10 text-green-400 border border-green-400/20":"bg-red-500/10 text-red-400 border border-red-400/20"}`,onClick:()=>e(n.id),children:[n.type==="success"?d.jsx(x2,{className:"w-3.5 h-3.5"}):d.jsx(Y1,{className:"w-3.5 h-3.5"}),n.message]},n.id))})}),Yz=({onClose:t})=>d.jsx(ce.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center",children:d.jsxs(ce.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-space-darker w-full max-w-2xl rounded-lg border border-white/10",children:[d.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-white/10",children:[d.jsx("h2",{className:"text-xl font-bold text-white",children:"Admin Settings"}),d.jsx("button",{onClick:t,className:"p-2 text-green-500 hover:text-green-100 hover:bg-green-500 rounded-lg",children:"Tillbaka"})]}),d.jsx("div",{className:"p-6",children:d.jsx("p",{className:"text-white/60",children:"Här var det tom. Funktionen är för närvarande inaktiverad men kan användas i framtiden."})})]})});class Xz{static cleanDataForFirestore(e){if(e==null)return null;if(Array.isArray(e))return e.map(n=>this.cleanDataForFirestore(n)).filter(n=>n!=null);if(typeof e=="object"){const n={};for(const[r,i]of Object.entries(e)){const s=this.cleanDataForFirestore(i);s!=null&&(n[r]=s)}return n}return e}static async createAdminUser(e){try{console.log("Creating admin user...");const n=yn(Ge,"users","admin");return await ts(n,{email:e,isAdmin:!0,isMasterAdmin:!0,createdAt:new Date().toISOString(),lastLogin:new Date().toISOString()}),console.log("Admin user created successfully"),!0}catch(n){throw console.error("Error creating admin user:",n),n}}static async syncAll(){try{return console.log("Starting full data sync..."),await Promise.all([this.createAdminUser("admin@example.com")]),console.log("All data synced successfully"),!0}catch(e){throw console.error("Error during full sync:",e),e}}static async clearAllData(){try{console.log("Starting data clear...");const e=["squads","fleets","counters"],n=od(Ge);for(const r of e)(await Xs(Br(Ge,r))).forEach(s=>{n.delete(s.ref)});return await n.commit(),console.log("All data cleared successfully"),!0}catch(e){throw console.error("Error clearing data:",e),e}}}const Jz=()=>{const[t,e]=R.useState(!1),[n,r]=R.useState(null),[i,s]=R.useState(!1),[o,a]=R.useState(!1);R.useEffect(()=>{let h;return o&&(h=setTimeout(()=>{a(!1)},4e3)),()=>{h&&clearTimeout(h)}},[o]);const l=async()=>{e(!0),r(null),s(!1),a(!1);try{await Promise.all([Xz.syncAll(),new Promise(h=>setTimeout(h,2e3))]),s(!0),setTimeout(()=>{a(!0),s(!0),setTimeout(()=>{s(!1),a(!1)},4e3)},100)}catch(h){r(h instanceof Error?h.message:"Ett fel uppstod vid synkronisering"),setTimeout(()=>{a(!0),setTimeout(()=>{r(null),a(!1)},4e3)},100)}finally{e(!1)}},u=()=>{if(t)return"bg-gray-500 cursor-not-allowed";if(o){if(i)return"bg-green-500 hover:bg-green-600";if(n)return"bg-red-500 hover:bg-red-600"}return"bg-blue-500 hover:bg-blue-600"};return d.jsxs("div",{className:"relative",children:[d.jsxs(ce.button,{onClick:l,disabled:t,className:`flex items-center gap-2 px-4 py-2 rounded-lg ${u()} 
                   text-white transition-all duration-300`,animate:{scale:t?.98:1},children:[d.jsx(Si,{className:`w-4 h-4 transition-transform ${t?"animate-spin":""}`}),t?"Syncing...":"Sync Data"]}),d.jsx(en,{children:(n||i)&&d.jsxs(ce.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"absolute top-full mt-2 right-0 min-w-[200px]",children:[n&&d.jsxs(Tn,{variant:"destructive",children:[d.jsx(Sn,{children:"Error"}),d.jsx(In,{children:n})]}),i&&d.jsxs(Tn,{className:"bg-green-500/10 border-green-500/20 text-green-400",children:[d.jsx(Sn,{children:"Success"}),d.jsx(In,{children:"Data synced successfully!"})]})]})})]})},u0=R.memo(({value:t,onChange:e,onClear:n,suggestions:r=[],onSelectSuggestion:i,placeholder:s="Search teams or ships..."})=>{const o=R.useMemo(()=>r.slice(0,10),[r]),[a,l]=R.useState(!1),[u,h]=R.useState({}),f=R.useRef(null);return R.useEffect(()=>{const p=async()=>{const v={};for(const b of o)try{"leader"in b&&b.leader?v[b.leader.id]=await Cg(b.leader.id,"character"):"capitalShip"in b&&b.capitalShip&&(v[b.capitalShip.id]=await Cg(b.capitalShip.id,"ship"))}catch(T){console.error("Failed to load image for suggestion:",T),v[b.id]="/placeholder.png"}h(v)};o.length>0&&p()},[o]),d.jsxs("div",{className:"relative w-full",children:[d.jsxs("div",{className:"relative",children:[d.jsx("input",{ref:f,type:"text",value:t,onChange:p=>e(p.target.value),onFocus:()=>l(!0),onBlur:()=>setTimeout(()=>l(!1),200),className:`w-full bg-white/5 border border-white/10 rounded-lg pl-10 pr-10 py-2 \r
                   text-white placeholder-white/40 focus:outline-none focus:ring-2 \r
                   focus:ring-blue-400/50 focus:border-transparent`,placeholder:s}),d.jsx(Ah,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-white/40"}),t&&d.jsx("button",{onClick:()=>{var p;n(),(p=f.current)==null||p.focus()},className:`absolute right-3 top-1/2 transform -translate-y-1/2 \r
                     text-white/40 hover:text-white`,children:d.jsx(je,{className:"w-4 h-4"})})]}),d.jsx(en,{children:a&&o.length>0&&d.jsx(ce.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:`absolute z-50 w-full mt-2 bg-space-dark border border-white/10 \r
                     rounded-lg shadow-lg overflow-hidden max-h-[300px] overflow-y-auto`,children:o.map(p=>d.jsxs("button",{onClick:()=>i==null?void 0:i(p),className:`w-full px-4 py-3 flex items-center gap-3 hover:bg-white/5 \r
                         transition-colors text-left`,children:["leader"in p&&p.leader?d.jsx("img",{src:u[p.leader.id]||"/placeholder.png",alt:p.leader.name,className:"w-8 h-8 rounded-full object-cover"}):"capitalShip"in p&&p.capitalShip?d.jsx("img",{src:u[p.capitalShip.id]||"/placeholder.png",alt:p.capitalShip.name,className:"w-8 h-8 rounded-full object-cover"}):null,d.jsxs("div",{children:[d.jsx("div",{className:"text-white",children:p.name}),d.jsx("div",{className:"text-sm text-white/40",children:"leader"in p?"Squad":"Fleet"})]})]},p.id))})})]})});u0.displayName="SearchBar";const ff=({counters:t,targetDefense:e,onEdit:n,onDelete:r})=>{const i=async o=>{try{n&&await n(o)}catch(a){console.error("Error editing counter:",a)}},s=async o=>{try{r&&await r(o)}catch(a){console.error("Error deleting counter:",a)}};return t.length===0?null:d.jsxs("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto",children:[d.jsxs("h4",{className:"text-sm font-medium text-white/60",children:["Counters for ",e.name]}),d.jsx("div",{className:"space-y-3",children:t.filter(o=>o.targetSquad.id===e.id).map(o=>{var a;return d.jsxs(ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"p-4 bg-white/5 rounded-lg space-y-4",children:[d.jsxs("div",{className:"flex justify-between items-start",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:`px-2 py-1 rounded-full text-xs
                    ${o.counterType==="hard"?"bg-green-500/20 text-green-400":o.counterType==="soft"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:o.counterType.charAt(0).toUpperCase()+o.counterType.slice(1)}),o.twOmicronRequired&&d.jsx("span",{className:"px-2 py-1 rounded-full text-xs bg-purple-500/20 text-purple-400",children:"TW Omni"}),o.video_url&&d.jsxs("span",{className:"flex items-center gap-1 px-2 py-1 rounded-full text-xs bg-red-500/20 text-red-400",children:[d.jsx(iS,{className:"w-3 h-3"}),"Video"]})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:()=>i(o),className:"p-2 text-blue-400 hover:bg-blue-400/10 rounded-lg",children:d.jsx(R2,{className:"w-4 h-4"})}),d.jsx("button",{onClick:()=>s(o.id),className:"p-2 text-red-400 hover:bg-red-400/10 rounded-lg",children:d.jsx(gc,{className:"w-4 h-4"})})]})]}),d.jsx("p",{className:"text-white/70",children:o.description}),((a=o.requirements)==null?void 0:a.length)>0&&d.jsxs("div",{className:"p-3 bg-blue-500/10 rounded-lg border border-blue-500/20",children:[d.jsx("h4",{className:"text-sm font-medium text-blue-400 mb-2",children:"Mod Requirements"}),o.requirements.filter(l=>l.type==="mods").map((l,u)=>d.jsx("div",{className:"text-sm text-white/70",children:l.description},u))]}),"leader"in o.counterSquad?d.jsxs("div",{className:"flex items-center gap-2",children:[o.counterSquad.leader&&d.jsx(we,{id:o.counterSquad.leader.id,name:o.counterSquad.leader.name,type:"squad-leader",size:"sm",className:"border-2 border-blue-400"}),o.counterSquad.characters.map(l=>d.jsx(we,{id:l.id,name:l.name,type:"squad-member",size:"sm",className:"border-2 border-white/20"},l.id))]}):d.jsxs("div",{className:"flex items-center gap-2",children:[o.counterSquad.capitalShip&&d.jsx(we,{id:o.counterSquad.capitalShip.id,name:o.counterSquad.capitalShip.name,type:"capital-ship",size:"sm",className:"border-2 border-blue-400"}),o.counterSquad.startingLineup.map(l=>d.jsx(we,{id:l.id,name:l.name,type:"ship",size:"sm",className:"border-2 border-white/20"},l.id))]})]},o.id)})})]})},pf=({defense:t,onAddCounter:e,disabled:n=!1})=>d.jsxs("button",{onClick:()=>e(t),disabled:n,className:`flex items-center gap-2 px-4 py-2 rounded-lg 
                ${n?"bg-gray-500/20 text-gray-400 cursor-not-allowed":"bg-green-500/20 text-green-400 hover:bg-green-500/30"} 
                transition-colors`,children:[d.jsx(li,{className:"w-4 h-4"}),"Add Counter"]}),Zz=({squad:t,counters:e,availableUnits:n,onClose:r,onUpdate:i,onDelete:s,onUpdateCounter:o,onDeleteCounter:a,onAddCounter:l,isOnline:u,saving:h=!1})=>{const[f,p]=R.useState(t.name),[v,b]=R.useState(!1),[T,A]=R.useState(t.alignment),[_,y]=R.useState(t.description||""),[w,P]=R.useState(t.twOmicronRequired||!1),[V,O]=R.useState(!1),[I,x]=R.useState("leader"),k=async()=>{if(u)try{const F={...t,name:f,alignment:T,id:Ts(f),description:_.trim()||void 0,twOmicronRequired:w};await i(F),r()}catch(F){console.error("Error saving squad:",F)}},C=()=>{s(t.id),r()},D=(F,q)=>{const ie={...t};q?ie.leader=null:ie.characters=ie.characters.filter(Q=>Q.id!==F),i(ie)},N=(F,q)=>{const ie={...F,id:Ts(F.name)},Q={...t};q?Q.leader=ie:Q.characters.length<4&&(Q.characters=[...Q.characters,ie]),i(Q)},E=e.filter(F=>F.targetSquad.id===t.id);return d.jsxs("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 overflow-y-auto",children:[d.jsx("div",{className:"min-h-full w-full flex items-start justify-center py-8",children:d.jsxs("div",{className:"relative w-full max-w-4xl mx-4 bg-space-darker rounded-lg border border-white/10",children:[d.jsxs("div",{className:"sticky top-0 z-10 flex justify-between items-center p-4 border-b border-white/10 bg-space-darker",children:[d.jsx("h2",{className:"text-xl font-bold text-white",children:"Edit Squad"}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{onClick:()=>b(!0),className:"p-2 text-red-400 hover:bg-red-400/10 rounded-lg",children:d.jsx(gc,{className:"w-5 h-5"})}),d.jsx("button",{onClick:r,className:"p-2 text-white/60 hover:text-white hover:bg-white/5 rounded-lg",children:d.jsx(je,{className:"w-5 h-5"})})]})]}),d.jsxs("div",{className:"p-6 space-y-6",children:[d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Squad Name"}),d.jsx("input",{type:"text",value:f,onChange:F=>p(F.target.value),className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white"})]}),d.jsx("div",{children:d.jsx(hf,{value:T,onChange:A})})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-medium text-white mb-4",children:"Squad Formation"}),d.jsxs("div",{className:"mb-6",children:[d.jsx("h4",{className:"text-sm font-medium text-white/60 mb-2",children:"Leader"}),d.jsxs("div",{className:"flex flex-wrap gap-4",children:[t.leader&&d.jsxs("div",{className:"relative",children:[d.jsx(we,{id:t.leader.id,name:t.leader.name,type:"squad-leader",size:"lg",className:"border-2 border-blue-400"}),d.jsx("button",{onClick:()=>D(t.leader.id,!0),className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center hover:bg-red-600",children:d.jsx(je,{className:"w-3 h-3 text-white"})})]}),!t.leader&&d.jsx("button",{onClick:()=>{x("leader"),O(!0)},className:"w-20 h-20 rounded-lg border-2 border-dashed border-blue-500/50 flex items-center justify-center hover:border-blue-500",children:d.jsx(li,{className:"w-6 h-6 text-blue-500/50"})})]})]}),d.jsxs("div",{children:[d.jsx("h4",{className:"text-sm font-medium text-white/60 mb-2",children:"Squad Members"}),d.jsxs("div",{className:"flex flex-wrap gap-4",children:[t.characters.map(F=>d.jsxs("div",{className:"relative",children:[d.jsx(we,{id:F.id,name:F.name,type:"squad-member",size:"md",className:"border-2 border-white/20"}),d.jsx("button",{onClick:()=>D(F.id,!1),className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center hover:bg-red-600",children:d.jsx(je,{className:"w-3 h-3 text-white"})})]},F.id)),t.characters.length<4&&d.jsx("button",{onClick:()=>{x("member"),O(!0)},className:"w-16 h-16 rounded-lg border-2 border-dashed border-white/20 flex items-center justify-center hover:border-white/40",children:d.jsx(li,{className:"w-4 h-4 text-white/40"})})]})]})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Description (Optional)"}),d.jsx("textarea",{value:_,onChange:F=>y(F.target.value),className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white resize-none",rows:2,placeholder:"Add any additional notes about this squad..."})]}),d.jsxs("div",{className:"flex items-center",children:[d.jsx("input",{type:"checkbox",id:"twOmicron",checked:w,onChange:F=>P(F.target.checked),className:`w-4 h-4 rounded border-white/10 bg-white/5 text-blue-500 \r
                           focus:ring-blue-500 focus:ring-offset-space-darker`}),d.jsx("label",{htmlFor:"twOmicron",className:"ml-2 text-sm text-white",children:"Requires Territory Wars Omicron"})]})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsx("h3",{className:"text-lg font-medium text-white",children:"Counters"}),d.jsx(pf,{defense:t,onAddCounter:()=>l(t)})]}),d.jsx(ff,{counters:E,targetDefense:t,onEdit:o,onDelete:a})]}),d.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[d.jsx("button",{onClick:r,className:"px-4 py-2 rounded-lg bg-white/10 text-white hover:bg-white/20",disabled:h,children:"Cancel"}),d.jsx("button",{onClick:k,disabled:!u||h,className:`px-4 py-2 rounded-lg ${!u||h?"bg-gray-500 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600"} text-white`,children:h?"Saving...":"Save Changes"})]})]})]})}),d.jsx(en,{children:v&&d.jsx(ce.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[60] flex items-center justify-center",children:d.jsxs(ce.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-space-darker p-6 rounded-lg max-w-md w-full mx-4 border border-white/10",children:[d.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Delete Squad"}),d.jsx("p",{className:"text-white/70 mb-6",children:"Are you sure you want to delete this squad? This action cannot be undone."}),d.jsxs("div",{className:"flex justify-end gap-3",children:[d.jsx("button",{onClick:()=>b(!1),className:"px-4 py-2 rounded-lg bg-white/10 text-white hover:bg-white/20",children:"Cancel"}),d.jsx("button",{onClick:C,className:"px-4 py-2 rounded-lg bg-red-500 text-white hover:bg-red-600",children:"Delete"})]})]})})}),h&&d.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:d.jsx(ha,{size:"lg"})}),V&&d.jsx(l0,{type:"character",isOpen:V,onClose:()=>O(!1),onSelect:F=>{N(F,I==="leader"),O(!1)},availableUnits:n,alignment:t.alignment,selectionType:I,title:`Select ${I==="leader"?"Leader":"Member"}`})]})},e9=({squads:t,counters:e,availableUnits:n,onUpdate:r,onDelete:i,onAddCounter:s,onEditCounter:o,onDeleteCounter:a})=>{const{isOnline:l,isLoading:u}=fa(),[h,f]=R.useState(!1),[p,v]=R.useState(null),[b,T]=R.useState(null),A=async y=>{if(!l){T("Cannot save while offline");return}try{f(!0),await r(y),T(null)}catch(w){console.error("Error updating squad:",w),T("Failed to update squad")}finally{f(!1)}},_=async y=>{try{await i(y),T(null)}catch(w){console.error("Error deleting squad:",w),T("Failed to delete squad")}};return u?d.jsx("div",{className:"flex justify-center items-center p-8",children:d.jsx(ha,{size:"lg"})}):d.jsxs("div",{className:"space-y-4",children:[!l&&d.jsxs(Tn,{children:[d.jsx(Sn,{children:"Offline Mode"}),d.jsx(In,{children:"You are currently offline. Changes will be saved when you reconnect."})]}),b&&d.jsxs(Tn,{variant:"destructive",children:[d.jsx(ks,{className:"w-4 h-4"}),d.jsx(Sn,{children:"Error"}),d.jsx(In,{children:b})]}),t.map(y=>d.jsxs("div",{className:"p-4 rounded-lg bg-space-dark border border-white/10",children:[d.jsxs("div",{className:"flex justify-between items-start",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsxs("div",{className:"flex items-center space-x-2",children:[y.leader&&d.jsx(we,{id:y.leader.id,name:y.leader.name,type:"squad-leader",size:"md",className:"border-2 border-blue-400"}),y.characters.map(w=>d.jsx(we,{id:w.id,name:w.name,type:"squad-member",size:"md",className:"border-2 border-white/20"},w.id))]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-medium text-white",children:y.name}),d.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[d.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs
                    ${y.alignment==="light"?"bg-blue-500/20 text-blue-400":"bg-red-500/20 text-red-400"}`,children:y.alignment==="light"?"Light Side":"Dark Side"}),y.twOmicronRequired&&d.jsx("span",{className:"inline-block px-2 py-1 rounded-full text-xs bg-purple-500/20 text-purple-400",children:"TW Omicron"})]})]})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(pf,{defense:y,onAddCounter:()=>s(y),disabled:!l}),d.jsx("button",{onClick:()=>v(y),className:"p-2 text-blue-400 hover:bg-blue-400/10 rounded-lg",disabled:!l,children:d.jsx(pc,{className:"w-4 h-4"})})]})]}),y.description&&d.jsx("div",{className:"mt-2 text-sm text-white/60",children:y.description}),d.jsx("div",{className:"mt-4",children:d.jsx(ff,{counters:e.filter(w=>w.targetSquad.id===y.id),targetDefense:y,onEdit:o,onDelete:a})})]},y.id)),p&&d.jsx(Zz,{squad:p,counters:e,availableUnits:n,onClose:()=>{v(null),T(null)},onUpdate:A,onDelete:_,onUpdateCounter:o,onDeleteCounter:a,onAddCounter:s,isOnline:l,saving:h})]})},t9=({fleet:t,counters:e,availableUnits:n,onClose:r,onUpdate:i,onDelete:s,onUpdateCounter:o,onDeleteCounter:a,onSelectForCounter:l})=>{const[u,h]=R.useState(t.name),[f,p]=R.useState(t.callOrder||""),[v,b]=R.useState(!1),[T,A]=R.useState(t.alignment),[_,y]=R.useState(!1),[w,P]=R.useState("capital"),[V,O]=R.useState(!1),[I,x]=R.useState(null),{isOnline:k}=fa(),C=async()=>{if(!k){x("Cannot save while offline");return}try{O(!0);const q={...t,name:u,alignment:T,id:Ts(u),callOrder:f.trim()||void 0};await i(q),r()}catch(q){console.error("Error saving fleet:",q),x("Failed to save fleet")}finally{O(!1)}},D=async()=>{if(!k){x("Cannot delete while offline");return}try{O(!0),await s(t.id),r()}catch(q){console.error("Error deleting fleet:",q),x("Failed to delete fleet")}finally{O(!1)}},N=(q,ie)=>{const Q={...q,id:Ts(q.name)},B={...t};switch(ie){case"capital":B.capitalShip=Q;break;case"starting":B.startingLineup.length<3&&(B.startingLineup=[...B.startingLineup,Q]);break;case"reinforcement":B.reinforcements.length<3&&(B.reinforcements=[...B.reinforcements,Q]);break}i(B)},E=(q,ie)=>{const Q={...t};switch(ie){case"capital":Q.capitalShip=null;break;case"starting":Q.startingLineup=Q.startingLineup.filter(B=>B.id!==q);break;case"reinforcement":Q.reinforcements=Q.reinforcements.filter(B=>B.id!==q);break}i(Q)},F=e.filter(q=>q.targetSquad.id===t.id);return d.jsxs("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 overflow-y-auto",children:[d.jsx("div",{className:"min-h-full w-full flex items-start justify-center py-8",children:d.jsxs("div",{className:"relative w-full max-w-4xl mx-4 bg-space-darker rounded-lg border border-white/10",children:[d.jsxs("div",{className:"sticky top-0 z-10 flex justify-between items-center p-4 border-b border-white/10 bg-space-darker",children:[d.jsx("h2",{className:"text-xl font-bold text-white",children:"Edit Fleet"}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{onClick:()=>b(!0),className:"p-2 text-red-400 hover:bg-red-400/10 rounded-lg",children:d.jsx(gc,{className:"w-5 h-5"})}),d.jsx("button",{onClick:r,className:"p-2 text-white/60 hover:text-white hover:bg-white/5 rounded-lg",children:d.jsx(je,{className:"w-5 h-5"})})]})]}),d.jsxs("div",{className:"p-6 space-y-6",children:[d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Fleet Name"}),d.jsx("input",{type:"text",value:u,onChange:q=>h(q.target.value),className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white"})]}),d.jsx("div",{children:d.jsx(hf,{value:T,onChange:A})})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-medium text-white mb-4",children:"Fleet Formation"}),d.jsxs("div",{className:"mb-6",children:[d.jsx("h4",{className:"text-sm font-medium text-white/60 mb-2",children:"Capital Ship"}),d.jsxs("div",{className:"flex flex-wrap gap-4",children:[t.capitalShip&&d.jsxs("div",{className:"relative",children:[d.jsx(we,{id:t.capitalShip.id,name:t.capitalShip.name,type:"capital-ship",size:"lg",className:"border-2 border-blue-400"}),d.jsx("button",{onClick:()=>E(t.capitalShip.id,"capital"),className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center hover:bg-red-600",children:d.jsx(je,{className:"w-3 h-3 text-white"})})]}),!t.capitalShip&&d.jsx("button",{onClick:()=>{P("capital"),y(!0)},className:"w-20 h-20 rounded-lg border-2 border-dashed border-blue-500/50 flex items-center justify-center hover:border-blue-500",children:d.jsx(li,{className:"w-6 h-6 text-blue-500/50"})})]})]}),d.jsxs("div",{className:"mb-6",children:[d.jsx("h4",{className:"text-sm font-medium text-white/60 mb-2",children:"Starting Lineup"}),d.jsxs("div",{className:"flex flex-wrap gap-4",children:[t.startingLineup.map(q=>d.jsxs("div",{className:"relative",children:[d.jsx(we,{id:q.id,name:q.name,type:"ship",size:"md",className:"border-2 border-white/20"}),d.jsx("button",{onClick:()=>E(q.id,"starting"),className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center hover:bg-red-600",children:d.jsx(je,{className:"w-3 h-3 text-white"})})]},q.id)),t.startingLineup.length<3&&d.jsx("button",{onClick:()=>{P("starting"),y(!0)},className:"w-16 h-16 rounded-lg border-2 border-dashed border-white/20 flex items-center justify-center hover:border-white/40",children:d.jsx(li,{className:"w-4 h-4 text-white/40"})})]})]}),d.jsxs("div",{children:[d.jsx("h4",{className:"text-sm font-medium text-white/60 mb-2",children:"Reinforcements"}),d.jsxs("div",{className:"flex flex-wrap gap-4",children:[t.reinforcements.map((q,ie)=>d.jsxs("div",{className:"relative",children:[d.jsx(we,{id:q.id,name:q.name,type:"ship",size:"md",className:"border-2 border-white/20"}),d.jsx("div",{className:"absolute -top-1 -left-1 w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center text-white text-xs",children:ie+1}),d.jsx("button",{onClick:()=>E(q.id,"reinforcement"),className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center hover:bg-red-600",children:d.jsx(je,{className:"w-3 h-3 text-white"})})]},q.id)),t.reinforcements.length<3&&d.jsx("button",{onClick:()=>{P("reinforcement"),y(!0)},className:"w-16 h-16 rounded-lg border-2 border-dashed border-white/20 flex items-center justify-center hover:border-white/40",children:d.jsx(li,{className:"w-4 h-4 text-white/40"})})]})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Call Order"}),d.jsx("textarea",{value:f,onChange:q=>p(q.target.value),className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white resize-none",rows:2,placeholder:"Enter reinforcement call order strategy..."})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsx("h3",{className:"text-lg font-medium text-white",children:"Counters"}),d.jsx(pf,{defense:t,onAddCounter:()=>l(t),disabled:!k||V})]}),d.jsx(ff,{counters:F,targetDefense:t,onEdit:o,onDelete:a})]}),d.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[d.jsx("button",{onClick:r,className:"px-4 py-2 rounded-lg bg-white/10 text-white hover:bg-white/20",children:"Cancel"}),d.jsx("button",{onClick:C,className:"px-4 py-2 rounded-lg bg-blue-500 text-white hover:bg-blue-600",disabled:!k||V,children:"Save Changes"})]})]})]})}),d.jsx(en,{children:v&&d.jsx(ce.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[60] flex items-center justify-center",children:d.jsxs(ce.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-space-darker p-6 rounded-lg max-w-md w-full mx-4 border border-white/10",children:[d.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Delete Fleet"}),d.jsx("p",{className:"text-white/70 mb-6",children:"Are you sure you want to delete this fleet? This action cannot be undone."}),d.jsxs("div",{className:"flex justify-end gap-3",children:[d.jsx("button",{onClick:()=>b(!1),className:"px-4 py-2 rounded-lg bg-white/10 text-white hover:bg-white/20",children:"Cancel"}),d.jsx("button",{onClick:D,className:"px-4 py-2 rounded-lg bg-red-500 text-white hover:bg-red-600",disabled:!k||V,children:"Delete"})]})]})})}),_&&d.jsx(l0,{type:"ship",isOpen:_,onClose:()=>y(!1),onSelect:q=>{N(q,w),y(!1)},availableUnits:n,alignment:t.alignment,selectionType:w,title:`Select ${w==="capital"?"Capital Ship":w==="starting"?"Starting Ship":"Reinforcement"}`}),V&&d.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:d.jsx(ha,{size:"lg"})}),I&&d.jsxs(Tn,{variant:"destructive",children:[d.jsx(Sn,{children:"Error"}),d.jsxs(In,{className:"flex justify-between items-center",children:[I,d.jsx("button",{onClick:()=>x(null),className:"ml-2 text-red-400 hover:text-red-300",children:d.jsx(je,{className:"w-4 h-4"})})]})]})]})},n9=({fleets:t,counters:e,availableUnits:n,onUpdate:r,onDelete:i,onAddCounter:s,onEditCounter:o,onDeleteCounter:a})=>{const{isOnline:l,isLoading:u}=fa(),[h,f]=R.useState(null),[p,v]=R.useState(!1),[b,T]=R.useState(null),A=async _=>{if(!l){T("Cannot save while offline");return}try{v(!0),await r(_),T(null)}catch(y){throw console.error("Error updating fleet:",y),T("Failed to update fleet"),y}finally{v(!1)}};return u?d.jsx("div",{className:"flex justify-center items-center p-8",children:d.jsx(ha,{size:"lg"})}):d.jsxs("div",{className:"space-y-4",children:[!l&&d.jsxs(Tn,{children:[d.jsx(Sn,{children:"Offline Mode"}),d.jsx(In,{children:"You are currently offline. Changes will be saved when you reconnect."})]}),b&&d.jsxs(Tn,{variant:"destructive",children:[d.jsx(Sn,{children:"Error"}),d.jsxs(In,{className:"flex justify-between items-center",children:[b,d.jsx("button",{onClick:()=>T(null),className:"ml-2 text-red-400 hover:text-red-300",children:d.jsx(je,{className:"w-4 h-4"})})]})]}),t.map(_=>d.jsxs("div",{className:"p-4 rounded-lg bg-space-dark border border-white/10",children:[d.jsxs("div",{className:"flex justify-between items-start",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsxs("div",{className:"flex items-center space-x-2",children:[_.capitalShip&&d.jsx(we,{id:_.capitalShip.id,name:_.capitalShip.name,type:"capital-ship",size:"md",className:"border-2 border-blue-400"}),_.startingLineup.map(y=>d.jsx(we,{id:y.id,name:y.name,type:"ship",size:"md",className:"border-2 border-white/20"},y.id))]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-medium text-white",children:_.name}),d.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs mt-1
                    ${_.alignment==="light"?"bg-blue-500/20 text-blue-400":"bg-red-500/20 text-red-400"}`,children:_.alignment==="light"?"Light Side":"Dark Side"})]})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(pf,{defense:_,onAddCounter:()=>s(_),disabled:!l||p}),d.jsx("button",{onClick:()=>f(_),className:"p-2 text-blue-400 hover:bg-blue-400/10 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",disabled:!l||p,children:d.jsx(pc,{className:"w-4 h-4"})})]})]}),_.reinforcements.length>0&&d.jsxs("div",{className:"mt-4 border-t border-white/10 pt-4",children:[d.jsx("span",{className:"text-sm text-white/40 block mb-2",children:"Reinforcements:"}),d.jsx("div",{className:"flex items-center gap-2",children:_.reinforcements.map((y,w)=>d.jsxs("div",{className:"relative",children:[d.jsx(we,{id:y.id,name:y.name,type:"ship",size:"sm",className:"border-2 border-white/20"}),d.jsx("div",{className:`absolute -top-1 -left-1 w-5 h-5 bg-blue-500 rounded-full \r
                                  flex items-center justify-center text-white text-xs`,children:w+1})]},y.id))})]}),_.callOrder&&d.jsx("div",{className:"mt-2 text-sm text-white/60",children:_.callOrder}),d.jsx("div",{className:"mt-4",children:d.jsx(ff,{counters:e.filter(y=>y.targetSquad.id===_.id),targetDefense:_,onEdit:o,onDelete:a})})]},_.id)),h&&d.jsx(t9,{fleet:h,counters:e,availableUnits:n,onClose:()=>{f(null),T(null)},onUpdate:A,onDelete:i,onUpdateCounter:o,onDeleteCounter:a,onSelectForCounter:s})]})},r9=({error:t,onDismiss:e})=>t?d.jsxs(Tn,{variant:"destructive",className:"mb-4",children:[d.jsx(Sn,{children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(ks,{className:"w-4 h-4"}),d.jsx("span",{children:"Error"})]}),d.jsx("button",{onClick:e,className:"text-red-400 hover:text-red-300",children:d.jsx(je,{className:"w-4 h-4"})})]})}),d.jsx(In,{children:t})]}):null,i9=({squads:t,fleets:e,counters:n,onUpdateSquad:r,onDeleteSquad:i,onUpdateFleet:s,onDeleteFleet:o,onAddCounter:a,onDeleteCounter:l,onLogout:u})=>{const[h,f]=R.useState("squads"),[p,v]=R.useState(null),[b,T]=R.useState(!1),[A,_]=R.useState(null),[y,w]=R.useState([]),[P,V]=R.useState([]),[O,I]=R.useState(null),[x,k]=R.useState(!1),{isOnline:C,error:D}=fa(),{isAdmin:N,currentUser:E}=c0(),[F,q]=R.useState([]),[ie,Q]=R.useState(!1),[B,j]=R.useState(""),[K,Z]=R.useState(!1);R.useEffect(()=>{(async()=>{try{const{characters:Re,ships:jt,capital_ships:On}=await Vz(async()=>{const{characters:mf,ships:gf,capital_ships:Vc}=await import("./initialData-Bghu_pyR.js");return{characters:mf,ships:gf,capital_ships:Vc}},[],import.meta.url);console.log("Loading initial units:",{charactersCount:Object.keys(Re).length,shipsCount:Object.keys(jt).length,capitalShipsCount:Object.keys(On).length});const Pr=Object.values(Re),pa=[...Object.values(jt),...Object.values(On)];w(Pr),V(pa),console.log("Units loaded into state:",{charactersLoaded:Pr.length,shipsLoaded:pa.length})}catch(Re){console.error("Failed to load units:",Re),v("Failed to load available units")}})()},[]);const $=fe=>{const Re=!("leader"in fe),jt=Re?P:y;console.log("Adding counter for:",{defenseType:Re?"Fleet":"Squad",defenseName:fe.name,availableUnits:jt.length}),_(fe),Z(Re),T(!0),v(null)},W=async fe=>{if(!C||!N||!E){v("Not authorized or offline");return}try{console.log("AdminDashboard: Saving counter data:",fe),await a(fe),T(!1),_(null),v(null)}catch(Re){console.error("Error saving counter:",Re);const jt=Re instanceof Error?Re.message:"Failed to save counter";v(jt)}},te=async fe=>{try{console.log("AdminDashboard handling delete for counter:",fe),await rt.deleteCounter(fe),l(fe)}catch(Re){console.error("Error deleting counter:",Re),v("Failed to delete counter")}},de=(fe,Re)=>{const jt=Date.now().toString();q(On=>[...On,{id:jt,type:fe,message:Re}]),setTimeout(()=>{q(On=>On.filter(Pr=>Pr.id!==jt))},3e3)},tt=R.useCallback(async fe=>{try{if(!C){v("Cannot save while offline");return}fe.type==="squad"?(await rt.addOrUpdateSquad(fe),r(fe),de("success","Squad saved successfully")):(await rt.addOrUpdateFleet(fe),s(fe),de("success","Fleet saved successfully")),v(null)}catch(Re){console.error("Error saving defense:",Re),de("error","Failed to save defense")}},[C,r,s]),st=async fe=>{try{localStorage.setItem("adminUsers",JSON.stringify(fe.users)),de("success","Settings saved successfully"),Q(!1)}catch{de("error","Failed to save settings")}},Zn=p||D,Dc=async fe=>{_(fe.targetSquad),T(!0),I(fe),v(null)},js=()=>{k(!1)};return d.jsx("div",{className:"min-h-screen bg-space-darker",children:d.jsxs("div",{className:"container mx-auto px-4 py-6",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsxs("h1",{className:"text-2xl font-orbitron text-white flex items-center gap-2",children:[d.jsx(eS,{className:"w-6 h-6"}),"Defense Manager"]}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsxs("button",{onClick:()=>k(!0),className:`flex items-center gap-2 px-4 py-2 rounded-lg bg-blue-500 \r
                       text-white hover:bg-blue-600`,children:[d.jsx(li,{className:"w-4 h-4"}),"Add New Defense"]}),d.jsx(Jz,{}),d.jsx("div",{className:"flex-1"}),d.jsx("button",{onClick:()=>Q(!0),className:`p-2 text-blue-400/70 hover:text-blue-400 \r
                       hover:bg-blue-400/10 rounded-lg transition-colors`,children:d.jsx(pc,{className:"w-5 h-5"})}),d.jsxs("button",{onClick:u,className:`flex items-center gap-2 px-4 py-2 rounded-lg \r
                       bg-red-500/20 text-red-400 hover:bg-red-500/30`,children:[d.jsx(nS,{className:"w-4 h-4"}),"Logout"]})]})]}),d.jsx(r9,{error:Zn,onDismiss:()=>v(null)}),d.jsxs(Nc,{fallback:d.jsx("div",{className:"min-h-screen bg-space-darker flex items-center justify-center",children:d.jsxs("div",{className:"p-6 bg-red-500/10 rounded-lg border border-red-500/20 max-w-md w-full",children:[d.jsx("h3",{className:"text-lg font-medium text-red-400 mb-2",children:"Admin Dashboard Error"}),d.jsx("p",{className:"text-sm text-red-400/80 mb-4",children:"There was an error loading the admin dashboard. Please try logging in again."}),d.jsxs("div",{className:"flex gap-3",children:[d.jsx("button",{onClick:u,className:`px-4 py-2 rounded-lg bg-red-500/20 text-red-400 \r
                             hover:bg-red-500/30`,children:"Logout"}),d.jsxs("button",{onClick:()=>window.location.reload(),className:`flex items-center gap-2 px-4 py-2 rounded-lg \r
                             bg-blue-500 text-white hover:bg-blue-600`,children:[d.jsx(Si,{className:"w-4 h-4"}),"Refresh"]})]})]})}),children:[d.jsxs("div",{className:"flex gap-4 mb-6",children:[d.jsxs("button",{onClick:()=>f("squads"),className:`px-4 py-2 rounded-lg flex items-center gap-2 ${h==="squads"?"bg-blue-500 text-white":"bg-white/5 text-white/60"}`,children:[d.jsx(kh,{className:"w-4 h-4"}),"Squad Defense"]}),d.jsxs("button",{onClick:()=>f("fleets"),className:`px-4 py-2 rounded-lg flex items-center gap-2 ${h==="fleets"?"bg-blue-500 text-white":"bg-white/5 text-white/60"}`,children:[d.jsx(mc,{className:"w-4 h-4"}),"Fleet Defense"]})]}),d.jsx("div",{className:"mb-6",children:d.jsx("div",{className:"w-96",children:d.jsx(u0,{value:B,onChange:j,onClear:()=>j(""),placeholder:`Search ${h}...`})})}),d.jsx("div",{className:"space-y-6",children:h==="squads"?d.jsx(e9,{squads:t.filter(fe=>fe.name.toLowerCase().includes(B.toLowerCase())),counters:n.filter(fe=>"leader"in fe.targetSquad),availableUnits:y,onUpdate:r,onDelete:i,onAddCounter:$,onEditCounter:Dc,onDeleteCounter:te}):d.jsx(n9,{fleets:e.filter(fe=>fe.name.toLowerCase().includes(B.toLowerCase())),counters:n.filter(fe=>!("leader"in fe.targetSquad)),availableUnits:P,onUpdate:s,onDelete:o,onAddCounter:$,onEditCounter:Dc,onDeleteCounter:te})})]}),b&&A&&d.jsx(Mz,{isOpen:b,onClose:()=>{T(!1),_(null),I(null),v(null)},targetDefense:A,onSave:W,onDelete:te,availableUnits:"leader"in A?y:P,existingCounter:O,isFleet:K}),x&&d.jsx(Hz,{isOpen:x,onClose:js,onSave:tt,initialType:h==="squads"?"squad":"fleet",availableUnits:h==="squads"?y:P}),ie&&d.jsx(Yz,{onClose:()=>Q(!1),onSave:st}),d.jsx(Qz,{notifications:F,onDismiss:fe=>q(Re=>Re.filter(jt=>jt.id!==fe))})]})})},s9=({onLogin:t,onClose:e})=>{const[n,r]=R.useState(!1),[i,s]=R.useState({email:"",password:""}),[o,a]=R.useState(!1),{login:l,error:u}=c0(),[h,f]=R.useState(null),[p,v]=R.useState(0);R.useEffect(()=>{u&&f(u)},[u]);const b=async T=>{T.preventDefault(),f(null),a(!0);try{if(p>=5)throw new Error("Too many login attempts. Please try again later.");await l(i.email,i.password),t(!0),e()}catch(A){console.error("Login error:",A),v(_=>_+1),f(A instanceof Error?A.message:"Failed to login")}finally{a(!1)}};return d.jsx(ce.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:d.jsx(ce.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"w-full max-w-md bg-space-darker rounded-lg border border-white/10",children:d.jsxs("div",{className:"p-6",children:[d.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Admin Login"}),d.jsxs("form",{onSubmit:b,className:"space-y-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"block text-sm font-medium text-white",children:"Email"}),d.jsxs("div",{className:"relative",children:[d.jsx("input",{type:"email",value:i.email,onChange:T=>s({...i,email:T.target.value}),className:"w-full pl-10 pr-4 py-2 bg-white/5 border border-white/10 rounded-lg text-white",placeholder:"Enter email",required:!0,disabled:o}),d.jsx(j2,{className:"absolute left-3 top-2.5 h-5 w-5 text-white/40"})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"block text-sm font-medium text-white",children:"Password"}),d.jsxs("div",{className:"relative",children:[d.jsx("input",{type:n?"text":"password",value:i.password,onChange:T=>s({...i,password:T.target.value}),className:"w-full pl-10 pr-12 py-2 bg-white/5 border border-white/10 rounded-lg text-white",placeholder:"Enter password",required:!0,disabled:o}),d.jsx(A2,{className:"absolute left-3 top-2.5 h-5 w-5 text-white/40"}),d.jsx("button",{type:"button",onClick:()=>r(!n),className:"absolute right-3 top-2.5 text-white/40 hover:text-white",disabled:o,children:n?d.jsx(b2,{className:"h-5 w-5"}):d.jsx(E2,{className:"h-5 w-5"})})]})]}),d.jsx(en,{children:h&&d.jsxs(ce.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:`p-3 rounded-lg bg-red-500/10 border border-red-500/20 \r
                           flex items-start gap-2 text-red-400 text-sm`,children:[d.jsx(Y1,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),d.jsx("span",{children:h})]})}),d.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[d.jsx("button",{type:"button",onClick:e,className:`px-4 py-2 rounded-lg bg-white/10 text-white hover:bg-white/20 \r
                         disabled:opacity-50 disabled:cursor-not-allowed`,disabled:o,children:"Cancel"}),d.jsx("button",{type:"submit",disabled:o||p>=5,className:`px-4 py-2 rounded-lg bg-blue-500 text-white hover:bg-blue-600 \r
                         disabled:opacity-50 disabled:cursor-not-allowed relative`,children:o?d.jsxs("span",{className:"flex items-center gap-2",children:[d.jsx(ce.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-4 h-4 border-2 border-white/20 border-t-white rounded-full"}),"Logging in..."]}):"Login"})]}),p>=5&&d.jsx(ce.p,{initial:{opacity:0},animate:{opacity:1},className:"text-sm text-yellow-400 mt-4",children:"Too many login attempts. Please try again later."})]})]})})})},o9=({title:t,subtitle:e,className:n,withAnimation:r=!0,onAction:i,children:s,...o})=>{const a=l=>{(l.key==="Enter"||l.key===" ")&&(l.preventDefault(),i==null||i())};return d.jsxs(ce.div,{role:"region","aria-label":t||"Hero section",tabIndex:0,onKeyDown:a,initial:r?{opacity:0,y:20}:!1,animate:r?{opacity:1,y:0}:!1,transition:{duration:.5},className:Jo("relative overflow-hidden","min-h-[300px] py-16 px-4",n),...o,children:[d.jsx("div",{className:"absolute inset-0 bg-hero-pattern animate-pulse-slow"}),d.jsx("div",{className:"absolute inset-0 bg-grid-pattern bg-grid opacity-20"}),d.jsx(ce.div,{animate:{opacity:[.4,.6,.4],scale:[1,1.2,1]},transition:{duration:4,repeat:1/0,repeatType:"reverse"},className:"absolute inset-0 bg-glow-pattern"}),d.jsxs("div",{className:"relative z-10 container mx-auto",children:[t&&d.jsx(ce.h1,{initial:r?{opacity:0,y:20}:!1,animate:r?{opacity:1,y:0}:!1,transition:{delay:.2},className:`text-4xl md:text-5xl lg:text-6xl font-orbitron text-white \r
                     text-center mb-4 tracking-wider`,children:t}),e&&d.jsx(ce.p,{initial:r?{opacity:0,y:20}:!1,animate:r?{opacity:1,y:0}:!1,transition:{delay:.3},className:"text-xl text-white/80 text-center mb-8 max-w-3xl mx-auto",children:e}),d.jsx(ce.div,{initial:r?{opacity:0,y:20}:!1,animate:r?{opacity:1,y:0}:!1,transition:{delay:.4},children:s})]})]})},jE={showEditor:!1,targetDefense:null,editingCounter:null},a9=R.createContext(void 0),l9=({children:t})=>{const[e,n]=R.useState(jE),{isOnline:r}=fa(),i=R.useCallback(a=>{n(l=>({...l,...a}))},[]),s=R.useCallback(()=>{n(jE)},[]),o=R.useCallback(async a=>{if(!r)throw new Error("Cannot update counter while offline");try{await rt.addOrUpdateCounter(a),n(l=>({...l,editingCounter:null}))}catch(l){throw console.error("Failed to update counter:",l),l}},[r]);return d.jsx(a9.Provider,{value:{state:e,updateState:i,resetState:s,updateCounter:o},children:t})},c9=R.createContext(null);function u9({children:t}){const[e,n]=R.useState(()=>localStorage.getItem("theme")||"dark");R.useEffect(()=>{localStorage.setItem("theme",e),document.documentElement.classList.toggle("light-theme",e==="light"),document.documentElement.classList.toggle("dark-theme",e==="dark")},[e]);const r=()=>{n(i=>i==="dark"?"light":"dark")};return d.jsx(c9.Provider,{value:{theme:e,toggleTheme:r},children:t})}const d9=()=>d.jsx(Nc,{fallback:d.jsx("div",{className:"min-h-screen bg-space-darker flex items-center justify-center",children:d.jsxs("div",{className:"p-6 bg-red-500/10 rounded-lg border border-red-500/20 max-w-md w-full text-center",children:[d.jsx(ks,{className:"w-12 h-12 text-red-400 mx-auto mb-4"}),d.jsx("h3",{className:"text-xl font-medium text-red-400 mb-2",children:"Application Error"}),d.jsx("p",{className:"text-sm text-red-400/80 mb-6",children:"We apologize, but something went wrong with the application. Please try refreshing the page."}),d.jsxs("button",{onClick:()=>window.location.reload(),className:`flex items-center gap-2 px-6 py-3 rounded-lg \r
                       bg-red-500/20 text-red-400 hover:bg-red-500/30 mx-auto`,children:[d.jsx(Si,{className:"w-4 h-4"}),"Reload Application"]})]})}),children:d.jsx(Bz,{children:d.jsx(pP,{children:d.jsx(u9,{children:d.jsx(l9,{children:d.jsx(h9,{})})})})})});function OE(t,e){return Array.isArray(t)?t.filter(n=>{if(e.searchTerm){const r=e.searchTerm.toLowerCase(),i=n.name.toLowerCase().includes(r);if("characters"in n){const s=n.characters.some(a=>a.name.toLowerCase().includes(r)),o=n.leader&&n.leader.name.toLowerCase().includes(r);if(!i&&!s&&!o)return!1}else if(!i)return!1}return!(e.alignment&&n.alignment!==e.alignment||e.showTWOmicronOnly&&"twOmicronRequired"in n&&!n.twOmicronRequired||e.excludeGL&&"characters"in n&&(n.characters.some(i=>i.isGalacticLegend)||n.leader&&n.leader.isGalacticLegend))}):[]}function h9(){const[t,e]=R.useState(null),{isOnline:n,isLoading:r}=fa(),{isAdmin:i,loading:s,logout:o}=c0(),[a,l]=R.useState(!1),[u,h]=R.useState("squads"),[f,p]=R.useState([]),[v,b]=R.useState([]),[T,A]=R.useState([]),[_,y]=R.useState(null),[w,P]=R.useState(!0),[V,O]=R.useState(!1),[I,x]=R.useState(""),[k,C]=R.useState(!1),[D,N]=R.useState({battleType:null,alignment:null,showTWOmicronOnly:!1,showHardCounters:!1,excludeGL:!1,searchTerm:""});R.useEffect(()=>{(async()=>{P(!0);try{const{squads:W,fleets:te,counters:de}=await rt.syncAllData();p(W),b(te),A(de),O(!1)}catch(W){console.error("Error loading data:",W)}finally{P(!1)}})()},[]);const E=u==="squads"?OE(f,D):[],F=u==="fleets"?OE(v,D):[],q=($,W)=>T.filter(te=>{var de;if(W==="squad"){const tt=te.targetSquad.id===$,st=te.counterSquad.id===$;return tt||st}else{const tt=te.targetSquad.id===$,st=te.counterSquad.id===$,Zn="capitalShip"in te.targetSquad&&((de=te.targetSquad.capitalShip)==null?void 0:de.id)===$;return tt||st||Zn}});R.useEffect(()=>{!w&&V&&(async()=>{try{await Promise.all([...f.map(W=>rt.addOrUpdateSquad(W)),...v.map(W=>rt.addOrUpdateFleet(W)),...T.map(W=>rt.addOrUpdateCounter(W))]),O(!1)}catch(W){console.error("Error saving data:",W)}})()},[f,v,T,w,V]),R.useEffect(()=>{const $=W=>{V&&(W.preventDefault(),W.returnValue="")};return window.addEventListener("beforeunload",$),()=>window.removeEventListener("beforeunload",$)},[V]);const ie=()=>{l(!1)},Q=async()=>{try{if(V&&!window.confirm("Du har osparade ändringar. Vill du verkligen logga ut?"))return;await o(),l(!1)}catch($){console.error("Error logging out:",$)}},B=($,W)=>{N(te=>({...te,[$]:W})),y(null)},j=$=>{x($),N(W=>({...W,searchTerm:$}))},K=async $=>{if(!n){e("Cannot delete counter while offline");return}try{console.log("Starting delete counter process for:",$),await rt.deleteCounter($),A(W=>W.filter(te=>te.id!==$)),console.log("Counter removed from local state"),e(null)}catch(W){console.error("Error deleting counter:",W);const te=W instanceof Error?W.message:"Failed to delete counter";te!=="Counter not found"&&e(te)}},Z={onUpdateSquad:async $=>{try{await rt.addOrUpdateSquad($),p(W=>{const te=W.findIndex(de=>de.id===$.id);if(te>=0){const de=[...W];return de[te]=$,de}return[...W,$]})}catch(W){console.error("Error updating squad:",W)}},onDeleteSquad:async $=>{try{await rt.deleteSquad($),p(W=>W.filter(te=>te.id!==$)),A(W=>W.filter(te=>te.targetSquad.id!==$&&te.counterSquad.id!==$))}catch(W){console.error("Error deleting squad:",W)}},onUpdateFleet:async $=>{try{await rt.addOrUpdateFleet($),b(W=>{const te=W.findIndex(de=>de.id===$.id);if(te>=0){const de=[...W];return de[te]=$,de}return[...W,$]})}catch(W){console.error("Error updating fleet:",W)}},onDeleteFleet:async $=>{try{await rt.deleteFleet($),b(W=>W.filter(te=>te.id!==$)),A(W=>W.filter(te=>te.targetSquad.id!==$&&te.counterSquad.id!==$))}catch(W){console.error("Error deleting fleet:",W)}},onAddCounter:async $=>{try{const W={...$,id:`counter-${Date.now()}`},te=await rt.addOrUpdateCounter(W);A(de=>de.filter(tt=>tt.id!==te.id).concat(te))}catch(W){console.error("Error adding counter:",W)}},onDeleteCounter:async $=>{if(!n){e("Cannot delete counter while offline");return}try{console.log("Starting delete counter process for:",$),await rt.deleteCounter($),A(W=>W.filter(te=>te.id!==$)),console.log("Counter deleted and state updated")}catch(W){console.error("Error deleting counter:",W);const te=W instanceof Error?W.message:"Failed to delete counter";e(te)}},onUpdateCounter:async $=>{try{await rt.addOrUpdateCounter($),A(W=>{const te=W.findIndex(de=>de.id===$.id);if(te>=0){const de=[...W];return de[te]=$,de}return W})}catch(W){console.error("Error updating counter:",W)}}};return r||s||w?d.jsx("div",{className:"min-h-screen bg-space-black flex items-center justify-center",children:d.jsx(ha,{size:"lg"})}):t?d.jsx("div",{className:"min-h-screen bg-space-black flex items-center justify-center",children:d.jsxs("div",{className:"text-red-400 text-xl",children:["Error: ",t]})}):d.jsxs("div",{className:"min-h-screen bg-space-black text-white",children:[!n&&d.jsx("div",{className:"fixed top-0 left-0 right-0 bg-yellow-500/90 text-black py-2 px-4 text-center z-50",children:"Du är offline. Ändringar kommer att synkroniseras när du återansluter."}),d.jsxs("div",{className:"min-h-screen bg-space-gradient bg-fixed",children:[d.jsx(en,{mode:"wait",children:i?d.jsx(ce.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:d.jsx(i9,{squads:f,fleets:v,counters:T,...Z,onLogout:Q})},"admin-interface"):d.jsxs(ce.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[d.jsx(tL,{isAdmin:i,onAdminClick:()=>l(!0),onLogout:Q}),d.jsx(o9,{title:"SWGOH Territory Wars",subtitle:"Find the perfect counter for any squad or fleet",children:d.jsx(nL,{activeView:u,onViewChange:h,onOptionsClick:()=>C(!0),filters:D,children:d.jsx(u0,{value:I,onChange:j,onClear:()=>j(""),suggestions:u==="squads"?E:F,onSelectSuggestion:$=>{y($.id),j("")},placeholder:`Search ${u==="squads"?"teams":"fleets"}...`})})}),d.jsx("main",{className:"container mx-auto px-4 py-8",children:d.jsx(en,{mode:"wait",children:w?d.jsx(ce.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex justify-center items-center min-h-[400px]",children:d.jsx(ce.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-12 h-12 border-4 border-saber-blue-400/50 border-t-saber-blue-400 rounded-full"})},"loading"):d.jsx(ce.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:u==="squads"?d.jsx(J6,{squads:f,filteredSquads:E,selectedSquadId:_,onSelectSquad:y,getCounters:$=>q($,"squad"),isAdmin:i,onDeleteCounter:K,onViewDetails:()=>{}}):d.jsx(Z6,{fleets:v,filteredFleets:F,selectedFleetId:_,onSelectFleet:y,getCounters:$=>q($,"fleet"),isAdmin:i,onDeleteCounter:K,onViewDetails:()=>{}})},`content-${u}`)})}),d.jsx(Rz,{isOpen:k,onClose:()=>C(!1),filters:D,onFilterChange:B})]},"user-interface")}),a&&d.jsx(s9,{onLogin:ie,onClose:()=>l(!1)})]})]})}Q1(document.getElementById("root")).render(d.jsx(R.StrictMode,{children:d.jsx(pP,{children:d.jsx(d9,{})})}));
//# sourceMappingURL=index-5Di130DM.js.map
